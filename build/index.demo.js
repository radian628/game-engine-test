import{a as it,b as zt,c as gn}from"./chunk-RFBBAUMM.js";var mg=it((eV,fg)=>{"use strict";function gt(t){if(this.size=t|0,this.size<=1||(this.size&this.size-1)!==0)throw new Error("FFT size must be a power of two and bigger than 1");this._csize=t<<1;for(var e=new Array(this.size*2),n=0;n<e.length;n+=2){let c=Math.PI*n/this.size;e[n]=Math.cos(c),e[n+1]=-Math.sin(c)}this.table=e;for(var r=0,o=1;this.size>o;o<<=1)r++;this._width=r%2===0?r-1:r,this._bitrev=new Array(1<<this._width);for(var s=0;s<this._bitrev.length;s++){this._bitrev[s]=0;for(var i=0;i<this._width;i+=2){var a=this._width-i-2;this._bitrev[s]|=(s>>>i&3)<<a}}this._out=null,this._data=null,this._inv=0}fg.exports=gt;gt.prototype.fromComplexArray=function(e,n){for(var r=n||new Array(e.length>>>1),o=0;o<e.length;o+=2)r[o>>>1]=e[o];return r};gt.prototype.createComplexArray=function(){let e=new Array(this._csize);for(var n=0;n<e.length;n++)e[n]=0;return e};gt.prototype.toComplexArray=function(e,n){for(var r=n||this.createComplexArray(),o=0;o<r.length;o+=2)r[o]=e[o>>>1],r[o+1]=0;return r};gt.prototype.completeSpectrum=function(e){for(var n=this._csize,r=n>>>1,o=2;o<r;o+=2)e[n-o]=e[o],e[n-o+1]=-e[o+1]};gt.prototype.transform=function(e,n){if(e===n)throw new Error("Input and output buffers must be different");this._out=e,this._data=n,this._inv=0,this._transform4(),this._out=null,this._data=null};gt.prototype.realTransform=function(e,n){if(e===n)throw new Error("Input and output buffers must be different");this._out=e,this._data=n,this._inv=0,this._realTransform4(),this._out=null,this._data=null};gt.prototype.inverseTransform=function(e,n){if(e===n)throw new Error("Input and output buffers must be different");this._out=e,this._data=n,this._inv=1,this._transform4();for(var r=0;r<e.length;r++)e[r]/=this.size;this._out=null,this._data=null};gt.prototype._transform4=function(){var e=this._out,n=this._csize,r=this._width,o=1<<r,s=n/o<<1,i,a,c=this._bitrev;if(s===4)for(i=0,a=0;i<n;i+=s,a++){let b=c[a];this._singleTransform2(i,b,o)}else for(i=0,a=0;i<n;i+=s,a++){let b=c[a];this._singleTransform4(i,b,o)}var u=this._inv?-1:1,l=this.table;for(o>>=2;o>=2;o>>=2){s=n/o<<1;var f=s>>>2;for(i=0;i<n;i+=s)for(var m=i+f,d=i,p=0;d<m;d+=2,p+=o){let b=d,w=b+f,h=w+f,g=h+f,y=e[b],A=e[b+1],C=e[w],U=e[w+1],V=e[h],k=e[h+1],G=e[g],_=e[g+1],R=y,L=A,D=l[p],Z=u*l[p+1],X=C*D-U*Z,ee=C*Z+U*D,se=l[2*p],we=u*l[2*p+1],Je=V*se-k*we,pe=V*we+k*se,tt=l[3*p],st=u*l[3*p+1],j=G*tt-_*st,Te=G*st+_*tt,Le=R+Je,Re=L+pe,me=R-Je,Jr=L-pe,qr=X+j,ar=ee+Te,cr=u*(X-j),Xr=u*(ee-Te),ko=Le+qr,ii=Re+ar,ai=Le-qr,ci=Re-ar,jl=me+Xr,Kl=Jr-cr,Jl=me-Xr,ql=Jr+cr;e[b]=ko,e[b+1]=ii,e[w]=jl,e[w+1]=Kl,e[h]=ai,e[h+1]=ci,e[g]=Jl,e[g+1]=ql}}};gt.prototype._singleTransform2=function(e,n,r){let o=this._out,s=this._data,i=s[n],a=s[n+1],c=s[n+r],u=s[n+r+1],l=i+c,f=a+u,m=i-c,d=a-u;o[e]=l,o[e+1]=f,o[e+2]=m,o[e+3]=d};gt.prototype._singleTransform4=function(e,n,r){let o=this._out,s=this._data,i=this._inv?-1:1,a=r*2,c=r*3,u=s[n],l=s[n+1],f=s[n+r],m=s[n+r+1],d=s[n+a],p=s[n+a+1],b=s[n+c],w=s[n+c+1],h=u+d,g=l+p,y=u-d,A=l-p,C=f+b,U=m+w,V=i*(f-b),k=i*(m-w),G=h+C,_=g+U,R=y+k,L=A-V,D=h-C,Z=g-U,X=y-k,ee=A+V;o[e]=G,o[e+1]=_,o[e+2]=R,o[e+3]=L,o[e+4]=D,o[e+5]=Z,o[e+6]=X,o[e+7]=ee};gt.prototype._realTransform4=function(){var e=this._out,n=this._csize,r=this._width,o=1<<r,s=n/o<<1,i,a,c=this._bitrev;if(s===4)for(i=0,a=0;i<n;i+=s,a++){let Xl=c[a];this._singleRealTransform2(i,Xl>>>1,o>>>1)}else for(i=0,a=0;i<n;i+=s,a++){let Xl=c[a];this._singleRealTransform4(i,Xl>>>1,o>>>1)}var u=this._inv?-1:1,l=this.table;for(o>>=2;o>=2;o>>=2){s=n/o<<1;var f=s>>>1,m=f>>>1,d=m>>>1;for(i=0;i<n;i+=s)for(var p=0,b=0;p<=d;p+=2,b+=o){var w=i+p,h=w+m,g=h+m,y=g+m,A=e[w],C=e[w+1],U=e[h],V=e[h+1],k=e[g],G=e[g+1],_=e[y],R=e[y+1],L=A,D=C,Z=l[b],X=u*l[b+1],ee=U*Z-V*X,se=U*X+V*Z,we=l[2*b],Je=u*l[2*b+1],pe=k*we-G*Je,tt=k*Je+G*we,st=l[3*b],j=u*l[3*b+1],Te=_*st-R*j,Le=_*j+R*st,Re=L+pe,me=D+tt,Jr=L-pe,qr=D-tt,ar=ee+Te,cr=se+Le,Xr=u*(ee-Te),ko=u*(se-Le),ii=Re+ar,ai=me+cr,ci=Jr+ko,jl=qr-Xr;if(e[w]=ii,e[w+1]=ai,e[h]=ci,e[h+1]=jl,p===0){var Kl=Re-ar,Jl=me-cr;e[g]=Kl,e[g+1]=Jl;continue}if(p!==d){var ql=Jr,AA=-qr,_A=Re,wA=-me,TA=-u*ko,BA=-u*Xr,EA=-u*cr,SA=-u*ar,MA=ql+TA,CA=AA+BA,VA=_A+SA,RA=wA-EA,ng=i+m-p,rg=i+f-p;e[ng]=MA,e[ng+1]=CA,e[rg]=VA,e[rg+1]=RA}}}};gt.prototype._singleRealTransform2=function(e,n,r){let o=this._out,s=this._data,i=s[n],a=s[n+r],c=i+a,u=i-a;o[e]=c,o[e+1]=0,o[e+2]=u,o[e+3]=0};gt.prototype._singleRealTransform4=function(e,n,r){let o=this._out,s=this._data,i=this._inv?-1:1,a=r*2,c=r*3,u=s[n],l=s[n+r],f=s[n+a],m=s[n+c],d=u+f,p=u-f,b=l+m,w=i*(l-m),h=d+b,g=p,y=-w,A=d-b,C=p,U=w;o[e]=h,o[e+1]=0,o[e+2]=g,o[e+3]=y,o[e+4]=A,o[e+5]=0,o[e+6]=C,o[e+7]=U}});var dg=it((tV,hg)=>{hg.exports=KA;function KA(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t+1)}});var Sg=it(P=>{"use strict";var ef=Symbol.for("react.transitional.element"),o_=Symbol.for("react.portal"),s_=Symbol.for("react.fragment"),i_=Symbol.for("react.strict_mode"),a_=Symbol.for("react.profiler"),c_=Symbol.for("react.consumer"),u_=Symbol.for("react.context"),l_=Symbol.for("react.forward_ref"),f_=Symbol.for("react.suspense"),m_=Symbol.for("react.memo"),Ag=Symbol.for("react.lazy"),h_=Symbol.for("react.activity"),yg=Symbol.iterator;function d_(t){return t===null||typeof t!="object"?null:(t=yg&&t[yg]||t["@@iterator"],typeof t=="function"?t:null)}var _g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wg=Object.assign,Tg={};function Oo(t,e,n){this.props=t,this.context=e,this.refs=Tg,this.updater=n||_g}Oo.prototype.isReactComponent={};Oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bg(){}Bg.prototype=Oo.prototype;function tf(t,e,n){this.props=t,this.context=e,this.refs=Tg,this.updater=n||_g}var nf=tf.prototype=new Bg;nf.constructor=tf;wg(nf,Oo.prototype);nf.isPureReactComponent=!0;var xg=Array.isArray;function Zl(){}var ge={H:null,A:null,T:null,S:null},Eg=Object.prototype.hasOwnProperty;function rf(t,e,n){var r=n.ref;return{$$typeof:ef,type:t,key:e,ref:r!==void 0?r:null,props:n}}function p_(t,e){return rf(t.type,e,t.props)}function of(t){return typeof t=="object"&&t!==null&&t.$$typeof===ef}function g_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bg=/\/+/g;function $l(t,e){return typeof t=="object"&&t!==null&&t.key!=null?g_(""+t.key):e.toString(36)}function y_(t){switch(t.status){case"fulfilled":return t.value;case"rejected":throw t.reason;default:switch(typeof t.status=="string"?t.then(Zl,Zl):(t.status="pending",t.then(function(e){t.status==="pending"&&(t.status="fulfilled",t.value=e)},function(e){t.status==="pending"&&(t.status="rejected",t.reason=e)})),t.status){case"fulfilled":return t.value;case"rejected":throw t.reason}}throw t}function Io(t,e,n,r,o){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var i=!1;if(t===null)i=!0;else switch(s){case"bigint":case"string":case"number":i=!0;break;case"object":switch(t.$$typeof){case ef:case o_:i=!0;break;case Ag:return i=t._init,Io(i(t._payload),e,n,r,o)}}if(i)return o=o(t),i=r===""?"."+$l(t,0):r,xg(o)?(n="",i!=null&&(n=i.replace(bg,"$&/")+"/"),Io(o,e,n,"",function(u){return u})):o!=null&&(of(o)&&(o=p_(o,n+(o.key==null||t&&t.key===o.key?"":(""+o.key).replace(bg,"$&/")+"/")+i)),e.push(o)),1;i=0;var a=r===""?".":r+":";if(xg(t))for(var c=0;c<t.length;c++)r=t[c],s=a+$l(r,c),i+=Io(r,e,n,s,o);else if(c=d_(t),typeof c=="function")for(t=c.call(t),c=0;!(r=t.next()).done;)r=r.value,s=a+$l(r,c++),i+=Io(r,e,n,s,o);else if(s==="object"){if(typeof t.then=="function")return Io(y_(t),e,n,r,o);throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.")}return i}function Pa(t,e,n){if(t==null)return t;var r=[],o=0;return Io(t,r,"","",function(s){return e.call(n,s,o++)}),r}function x_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vg=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},b_={map:Pa,forEach:function(t,e,n){Pa(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pa(t,function(){e++}),e},toArray:function(t){return Pa(t,function(e){return e})||[]},only:function(t){if(!of(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};P.Activity=h_;P.Children=b_;P.Component=Oo;P.Fragment=s_;P.Profiler=a_;P.PureComponent=tf;P.StrictMode=i_;P.Suspense=f_;P.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ge;P.__COMPILER_RUNTIME={__proto__:null,c:function(t){return ge.H.useMemoCache(t)}};P.cache=function(t){return function(){return t.apply(null,arguments)}};P.cacheSignal=function(){return null};P.cloneElement=function(t,e,n){if(t==null)throw Error("The argument must be a React element, but you passed "+t+".");var r=wg({},t.props),o=t.key;if(e!=null)for(s in e.key!==void 0&&(o=""+e.key),e)!Eg.call(e,s)||s==="key"||s==="__self"||s==="__source"||s==="ref"&&e.ref===void 0||(r[s]=e[s]);var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){for(var i=Array(s),a=0;a<s;a++)i[a]=arguments[a+2];r.children=i}return rf(t.type,o,r)};P.createContext=function(t){return t={$$typeof:u_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null},t.Provider=t,t.Consumer={$$typeof:c_,_context:t},t};P.createElement=function(t,e,n){var r,o={},s=null;if(e!=null)for(r in e.key!==void 0&&(s=""+e.key),e)Eg.call(e,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(o[r]=e[r]);var i=arguments.length-2;if(i===1)o.children=n;else if(1<i){for(var a=Array(i),c=0;c<i;c++)a[c]=arguments[c+2];o.children=a}if(t&&t.defaultProps)for(r in i=t.defaultProps,i)o[r]===void 0&&(o[r]=i[r]);return rf(t,s,o)};P.createRef=function(){return{current:null}};P.forwardRef=function(t){return{$$typeof:l_,render:t}};P.isValidElement=of;P.lazy=function(t){return{$$typeof:Ag,_payload:{_status:-1,_result:t},_init:x_}};P.memo=function(t,e){return{$$typeof:m_,type:t,compare:e===void 0?null:e}};P.startTransition=function(t){var e=ge.T,n={};ge.T=n;try{var r=t(),o=ge.S;o!==null&&o(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(Zl,vg)}catch(s){vg(s)}finally{e!==null&&n.types!==null&&(e.types=n.types),ge.T=e}};P.unstable_useCacheRefresh=function(){return ge.H.useCacheRefresh()};P.use=function(t){return ge.H.use(t)};P.useActionState=function(t,e,n){return ge.H.useActionState(t,e,n)};P.useCallback=function(t,e){return ge.H.useCallback(t,e)};P.useContext=function(t){return ge.H.useContext(t)};P.useDebugValue=function(){};P.useDeferredValue=function(t,e){return ge.H.useDeferredValue(t,e)};P.useEffect=function(t,e){return ge.H.useEffect(t,e)};P.useEffectEvent=function(t){return ge.H.useEffectEvent(t)};P.useId=function(){return ge.H.useId()};P.useImperativeHandle=function(t,e,n){return ge.H.useImperativeHandle(t,e,n)};P.useInsertionEffect=function(t,e){return ge.H.useInsertionEffect(t,e)};P.useLayoutEffect=function(t,e){return ge.H.useLayoutEffect(t,e)};P.useMemo=function(t,e){return ge.H.useMemo(t,e)};P.useOptimistic=function(t,e){return ge.H.useOptimistic(t,e)};P.useReducer=function(t,e,n){return ge.H.useReducer(t,e,n)};P.useRef=function(t){return ge.H.useRef(t)};P.useState=function(t){return ge.H.useState(t)};P.useSyncExternalStore=function(t,e,n){return ge.H.useSyncExternalStore(t,e,n)};P.useTransition=function(){return ge.H.useTransition()};P.version="19.2.0"});var kn=it((YV,Mg)=>{"use strict";Mg.exports=Sg()});var Fg=it(Ae=>{"use strict";function uf(t,e){var n=t.length;t.push(e);e:for(;0<n;){var r=n-1>>>1,o=t[r];if(0<Ja(o,e))t[r]=e,t[n]=o,n=r;else break e}}function xn(t){return t.length===0?null:t[0]}function Xa(t){if(t.length===0)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;e:for(var r=0,o=t.length,s=o>>>1;r<s;){var i=2*(r+1)-1,a=t[i],c=i+1,u=t[c];if(0>Ja(a,n))c<o&&0>Ja(u,a)?(t[r]=u,t[c]=n,r=c):(t[r]=a,t[i]=n,r=i);else if(c<o&&0>Ja(u,n))t[r]=u,t[c]=n,r=c;else break e}}return e}function Ja(t,e){var n=t.sortIndex-e.sortIndex;return n!==0?n:t.id-e.id}Ae.unstable_now=void 0;typeof performance=="object"&&typeof performance.now=="function"?(Vg=performance,Ae.unstable_now=function(){return Vg.now()}):(sf=Date,Rg=sf.now(),Ae.unstable_now=function(){return sf.now()-Rg});var Vg,sf,Rg,In=[],lr=[],A_=1,Pt=null,nt=3,lf=!1,fi=!1,mi=!1,ff=!1,Ig=typeof setTimeout=="function"?setTimeout:null,Og=typeof clearTimeout=="function"?clearTimeout:null,Dg=typeof setImmediate<"u"?setImmediate:null;function qa(t){for(var e=xn(lr);e!==null;){if(e.callback===null)Xa(lr);else if(e.startTime<=t)Xa(lr),e.sortIndex=e.expirationTime,uf(In,e);else break;e=xn(lr)}}function mf(t){if(mi=!1,qa(t),!fi)if(xn(In)!==null)fi=!0,Go||(Go=!0,Uo());else{var e=xn(lr);e!==null&&hf(mf,e.startTime-t)}}var Go=!1,hi=-1,Ug=5,Gg=-1;function Lg(){return ff?!0:!(Ae.unstable_now()-Gg<Ug)}function af(){if(ff=!1,Go){var t=Ae.unstable_now();Gg=t;var e=!0;try{e:{fi=!1,mi&&(mi=!1,Og(hi),hi=-1),lf=!0;var n=nt;try{t:{for(qa(t),Pt=xn(In);Pt!==null&&!(Pt.expirationTime>t&&Lg());){var r=Pt.callback;if(typeof r=="function"){Pt.callback=null,nt=Pt.priorityLevel;var o=r(Pt.expirationTime<=t);if(t=Ae.unstable_now(),typeof o=="function"){Pt.callback=o,qa(t),e=!0;break t}Pt===xn(In)&&Xa(In),qa(t)}else Xa(In);Pt=xn(In)}if(Pt!==null)e=!0;else{var s=xn(lr);s!==null&&hf(mf,s.startTime-t),e=!1}}break e}finally{Pt=null,nt=n,lf=!1}e=void 0}}finally{e?Uo():Go=!1}}}var Uo;typeof Dg=="function"?Uo=function(){Dg(af)}:typeof MessageChannel<"u"?(cf=new MessageChannel,kg=cf.port2,cf.port1.onmessage=af,Uo=function(){kg.postMessage(null)}):Uo=function(){Ig(af,0)};var cf,kg;function hf(t,e){hi=Ig(function(){t(Ae.unstable_now())},e)}Ae.unstable_IdlePriority=5;Ae.unstable_ImmediatePriority=1;Ae.unstable_LowPriority=4;Ae.unstable_NormalPriority=3;Ae.unstable_Profiling=null;Ae.unstable_UserBlockingPriority=2;Ae.unstable_cancelCallback=function(t){t.callback=null};Ae.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ug=0<t?Math.floor(1e3/t):5};Ae.unstable_getCurrentPriorityLevel=function(){return nt};Ae.unstable_next=function(t){switch(nt){case 1:case 2:case 3:var e=3;break;default:e=nt}var n=nt;nt=e;try{return t()}finally{nt=n}};Ae.unstable_requestPaint=function(){ff=!0};Ae.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=nt;nt=t;try{return e()}finally{nt=n}};Ae.unstable_scheduleCallback=function(t,e,n){var r=Ae.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?r+n:r):n=r,t){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=n+o,t={id:A_++,callback:e,priorityLevel:t,startTime:n,expirationTime:o,sortIndex:-1},n>r?(t.sortIndex=n,uf(lr,t),xn(In)===null&&t===xn(lr)&&(mi?(Og(hi),hi=-1):mi=!0,hf(mf,n-r))):(t.sortIndex=o,uf(In,t),fi||lf||(fi=!0,Go||(Go=!0,Uo()))),t};Ae.unstable_shouldYield=Lg;Ae.unstable_wrapCallback=function(t){var e=nt;return function(){var n=nt;nt=e;try{return t.apply(this,arguments)}finally{nt=n}}}});var zg=it((oR,Ng)=>{"use strict";Ng.exports=Fg()});var Pg=it(ut=>{"use strict";var __=kn();function Hg(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function fr(){}var ct={d:{f:fr,r:function(){throw Error(Hg(522))},D:fr,C:fr,L:fr,m:fr,X:fr,S:fr,M:fr},p:0,findDOMNode:null},w_=Symbol.for("react.portal");function T_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:w_,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}var di=__.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ya(t,e){if(t==="font")return"";if(typeof e=="string")return e==="use-credentials"?e:""}ut.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ct;ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)throw Error(Hg(299));return T_(t,e,null,n)};ut.flushSync=function(t){var e=di.T,n=ct.p;try{if(di.T=null,ct.p=2,t)return t()}finally{di.T=e,ct.p=n,ct.d.f()}};ut.preconnect=function(t,e){typeof t=="string"&&(e?(e=e.crossOrigin,e=typeof e=="string"?e==="use-credentials"?e:"":void 0):e=null,ct.d.C(t,e))};ut.prefetchDNS=function(t){typeof t=="string"&&ct.d.D(t)};ut.preinit=function(t,e){if(typeof t=="string"&&e&&typeof e.as=="string"){var n=e.as,r=Ya(n,e.crossOrigin),o=typeof e.integrity=="string"?e.integrity:void 0,s=typeof e.fetchPriority=="string"?e.fetchPriority:void 0;n==="style"?ct.d.S(t,typeof e.precedence=="string"?e.precedence:void 0,{crossOrigin:r,integrity:o,fetchPriority:s}):n==="script"&&ct.d.X(t,{crossOrigin:r,integrity:o,fetchPriority:s,nonce:typeof e.nonce=="string"?e.nonce:void 0})}};ut.preinitModule=function(t,e){if(typeof t=="string")if(typeof e=="object"&&e!==null){if(e.as==null||e.as==="script"){var n=Ya(e.as,e.crossOrigin);ct.d.M(t,{crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0})}}else e==null&&ct.d.M(t)};ut.preload=function(t,e){if(typeof t=="string"&&typeof e=="object"&&e!==null&&typeof e.as=="string"){var n=e.as,r=Ya(n,e.crossOrigin);ct.d.L(t,n,{crossOrigin:r,integrity:typeof e.integrity=="string"?e.integrity:void 0,nonce:typeof e.nonce=="string"?e.nonce:void 0,type:typeof e.type=="string"?e.type:void 0,fetchPriority:typeof e.fetchPriority=="string"?e.fetchPriority:void 0,referrerPolicy:typeof e.referrerPolicy=="string"?e.referrerPolicy:void 0,imageSrcSet:typeof e.imageSrcSet=="string"?e.imageSrcSet:void 0,imageSizes:typeof e.imageSizes=="string"?e.imageSizes:void 0,media:typeof e.media=="string"?e.media:void 0})}};ut.preloadModule=function(t,e){if(typeof t=="string")if(e){var n=Ya(e.as,e.crossOrigin);ct.d.m(t,{as:typeof e.as=="string"&&e.as!=="script"?e.as:void 0,crossOrigin:n,integrity:typeof e.integrity=="string"?e.integrity:void 0})}else ct.d.m(t)};ut.requestFormReset=function(t){ct.d.r(t)};ut.unstable_batchedUpdates=function(t,e){return t(e)};ut.useFormState=function(t,e,n){return di.H.useFormState(t,e,n)};ut.useFormStatus=function(){return di.H.useHostTransitionStatus()};ut.version="19.2.0"});var Jg=it((iR,Kg)=>{"use strict";function jg(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jg)}catch(t){console.error(t)}}jg(),Kg.exports=Pg()});var o2=it(vu=>{"use strict";var Ne=zg(),xy=kn(),B_=Jg();function I(t){var e="https://react.dev/errors/"+t;if(1<arguments.length){e+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function by(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ea(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function vy(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Ay(t){if(t.tag===31){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function qg(t){if(ea(t)!==t)throw Error(I(188))}function E_(t){var e=t.alternate;if(!e){if(e=ea(t),e===null)throw Error(I(188));return e!==t?null:t}for(var n=t,r=e;;){var o=n.return;if(o===null)break;var s=o.alternate;if(s===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===s.child){for(s=o.child;s;){if(s===n)return qg(o),t;if(s===r)return qg(o),e;s=s.sibling}throw Error(I(188))}if(n.return!==r.return)n=o,r=s;else{for(var i=!1,a=o.child;a;){if(a===n){i=!0,n=o,r=s;break}if(a===r){i=!0,r=o,n=s;break}a=a.sibling}if(!i){for(a=s.child;a;){if(a===n){i=!0,n=s,r=o;break}if(a===r){i=!0,r=s,n=o;break}a=a.sibling}if(!i)throw Error(I(189))}}if(n.alternate!==r)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?t:e}function _y(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t;for(t=t.child;t!==null;){if(e=_y(t),e!==null)return e;t=t.sibling}return null}var be=Object.assign,S_=Symbol.for("react.element"),Qa=Symbol.for("react.transitional.element"),_i=Symbol.for("react.portal"),Po=Symbol.for("react.fragment"),wy=Symbol.for("react.strict_mode"),qf=Symbol.for("react.profiler"),Ty=Symbol.for("react.consumer"),Hn=Symbol.for("react.context"),Hm=Symbol.for("react.forward_ref"),Xf=Symbol.for("react.suspense"),Yf=Symbol.for("react.suspense_list"),Pm=Symbol.for("react.memo"),mr=Symbol.for("react.lazy");Symbol.for("react.scope");var Qf=Symbol.for("react.activity");Symbol.for("react.legacy_hidden");Symbol.for("react.tracing_marker");var M_=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var Xg=Symbol.iterator;function pi(t){return t===null||typeof t!="object"?null:(t=Xg&&t[Xg]||t["@@iterator"],typeof t=="function"?t:null)}var C_=Symbol.for("react.client.reference");function Wf(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C_?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Po:return"Fragment";case qf:return"Profiler";case wy:return"StrictMode";case Xf:return"Suspense";case Yf:return"SuspenseList";case Qf:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case _i:return"Portal";case Hn:return t.displayName||"Context";case Ty:return(t._context.displayName||"Context")+".Consumer";case Hm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pm:return e=t.displayName||null,e!==null?e:Wf(t.type)||"Memo";case mr:e=t._payload,t=t._init;try{return Wf(t(e))}catch{}}return null}var wi=Array.isArray,H=xy.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=B_.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,no={pending:!1,data:null,method:null,action:null},$f=[],jo=-1;function wn(t){return{current:t}}function je(t){0>jo||(t.current=$f[jo],$f[jo]=null,jo--)}function he(t,e){jo++,$f[jo]=t.current,t.current=e}var _n=wn(null),Ni=wn(null),wr=wn(null),Cc=wn(null);function Vc(t,e){switch(he(wr,e),he(Ni,t),he(_n,null),e.nodeType){case 9:case 11:t=(t=e.documentElement)&&(t=t.namespaceURI)?ty(t):0;break;default:if(t=e.tagName,e=e.namespaceURI)e=ty(e),t=j1(e,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}je(_n),he(_n,t)}function cs(){je(_n),je(Ni),je(wr)}function Zf(t){t.memoizedState!==null&&he(Cc,t);var e=_n.current,n=j1(e,t.type);e!==n&&(he(Ni,t),he(_n,n))}function Rc(t){Ni.current===t&&(je(_n),je(Ni)),Cc.current===t&&(je(Cc),Wi._currentValue=no)}var df,Yg;function $r(t){if(df===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);df=e&&e[1]||"",Yg=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+df+t+Yg}var pf=!1;function gf(t,e){if(!t||pf)return"";pf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(e){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(d){var m=d}Reflect.construct(t,[],f)}else{try{f.call()}catch(d){m=d}t.call(f.prototype)}}else{try{throw Error()}catch(d){m=d}(f=t())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(d){if(d&&m&&typeof d.stack=="string")return[d.stack,m.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var s=r.DetermineComponentFrameRoot(),i=s[0],a=s[1];if(i&&a){var c=i.split(`
`),u=a.split(`
`);for(o=r=0;r<c.length&&!c[r].includes("DetermineComponentFrameRoot");)r++;for(;o<u.length&&!u[o].includes("DetermineComponentFrameRoot");)o++;if(r===c.length||o===u.length)for(r=c.length-1,o=u.length-1;1<=r&&0<=o&&c[r]!==u[o];)o--;for(;1<=r&&0<=o;r--,o--)if(c[r]!==u[o]){if(r!==1||o!==1)do if(r--,o--,0>o||c[r]!==u[o]){var l=`
`+c[r].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=r&&0<=o);break}}}finally{pf=!1,Error.prepareStackTrace=n}return(n=t?t.displayName||t.name:"")?$r(n):""}function V_(t,e){switch(t.tag){case 26:case 27:case 5:return $r(t.type);case 16:return $r("Lazy");case 13:return t.child!==e&&e!==null?$r("Suspense Fallback"):$r("Suspense");case 19:return $r("SuspenseList");case 0:case 15:return gf(t.type,!1);case 11:return gf(t.type.render,!1);case 1:return gf(t.type,!0);case 31:return $r("Activity");default:return""}}function Qg(t){try{var e="",n=null;do e+=V_(t,n),n=t,t=t.return;while(t);return e}catch(r){return`
Error generating stack: `+r.message+`
`+r.stack}}var em=Object.prototype.hasOwnProperty,jm=Ne.unstable_scheduleCallback,yf=Ne.unstable_cancelCallback,R_=Ne.unstable_shouldYield,D_=Ne.unstable_requestPaint,Dt=Ne.unstable_now,k_=Ne.unstable_getCurrentPriorityLevel,By=Ne.unstable_ImmediatePriority,Ey=Ne.unstable_UserBlockingPriority,Dc=Ne.unstable_NormalPriority,I_=Ne.unstable_LowPriority,Sy=Ne.unstable_IdlePriority,O_=Ne.log,U_=Ne.unstable_setDisableYieldValue,ta=null,kt=null;function xr(t){if(typeof O_=="function"&&U_(t),kt&&typeof kt.setStrictMode=="function")try{kt.setStrictMode(ta,t)}catch{}}var It=Math.clz32?Math.clz32:F_,G_=Math.log,L_=Math.LN2;function F_(t){return t>>>=0,t===0?32:31-(G_(t)/L_|0)|0}var Wa=256,$a=262144,Za=4194304;function Zr(t){var e=t&42;if(e!==0)return e;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ou(t,e,n){var r=t.pendingLanes;if(r===0)return 0;var o=0,s=t.suspendedLanes,i=t.pingedLanes;t=t.warmLanes;var a=r&134217727;return a!==0?(r=a&~s,r!==0?o=Zr(r):(i&=a,i!==0?o=Zr(i):n||(n=a&~t,n!==0&&(o=Zr(n))))):(a=r&~s,a!==0?o=Zr(a):i!==0?o=Zr(i):n||(n=r&~t,n!==0&&(o=Zr(n)))),o===0?0:e!==0&&e!==o&&(e&s)===0&&(s=o&-o,n=e&-e,s>=n||s===32&&(n&4194048)!==0)?e:o}function na(t,e){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&e)===0}function N_(t,e){switch(t){case 1:case 2:case 4:case 8:case 64:return e+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function My(){var t=Za;return Za<<=1,(Za&62914560)===0&&(Za=4194304),t}function xf(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ra(t,e){t.pendingLanes|=e,e!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function z_(t,e,n,r,o,s){var i=t.pendingLanes;t.pendingLanes=n,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=n,t.entangledLanes&=n,t.errorRecoveryDisabledLanes&=n,t.shellSuspendCounter=0;var a=t.entanglements,c=t.expirationTimes,u=t.hiddenUpdates;for(n=i&~n;0<n;){var l=31-It(n),f=1<<l;a[l]=0,c[l]=-1;var m=u[l];if(m!==null)for(u[l]=null,l=0;l<m.length;l++){var d=m[l];d!==null&&(d.lane&=-536870913)}n&=~f}r!==0&&Cy(t,r,0),s!==0&&o===0&&t.tag!==0&&(t.suspendedLanes|=s&~(i&~e))}function Cy(t,e,n){t.pendingLanes|=e,t.suspendedLanes&=~e;var r=31-It(e);t.entangledLanes|=e,t.entanglements[r]=t.entanglements[r]|1073741824|n&261930}function Vy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-It(n),o=1<<r;o&e|t[r]&e&&(t[r]|=e),n&=~o}}function Ry(t,e){var n=e&-e;return n=(n&42)!==0?1:Km(n),(n&(t.suspendedLanes|e))!==0?0:n}function Km(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Jm(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Dy(){var t=re.p;return t!==0?t:(t=window.event,t===void 0?32:t2(t.type))}function Wg(t,e){var n=re.p;try{return re.p=t,e()}finally{re.p=n}}var Ur=Math.random().toString(36).slice(2),Xe="__reactFiber$"+Ur,wt="__reactProps$"+Ur,bs="__reactContainer$"+Ur,tm="__reactEvents$"+Ur,H_="__reactListeners$"+Ur,P_="__reactHandles$"+Ur,$g="__reactResources$"+Ur,oa="__reactMarker$"+Ur;function qm(t){delete t[Xe],delete t[wt],delete t[tm],delete t[H_],delete t[P_]}function Ko(t){var e=t[Xe];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bs]||n[Xe]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=iy(t);t!==null;){if(n=t[Xe])return n;t=iy(t)}return e}t=n,n=t.parentNode}return null}function vs(t){if(t=t[Xe]||t[bs]){var e=t.tag;if(e===5||e===6||e===13||e===31||e===26||e===27||e===3)return t}return null}function Ti(t){var e=t.tag;if(e===5||e===26||e===27||e===6)return t.stateNode;throw Error(I(33))}function ts(t){var e=t[$g];return e||(e=t[$g]={hoistableStyles:new Map,hoistableScripts:new Map}),e}function Pe(t){t[oa]=!0}var ky=new Set,Iy={};function mo(t,e){us(t,e),us(t+"Capture",e)}function us(t,e){for(Iy[t]=e,t=0;t<e.length;t++)ky.add(e[t])}var j_=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Zg={},e0={};function K_(t){return em.call(e0,t)?!0:em.call(Zg,t)?!1:j_.test(t)?e0[t]=!0:(Zg[t]=!0,!1)}function dc(t,e,n){if(K_(e))if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":t.removeAttribute(e);return;case"boolean":var r=e.toLowerCase().slice(0,5);if(r!=="data-"&&r!=="aria-"){t.removeAttribute(e);return}}t.setAttribute(e,""+n)}}function ec(t,e,n){if(n===null)t.removeAttribute(e);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(e);return}t.setAttribute(e,""+n)}}function On(t,e,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttributeNS(e,n,""+r)}}function Kt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Oy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function J_(t,e,n){var r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e);if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(i){n=""+i,s.call(this,i)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(i){n=""+i},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function nm(t){if(!t._valueTracker){var e=Oy(t)?"checked":"value";t._valueTracker=J_(t,e,""+t[e])}}function Uy(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Oy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function kc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var q_=/[\n"\\]/g;function Xt(t){return t.replace(q_,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function rm(t,e,n,r,o,s,i,a){t.name="",i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"?t.type=i:t.removeAttribute("type"),e!=null?i==="number"?(e===0&&t.value===""||t.value!=e)&&(t.value=""+Kt(e)):t.value!==""+Kt(e)&&(t.value=""+Kt(e)):i!=="submit"&&i!=="reset"||t.removeAttribute("value"),e!=null?om(t,i,Kt(e)):n!=null?om(t,i,Kt(n)):r!=null&&t.removeAttribute("value"),o==null&&s!=null&&(t.defaultChecked=!!s),o!=null&&(t.checked=o&&typeof o!="function"&&typeof o!="symbol"),a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"?t.name=""+Kt(a):t.removeAttribute("name")}function Gy(t,e,n,r,o,s,i,a){if(s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"&&(t.type=s),e!=null||n!=null){if(!(s!=="submit"&&s!=="reset"||e!=null)){nm(t);return}n=n!=null?""+Kt(n):"",e=e!=null?""+Kt(e):n,a||e===t.value||(t.value=e),t.defaultValue=e}r=r??o,r=typeof r!="function"&&typeof r!="symbol"&&!!r,t.checked=a?t.checked:!!r,t.defaultChecked=!!r,i!=null&&typeof i!="function"&&typeof i!="symbol"&&typeof i!="boolean"&&(t.name=i),nm(t)}function om(t,e,n){e==="number"&&kc(t.ownerDocument)===t||t.defaultValue===""+n||(t.defaultValue=""+n)}function ns(t,e,n,r){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kt(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,r&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function Ly(t,e,n){if(e!=null&&(e=""+Kt(e),e!==t.value&&(t.value=e),n==null)){t.defaultValue!==e&&(t.defaultValue=e);return}t.defaultValue=n!=null?""+Kt(n):""}function Fy(t,e,n,r){if(e==null){if(r!=null){if(n!=null)throw Error(I(92));if(wi(r)){if(1<r.length)throw Error(I(93));r=r[0]}n=r}n==null&&(n=""),e=n}n=Kt(e),t.defaultValue=n,r=t.textContent,r===n&&r!==""&&r!==null&&(t.value=r),nm(t)}function ls(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var X_=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function t0(t,e,n){var r=e.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?r?t.setProperty(e,""):e==="float"?t.cssFloat="":t[e]="":r?t.setProperty(e,n):typeof n!="number"||n===0||X_.has(e)?e==="float"?t.cssFloat=n:t[e]=(""+n).trim():t[e]=n+"px"}function Ny(t,e,n){if(e!=null&&typeof e!="object")throw Error(I(62));if(t=t.style,n!=null){for(var r in n)!n.hasOwnProperty(r)||e!=null&&e.hasOwnProperty(r)||(r.indexOf("--")===0?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="");for(var o in e)r=e[o],e.hasOwnProperty(o)&&n[o]!==r&&t0(t,o,r)}else for(var s in e)e.hasOwnProperty(s)&&t0(t,s,e[s])}function Xm(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Y_=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Q_=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function pc(t){return Q_.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Pn(){}var sm=null;function Ym(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jo=null,rs=null;function n0(t){var e=vs(t);if(e&&(t=e.stateNode)){var n=t[wt]||null;e:switch(t=e.stateNode,e.type){case"input":if(rm(t,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+Xt(""+e)+'"][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var o=r[wt]||null;if(!o)throw Error(I(90));rm(r,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(e=0;e<n.length;e++)r=n[e],r.form===t.form&&Uy(r)}break e;case"textarea":Ly(t,n.value,n.defaultValue);break e;case"select":e=n.value,e!=null&&ns(t,!!n.multiple,e,!1)}}}var bf=!1;function zy(t,e,n){if(bf)return t(e,n);bf=!0;try{var r=t(e);return r}finally{if(bf=!1,(Jo!==null||rs!==null)&&(gu(),Jo&&(e=Jo,t=rs,rs=Jo=null,n0(e),t)))for(e=0;e<t.length;e++)n0(t[e])}}function zi(t,e){var n=t.stateNode;if(n===null)return null;var r=n[wt]||null;if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(I(231,e,typeof n));return n}var Xn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),im=!1;if(Xn)try{Lo={},Object.defineProperty(Lo,"passive",{get:function(){im=!0}}),window.addEventListener("test",Lo,Lo),window.removeEventListener("test",Lo,Lo)}catch{im=!1}var Lo,br=null,Qm=null,gc=null;function Hy(){if(gc)return gc;var t,e=Qm,n=e.length,r,o="value"in br?br.value:br.textContent,s=o.length;for(t=0;t<n&&e[t]===o[t];t++);var i=n-t;for(r=1;r<=i&&e[n-r]===o[s-r];r++);return gc=o.slice(t,1<r?1-r:void 0)}function yc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function tc(){return!0}function r0(){return!1}function Tt(t){function e(n,r,o,s,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=s,this.target=i,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?tc:r0,this.isPropagationStopped=r0,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tc)},persist:function(){},isPersistent:tc}),e}var ho={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},su=Tt(ho),sa=be({},ho,{view:0,detail:0}),W_=Tt(sa),vf,Af,gi,iu=be({},sa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gi&&(gi&&t.type==="mousemove"?(vf=t.screenX-gi.screenX,Af=t.screenY-gi.screenY):Af=vf=0,gi=t),vf)},movementY:function(t){return"movementY"in t?t.movementY:Af}}),o0=Tt(iu),$_=be({},iu,{dataTransfer:0}),Z_=Tt($_),ew=be({},sa,{relatedTarget:0}),_f=Tt(ew),tw=be({},ho,{animationName:0,elapsedTime:0,pseudoElement:0}),nw=Tt(tw),rw=be({},ho,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ow=Tt(rw),sw=be({},ho,{data:0}),s0=Tt(sw),iw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=cw[t])?!!e[t]:!1}function Wm(){return uw}var lw=be({},sa,{key:function(t){if(t.key){var e=iw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wm,charCode:function(t){return t.type==="keypress"?yc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fw=Tt(lw),mw=be({},iu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),i0=Tt(mw),hw=be({},sa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wm}),dw=Tt(hw),pw=be({},ho,{propertyName:0,elapsedTime:0,pseudoElement:0}),gw=Tt(pw),yw=be({},iu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xw=Tt(yw),bw=be({},ho,{newState:0,oldState:0}),vw=Tt(bw),Aw=[9,13,27,32],$m=Xn&&"CompositionEvent"in window,Si=null;Xn&&"documentMode"in document&&(Si=document.documentMode);var _w=Xn&&"TextEvent"in window&&!Si,Py=Xn&&(!$m||Si&&8<Si&&11>=Si),a0=" ",c0=!1;function jy(t,e){switch(t){case"keyup":return Aw.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ky(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qo=!1;function ww(t,e){switch(t){case"compositionend":return Ky(e);case"keypress":return e.which!==32?null:(c0=!0,a0);case"textInput":return t=e.data,t===a0&&c0?null:t;default:return null}}function Tw(t,e){if(qo)return t==="compositionend"||!$m&&jy(t,e)?(t=Hy(),gc=Qm=br=null,qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Py&&e.locale!=="ko"?null:e.data;default:return null}}var Bw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function u0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Bw[t.type]:e==="textarea"}function Jy(t,e,n,r){Jo?rs?rs.push(r):rs=[r]:Jo=r,e=Wc(e,"onChange"),0<e.length&&(n=new su("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Mi=null,Hi=null;function Ew(t){z1(t,0)}function au(t){var e=Ti(t);if(Uy(e))return t}function l0(t,e){if(t==="change")return e}var qy=!1;Xn&&(Xn?(rc="oninput"in document,rc||(wf=document.createElement("div"),wf.setAttribute("oninput","return;"),rc=typeof wf.oninput=="function"),nc=rc):nc=!1,qy=nc&&(!document.documentMode||9<document.documentMode));var nc,rc,wf;function f0(){Mi&&(Mi.detachEvent("onpropertychange",Xy),Hi=Mi=null)}function Xy(t){if(t.propertyName==="value"&&au(Hi)){var e=[];Jy(e,Hi,t,Ym(t)),zy(Ew,e)}}function Sw(t,e,n){t==="focusin"?(f0(),Mi=e,Hi=n,Mi.attachEvent("onpropertychange",Xy)):t==="focusout"&&f0()}function Mw(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return au(Hi)}function Cw(t,e){if(t==="click")return au(e)}function Vw(t,e){if(t==="input"||t==="change")return au(e)}function Rw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ut=typeof Object.is=="function"?Object.is:Rw;function Pi(t,e){if(Ut(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!em.call(e,o)||!Ut(t[o],e[o]))return!1}return!0}function m0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function h0(t,e){var n=m0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=m0(n)}}function Yy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Yy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Qy(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var e=kc(t.document);e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=kc(t.document)}return e}function Zm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}var Dw=Xn&&"documentMode"in document&&11>=document.documentMode,Xo=null,am=null,Ci=null,cm=!1;function d0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cm||Xo==null||Xo!==kc(r)||(r=Xo,"selectionStart"in r&&Zm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ci&&Pi(Ci,r)||(Ci=r,r=Wc(am,"onSelect"),0<r.length&&(e=new su("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xo)))}function Wr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yo={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},Tf={},Wy={};Xn&&(Wy=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function po(t){if(Tf[t])return Tf[t];if(!Yo[t])return t;var e=Yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Wy)return Tf[t]=e[n];return t}var $y=po("animationend"),Zy=po("animationiteration"),ex=po("animationstart"),kw=po("transitionrun"),Iw=po("transitionstart"),Ow=po("transitioncancel"),tx=po("transitionend"),nx=new Map,um="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");um.push("scrollEnd");function fn(t,e){nx.set(t,e),mo(e,[t])}var Ic=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var e=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(e))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},jt=[],Qo=0,eh=0;function cu(){for(var t=Qo,e=eh=Qo=0;e<t;){var n=jt[e];jt[e++]=null;var r=jt[e];jt[e++]=null;var o=jt[e];jt[e++]=null;var s=jt[e];if(jt[e++]=null,r!==null&&o!==null){var i=r.pending;i===null?o.next=o:(o.next=i.next,i.next=o),r.pending=o}s!==0&&rx(n,o,s)}}function uu(t,e,n,r){jt[Qo++]=t,jt[Qo++]=e,jt[Qo++]=n,jt[Qo++]=r,eh|=r,t.lanes|=r,t=t.alternate,t!==null&&(t.lanes|=r)}function th(t,e,n,r){return uu(t,e,n,r),Oc(t)}function go(t,e){return uu(t,null,null,e),Oc(t)}function rx(t,e,n){t.lanes|=n;var r=t.alternate;r!==null&&(r.lanes|=n);for(var o=!1,s=t.return;s!==null;)s.childLanes|=n,r=s.alternate,r!==null&&(r.childLanes|=n),s.tag===22&&(t=s.stateNode,t===null||t._visibility&1||(o=!0)),t=s,s=s.return;return t.tag===3?(s=t.stateNode,o&&e!==null&&(o=31-It(n),t=s.hiddenUpdates,r=t[o],r===null?t[o]=[e]:r.push(e),e.lane=n|536870912),s):null}function Oc(t){if(50<Li)throw Li=0,Vm=null,Error(I(185));for(var e=t.return;e!==null;)t=e,e=t.return;return t.tag===3?t.stateNode:null}var Wo={};function Uw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,e,n,r){return new Uw(t,e,n,r)}function nh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Kn(t,e){var n=t.alternate;return n===null?(n=Vt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&65011712,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n.refCleanup=t.refCleanup,n}function ox(t,e){t.flags&=65011714;var n=t.alternate;return n===null?(t.childLanes=0,t.lanes=e,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,t.type=n.type,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t}function xc(t,e,n,r,o,s){var i=0;if(r=t,typeof t=="function")nh(t)&&(i=1);else if(typeof t=="string")i=F3(t,n,_n.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Qf:return t=Vt(31,n,e,o),t.elementType=Qf,t.lanes=s,t;case Po:return ro(n.children,o,s,e);case wy:i=8,o|=24;break;case qf:return t=Vt(12,n,e,o|2),t.elementType=qf,t.lanes=s,t;case Xf:return t=Vt(13,n,e,o),t.elementType=Xf,t.lanes=s,t;case Yf:return t=Vt(19,n,e,o),t.elementType=Yf,t.lanes=s,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Hn:i=10;break e;case Ty:i=9;break e;case Hm:i=11;break e;case Pm:i=14;break e;case mr:i=16,r=null;break e}i=29,n=Error(I(130,t===null?"null":typeof t,"")),r=null}return e=Vt(i,n,e,o),e.elementType=t,e.type=r,e.lanes=s,e}function ro(t,e,n,r){return t=Vt(7,t,r,e),t.lanes=n,t}function Bf(t,e,n){return t=Vt(6,t,null,e),t.lanes=n,t}function sx(t){var e=Vt(18,null,null,0);return e.stateNode=t,e}function Ef(t,e,n){return e=Vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}var p0=new WeakMap;function Yt(t,e){if(typeof t=="object"&&t!==null){var n=p0.get(t);return n!==void 0?n:(e={value:t,source:e,stack:Qg(e)},p0.set(t,e),e)}return{value:t,source:e,stack:Qg(e)}}var $o=[],Zo=0,Uc=null,ji=0,Jt=[],qt=0,Dr=null,bn=1,vn="";function Nn(t,e){$o[Zo++]=ji,$o[Zo++]=Uc,Uc=t,ji=e}function ix(t,e,n){Jt[qt++]=bn,Jt[qt++]=vn,Jt[qt++]=Dr,Dr=t;var r=bn;t=vn;var o=32-It(r)-1;r&=~(1<<o),n+=1;var s=32-It(e)+o;if(30<s){var i=o-o%5;s=(r&(1<<i)-1).toString(32),r>>=i,o-=i,bn=1<<32-It(e)+o|n<<o|r,vn=s+t}else bn=1<<s|n<<o|r,vn=t}function rh(t){t.return!==null&&(Nn(t,1),ix(t,1,0))}function oh(t){for(;t===Uc;)Uc=$o[--Zo],$o[Zo]=null,ji=$o[--Zo],$o[Zo]=null;for(;t===Dr;)Dr=Jt[--qt],Jt[qt]=null,vn=Jt[--qt],Jt[qt]=null,bn=Jt[--qt],Jt[qt]=null}function ax(t,e){Jt[qt++]=bn,Jt[qt++]=vn,Jt[qt++]=Dr,bn=e.id,vn=e.overflow,Dr=t}var Ye=null,xe=null,$=!1,Tr=null,Qt=!1,lm=Error(I(519));function kr(t){var e=Error(I(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ki(Yt(e,t)),lm}function g0(t){var e=t.stateNode,n=t.type,r=t.memoizedProps;switch(e[Xe]=t,e[wt]=r,n){case"dialog":Y("cancel",e),Y("close",e);break;case"iframe":case"object":case"embed":Y("load",e);break;case"video":case"audio":for(n=0;n<Yi.length;n++)Y(Yi[n],e);break;case"source":Y("error",e);break;case"img":case"image":case"link":Y("error",e),Y("load",e);break;case"details":Y("toggle",e);break;case"input":Y("invalid",e),Gy(e,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Y("invalid",e);break;case"textarea":Y("invalid",e),Fy(e,r.value,r.defaultValue,r.children)}n=r.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||e.textContent===""+n||r.suppressHydrationWarning===!0||P1(e.textContent,n)?(r.popover!=null&&(Y("beforetoggle",e),Y("toggle",e)),r.onScroll!=null&&Y("scroll",e),r.onScrollEnd!=null&&Y("scrollend",e),r.onClick!=null&&(e.onclick=Pn),e=!0):e=!1,e||kr(t,!0)}function y0(t){for(Ye=t.return;Ye;)switch(Ye.tag){case 5:case 31:case 13:Qt=!1;return;case 27:case 3:Qt=!0;return;default:Ye=Ye.return}}function Fo(t){if(t!==Ye)return!1;if(!$)return y0(t),$=!0,!1;var e=t.tag,n;if((n=e!==3&&e!==27)&&((n=e===5)&&(n=t.type,n=!(n!=="form"&&n!=="button")||Om(t.type,t.memoizedProps)),n=!n),n&&xe&&kr(t),y0(t),e===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));xe=sy(t)}else if(e===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));xe=sy(t)}else e===27?(e=xe,Gr(t.type)?(t=Fm,Fm=null,xe=t):xe=e):xe=Ye?$t(t.stateNode.nextSibling):null;return!0}function ao(){xe=Ye=null,$=!1}function Sf(){var t=Tr;return t!==null&&(At===null?At=t:At.push.apply(At,t),Tr=null),t}function Ki(t){Tr===null?Tr=[t]:Tr.push(t)}var fm=wn(null),yo=null,jn=null;function dr(t,e,n){he(fm,e._currentValue),e._currentValue=n}function Jn(t){t._currentValue=fm.current,je(fm)}function mm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hm(t,e,n,r){var o=t.child;for(o!==null&&(o.return=t);o!==null;){var s=o.dependencies;if(s!==null){var i=o.child;s=s.firstContext;e:for(;s!==null;){var a=s;s=o;for(var c=0;c<e.length;c++)if(a.context===e[c]){s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),mm(s.return,n,t),r||(i=null);break e}s=a.next}}else if(o.tag===18){if(i=o.return,i===null)throw Error(I(341));i.lanes|=n,s=i.alternate,s!==null&&(s.lanes|=n),mm(i,n,t),i=null}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===t){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}}function As(t,e,n,r){t=null;for(var o=e,s=!1;o!==null;){if(!s){if((o.flags&524288)!==0)s=!0;else if((o.flags&262144)!==0)break}if(o.tag===10){var i=o.alternate;if(i===null)throw Error(I(387));if(i=i.memoizedProps,i!==null){var a=o.type;Ut(o.pendingProps.value,i.value)||(t!==null?t.push(a):t=[a])}}else if(o===Cc.current){if(i=o.alternate,i===null)throw Error(I(387));i.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(t!==null?t.push(Wi):t=[Wi])}o=o.return}t!==null&&hm(e,t,n,r),e.flags|=262144}function Gc(t){for(t=t.firstContext;t!==null;){if(!Ut(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function co(t){yo=t,jn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qe(t){return cx(yo,t)}function oc(t,e){return yo===null&&co(t),cx(t,e)}function cx(t,e){var n=e._currentValue;if(e={context:e,memoizedValue:n,next:null},jn===null){if(t===null)throw Error(I(308));jn=e,t.dependencies={lanes:0,firstContext:e},t.flags|=524288}else jn=jn.next=e;return n}var Gw=typeof AbortController<"u"?AbortController:function(){var t=[],e=this.signal={aborted:!1,addEventListener:function(n,r){t.push(r)}};this.abort=function(){e.aborted=!0,t.forEach(function(n){return n()})}},Lw=Ne.unstable_scheduleCallback,Fw=Ne.unstable_NormalPriority,Ie={$$typeof:Hn,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sh(){return{controller:new Gw,data:new Map,refCount:0}}function ia(t){t.refCount--,t.refCount===0&&Lw(Fw,function(){t.controller.abort()})}var Vi=null,dm=0,fs=0,os=null;function Nw(t,e){if(Vi===null){var n=Vi=[];dm=0,fs=Vh(),os={status:"pending",value:void 0,then:function(r){n.push(r)}}}return dm++,e.then(x0,x0),e}function x0(){if(--dm===0&&Vi!==null){os!==null&&(os.status="fulfilled");var t=Vi;Vi=null,fs=0,os=null;for(var e=0;e<t.length;e++)(0,t[e])()}}function zw(t,e){var n=[],r={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return t.then(function(){r.status="fulfilled",r.value=e;for(var o=0;o<n.length;o++)(0,n[o])(e)},function(o){for(r.status="rejected",r.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),r}var b0=H.S;H.S=function(t,e){_1=Dt(),typeof e=="object"&&e!==null&&typeof e.then=="function"&&Nw(t,e),b0!==null&&b0(t,e)};var oo=wn(null);function ih(){var t=oo.current;return t!==null?t:fe.pooledCache}function bc(t,e){e===null?he(oo,oo.current):he(oo,e.pool)}function ux(){var t=ih();return t===null?null:{parent:Ie._currentValue,pool:t}}var _s=Error(I(460)),ah=Error(I(474)),lu=Error(I(542)),Lc={then:function(){}};function v0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function lx(t,e,n){switch(n=t[n],n===void 0?t.push(e):n!==e&&(e.then(Pn,Pn),e=n),e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,_0(t),t;default:if(typeof e.status=="string")e.then(Pn,Pn);else{if(t=fe,t!==null&&100<t.shellSuspendCounter)throw Error(I(482));t=e,t.status="pending",t.then(function(r){if(e.status==="pending"){var o=e;o.status="fulfilled",o.value=r}},function(r){if(e.status==="pending"){var o=e;o.status="rejected",o.reason=r}})}switch(e.status){case"fulfilled":return e.value;case"rejected":throw t=e.reason,_0(t),t}throw so=e,_s}}function eo(t){try{var e=t._init;return e(t._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(so=n,_s):n}}var so=null;function A0(){if(so===null)throw Error(I(459));var t=so;return so=null,t}function _0(t){if(t===_s||t===lu)throw Error(I(483))}var ss=null,Ji=0;function sc(t){var e=Ji;return Ji+=1,ss===null&&(ss=[]),lx(ss,t,e)}function yi(t,e){e=e.props.ref,t.ref=e!==void 0?e:null}function ic(t,e){throw e.$$typeof===S_?Error(I(525)):(t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)))}function fx(t){function e(h,g){if(t){var y=h.deletions;y===null?(h.deletions=[g],h.flags|=16):y.push(g)}}function n(h,g){if(!t)return null;for(;g!==null;)e(h,g),g=g.sibling;return null}function r(h){for(var g=new Map;h!==null;)h.key!==null?g.set(h.key,h):g.set(h.index,h),h=h.sibling;return g}function o(h,g){return h=Kn(h,g),h.index=0,h.sibling=null,h}function s(h,g,y){return h.index=y,t?(y=h.alternate,y!==null?(y=y.index,y<g?(h.flags|=67108866,g):y):(h.flags|=67108866,g)):(h.flags|=1048576,g)}function i(h){return t&&h.alternate===null&&(h.flags|=67108866),h}function a(h,g,y,A){return g===null||g.tag!==6?(g=Bf(y,h.mode,A),g.return=h,g):(g=o(g,y),g.return=h,g)}function c(h,g,y,A){var C=y.type;return C===Po?l(h,g,y.props.children,A,y.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===mr&&eo(C)===g.type)?(g=o(g,y.props),yi(g,y),g.return=h,g):(g=xc(y.type,y.key,y.props,null,h.mode,A),yi(g,y),g.return=h,g)}function u(h,g,y,A){return g===null||g.tag!==4||g.stateNode.containerInfo!==y.containerInfo||g.stateNode.implementation!==y.implementation?(g=Ef(y,h.mode,A),g.return=h,g):(g=o(g,y.children||[]),g.return=h,g)}function l(h,g,y,A,C){return g===null||g.tag!==7?(g=ro(y,h.mode,A,C),g.return=h,g):(g=o(g,y),g.return=h,g)}function f(h,g,y){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=Bf(""+g,h.mode,y),g.return=h,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Qa:return y=xc(g.type,g.key,g.props,null,h.mode,y),yi(y,g),y.return=h,y;case _i:return g=Ef(g,h.mode,y),g.return=h,g;case mr:return g=eo(g),f(h,g,y)}if(wi(g)||pi(g))return g=ro(g,h.mode,y,null),g.return=h,g;if(typeof g.then=="function")return f(h,sc(g),y);if(g.$$typeof===Hn)return f(h,oc(h,g),y);ic(h,g)}return null}function m(h,g,y,A){var C=g!==null?g.key:null;if(typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint")return C!==null?null:a(h,g,""+y,A);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Qa:return y.key===C?c(h,g,y,A):null;case _i:return y.key===C?u(h,g,y,A):null;case mr:return y=eo(y),m(h,g,y,A)}if(wi(y)||pi(y))return C!==null?null:l(h,g,y,A,null);if(typeof y.then=="function")return m(h,g,sc(y),A);if(y.$$typeof===Hn)return m(h,g,oc(h,y),A);ic(h,y)}return null}function d(h,g,y,A,C){if(typeof A=="string"&&A!==""||typeof A=="number"||typeof A=="bigint")return h=h.get(y)||null,a(g,h,""+A,C);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Qa:return h=h.get(A.key===null?y:A.key)||null,c(g,h,A,C);case _i:return h=h.get(A.key===null?y:A.key)||null,u(g,h,A,C);case mr:return A=eo(A),d(h,g,y,A,C)}if(wi(A)||pi(A))return h=h.get(y)||null,l(g,h,A,C,null);if(typeof A.then=="function")return d(h,g,y,sc(A),C);if(A.$$typeof===Hn)return d(h,g,y,oc(g,A),C);ic(g,A)}return null}function p(h,g,y,A){for(var C=null,U=null,V=g,k=g=0,G=null;V!==null&&k<y.length;k++){V.index>k?(G=V,V=null):G=V.sibling;var _=m(h,V,y[k],A);if(_===null){V===null&&(V=G);break}t&&V&&_.alternate===null&&e(h,V),g=s(_,g,k),U===null?C=_:U.sibling=_,U=_,V=G}if(k===y.length)return n(h,V),$&&Nn(h,k),C;if(V===null){for(;k<y.length;k++)V=f(h,y[k],A),V!==null&&(g=s(V,g,k),U===null?C=V:U.sibling=V,U=V);return $&&Nn(h,k),C}for(V=r(V);k<y.length;k++)G=d(V,h,k,y[k],A),G!==null&&(t&&G.alternate!==null&&V.delete(G.key===null?k:G.key),g=s(G,g,k),U===null?C=G:U.sibling=G,U=G);return t&&V.forEach(function(R){return e(h,R)}),$&&Nn(h,k),C}function b(h,g,y,A){if(y==null)throw Error(I(151));for(var C=null,U=null,V=g,k=g=0,G=null,_=y.next();V!==null&&!_.done;k++,_=y.next()){V.index>k?(G=V,V=null):G=V.sibling;var R=m(h,V,_.value,A);if(R===null){V===null&&(V=G);break}t&&V&&R.alternate===null&&e(h,V),g=s(R,g,k),U===null?C=R:U.sibling=R,U=R,V=G}if(_.done)return n(h,V),$&&Nn(h,k),C;if(V===null){for(;!_.done;k++,_=y.next())_=f(h,_.value,A),_!==null&&(g=s(_,g,k),U===null?C=_:U.sibling=_,U=_);return $&&Nn(h,k),C}for(V=r(V);!_.done;k++,_=y.next())_=d(V,h,k,_.value,A),_!==null&&(t&&_.alternate!==null&&V.delete(_.key===null?k:_.key),g=s(_,g,k),U===null?C=_:U.sibling=_,U=_);return t&&V.forEach(function(L){return e(h,L)}),$&&Nn(h,k),C}function w(h,g,y,A){if(typeof y=="object"&&y!==null&&y.type===Po&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Qa:e:{for(var C=y.key;g!==null;){if(g.key===C){if(C=y.type,C===Po){if(g.tag===7){n(h,g.sibling),A=o(g,y.props.children),A.return=h,h=A;break e}}else if(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===mr&&eo(C)===g.type){n(h,g.sibling),A=o(g,y.props),yi(A,y),A.return=h,h=A;break e}n(h,g);break}else e(h,g);g=g.sibling}y.type===Po?(A=ro(y.props.children,h.mode,A,y.key),A.return=h,h=A):(A=xc(y.type,y.key,y.props,null,h.mode,A),yi(A,y),A.return=h,h=A)}return i(h);case _i:e:{for(C=y.key;g!==null;){if(g.key===C)if(g.tag===4&&g.stateNode.containerInfo===y.containerInfo&&g.stateNode.implementation===y.implementation){n(h,g.sibling),A=o(g,y.children||[]),A.return=h,h=A;break e}else{n(h,g);break}else e(h,g);g=g.sibling}A=Ef(y,h.mode,A),A.return=h,h=A}return i(h);case mr:return y=eo(y),w(h,g,y,A)}if(wi(y))return p(h,g,y,A);if(pi(y)){if(C=pi(y),typeof C!="function")throw Error(I(150));return y=C.call(y),b(h,g,y,A)}if(typeof y.then=="function")return w(h,g,sc(y),A);if(y.$$typeof===Hn)return w(h,g,oc(h,y),A);ic(h,y)}return typeof y=="string"&&y!==""||typeof y=="number"||typeof y=="bigint"?(y=""+y,g!==null&&g.tag===6?(n(h,g.sibling),A=o(g,y),A.return=h,h=A):(n(h,g),A=Bf(y,h.mode,A),A.return=h,h=A),i(h)):n(h,g)}return function(h,g,y,A){try{Ji=0;var C=w(h,g,y,A);return ss=null,C}catch(V){if(V===_s||V===lu)throw V;var U=Vt(29,V,null,h.mode);return U.lanes=A,U.return=h,U}finally{}}}var uo=fx(!0),mx=fx(!1),hr=!1;function ch(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function pm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Br(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Er(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(ne&2)!==0){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,e=Oc(t),rx(t,null,n),e}return uu(t,r,e,n),Oc(t)}function Ri(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194048)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vy(t,n)}}function Mf(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var i={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};s===null?o=s=i:s=s.next=i,n=n.next}while(n!==null);s===null?o=s=e:s=s.next=e}else o=s=e;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:s,shared:r.shared,callbacks:r.callbacks},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}var gm=!1;function Di(){if(gm){var t=os;if(t!==null)throw t}}function ki(t,e,n,r){gm=!1;var o=t.updateQueue;hr=!1;var s=o.firstBaseUpdate,i=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var c=a,u=c.next;c.next=null,i===null?s=u:i.next=u,i=c;var l=t.alternate;l!==null&&(l=l.updateQueue,a=l.lastBaseUpdate,a!==i&&(a===null?l.firstBaseUpdate=u:a.next=u,l.lastBaseUpdate=c))}if(s!==null){var f=o.baseState;i=0,l=u=c=null,a=s;do{var m=a.lane&-536870913,d=m!==a.lane;if(d?(W&m)===m:(r&m)===m){m!==0&&m===fs&&(gm=!0),l!==null&&(l=l.next={lane:0,tag:a.tag,payload:a.payload,callback:null,next:null});e:{var p=t,b=a;m=e;var w=n;switch(b.tag){case 1:if(p=b.payload,typeof p=="function"){f=p.call(w,f,m);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=b.payload,m=typeof p=="function"?p.call(w,f,m):p,m==null)break e;f=be({},f,m);break e;case 2:hr=!0}}m=a.callback,m!==null&&(t.flags|=64,d&&(t.flags|=8192),d=o.callbacks,d===null?o.callbacks=[m]:d.push(m))}else d={lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},l===null?(u=l=d,c=f):l=l.next=d,i|=m;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;d=a,a=d.next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}while(!0);l===null&&(c=f),o.baseState=c,o.firstBaseUpdate=u,o.lastBaseUpdate=l,s===null&&(o.shared.lanes=0),Or|=i,t.lanes=i,t.memoizedState=f}}function hx(t,e){if(typeof t!="function")throw Error(I(191,t));t.call(e)}function dx(t,e){var n=t.callbacks;if(n!==null)for(t.callbacks=null,t=0;t<n.length;t++)hx(n[t],e)}var ms=wn(null),Fc=wn(0);function w0(t,e){t=$n,he(Fc,t),he(ms,e),$n=t|e.baseLanes}function ym(){he(Fc,$n),he(ms,ms.current)}function uh(){$n=Fc.current,je(ms),je(Fc)}var Gt=wn(null),Wt=null;function pr(t){var e=t.alternate;he(Me,Me.current&1),he(Gt,t),Wt===null&&(e===null||ms.current!==null||e.memoizedState!==null)&&(Wt=t)}function xm(t){he(Me,Me.current),he(Gt,t),Wt===null&&(Wt=t)}function px(t){t.tag===22?(he(Me,Me.current),he(Gt,t),Wt===null&&(Wt=t)):gr(t)}function gr(){he(Me,Me.current),he(Gt,Gt.current)}function Ct(t){je(Gt),Wt===t&&(Wt=null),je(Me)}var Me=wn(0);function Nc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||Gm(n)||Lm(n)))return e}else if(e.tag===19&&(e.memoizedProps.revealOrder==="forwards"||e.memoizedProps.revealOrder==="backwards"||e.memoizedProps.revealOrder==="unstable_legacy-backwards"||e.memoizedProps.revealOrder==="together")){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yn=0,K=null,le=null,De=null,zc=!1,is=!1,lo=!1,Hc=0,qi=0,as=null,Hw=0;function Be(){throw Error(I(321))}function lh(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ut(t[n],e[n]))return!1;return!0}function fh(t,e,n,r,o,s){return Yn=s,K=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,H.H=t===null||t.memoizedState===null?Jx:_h,lo=!1,s=n(r,o),lo=!1,is&&(s=yx(e,n,r,o)),gx(t),s}function gx(t){H.H=Xi;var e=le!==null&&le.next!==null;if(Yn=0,De=le=K=null,zc=!1,qi=0,as=null,e)throw Error(I(300));t===null||Oe||(t=t.dependencies,t!==null&&Gc(t)&&(Oe=!0))}function yx(t,e,n,r){K=t;var o=0;do{if(is&&(as=null),qi=0,is=!1,25<=o)throw Error(I(301));if(o+=1,De=le=null,t.updateQueue!=null){var s=t.updateQueue;s.lastEffect=null,s.events=null,s.stores=null,s.memoCache!=null&&(s.memoCache.index=0)}H.H=qx,s=e(n,r)}while(is);return s}function Pw(){var t=H.H,e=t.useState()[0];return e=typeof e.then=="function"?aa(e):e,t=t.useState()[0],(le!==null?le.memoizedState:null)!==t&&(K.flags|=1024),e}function mh(){var t=Hc!==0;return Hc=0,t}function hh(t,e,n){e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~n}function dh(t){if(zc){for(t=t.memoizedState;t!==null;){var e=t.queue;e!==null&&(e.pending=null),t=t.next}zc=!1}Yn=0,De=le=K=null,is=!1,qi=Hc=0,as=null}function lt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return De===null?K.memoizedState=De=t:De=De.next=t,De}function Ce(){if(le===null){var t=K.alternate;t=t!==null?t.memoizedState:null}else t=le.next;var e=De===null?K.memoizedState:De.next;if(e!==null)De=e,le=t;else{if(t===null)throw K.alternate===null?Error(I(467)):Error(I(310));le=t,t={memoizedState:le.memoizedState,baseState:le.baseState,baseQueue:le.baseQueue,queue:le.queue,next:null},De===null?K.memoizedState=De=t:De=De.next=t}return De}function fu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function aa(t){var e=qi;return qi+=1,as===null&&(as=[]),t=lx(as,t,e),e=K,(De===null?e.memoizedState:De.next)===null&&(e=e.alternate,H.H=e===null||e.memoizedState===null?Jx:_h),t}function mu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return aa(t);if(t.$$typeof===Hn)return Qe(t)}throw Error(I(438,String(t)))}function ph(t){var e=null,n=K.updateQueue;if(n!==null&&(e=n.memoCache),e==null){var r=K.alternate;r!==null&&(r=r.updateQueue,r!==null&&(r=r.memoCache,r!=null&&(e={data:r.data.map(function(o){return o.slice()}),index:0})))}if(e==null&&(e={data:[],index:0}),n===null&&(n=fu(),K.updateQueue=n),n.memoCache=e,n=e.data[e.index],n===void 0)for(n=e.data[e.index]=Array(t),r=0;r<t;r++)n[r]=M_;return e.index++,n}function Qn(t,e){return typeof e=="function"?e(t):e}function vc(t){var e=Ce();return gh(e,le,t)}function gh(t,e,n){var r=t.queue;if(r===null)throw Error(I(311));r.lastRenderedReducer=n;var o=t.baseQueue,s=r.pending;if(s!==null){if(o!==null){var i=o.next;o.next=s.next,s.next=i}e.baseQueue=o=s,r.pending=null}if(s=t.baseState,o===null)t.memoizedState=s;else{e=o.next;var a=i=null,c=null,u=e,l=!1;do{var f=u.lane&-536870913;if(f!==u.lane?(W&f)===f:(Yn&f)===f){var m=u.revertLane;if(m===0)c!==null&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),f===fs&&(l=!0);else if((Yn&m)===m){u=u.next,m===fs&&(l=!0);continue}else f={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(a=c=f,i=s):c=c.next=f,K.lanes|=m,Or|=m;f=u.action,lo&&n(s,f),s=u.hasEagerState?u.eagerState:n(s,f)}else m={lane:f,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},c===null?(a=c=m,i=s):c=c.next=m,K.lanes|=f,Or|=f;u=u.next}while(u!==null&&u!==e);if(c===null?i=s:c.next=a,!Ut(s,t.memoizedState)&&(Oe=!0,l&&(n=os,n!==null)))throw n;t.memoizedState=s,t.baseState=i,t.baseQueue=c,r.lastRenderedState=s}return o===null&&(r.lanes=0),[t.memoizedState,r.dispatch]}function Cf(t){var e=Ce(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var r=n.dispatch,o=n.pending,s=e.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do s=t(s,i.action),i=i.next;while(i!==o);Ut(s,e.memoizedState)||(Oe=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function xx(t,e,n){var r=K,o=Ce(),s=$;if(s){if(n===void 0)throw Error(I(407));n=n()}else n=e();var i=!Ut((le||o).memoizedState,n);if(i&&(o.memoizedState=n,Oe=!0),o=o.queue,yh(Ax.bind(null,r,o,t),[t]),o.getSnapshot!==e||i||De!==null&&De.memoizedState.tag&1){if(r.flags|=2048,hs(9,{destroy:void 0},vx.bind(null,r,o,n,e),null),fe===null)throw Error(I(349));s||(Yn&127)!==0||bx(r,e,n)}return n}function bx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=K.updateQueue,e===null?(e=fu(),K.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vx(t,e,n,r){e.value=n,e.getSnapshot=r,_x(e)&&wx(t)}function Ax(t,e,n){return n(function(){_x(e)&&wx(t)})}function _x(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ut(t,n)}catch{return!0}}function wx(t){var e=go(t,2);e!==null&&_t(e,t,2)}function bm(t){var e=lt();if(typeof t=="function"){var n=t;if(t=n(),lo){xr(!0);try{n()}finally{xr(!1)}}}return e.memoizedState=e.baseState=t,e.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:t},e}function Tx(t,e,n,r){return t.baseState=n,gh(t,le,typeof r=="function"?r:Qn)}function jw(t,e,n,r,o){if(du(t))throw Error(I(485));if(t=e.action,t!==null){var s={payload:o,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(i){s.listeners.push(i)}};H.T!==null?n(!0):s.isTransition=!1,r(s),n=e.pending,n===null?(s.next=e.pending=s,Bx(e,s)):(s.next=n.next,e.pending=n.next=s)}}function Bx(t,e){var n=e.action,r=e.payload,o=t.state;if(e.isTransition){var s=H.T,i={};H.T=i;try{var a=n(o,r),c=H.S;c!==null&&c(i,a),T0(t,e,a)}catch(u){vm(t,e,u)}finally{s!==null&&i.types!==null&&(s.types=i.types),H.T=s}}else try{s=n(o,r),T0(t,e,s)}catch(u){vm(t,e,u)}}function T0(t,e,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(r){B0(t,e,r)},function(r){return vm(t,e,r)}):B0(t,e,n)}function B0(t,e,n){e.status="fulfilled",e.value=n,Ex(e),t.state=n,e=t.pending,e!==null&&(n=e.next,n===e?t.pending=null:(n=n.next,e.next=n,Bx(t,n)))}function vm(t,e,n){var r=t.pending;if(t.pending=null,r!==null){r=r.next;do e.status="rejected",e.reason=n,Ex(e),e=e.next;while(e!==r)}t.action=null}function Ex(t){t=t.listeners;for(var e=0;e<t.length;e++)(0,t[e])()}function Sx(t,e){return e}function E0(t,e){if($){var n=fe.formState;if(n!==null){e:{var r=K;if($){if(xe){t:{for(var o=xe,s=Qt;o.nodeType!==8;){if(!s){o=null;break t}if(o=$t(o.nextSibling),o===null){o=null;break t}}s=o.data,o=s==="F!"||s==="F"?o:null}if(o){xe=$t(o.nextSibling),r=o.data==="F!";break e}}kr(r)}r=!1}r&&(e=n[0])}}return n=lt(),n.memoizedState=n.baseState=e,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Sx,lastRenderedState:e},n.queue=r,n=Px.bind(null,K,r),r.dispatch=n,r=bm(!1),s=Ah.bind(null,K,!1,r.queue),r=lt(),o={state:e,dispatch:null,action:t,pending:null},r.queue=o,n=jw.bind(null,K,o,s,n),o.dispatch=n,r.memoizedState=t,[e,n,!1]}function S0(t){var e=Ce();return Mx(e,le,t)}function Mx(t,e,n){if(e=gh(t,e,Sx)[0],t=vc(Qn)[0],typeof e=="object"&&e!==null&&typeof e.then=="function")try{var r=aa(e)}catch(i){throw i===_s?lu:i}else r=e;e=Ce();var o=e.queue,s=o.dispatch;return n!==e.memoizedState&&(K.flags|=2048,hs(9,{destroy:void 0},Kw.bind(null,o,n),null)),[r,s,t]}function Kw(t,e){t.action=e}function M0(t){var e=Ce(),n=le;if(n!==null)return Mx(e,n,t);Ce(),e=e.memoizedState,n=Ce();var r=n.queue.dispatch;return n.memoizedState=t,[e,r,!1]}function hs(t,e,n,r){return t={tag:t,create:n,deps:r,inst:e,next:null},e=K.updateQueue,e===null&&(e=fu(),K.updateQueue=e),n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Cx(){return Ce().memoizedState}function Ac(t,e,n,r){var o=lt();K.flags|=t,o.memoizedState=hs(1|e,{destroy:void 0},n,r===void 0?null:r)}function hu(t,e,n,r){var o=Ce();r=r===void 0?null:r;var s=o.memoizedState.inst;le!==null&&r!==null&&lh(r,le.memoizedState.deps)?o.memoizedState=hs(e,s,n,r):(K.flags|=t,o.memoizedState=hs(1|e,s,n,r))}function C0(t,e){Ac(8390656,8,t,e)}function yh(t,e){hu(2048,8,t,e)}function Jw(t){K.flags|=4;var e=K.updateQueue;if(e===null)e=fu(),K.updateQueue=e,e.events=[t];else{var n=e.events;n===null?e.events=[t]:n.push(t)}}function Vx(t){var e=Ce().memoizedState;return Jw({ref:e,nextImpl:t}),function(){if((ne&2)!==0)throw Error(I(440));return e.impl.apply(void 0,arguments)}}function Rx(t,e){return hu(4,2,t,e)}function Dx(t,e){return hu(4,4,t,e)}function kx(t,e){if(typeof e=="function"){t=t();var n=e(t);return function(){typeof n=="function"?n():e(null)}}if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ix(t,e,n){n=n!=null?n.concat([t]):null,hu(4,4,kx.bind(null,e,t),n)}function xh(){}function Ox(t,e){var n=Ce();e=e===void 0?null:e;var r=n.memoizedState;return e!==null&&lh(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ux(t,e){var n=Ce();e=e===void 0?null:e;var r=n.memoizedState;if(e!==null&&lh(e,r[1]))return r[0];if(r=t(),lo){xr(!0);try{t()}finally{xr(!1)}}return n.memoizedState=[r,e],r}function bh(t,e,n){return n===void 0||(Yn&1073741824)!==0&&(W&261930)===0?t.memoizedState=e:(t.memoizedState=n,t=T1(),K.lanes|=t,Or|=t,n)}function Gx(t,e,n,r){return Ut(n,e)?n:ms.current!==null?(t=bh(t,n,r),Ut(t,e)||(Oe=!0),t):(Yn&42)===0||(Yn&1073741824)!==0&&(W&261930)===0?(Oe=!0,t.memoizedState=n):(t=T1(),K.lanes|=t,Or|=t,e)}function Lx(t,e,n,r,o){var s=re.p;re.p=s!==0&&8>s?s:8;var i=H.T,a={};H.T=a,Ah(t,!1,e,n);try{var c=o(),u=H.S;if(u!==null&&u(a,c),c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=zw(c,r);Ii(t,e,l,Ot(t))}else Ii(t,e,r,Ot(t))}catch(f){Ii(t,e,{then:function(){},status:"rejected",reason:f},Ot())}finally{re.p=s,i!==null&&a.types!==null&&(i.types=a.types),H.T=i}}function qw(){}function Am(t,e,n,r){if(t.tag!==5)throw Error(I(476));var o=Fx(t).queue;Lx(t,o,e,no,n===null?qw:function(){return Nx(t),n(r)})}function Fx(t){var e=t.memoizedState;if(e!==null)return e;e={memoizedState:no,baseState:no,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:no},next:null};var n={};return e.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qn,lastRenderedState:n},next:null},t.memoizedState=e,t=t.alternate,t!==null&&(t.memoizedState=e),e}function Nx(t){var e=Fx(t);e.next===null&&(e=t.alternate.memoizedState),Ii(t,e.next.queue,{},Ot())}function vh(){return Qe(Wi)}function zx(){return Ce().memoizedState}function Hx(){return Ce().memoizedState}function Xw(t){for(var e=t.return;e!==null;){switch(e.tag){case 24:case 3:var n=Ot();t=Br(n);var r=Er(e,t,n);r!==null&&(_t(r,e,n),Ri(r,e,n)),e={cache:sh()},t.payload=e;return}e=e.return}}function Yw(t,e,n){var r=Ot();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},du(t)?jx(e,n):(n=th(t,e,n,r),n!==null&&(_t(n,t,r),Kx(n,e,r)))}function Px(t,e,n){var r=Ot();Ii(t,e,n,r)}function Ii(t,e,n,r){var o={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(du(t))jx(e,o);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var i=e.lastRenderedState,a=s(i,n);if(o.hasEagerState=!0,o.eagerState=a,Ut(a,i))return uu(t,e,o,0),fe===null&&cu(),!1}catch{}finally{}if(n=th(t,e,o,r),n!==null)return _t(n,t,r),Kx(n,e,r),!0}return!1}function Ah(t,e,n,r){if(r={lane:2,revertLane:Vh(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},du(t)){if(e)throw Error(I(479))}else e=th(t,n,r,2),e!==null&&_t(e,t,2)}function du(t){var e=t.alternate;return t===K||e!==null&&e===K}function jx(t,e){is=zc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Kx(t,e,n){if((n&4194048)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Vy(t,n)}}var Xi={readContext:Qe,use:mu,useCallback:Be,useContext:Be,useEffect:Be,useImperativeHandle:Be,useLayoutEffect:Be,useInsertionEffect:Be,useMemo:Be,useReducer:Be,useRef:Be,useState:Be,useDebugValue:Be,useDeferredValue:Be,useTransition:Be,useSyncExternalStore:Be,useId:Be,useHostTransitionStatus:Be,useFormState:Be,useActionState:Be,useOptimistic:Be,useMemoCache:Be,useCacheRefresh:Be};Xi.useEffectEvent=Be;var Jx={readContext:Qe,use:mu,useCallback:function(t,e){return lt().memoizedState=[t,e===void 0?null:e],t},useContext:Qe,useEffect:C0,useImperativeHandle:function(t,e,n){n=n!=null?n.concat([t]):null,Ac(4194308,4,kx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ac(4194308,4,t,e)},useInsertionEffect:function(t,e){Ac(4,2,t,e)},useMemo:function(t,e){var n=lt();e=e===void 0?null:e;var r=t();if(lo){xr(!0);try{t()}finally{xr(!1)}}return n.memoizedState=[r,e],r},useReducer:function(t,e,n){var r=lt();if(n!==void 0){var o=n(e);if(lo){xr(!0);try{n(e)}finally{xr(!1)}}}else o=e;return r.memoizedState=r.baseState=o,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:o},r.queue=t,t=t.dispatch=Yw.bind(null,K,t),[r.memoizedState,t]},useRef:function(t){var e=lt();return t={current:t},e.memoizedState=t},useState:function(t){t=bm(t);var e=t.queue,n=Px.bind(null,K,e);return e.dispatch=n,[t.memoizedState,n]},useDebugValue:xh,useDeferredValue:function(t,e){var n=lt();return bh(n,t,e)},useTransition:function(){var t=bm(!1);return t=Lx.bind(null,K,t.queue,!0,!1),lt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,e,n){var r=K,o=lt();if($){if(n===void 0)throw Error(I(407));n=n()}else{if(n=e(),fe===null)throw Error(I(349));(W&127)!==0||bx(r,e,n)}o.memoizedState=n;var s={value:n,getSnapshot:e};return o.queue=s,C0(Ax.bind(null,r,s,t),[t]),r.flags|=2048,hs(9,{destroy:void 0},vx.bind(null,r,s,n,e),null),n},useId:function(){var t=lt(),e=fe.identifierPrefix;if($){var n=vn,r=bn;n=(r&~(1<<32-It(r)-1)).toString(32)+n,e="_"+e+"R_"+n,n=Hc++,0<n&&(e+="H"+n.toString(32)),e+="_"}else n=Hw++,e="_"+e+"r_"+n.toString(32)+"_";return t.memoizedState=e},useHostTransitionStatus:vh,useFormState:E0,useActionState:E0,useOptimistic:function(t){var e=lt();e.memoizedState=e.baseState=t;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return e.queue=n,e=Ah.bind(null,K,!0,n),n.dispatch=e,[t,e]},useMemoCache:ph,useCacheRefresh:function(){return lt().memoizedState=Xw.bind(null,K)},useEffectEvent:function(t){var e=lt(),n={impl:t};return e.memoizedState=n,function(){if((ne&2)!==0)throw Error(I(440));return n.impl.apply(void 0,arguments)}}},_h={readContext:Qe,use:mu,useCallback:Ox,useContext:Qe,useEffect:yh,useImperativeHandle:Ix,useInsertionEffect:Rx,useLayoutEffect:Dx,useMemo:Ux,useReducer:vc,useRef:Cx,useState:function(){return vc(Qn)},useDebugValue:xh,useDeferredValue:function(t,e){var n=Ce();return Gx(n,le.memoizedState,t,e)},useTransition:function(){var t=vc(Qn)[0],e=Ce().memoizedState;return[typeof t=="boolean"?t:aa(t),e]},useSyncExternalStore:xx,useId:zx,useHostTransitionStatus:vh,useFormState:S0,useActionState:S0,useOptimistic:function(t,e){var n=Ce();return Tx(n,le,t,e)},useMemoCache:ph,useCacheRefresh:Hx};_h.useEffectEvent=Vx;var qx={readContext:Qe,use:mu,useCallback:Ox,useContext:Qe,useEffect:yh,useImperativeHandle:Ix,useInsertionEffect:Rx,useLayoutEffect:Dx,useMemo:Ux,useReducer:Cf,useRef:Cx,useState:function(){return Cf(Qn)},useDebugValue:xh,useDeferredValue:function(t,e){var n=Ce();return le===null?bh(n,t,e):Gx(n,le.memoizedState,t,e)},useTransition:function(){var t=Cf(Qn)[0],e=Ce().memoizedState;return[typeof t=="boolean"?t:aa(t),e]},useSyncExternalStore:xx,useId:zx,useHostTransitionStatus:vh,useFormState:M0,useActionState:M0,useOptimistic:function(t,e){var n=Ce();return le!==null?Tx(n,le,t,e):(n.baseState=t,[t,n.queue.dispatch])},useMemoCache:ph,useCacheRefresh:Hx};qx.useEffectEvent=Vx;function Vf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _m={enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ot(),o=Br(r);o.payload=e,n!=null&&(o.callback=n),e=Er(t,o,r),e!==null&&(_t(e,t,r),Ri(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ot(),o=Br(r);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Er(t,o,r),e!==null&&(_t(e,t,r),Ri(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ot(),r=Br(n);r.tag=2,e!=null&&(r.callback=e),e=Er(t,r,n),e!==null&&(_t(e,t,n),Ri(e,t,n))}};function V0(t,e,n,r,o,s,i){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,i):e.prototype&&e.prototype.isPureReactComponent?!Pi(n,r)||!Pi(o,s):!0}function R0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_m.enqueueReplaceState(e,e.state,null)}function fo(t,e){var n=e;if("ref"in e){n={};for(var r in e)r!=="ref"&&(n[r]=e[r])}if(t=t.defaultProps){n===e&&(n=be({},n));for(var o in t)n[o]===void 0&&(n[o]=t[o])}return n}function Xx(t){Ic(t)}function Yx(t){console.error(t)}function Qx(t){Ic(t)}function Pc(t,e){try{var n=t.onUncaughtError;n(e.value,{componentStack:e.stack})}catch(r){setTimeout(function(){throw r})}}function D0(t,e,n){try{var r=t.onCaughtError;r(n.value,{componentStack:n.stack,errorBoundary:e.tag===1?e.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function wm(t,e,n){return n=Br(n),n.tag=3,n.payload={element:null},n.callback=function(){Pc(t,e)},n}function Wx(t){return t=Br(t),t.tag=3,t}function $x(t,e,n,r){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var s=r.value;t.payload=function(){return o(s)},t.callback=function(){D0(e,n,r)}}var i=n.stateNode;i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){D0(e,n,r),typeof o!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var a=r.stack;this.componentDidCatch(r.value,{componentStack:a!==null?a:""})})}function Qw(t,e,n,r,o){if(n.flags|=32768,r!==null&&typeof r=="object"&&typeof r.then=="function"){if(e=n.alternate,e!==null&&As(e,n,o,!0),n=Gt.current,n!==null){switch(n.tag){case 31:case 13:return Wt===null?Xc():n.alternate===null&&Ee===0&&(Ee=3),n.flags&=-257,n.flags|=65536,n.lanes=o,r===Lc?n.flags|=16384:(e=n.updateQueue,e===null?n.updateQueue=new Set([r]):e.add(r),zf(t,r,o)),!1;case 22:return n.flags|=65536,r===Lc?n.flags|=16384:(e=n.updateQueue,e===null?(e={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=e):(n=e.retryQueue,n===null?e.retryQueue=new Set([r]):n.add(r)),zf(t,r,o)),!1}throw Error(I(435,n.tag))}return zf(t,r,o),Xc(),!1}if($)return e=Gt.current,e!==null?((e.flags&65536)===0&&(e.flags|=256),e.flags|=65536,e.lanes=o,r!==lm&&(t=Error(I(422),{cause:r}),Ki(Yt(t,n)))):(r!==lm&&(e=Error(I(423),{cause:r}),Ki(Yt(e,n))),t=t.current.alternate,t.flags|=65536,o&=-o,t.lanes|=o,r=Yt(r,n),o=wm(t.stateNode,r,o),Mf(t,o),Ee!==4&&(Ee=2)),!1;var s=Error(I(520),{cause:r});if(s=Yt(s,n),Gi===null?Gi=[s]:Gi.push(s),Ee!==4&&(Ee=2),e===null)return!0;r=Yt(r,n),n=e;do{switch(n.tag){case 3:return n.flags|=65536,t=o&-o,n.lanes|=t,t=wm(n.stateNode,r,t),Mf(n,t),!1;case 1:if(e=n.type,s=n.stateNode,(n.flags&128)===0&&(typeof e.getDerivedStateFromError=="function"||s!==null&&typeof s.componentDidCatch=="function"&&(Sr===null||!Sr.has(s))))return n.flags|=65536,o&=-o,n.lanes|=o,o=Wx(o),$x(o,t,n,r),Mf(n,o),!1}n=n.return}while(n!==null);return!1}var wh=Error(I(461)),Oe=!1;function qe(t,e,n,r){e.child=t===null?mx(e,null,n,r):uo(e,t.child,n,r)}function k0(t,e,n,r,o){n=n.render;var s=e.ref;if("ref"in r){var i={};for(var a in r)a!=="ref"&&(i[a]=r[a])}else i=r;return co(e),r=fh(t,e,n,i,s,o),a=mh(),t!==null&&!Oe?(hh(t,e,o),Wn(t,e,o)):($&&a&&rh(e),e.flags|=1,qe(t,e,r,o),e.child)}function I0(t,e,n,r,o){if(t===null){var s=n.type;return typeof s=="function"&&!nh(s)&&s.defaultProps===void 0&&n.compare===null?(e.tag=15,e.type=s,Zx(t,e,s,r,o)):(t=xc(n.type,null,r,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!Th(t,o)){var i=s.memoizedProps;if(n=n.compare,n=n!==null?n:Pi,n(i,r)&&t.ref===e.ref)return Wn(t,e,o)}return e.flags|=1,t=Kn(s,r),t.ref=e.ref,t.return=e,e.child=t}function Zx(t,e,n,r,o){if(t!==null){var s=t.memoizedProps;if(Pi(s,r)&&t.ref===e.ref)if(Oe=!1,e.pendingProps=r=s,Th(t,o))(t.flags&131072)!==0&&(Oe=!0);else return e.lanes=t.lanes,Wn(t,e,o)}return Tm(t,e,n,r,o)}function e1(t,e,n,r){var o=r.children,s=t!==null?t.memoizedState:null;if(t===null&&e.stateNode===null&&(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.mode==="hidden"){if((e.flags&128)!==0){if(s=s!==null?s.baseLanes|n:n,t!==null){for(r=e.child=t.child,o=0;r!==null;)o=o|r.lanes|r.childLanes,r=r.sibling;r=o&~s}else r=0,e.child=null;return O0(t,e,s,n,r)}if((n&536870912)!==0)e.memoizedState={baseLanes:0,cachePool:null},t!==null&&bc(e,s!==null?s.cachePool:null),s!==null?w0(e,s):ym(),px(e);else return r=e.lanes=536870912,O0(t,e,s!==null?s.baseLanes|n:n,n,r)}else s!==null?(bc(e,s.cachePool),w0(e,s),gr(e),e.memoizedState=null):(t!==null&&bc(e,null),ym(),gr(e));return qe(t,e,o,n),e.child}function Bi(t,e){return t!==null&&t.tag===22||e.stateNode!==null||(e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),e.sibling}function O0(t,e,n,r,o){var s=ih();return s=s===null?null:{parent:Ie._currentValue,pool:s},e.memoizedState={baseLanes:n,cachePool:s},t!==null&&bc(e,null),ym(),px(e),t!==null&&As(t,e,r,!0),e.childLanes=o,null}function _c(t,e){return e=jc({mode:e.mode,children:e.children},t.mode),e.ref=t.ref,t.child=e,e.return=t,e}function U0(t,e,n){return uo(e,t.child,null,n),t=_c(e,e.pendingProps),t.flags|=2,Ct(e),e.memoizedState=null,t}function Ww(t,e,n){var r=e.pendingProps,o=(e.flags&128)!==0;if(e.flags&=-129,t===null){if($){if(r.mode==="hidden")return t=_c(e,r),e.lanes=536870912,Bi(null,t);if(xm(e),(t=xe)?(t=J1(t,Qt),t=t!==null&&t.data==="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Dr!==null?{id:bn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},n=sx(t),n.return=e,e.child=n,Ye=e,xe=null)):t=null,t===null)throw kr(e);return e.lanes=536870912,null}return _c(e,r)}var s=t.memoizedState;if(s!==null){var i=s.dehydrated;if(xm(e),o)if(e.flags&256)e.flags&=-257,e=U0(t,e,n);else if(e.memoizedState!==null)e.child=t.child,e.flags|=128,e=null;else throw Error(I(558));else if(Oe||As(t,e,n,!1),o=(n&t.childLanes)!==0,Oe||o){if(r=fe,r!==null&&(i=Ry(r,n),i!==0&&i!==s.retryLane))throw s.retryLane=i,go(t,i),_t(r,t,i),wh;Xc(),e=U0(t,e,n)}else t=s.treeContext,xe=$t(i.nextSibling),Ye=e,$=!0,Tr=null,Qt=!1,t!==null&&ax(e,t),e=_c(e,r),e.flags|=4096;return e}return t=Kn(t.child,{mode:r.mode,children:r.children}),t.ref=e.ref,e.child=t,t.return=e,t}function wc(t,e){var n=e.ref;if(n===null)t!==null&&t.ref!==null&&(e.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(I(284));(t===null||t.ref!==n)&&(e.flags|=4194816)}}function Tm(t,e,n,r,o){return co(e),n=fh(t,e,n,r,void 0,o),r=mh(),t!==null&&!Oe?(hh(t,e,o),Wn(t,e,o)):($&&r&&rh(e),e.flags|=1,qe(t,e,n,o),e.child)}function G0(t,e,n,r,o,s){return co(e),e.updateQueue=null,n=yx(e,r,n,o),gx(t),r=mh(),t!==null&&!Oe?(hh(t,e,s),Wn(t,e,s)):($&&r&&rh(e),e.flags|=1,qe(t,e,n,s),e.child)}function L0(t,e,n,r,o){if(co(e),e.stateNode===null){var s=Wo,i=n.contextType;typeof i=="object"&&i!==null&&(s=Qe(i)),s=new n(r,s),e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=_m,e.stateNode=s,s._reactInternals=e,s=e.stateNode,s.props=r,s.state=e.memoizedState,s.refs={},ch(e),i=n.contextType,s.context=typeof i=="object"&&i!==null?Qe(i):Wo,s.state=e.memoizedState,i=n.getDerivedStateFromProps,typeof i=="function"&&(Vf(e,n,i,r),s.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(i=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),i!==s.state&&_m.enqueueReplaceState(s,s.state,null),ki(e,r,s,o),Di(),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!0}else if(t===null){s=e.stateNode;var a=e.memoizedProps,c=fo(n,a);s.props=c;var u=s.context,l=n.contextType;i=Wo,typeof l=="object"&&l!==null&&(i=Qe(l));var f=n.getDerivedStateFromProps;l=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function",a=e.pendingProps!==a,l||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a||u!==i)&&R0(e,s,r,i),hr=!1;var m=e.memoizedState;s.state=m,ki(e,r,s,o),Di(),u=e.memoizedState,a||m!==u||hr?(typeof f=="function"&&(Vf(e,n,f,r),u=e.memoizedState),(c=hr||V0(e,n,c,r,m,u,i))?(l||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=i,r=c):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,pm(t,e),i=e.memoizedProps,l=fo(n,i),s.props=l,f=e.pendingProps,m=s.context,u=n.contextType,c=Wo,typeof u=="object"&&u!==null&&(c=Qe(u)),a=n.getDerivedStateFromProps,(u=typeof a=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(i!==f||m!==c)&&R0(e,s,r,c),hr=!1,m=e.memoizedState,s.state=m,ki(e,r,s,o),Di();var d=e.memoizedState;i!==f||m!==d||hr||t!==null&&t.dependencies!==null&&Gc(t.dependencies)?(typeof a=="function"&&(Vf(e,n,a,r),d=e.memoizedState),(l=hr||V0(e,n,l,r,m,d,c)||t!==null&&t.dependencies!==null&&Gc(t.dependencies))?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,d,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,d,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||i===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=d),s.props=r,s.state=d,s.context=c,r=l):(typeof s.componentDidUpdate!="function"||i===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||i===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return s=r,wc(t,e),r=(e.flags&128)!==0,s||r?(s=e.stateNode,n=r&&typeof n.getDerivedStateFromError!="function"?null:s.render(),e.flags|=1,t!==null&&r?(e.child=uo(e,t.child,null,o),e.child=uo(e,null,n,o)):qe(t,e,n,o),e.memoizedState=s.state,t=e.child):t=Wn(t,e,o),t}function F0(t,e,n,r){return ao(),e.flags|=256,qe(t,e,n,r),e.child}var Rf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Df(t){return{baseLanes:t,cachePool:ux()}}function kf(t,e,n){return t=t!==null?t.childLanes&~n:0,e&&(t|=Rt),t}function t1(t,e,n){var r=e.pendingProps,o=!1,s=(e.flags&128)!==0,i;if((i=s)||(i=t!==null&&t.memoizedState===null?!1:(Me.current&2)!==0),i&&(o=!0,e.flags&=-129),i=(e.flags&32)!==0,e.flags&=-33,t===null){if($){if(o?pr(e):gr(e),(t=xe)?(t=J1(t,Qt),t=t!==null&&t.data!=="&"?t:null,t!==null&&(e.memoizedState={dehydrated:t,treeContext:Dr!==null?{id:bn,overflow:vn}:null,retryLane:536870912,hydrationErrors:null},n=sx(t),n.return=e,e.child=n,Ye=e,xe=null)):t=null,t===null)throw kr(e);return Lm(t)?e.lanes=32:e.lanes=536870912,null}var a=r.children;return r=r.fallback,o?(gr(e),o=e.mode,a=jc({mode:"hidden",children:a},o),r=ro(r,o,n,null),a.return=e,r.return=e,a.sibling=r,e.child=a,r=e.child,r.memoizedState=Df(n),r.childLanes=kf(t,i,n),e.memoizedState=Rf,Bi(null,r)):(pr(e),Bm(e,a))}var c=t.memoizedState;if(c!==null&&(a=c.dehydrated,a!==null)){if(s)e.flags&256?(pr(e),e.flags&=-257,e=If(t,e,n)):e.memoizedState!==null?(gr(e),e.child=t.child,e.flags|=128,e=null):(gr(e),a=r.fallback,o=e.mode,r=jc({mode:"visible",children:r.children},o),a=ro(a,o,n,null),a.flags|=2,r.return=e,a.return=e,r.sibling=a,e.child=r,uo(e,t.child,null,n),r=e.child,r.memoizedState=Df(n),r.childLanes=kf(t,i,n),e.memoizedState=Rf,e=Bi(null,r));else if(pr(e),Lm(a)){if(i=a.nextSibling&&a.nextSibling.dataset,i)var u=i.dgst;i=u,r=Error(I(419)),r.stack="",r.digest=i,Ki({value:r,source:null,stack:null}),e=If(t,e,n)}else if(Oe||As(t,e,n,!1),i=(n&t.childLanes)!==0,Oe||i){if(i=fe,i!==null&&(r=Ry(i,n),r!==0&&r!==c.retryLane))throw c.retryLane=r,go(t,r),_t(i,t,r),wh;Gm(a)||Xc(),e=If(t,e,n)}else Gm(a)?(e.flags|=192,e.child=t.child,e=null):(t=c.treeContext,xe=$t(a.nextSibling),Ye=e,$=!0,Tr=null,Qt=!1,t!==null&&ax(e,t),e=Bm(e,r.children),e.flags|=4096);return e}return o?(gr(e),a=r.fallback,o=e.mode,c=t.child,u=c.sibling,r=Kn(c,{mode:"hidden",children:r.children}),r.subtreeFlags=c.subtreeFlags&65011712,u!==null?a=Kn(u,a):(a=ro(a,o,n,null),a.flags|=2),a.return=e,r.return=e,r.sibling=a,e.child=r,Bi(null,r),r=e.child,a=t.child.memoizedState,a===null?a=Df(n):(o=a.cachePool,o!==null?(c=Ie._currentValue,o=o.parent!==c?{parent:c,pool:c}:o):o=ux(),a={baseLanes:a.baseLanes|n,cachePool:o}),r.memoizedState=a,r.childLanes=kf(t,i,n),e.memoizedState=Rf,Bi(t.child,r)):(pr(e),n=t.child,t=n.sibling,n=Kn(n,{mode:"visible",children:r.children}),n.return=e,n.sibling=null,t!==null&&(i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=n,e.memoizedState=null,n)}function Bm(t,e){return e=jc({mode:"visible",children:e},t.mode),e.return=t,t.child=e}function jc(t,e){return t=Vt(22,t,null,e),t.lanes=0,t}function If(t,e,n){return uo(e,t.child,null,n),t=Bm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function N0(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),mm(t.return,e,n)}function Of(t,e,n,r,o,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o,treeForkCount:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=o,i.treeForkCount=s)}function n1(t,e,n){var r=e.pendingProps,o=r.revealOrder,s=r.tail;r=r.children;var i=Me.current,a=(i&2)!==0;if(a?(i=i&1|2,e.flags|=128):i&=1,he(Me,i),qe(t,e,r,n),r=$?ji:0,!a&&t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&N0(t,n,e);else if(t.tag===19)N0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Nc(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Of(e,!1,o,n,s,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Nc(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Of(e,!0,n,null,s,r);break;case"together":Of(e,!1,null,null,void 0,r);break;default:e.memoizedState=null}return e.child}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Or|=e.lanes,(n&e.childLanes)===0)if(t!==null){if(As(t,e,n,!1),(n&e.childLanes)===0)return null}else return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,n=Kn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Kn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Th(t,e){return(t.lanes&e)!==0?!0:(t=t.dependencies,!!(t!==null&&Gc(t)))}function $w(t,e,n){switch(e.tag){case 3:Vc(e,e.stateNode.containerInfo),dr(e,Ie,t.memoizedState.cache),ao();break;case 27:case 5:Zf(e);break;case 4:Vc(e,e.stateNode.containerInfo);break;case 10:dr(e,e.type,e.memoizedProps.value);break;case 31:if(e.memoizedState!==null)return e.flags|=128,xm(e),null;break;case 13:var r=e.memoizedState;if(r!==null)return r.dehydrated!==null?(pr(e),e.flags|=128,null):(n&e.child.childLanes)!==0?t1(t,e,n):(pr(e),t=Wn(t,e,n),t!==null?t.sibling:null);pr(e);break;case 19:var o=(t.flags&128)!==0;if(r=(n&e.childLanes)!==0,r||(As(t,e,n,!1),r=(n&e.childLanes)!==0),o){if(r)return n1(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),he(Me,Me.current),r)break;return null;case 22:return e.lanes=0,e1(t,e,n,e.pendingProps);case 24:dr(e,Ie,t.memoizedState.cache)}return Wn(t,e,n)}function r1(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps)Oe=!0;else{if(!Th(t,n)&&(e.flags&128)===0)return Oe=!1,$w(t,e,n);Oe=(t.flags&131072)!==0}else Oe=!1,$&&(e.flags&1048576)!==0&&ix(e,ji,e.index);switch(e.lanes=0,e.tag){case 16:e:{var r=e.pendingProps;if(t=eo(e.elementType),e.type=t,typeof t=="function")nh(t)?(r=fo(t,r),e.tag=1,e=L0(null,e,t,r,n)):(e.tag=0,e=Tm(null,e,t,r,n));else{if(t!=null){var o=t.$$typeof;if(o===Hm){e.tag=11,e=k0(null,e,t,r,n);break e}else if(o===Pm){e.tag=14,e=I0(null,e,t,r,n);break e}}throw e=Wf(t)||t,Error(I(306,e,""))}}return e;case 0:return Tm(t,e,e.type,e.pendingProps,n);case 1:return r=e.type,o=fo(r,e.pendingProps),L0(t,e,r,o,n);case 3:e:{if(Vc(e,e.stateNode.containerInfo),t===null)throw Error(I(387));r=e.pendingProps;var s=e.memoizedState;o=s.element,pm(t,e),ki(e,r,null,n);var i=e.memoizedState;if(r=i.cache,dr(e,Ie,r),r!==s.cache&&hm(e,[Ie],n,!0),Di(),r=i.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:i.cache},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){e=F0(t,e,r,n);break e}else if(r!==o){o=Yt(Error(I(424)),e),Ki(o),e=F0(t,e,r,n);break e}else{switch(t=e.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(xe=$t(t.firstChild),Ye=e,$=!0,Tr=null,Qt=!0,n=mx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ao(),r===o){e=Wn(t,e,n);break e}qe(t,e,r,n)}e=e.child}return e;case 26:return wc(t,e),t===null?(n=cy(e.type,null,e.pendingProps,null))?e.memoizedState=n:$||(n=e.type,t=e.pendingProps,r=$c(wr.current).createElement(n),r[Xe]=e,r[wt]=t,We(r,n,t),Pe(r),e.stateNode=r):e.memoizedState=cy(e.type,t.memoizedProps,e.pendingProps,t.memoizedState),null;case 27:return Zf(e),t===null&&$&&(r=e.stateNode=q1(e.type,e.pendingProps,wr.current),Ye=e,Qt=!0,o=xe,Gr(e.type)?(Fm=o,xe=$t(r.firstChild)):xe=o),qe(t,e,e.pendingProps.children,n),wc(t,e),t===null&&(e.flags|=4194304),e.child;case 5:return t===null&&$&&((o=r=xe)&&(r=E3(r,e.type,e.pendingProps,Qt),r!==null?(e.stateNode=r,Ye=e,xe=$t(r.firstChild),Qt=!1,o=!0):o=!1),o||kr(e)),Zf(e),o=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,r=s.children,Om(o,s)?r=null:i!==null&&Om(o,i)&&(e.flags|=32),e.memoizedState!==null&&(o=fh(t,e,Pw,null,null,n),Wi._currentValue=o),wc(t,e),qe(t,e,r,n),e.child;case 6:return t===null&&$&&((t=n=xe)&&(n=S3(n,e.pendingProps,Qt),n!==null?(e.stateNode=n,Ye=e,xe=null,t=!0):t=!1),t||kr(e)),null;case 13:return t1(t,e,n);case 4:return Vc(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=uo(e,null,r,n):qe(t,e,r,n),e.child;case 11:return k0(t,e,e.type,e.pendingProps,n);case 7:return qe(t,e,e.pendingProps,n),e.child;case 8:return qe(t,e,e.pendingProps.children,n),e.child;case 12:return qe(t,e,e.pendingProps.children,n),e.child;case 10:return r=e.pendingProps,dr(e,e.type,r.value),qe(t,e,r.children,n),e.child;case 9:return o=e.type._context,r=e.pendingProps.children,co(e),o=Qe(o),r=r(o),e.flags|=1,qe(t,e,r,n),e.child;case 14:return I0(t,e,e.type,e.pendingProps,n);case 15:return Zx(t,e,e.type,e.pendingProps,n);case 19:return n1(t,e,n);case 31:return Ww(t,e,n);case 22:return e1(t,e,n,e.pendingProps);case 24:return co(e),r=Qe(Ie),t===null?(o=ih(),o===null&&(o=fe,s=sh(),o.pooledCache=s,s.refCount++,s!==null&&(o.pooledCacheLanes|=n),o=s),e.memoizedState={parent:r,cache:o},ch(e),dr(e,Ie,o)):((t.lanes&n)!==0&&(pm(t,e),ki(e,null,null,n),Di()),o=t.memoizedState,s=e.memoizedState,o.parent!==r?(o={parent:r,cache:r},e.memoizedState=o,e.lanes===0&&(e.memoizedState=e.updateQueue.baseState=o),dr(e,Ie,r)):(r=s.cache,dr(e,Ie,r),r!==o.cache&&hm(e,[Ie],n,!0))),qe(t,e,e.pendingProps.children,n),e.child;case 29:throw e.pendingProps}throw Error(I(156,e.tag))}function Un(t){t.flags|=4}function Uf(t,e,n,r,o){if((e=(t.mode&32)!==0)&&(e=!1),e){if(t.flags|=16777216,(o&335544128)===o)if(t.stateNode.complete)t.flags|=8192;else if(S1())t.flags|=8192;else throw so=Lc,ah}else t.flags&=-16777217}function z0(t,e){if(e.type!=="stylesheet"||(e.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Q1(e))if(S1())t.flags|=8192;else throw so=Lc,ah}function ac(t,e){e!==null&&(t.flags|=4),t.flags&16384&&(e=t.tag!==22?My():536870912,t.lanes|=e,ds|=e)}function xi(t,e){if(!$)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ye(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&65011712,r|=o.flags&65011712,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Zw(t,e,n){var r=e.pendingProps;switch(oh(e),e.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ye(e),null;case 1:return ye(e),null;case 3:return n=e.stateNode,r=null,t!==null&&(r=t.memoizedState.cache),e.memoizedState.cache!==r&&(e.flags|=2048),Jn(Ie),cs(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Fo(e)?Un(e):t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Sf())),ye(e),null;case 26:var o=e.type,s=e.memoizedState;return t===null?(Un(e),s!==null?(ye(e),z0(e,s)):(ye(e),Uf(e,o,null,r,n))):s?s!==t.memoizedState?(Un(e),ye(e),z0(e,s)):(ye(e),e.flags&=-16777217):(t=t.memoizedProps,t!==r&&Un(e),ye(e),Uf(e,o,t,r,n)),null;case 27:if(Rc(e),n=wr.current,o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&Un(e);else{if(!r){if(e.stateNode===null)throw Error(I(166));return ye(e),null}t=_n.current,Fo(e)?g0(e,t):(t=q1(o,r,n),e.stateNode=t,Un(e))}return ye(e),null;case 5:if(Rc(e),o=e.type,t!==null&&e.stateNode!=null)t.memoizedProps!==r&&Un(e);else{if(!r){if(e.stateNode===null)throw Error(I(166));return ye(e),null}if(s=_n.current,Fo(e))g0(e,s);else{var i=$c(wr.current);switch(s){case 1:s=i.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:s=i.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":s=i.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":s=i.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":s=i.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof r.is=="string"?i.createElement("select",{is:r.is}):i.createElement("select"),r.multiple?s.multiple=!0:r.size&&(s.size=r.size);break;default:s=typeof r.is=="string"?i.createElement(o,{is:r.is}):i.createElement(o)}}s[Xe]=e,s[wt]=r;e:for(i=e.child;i!==null;){if(i.tag===5||i.tag===6)s.appendChild(i.stateNode);else if(i.tag!==4&&i.tag!==27&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}e.stateNode=s;e:switch(We(s,o,r),o){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&Un(e)}}return ye(e),Uf(e,e.type,t===null?null:t.memoizedProps,e.pendingProps,n),null;case 6:if(t&&e.stateNode!=null)t.memoizedProps!==r&&Un(e);else{if(typeof r!="string"&&e.stateNode===null)throw Error(I(166));if(t=wr.current,Fo(e)){if(t=e.stateNode,n=e.memoizedProps,r=null,o=Ye,o!==null)switch(o.tag){case 27:case 5:r=o.memoizedProps}t[Xe]=e,t=!!(t.nodeValue===n||r!==null&&r.suppressHydrationWarning===!0||P1(t.nodeValue,n)),t||kr(e,!0)}else t=$c(t).createTextNode(r),t[Xe]=e,e.stateNode=t}return ye(e),null;case 31:if(n=e.memoizedState,t===null||t.memoizedState!==null){if(r=Fo(e),n!==null){if(t===null){if(!r)throw Error(I(318));if(t=e.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(557));t[Xe]=e}else ao(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;ye(e),t=!1}else n=Sf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=n),t=!0;if(!t)return e.flags&256?(Ct(e),e):(Ct(e),null);if((e.flags&128)!==0)throw Error(I(558))}return ye(e),null;case 13:if(r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(o=Fo(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(I(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(I(317));o[Xe]=e}else ao(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;ye(e),o=!1}else o=Sf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=o),o=!0;if(!o)return e.flags&256?(Ct(e),e):(Ct(e),null)}return Ct(e),(e.flags&128)!==0?(e.lanes=n,e):(n=r!==null,t=t!==null&&t.memoizedState!==null,n&&(r=e.child,o=null,r.alternate!==null&&r.alternate.memoizedState!==null&&r.alternate.memoizedState.cachePool!==null&&(o=r.alternate.memoizedState.cachePool.pool),s=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(s=r.memoizedState.cachePool.pool),s!==o&&(r.flags|=2048)),n!==t&&n&&(e.child.flags|=8192),ac(e,e.updateQueue),ye(e),null);case 4:return cs(),t===null&&Rh(e.stateNode.containerInfo),ye(e),null;case 10:return Jn(e.type),ye(e),null;case 19:if(je(Me),r=e.memoizedState,r===null)return ye(e),null;if(o=(e.flags&128)!==0,s=r.rendering,s===null)if(o)xi(r,!1);else{if(Ee!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(s=Nc(t),s!==null){for(e.flags|=128,xi(r,!1),t=s.updateQueue,e.updateQueue=t,ac(e,t),e.subtreeFlags=0,t=n,n=e.child;n!==null;)ox(n,t),n=n.sibling;return he(Me,Me.current&1|2),$&&Nn(e,r.treeForkCount),e.child}t=t.sibling}r.tail!==null&&Dt()>Jc&&(e.flags|=128,o=!0,xi(r,!1),e.lanes=4194304)}else{if(!o)if(t=Nc(s),t!==null){if(e.flags|=128,o=!0,t=t.updateQueue,e.updateQueue=t,ac(e,t),xi(r,!0),r.tail===null&&r.tailMode==="hidden"&&!s.alternate&&!$)return ye(e),null}else 2*Dt()-r.renderingStartTime>Jc&&n!==536870912&&(e.flags|=128,o=!0,xi(r,!1),e.lanes=4194304);r.isBackwards?(s.sibling=e.child,e.child=s):(t=r.last,t!==null?t.sibling=s:e.child=s,r.last=s)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Dt(),t.sibling=null,n=Me.current,he(Me,o?n&1|2:n&1),$&&Nn(e,r.treeForkCount),t):(ye(e),null);case 22:case 23:return Ct(e),uh(),r=e.memoizedState!==null,t!==null?t.memoizedState!==null!==r&&(e.flags|=8192):r&&(e.flags|=8192),r?(n&536870912)!==0&&(e.flags&128)===0&&(ye(e),e.subtreeFlags&6&&(e.flags|=8192)):ye(e),n=e.updateQueue,n!==null&&ac(e,n.retryQueue),n=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),r=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),r!==n&&(e.flags|=2048),t!==null&&je(oo),null;case 24:return n=null,t!==null&&(n=t.memoizedState.cache),e.memoizedState.cache!==n&&(e.flags|=2048),Jn(Ie),ye(e),null;case 25:return null;case 30:return null}throw Error(I(156,e.tag))}function e3(t,e){switch(oh(e),e.tag){case 1:return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jn(Ie),cs(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 26:case 27:case 5:return Rc(e),null;case 31:if(e.memoizedState!==null){if(Ct(e),e.alternate===null)throw Error(I(340));ao()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 13:if(Ct(e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));ao()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return je(Me),null;case 4:return cs(),null;case 10:return Jn(e.type),null;case 22:case 23:return Ct(e),uh(),t!==null&&je(oo),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 24:return Jn(Ie),null;case 25:return null;default:return null}}function o1(t,e){switch(oh(e),e.tag){case 3:Jn(Ie),cs();break;case 26:case 27:case 5:Rc(e);break;case 4:cs();break;case 31:e.memoizedState!==null&&Ct(e);break;case 13:Ct(e);break;case 19:je(Me);break;case 10:Jn(e.type);break;case 22:case 23:Ct(e),uh(),t!==null&&je(oo);break;case 24:Jn(Ie)}}function ca(t,e){try{var n=e.updateQueue,r=n!==null?n.lastEffect:null;if(r!==null){var o=r.next;n=o;do{if((n.tag&t)===t){r=void 0;var s=n.create,i=n.inst;r=s(),i.destroy=r}n=n.next}while(n!==o)}}catch(a){ce(e,e.return,a)}}function Ir(t,e,n){try{var r=e.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var s=o.next;r=s;do{if((r.tag&t)===t){var i=r.inst,a=i.destroy;if(a!==void 0){i.destroy=void 0,o=e;var c=n,u=a;try{u()}catch(l){ce(o,c,l)}}}r=r.next}while(r!==s)}}catch(l){ce(e,e.return,l)}}function s1(t){var e=t.updateQueue;if(e!==null){var n=t.stateNode;try{dx(e,n)}catch(r){ce(t,t.return,r)}}}function i1(t,e,n){n.props=fo(t.type,t.memoizedProps),n.state=t.memoizedState;try{n.componentWillUnmount()}catch(r){ce(t,e,r)}}function Oi(t,e){try{var n=t.ref;if(n!==null){switch(t.tag){case 26:case 27:case 5:var r=t.stateNode;break;case 30:r=t.stateNode;break;default:r=t.stateNode}typeof n=="function"?t.refCleanup=n(r):n.current=r}}catch(o){ce(t,e,o)}}function An(t,e){var n=t.ref,r=t.refCleanup;if(n!==null)if(typeof r=="function")try{r()}catch(o){ce(t,e,o)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){ce(t,e,o)}else n.current=null}function a1(t){var e=t.type,n=t.memoizedProps,r=t.stateNode;try{e:switch(e){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(o){ce(t,t.return,o)}}function Gf(t,e,n){try{var r=t.stateNode;v3(r,t.type,n,e),r[wt]=e}catch(o){ce(t,t.return,o)}}function c1(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Gr(t.type)||t.tag===4}function Lf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Gr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Em(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(t,e):(e=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,e.appendChild(t),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pn));else if(r!==4&&(r===27&&Gr(t.type)&&(n=t.stateNode,e=null),t=t.child,t!==null))for(Em(t,e,n),t=t.sibling;t!==null;)Em(t,e,n),t=t.sibling}function Kc(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(r===27&&Gr(t.type)&&(n=t.stateNode),t=t.child,t!==null))for(Kc(t,e,n),t=t.sibling;t!==null;)Kc(t,e,n),t=t.sibling}function u1(t){var e=t.stateNode,n=t.memoizedProps;try{for(var r=t.type,o=e.attributes;o.length;)e.removeAttributeNode(o[0]);We(e,r,n),e[Xe]=t,e[wt]=n}catch(s){ce(t,t.return,s)}}var zn=!1,ke=!1,Ff=!1,H0=typeof WeakSet=="function"?WeakSet:Set,He=null;function t3(t,e){if(t=t.containerInfo,km=nu,t=Qy(t),Zm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var i=0,a=-1,c=-1,u=0,l=0,f=t,m=null;t:for(;;){for(var d;f!==n||o!==0&&f.nodeType!==3||(a=i+o),f!==s||r!==0&&f.nodeType!==3||(c=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(d=f.firstChild)!==null;)m=f,f=d;for(;;){if(f===t)break t;if(m===n&&++u===o&&(a=i),m===s&&++l===r&&(c=i),(d=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=d}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Im={focusedElem:t,selectionRange:n},nu=!1,He=e;He!==null;)if(e=He,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,He=t;else for(;He!==null;){switch(e=He,s=e.alternate,t=e.flags,e.tag){case 0:if((t&4)!==0&&(t=e.updateQueue,t=t!==null?t.events:null,t!==null))for(n=0;n<t.length;n++)o=t[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&s!==null){t=void 0,n=e,o=s.memoizedProps,s=s.memoizedState,r=n.stateNode;try{var p=fo(n.type,o);t=r.getSnapshotBeforeUpdate(p,s),r.__reactInternalSnapshotBeforeUpdate=t}catch(b){ce(n,n.return,b)}}break;case 3:if((t&1024)!==0){if(t=e.stateNode.containerInfo,n=t.nodeType,n===9)Um(t);else if(n===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Um(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(I(163))}if(t=e.sibling,t!==null){t.return=e.return,He=t;break}He=e.return}}function l1(t,e,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Ln(t,n),r&4&&ca(5,n);break;case 1:if(Ln(t,n),r&4)if(t=n.stateNode,e===null)try{t.componentDidMount()}catch(i){ce(n,n.return,i)}else{var o=fo(n.type,e.memoizedProps);e=e.memoizedState;try{t.componentDidUpdate(o,e,t.__reactInternalSnapshotBeforeUpdate)}catch(i){ce(n,n.return,i)}}r&64&&s1(n),r&512&&Oi(n,n.return);break;case 3:if(Ln(t,n),r&64&&(t=n.updateQueue,t!==null)){if(e=null,n.child!==null)switch(n.child.tag){case 27:case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}try{dx(t,e)}catch(i){ce(n,n.return,i)}}break;case 27:e===null&&r&4&&u1(n);case 26:case 5:Ln(t,n),e===null&&r&4&&a1(n),r&512&&Oi(n,n.return);break;case 12:Ln(t,n);break;case 31:Ln(t,n),r&4&&h1(t,n);break;case 13:Ln(t,n),r&4&&d1(t,n),r&64&&(t=n.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(n=l3.bind(null,n),M3(t,n))));break;case 22:if(r=n.memoizedState!==null||zn,!r){e=e!==null&&e.memoizedState!==null||ke,o=zn;var s=ke;zn=r,(ke=e)&&!s?Fn(t,n,(n.subtreeFlags&8772)!==0):Ln(t,n),zn=o,ke=s}break;case 30:break;default:Ln(t,n)}}function f1(t){var e=t.alternate;e!==null&&(t.alternate=null,f1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&qm(e)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var _e=null,vt=!1;function Gn(t,e,n){for(n=n.child;n!==null;)m1(t,e,n),n=n.sibling}function m1(t,e,n){if(kt&&typeof kt.onCommitFiberUnmount=="function")try{kt.onCommitFiberUnmount(ta,n)}catch{}switch(n.tag){case 26:ke||An(n,e),Gn(t,e,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:ke||An(n,e);var r=_e,o=vt;Gr(n.type)&&(_e=n.stateNode,vt=!1),Gn(t,e,n),Fi(n.stateNode),_e=r,vt=o;break;case 5:ke||An(n,e);case 6:if(r=_e,o=vt,_e=null,Gn(t,e,n),_e=r,vt=o,_e!==null)if(vt)try{(_e.nodeType===9?_e.body:_e.nodeName==="HTML"?_e.ownerDocument.body:_e).removeChild(n.stateNode)}catch(s){ce(n,e,s)}else try{_e.removeChild(n.stateNode)}catch(s){ce(n,e,s)}break;case 18:_e!==null&&(vt?(t=_e,ry(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,n.stateNode),xs(t)):ry(_e,n.stateNode));break;case 4:r=_e,o=vt,_e=n.stateNode.containerInfo,vt=!0,Gn(t,e,n),_e=r,vt=o;break;case 0:case 11:case 14:case 15:Ir(2,n,e),ke||Ir(4,n,e),Gn(t,e,n);break;case 1:ke||(An(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"&&i1(n,e,r)),Gn(t,e,n);break;case 21:Gn(t,e,n);break;case 22:ke=(r=ke)||n.memoizedState!==null,Gn(t,e,n),ke=r;break;default:Gn(t,e,n)}}function h1(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{xs(t)}catch(n){ce(e,e.return,n)}}}function d1(t,e){if(e.memoizedState===null&&(t=e.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{xs(t)}catch(n){ce(e,e.return,n)}}function n3(t){switch(t.tag){case 31:case 13:case 19:var e=t.stateNode;return e===null&&(e=t.stateNode=new H0),e;case 22:return t=t.stateNode,e=t._retryCache,e===null&&(e=t._retryCache=new H0),e;default:throw Error(I(435,t.tag))}}function cc(t,e){var n=n3(t);e.forEach(function(r){if(!n.has(r)){n.add(r);var o=f3.bind(null,t,r);r.then(o,o)}})}function xt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r],s=t,i=e,a=i;e:for(;a!==null;){switch(a.tag){case 27:if(Gr(a.type)){_e=a.stateNode,vt=!1;break e}break;case 5:_e=a.stateNode,vt=!1;break e;case 3:case 4:_e=a.stateNode.containerInfo,vt=!0;break e}a=a.return}if(_e===null)throw Error(I(160));m1(s,i,o),_e=null,vt=!1,s=o.alternate,s!==null&&(s.return=null),o.return=null}if(e.subtreeFlags&13886)for(e=e.child;e!==null;)p1(e,t),e=e.sibling}var ln=null;function p1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:xt(e,t),bt(t),r&4&&(Ir(3,t,t.return),ca(3,t),Ir(5,t,t.return));break;case 1:xt(e,t),bt(t),r&512&&(ke||n===null||An(n,n.return)),r&64&&zn&&(t=t.updateQueue,t!==null&&(r=t.callbacks,r!==null&&(n=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=n===null?r:n.concat(r))));break;case 26:var o=ln;if(xt(e,t),bt(t),r&512&&(ke||n===null||An(n,n.return)),r&4){var s=n!==null?n.memoizedState:null;if(r=t.memoizedState,n===null)if(r===null)if(t.stateNode===null){e:{r=t.type,n=t.memoizedProps,o=o.ownerDocument||o;t:switch(r){case"title":s=o.getElementsByTagName("title")[0],(!s||s[oa]||s[Xe]||s.namespaceURI==="http://www.w3.org/2000/svg"||s.hasAttribute("itemprop"))&&(s=o.createElement(r),o.head.insertBefore(s,o.querySelector("head > title"))),We(s,r,n),s[Xe]=t,Pe(s),r=s;break e;case"link":var i=ly("link","href",o).get(r+(n.href||""));if(i){for(var a=0;a<i.length;a++)if(s=i[a],s.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&s.getAttribute("rel")===(n.rel==null?null:n.rel)&&s.getAttribute("title")===(n.title==null?null:n.title)&&s.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){i.splice(a,1);break t}}s=o.createElement(r),We(s,r,n),o.head.appendChild(s);break;case"meta":if(i=ly("meta","content",o).get(r+(n.content||""))){for(a=0;a<i.length;a++)if(s=i[a],s.getAttribute("content")===(n.content==null?null:""+n.content)&&s.getAttribute("name")===(n.name==null?null:n.name)&&s.getAttribute("property")===(n.property==null?null:n.property)&&s.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&s.getAttribute("charset")===(n.charSet==null?null:n.charSet)){i.splice(a,1);break t}}s=o.createElement(r),We(s,r,n),o.head.appendChild(s);break;default:throw Error(I(468,r))}s[Xe]=t,Pe(s),r=s}t.stateNode=r}else fy(o,t.type,t.stateNode);else t.stateNode=uy(o,r,t.memoizedProps);else s!==r?(s===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):s.count--,r===null?fy(o,t.type,t.stateNode):uy(o,r,t.memoizedProps)):r===null&&t.stateNode!==null&&Gf(t,t.memoizedProps,n.memoizedProps)}break;case 27:xt(e,t),bt(t),r&512&&(ke||n===null||An(n,n.return)),n!==null&&r&4&&Gf(t,t.memoizedProps,n.memoizedProps);break;case 5:if(xt(e,t),bt(t),r&512&&(ke||n===null||An(n,n.return)),t.flags&32){o=t.stateNode;try{ls(o,"")}catch(p){ce(t,t.return,p)}}r&4&&t.stateNode!=null&&(o=t.memoizedProps,Gf(t,o,n!==null?n.memoizedProps:o)),r&1024&&(Ff=!0);break;case 6:if(xt(e,t),bt(t),r&4){if(t.stateNode===null)throw Error(I(162));r=t.memoizedProps,n=t.stateNode;try{n.nodeValue=r}catch(p){ce(t,t.return,p)}}break;case 3:if(Ec=null,o=ln,ln=Zc(e.containerInfo),xt(e,t),ln=o,bt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xs(e.containerInfo)}catch(p){ce(t,t.return,p)}Ff&&(Ff=!1,g1(t));break;case 4:r=ln,ln=Zc(t.stateNode.containerInfo),xt(e,t),bt(t),ln=r;break;case 12:xt(e,t),bt(t);break;case 31:xt(e,t),bt(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,cc(t,r)));break;case 13:xt(e,t),bt(t),t.child.flags&8192&&t.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(pu=Dt()),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,cc(t,r)));break;case 22:o=t.memoizedState!==null;var c=n!==null&&n.memoizedState!==null,u=zn,l=ke;if(zn=u||o,ke=l||c,xt(e,t),ke=l,zn=u,bt(t),r&8192)e:for(e=t.stateNode,e._visibility=o?e._visibility&-2:e._visibility|1,o&&(n===null||c||zn||ke||to(t)),n=null,e=t;;){if(e.tag===5||e.tag===26){if(n===null){c=n=e;try{if(s=c.stateNode,o)i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none";else{a=c.stateNode;var f=c.memoizedProps.style,m=f!=null&&f.hasOwnProperty("display")?f.display:null;a.style.display=m==null||typeof m=="boolean"?"":(""+m).trim()}}catch(p){ce(c,c.return,p)}}}else if(e.tag===6){if(n===null){c=e;try{c.stateNode.nodeValue=o?"":c.memoizedProps}catch(p){ce(c,c.return,p)}}}else if(e.tag===18){if(n===null){c=e;try{var d=c.stateNode;o?oy(d,!0):oy(c.stateNode,!1)}catch(p){ce(c,c.return,p)}}}else if((e.tag!==22&&e.tag!==23||e.memoizedState===null||e===t)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;n===e&&(n=null),e=e.return}n===e&&(n=null),e.sibling.return=e.return,e=e.sibling}r&4&&(r=t.updateQueue,r!==null&&(n=r.retryQueue,n!==null&&(r.retryQueue=null,cc(t,n))));break;case 19:xt(e,t),bt(t),r&4&&(r=t.updateQueue,r!==null&&(t.updateQueue=null,cc(t,r)));break;case 30:break;case 21:break;default:xt(e,t),bt(t)}}function bt(t){var e=t.flags;if(e&2){try{for(var n,r=t.return;r!==null;){if(c1(r)){n=r;break}r=r.return}if(n==null)throw Error(I(160));switch(n.tag){case 27:var o=n.stateNode,s=Lf(t);Kc(t,s,o);break;case 5:var i=n.stateNode;n.flags&32&&(ls(i,""),n.flags&=-33);var a=Lf(t);Kc(t,a,i);break;case 3:case 4:var c=n.stateNode.containerInfo,u=Lf(t);Em(t,u,c);break;default:throw Error(I(161))}}catch(l){ce(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function g1(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var e=t;g1(e),e.tag===5&&e.flags&1024&&e.stateNode.reset(),t=t.sibling}}function Ln(t,e){if(e.subtreeFlags&8772)for(e=e.child;e!==null;)l1(t,e.alternate,e),e=e.sibling}function to(t){for(t=t.child;t!==null;){var e=t;switch(e.tag){case 0:case 11:case 14:case 15:Ir(4,e,e.return),to(e);break;case 1:An(e,e.return);var n=e.stateNode;typeof n.componentWillUnmount=="function"&&i1(e,e.return,n),to(e);break;case 27:Fi(e.stateNode);case 26:case 5:An(e,e.return),to(e);break;case 22:e.memoizedState===null&&to(e);break;case 30:to(e);break;default:to(e)}t=t.sibling}}function Fn(t,e,n){for(n=n&&(e.subtreeFlags&8772)!==0,e=e.child;e!==null;){var r=e.alternate,o=t,s=e,i=s.flags;switch(s.tag){case 0:case 11:case 15:Fn(o,s,n),ca(4,s);break;case 1:if(Fn(o,s,n),r=s,o=r.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(u){ce(r,r.return,u)}if(r=s,o=r.updateQueue,o!==null){var a=r.stateNode;try{var c=o.shared.hiddenCallbacks;if(c!==null)for(o.shared.hiddenCallbacks=null,o=0;o<c.length;o++)hx(c[o],a)}catch(u){ce(r,r.return,u)}}n&&i&64&&s1(s),Oi(s,s.return);break;case 27:u1(s);case 26:case 5:Fn(o,s,n),n&&r===null&&i&4&&a1(s),Oi(s,s.return);break;case 12:Fn(o,s,n);break;case 31:Fn(o,s,n),n&&i&4&&h1(o,s);break;case 13:Fn(o,s,n),n&&i&4&&d1(o,s);break;case 22:s.memoizedState===null&&Fn(o,s,n),Oi(s,s.return);break;case 30:break;default:Fn(o,s,n)}e=e.sibling}}function Bh(t,e){var n=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(n=t.memoizedState.cachePool.pool),t=null,e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(t=e.memoizedState.cachePool.pool),t!==n&&(t!=null&&t.refCount++,n!=null&&ia(n))}function Eh(t,e){t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ia(t))}function un(t,e,n,r){if(e.subtreeFlags&10256)for(e=e.child;e!==null;)y1(t,e,n,r),e=e.sibling}function y1(t,e,n,r){var o=e.flags;switch(e.tag){case 0:case 11:case 15:un(t,e,n,r),o&2048&&ca(9,e);break;case 1:un(t,e,n,r);break;case 3:un(t,e,n,r),o&2048&&(t=null,e.alternate!==null&&(t=e.alternate.memoizedState.cache),e=e.memoizedState.cache,e!==t&&(e.refCount++,t!=null&&ia(t)));break;case 12:if(o&2048){un(t,e,n,r),t=e.stateNode;try{var s=e.memoizedProps,i=s.id,a=s.onPostCommit;typeof a=="function"&&a(i,e.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(c){ce(e,e.return,c)}}else un(t,e,n,r);break;case 31:un(t,e,n,r);break;case 13:un(t,e,n,r);break;case 23:break;case 22:s=e.stateNode,i=e.alternate,e.memoizedState!==null?s._visibility&2?un(t,e,n,r):Ui(t,e):s._visibility&2?un(t,e,n,r):(s._visibility|=2,zo(t,e,n,r,(e.subtreeFlags&10256)!==0||!1)),o&2048&&Bh(i,e);break;case 24:un(t,e,n,r),o&2048&&Eh(e.alternate,e);break;default:un(t,e,n,r)}}function zo(t,e,n,r,o){for(o=o&&((e.subtreeFlags&10256)!==0||!1),e=e.child;e!==null;){var s=t,i=e,a=n,c=r,u=i.flags;switch(i.tag){case 0:case 11:case 15:zo(s,i,a,c,o),ca(8,i);break;case 23:break;case 22:var l=i.stateNode;i.memoizedState!==null?l._visibility&2?zo(s,i,a,c,o):Ui(s,i):(l._visibility|=2,zo(s,i,a,c,o)),o&&u&2048&&Bh(i.alternate,i);break;case 24:zo(s,i,a,c,o),o&&u&2048&&Eh(i.alternate,i);break;default:zo(s,i,a,c,o)}e=e.sibling}}function Ui(t,e){if(e.subtreeFlags&10256)for(e=e.child;e!==null;){var n=t,r=e,o=r.flags;switch(r.tag){case 22:Ui(n,r),o&2048&&Bh(r.alternate,r);break;case 24:Ui(n,r),o&2048&&Eh(r.alternate,r);break;default:Ui(n,r)}e=e.sibling}}var Ei=8192;function No(t,e,n){if(t.subtreeFlags&Ei)for(t=t.child;t!==null;)x1(t,e,n),t=t.sibling}function x1(t,e,n){switch(t.tag){case 26:No(t,e,n),t.flags&Ei&&t.memoizedState!==null&&N3(n,ln,t.memoizedState,t.memoizedProps);break;case 5:No(t,e,n);break;case 3:case 4:var r=ln;ln=Zc(t.stateNode.containerInfo),No(t,e,n),ln=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Ei,Ei=16777216,No(t,e,n),Ei=r):No(t,e,n));break;default:No(t,e,n)}}function b1(t){var e=t.alternate;if(e!==null&&(t=e.child,t!==null)){e.child=null;do e=t.sibling,t.sibling=null,t=e;while(t!==null)}}function bi(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];He=r,A1(r,t)}b1(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)v1(t),t=t.sibling}function v1(t){switch(t.tag){case 0:case 11:case 15:bi(t),t.flags&2048&&Ir(9,t,t.return);break;case 3:bi(t);break;case 12:bi(t);break;case 22:var e=t.stateNode;t.memoizedState!==null&&e._visibility&2&&(t.return===null||t.return.tag!==13)?(e._visibility&=-3,Tc(t)):bi(t);break;default:bi(t)}}function Tc(t){var e=t.deletions;if((t.flags&16)!==0){if(e!==null)for(var n=0;n<e.length;n++){var r=e[n];He=r,A1(r,t)}b1(t)}for(t=t.child;t!==null;){switch(e=t,e.tag){case 0:case 11:case 15:Ir(8,e,e.return),Tc(e);break;case 22:n=e.stateNode,n._visibility&2&&(n._visibility&=-3,Tc(e));break;default:Tc(e)}t=t.sibling}}function A1(t,e){for(;He!==null;){var n=He;switch(n.tag){case 0:case 11:case 15:Ir(8,n,e);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var r=n.memoizedState.cachePool.pool;r!=null&&r.refCount++}break;case 24:ia(n.memoizedState.cache)}if(r=n.child,r!==null)r.return=n,He=r;else e:for(n=t;He!==null;){r=He;var o=r.sibling,s=r.return;if(f1(r),r===n){He=null;break e}if(o!==null){o.return=s,He=o;break e}He=s}}}var r3={getCacheForType:function(t){var e=Qe(Ie),n=e.data.get(t);return n===void 0&&(n=t(),e.data.set(t,n)),n},cacheSignal:function(){return Qe(Ie).controller.signal}},o3=typeof WeakMap=="function"?WeakMap:Map,ne=0,fe=null,Q=null,W=0,ae=0,Mt=null,vr=!1,ws=!1,Sh=!1,$n=0,Ee=0,Or=0,io=0,Mh=0,Rt=0,ds=0,Gi=null,At=null,Sm=!1,pu=0,_1=0,Jc=1/0,qc=null,Sr=null,Fe=0,Mr=null,ps=null,qn=0,Mm=0,Cm=null,w1=null,Li=0,Vm=null;function Ot(){return(ne&2)!==0&&W!==0?W&-W:H.T!==null?Vh():Dy()}function T1(){if(Rt===0)if((W&536870912)===0||$){var t=$a;$a<<=1,($a&3932160)===0&&($a=262144),Rt=t}else Rt=536870912;return t=Gt.current,t!==null&&(t.flags|=32),Rt}function _t(t,e,n){(t===fe&&(ae===2||ae===9)||t.cancelPendingCommit!==null)&&(gs(t,0),Ar(t,W,Rt,!1)),ra(t,n),((ne&2)===0||t!==fe)&&(t===fe&&((ne&2)===0&&(io|=n),Ee===4&&Ar(t,W,Rt,!1)),Tn(t))}function B1(t,e,n){if((ne&6)!==0)throw Error(I(327));var r=!n&&(e&127)===0&&(e&t.expiredLanes)===0||na(t,e),o=r?a3(t,e):Nf(t,e,!0),s=r;do{if(o===0){ws&&!r&&Ar(t,e,0,!1);break}else{if(n=t.current.alternate,s&&!s3(n)){o=Nf(t,e,!1),s=!1;continue}if(o===2){if(s=e,t.errorRecoveryDisabledLanes&s)var i=0;else i=t.pendingLanes&-536870913,i=i!==0?i:i&536870912?536870912:0;if(i!==0){e=i;e:{var a=t;o=Gi;var c=a.current.memoizedState.isDehydrated;if(c&&(gs(a,i).flags|=256),i=Nf(a,i,!1),i!==2){if(Sh&&!c){a.errorRecoveryDisabledLanes|=s,io|=s,o=4;break e}s=At,At=o,s!==null&&(At===null?At=s:At.push.apply(At,s))}o=i}if(s=!1,o!==2)continue}}if(o===1){gs(t,0),Ar(t,e,0,!0);break}e:{switch(r=t,s=o,s){case 0:case 1:throw Error(I(345));case 4:if((e&4194048)!==e)break;case 6:Ar(r,e,Rt,!vr);break e;case 2:At=null;break;case 3:case 5:break;default:throw Error(I(329))}if((e&62914560)===e&&(o=pu+300-Dt(),10<o)){if(Ar(r,e,Rt,!vr),ou(r,0,!0)!==0)break e;qn=e,r.timeoutHandle=K1(P0.bind(null,r,n,At,qc,Sm,e,Rt,io,ds,vr,s,"Throttled",-0,0),o);break e}P0(r,n,At,qc,Sm,e,Rt,io,ds,vr,s,null,-0,0)}}break}while(!0);Tn(t)}function P0(t,e,n,r,o,s,i,a,c,u,l,f,m,d){if(t.timeoutHandle=-1,f=e.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pn},x1(e,s,f);var p=(s&62914560)===s?pu-Dt():(s&4194048)===s?_1-Dt():0;if(p=z3(f,p),p!==null){qn=s,t.cancelPendingCommit=p(K0.bind(null,t,e,s,n,r,o,i,a,c,l,f,null,m,d)),Ar(t,s,i,!u);return}}K0(t,e,s,n,r,o,i,a,c)}function s3(t){for(var e=t;;){var n=e.tag;if((n===0||n===11||n===15)&&e.flags&16384&&(n=e.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var r=0;r<n.length;r++){var o=n[r],s=o.getSnapshot;o=o.value;try{if(!Ut(s(),o))return!1}catch{return!1}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e,n,r){e&=~Mh,e&=~io,t.suspendedLanes|=e,t.pingedLanes&=~e,r&&(t.warmLanes|=e),r=t.expirationTimes;for(var o=e;0<o;){var s=31-It(o),i=1<<s;r[s]=-1,o&=~i}n!==0&&Cy(t,n,e)}function gu(){return(ne&6)===0?(ua(0,!1),!1):!0}function Ch(){if(Q!==null){if(ae===0)var t=Q.return;else t=Q,jn=yo=null,dh(t),ss=null,Ji=0,t=Q;for(;t!==null;)o1(t.alternate,t),t=t.return;Q=null}}function gs(t,e){var n=t.timeoutHandle;n!==-1&&(t.timeoutHandle=-1,w3(n)),n=t.cancelPendingCommit,n!==null&&(t.cancelPendingCommit=null,n()),qn=0,Ch(),fe=t,Q=n=Kn(t.current,null),W=e,ae=0,Mt=null,vr=!1,ws=na(t,e),Sh=!1,ds=Rt=Mh=io=Or=Ee=0,At=Gi=null,Sm=!1,(e&8)!==0&&(e|=e&32);var r=t.entangledLanes;if(r!==0)for(t=t.entanglements,r&=e;0<r;){var o=31-It(r),s=1<<o;e|=t[o],r&=~s}return $n=e,cu(),n}function E1(t,e){K=null,H.H=Xi,e===_s||e===lu?(e=A0(),ae=3):e===ah?(e=A0(),ae=4):ae=e===wh?8:e!==null&&typeof e=="object"&&typeof e.then=="function"?6:1,Mt=e,Q===null&&(Ee=1,Pc(t,Yt(e,t.current)))}function S1(){var t=Gt.current;return t===null?!0:(W&4194048)===W?Wt===null:(W&62914560)===W||(W&536870912)!==0?t===Wt:!1}function M1(){var t=H.H;return H.H=Xi,t===null?Xi:t}function C1(){var t=H.A;return H.A=r3,t}function Xc(){Ee=4,vr||(W&4194048)!==W&&Gt.current!==null||(ws=!0),(Or&134217727)===0&&(io&134217727)===0||fe===null||Ar(fe,W,Rt,!1)}function Nf(t,e,n){var r=ne;ne|=2;var o=M1(),s=C1();(fe!==t||W!==e)&&(qc=null,gs(t,e)),e=!1;var i=Ee;e:do try{if(ae!==0&&Q!==null){var a=Q,c=Mt;switch(ae){case 8:Ch(),i=6;break e;case 3:case 2:case 9:case 6:Gt.current===null&&(e=!0);var u=ae;if(ae=0,Mt=null,es(t,a,c,u),n&&ws){i=0;break e}break;default:u=ae,ae=0,Mt=null,es(t,a,c,u)}}i3(),i=Ee;break}catch(l){E1(t,l)}while(!0);return e&&t.shellSuspendCounter++,jn=yo=null,ne=r,H.H=o,H.A=s,Q===null&&(fe=null,W=0,cu()),i}function i3(){for(;Q!==null;)V1(Q)}function a3(t,e){var n=ne;ne|=2;var r=M1(),o=C1();fe!==t||W!==e?(qc=null,Jc=Dt()+500,gs(t,e)):ws=na(t,e);e:do try{if(ae!==0&&Q!==null){e=Q;var s=Mt;t:switch(ae){case 1:ae=0,Mt=null,es(t,e,s,1);break;case 2:case 9:if(v0(s)){ae=0,Mt=null,j0(e);break}e=function(){ae!==2&&ae!==9||fe!==t||(ae=7),Tn(t)},s.then(e,e);break e;case 3:ae=7;break e;case 4:ae=5;break e;case 7:v0(s)?(ae=0,Mt=null,j0(e)):(ae=0,Mt=null,es(t,e,s,7));break;case 5:var i=null;switch(Q.tag){case 26:i=Q.memoizedState;case 5:case 27:var a=Q;if(i?Q1(i):a.stateNode.complete){ae=0,Mt=null;var c=a.sibling;if(c!==null)Q=c;else{var u=a.return;u!==null?(Q=u,yu(u)):Q=null}break t}}ae=0,Mt=null,es(t,e,s,5);break;case 6:ae=0,Mt=null,es(t,e,s,6);break;case 8:Ch(),Ee=6;break e;default:throw Error(I(462))}}c3();break}catch(l){E1(t,l)}while(!0);return jn=yo=null,H.H=r,H.A=o,ne=n,Q!==null?0:(fe=null,W=0,cu(),Ee)}function c3(){for(;Q!==null&&!R_();)V1(Q)}function V1(t){var e=r1(t.alternate,t,$n);t.memoizedProps=t.pendingProps,e===null?yu(t):Q=e}function j0(t){var e=t,n=e.alternate;switch(e.tag){case 15:case 0:e=G0(n,e,e.pendingProps,e.type,void 0,W);break;case 11:e=G0(n,e,e.pendingProps,e.type.render,e.ref,W);break;case 5:dh(e);default:o1(n,e),e=Q=ox(e,$n),e=r1(n,e,$n)}t.memoizedProps=t.pendingProps,e===null?yu(t):Q=e}function es(t,e,n,r){jn=yo=null,dh(e),ss=null,Ji=0;var o=e.return;try{if(Qw(t,o,e,n,W)){Ee=1,Pc(t,Yt(n,t.current)),Q=null;return}}catch(s){if(o!==null)throw Q=o,s;Ee=1,Pc(t,Yt(n,t.current)),Q=null;return}e.flags&32768?($||r===1?t=!0:ws||(W&536870912)!==0?t=!1:(vr=t=!0,(r===2||r===9||r===3||r===6)&&(r=Gt.current,r!==null&&r.tag===13&&(r.flags|=16384))),R1(e,t)):yu(e)}function yu(t){var e=t;do{if((e.flags&32768)!==0){R1(e,vr);return}t=e.return;var n=Zw(e.alternate,e,$n);if(n!==null){Q=n;return}if(e=e.sibling,e!==null){Q=e;return}Q=e=t}while(e!==null);Ee===0&&(Ee=5)}function R1(t,e){do{var n=e3(t.alternate,t);if(n!==null){n.flags&=32767,Q=n;return}if(n=t.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!e&&(t=t.sibling,t!==null)){Q=t;return}Q=t=n}while(t!==null);Ee=6,Q=null}function K0(t,e,n,r,o,s,i,a,c){t.cancelPendingCommit=null;do xu();while(Fe!==0);if((ne&6)!==0)throw Error(I(327));if(e!==null){if(e===t.current)throw Error(I(177));if(s=e.lanes|e.childLanes,s|=eh,z_(t,n,s,i,a,c),t===fe&&(Q=fe=null,W=0),ps=e,Mr=t,qn=n,Mm=s,Cm=o,w1=r,(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,m3(Dc,function(){return U1(),null})):(t.callbackNode=null,t.callbackPriority=0),r=(e.flags&13878)!==0,(e.subtreeFlags&13878)!==0||r){r=H.T,H.T=null,o=re.p,re.p=2,i=ne,ne|=4;try{t3(t,e,n)}finally{ne=i,re.p=o,H.T=r}}Fe=1,D1(),k1(),I1()}}function D1(){if(Fe===1){Fe=0;var t=Mr,e=ps,n=(e.flags&13878)!==0;if((e.subtreeFlags&13878)!==0||n){n=H.T,H.T=null;var r=re.p;re.p=2;var o=ne;ne|=4;try{p1(e,t);var s=Im,i=Qy(t.containerInfo),a=s.focusedElem,c=s.selectionRange;if(i!==a&&a&&a.ownerDocument&&Yy(a.ownerDocument.documentElement,a)){if(c!==null&&Zm(a)){var u=c.start,l=c.end;if(l===void 0&&(l=u),"selectionStart"in a)a.selectionStart=u,a.selectionEnd=Math.min(l,a.value.length);else{var f=a.ownerDocument||document,m=f&&f.defaultView||window;if(m.getSelection){var d=m.getSelection(),p=a.textContent.length,b=Math.min(c.start,p),w=c.end===void 0?b:Math.min(c.end,p);!d.extend&&b>w&&(i=w,w=b,b=i);var h=h0(a,b),g=h0(a,w);if(h&&g&&(d.rangeCount!==1||d.anchorNode!==h.node||d.anchorOffset!==h.offset||d.focusNode!==g.node||d.focusOffset!==g.offset)){var y=f.createRange();y.setStart(h.node,h.offset),d.removeAllRanges(),b>w?(d.addRange(y),d.extend(g.node,g.offset)):(y.setEnd(g.node,g.offset),d.addRange(y))}}}}for(f=[],d=a;d=d.parentNode;)d.nodeType===1&&f.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<f.length;a++){var A=f[a];A.element.scrollLeft=A.left,A.element.scrollTop=A.top}}nu=!!km,Im=km=null}finally{ne=o,re.p=r,H.T=n}}t.current=e,Fe=2}}function k1(){if(Fe===2){Fe=0;var t=Mr,e=ps,n=(e.flags&8772)!==0;if((e.subtreeFlags&8772)!==0||n){n=H.T,H.T=null;var r=re.p;re.p=2;var o=ne;ne|=4;try{l1(t,e.alternate,e)}finally{ne=o,re.p=r,H.T=n}}Fe=3}}function I1(){if(Fe===4||Fe===3){Fe=0,D_();var t=Mr,e=ps,n=qn,r=w1;(e.subtreeFlags&10256)!==0||(e.flags&10256)!==0?Fe=5:(Fe=0,ps=Mr=null,O1(t,t.pendingLanes));var o=t.pendingLanes;if(o===0&&(Sr=null),Jm(n),e=e.stateNode,kt&&typeof kt.onCommitFiberRoot=="function")try{kt.onCommitFiberRoot(ta,e,void 0,(e.current.flags&128)===128)}catch{}if(r!==null){e=H.T,o=re.p,re.p=2,H.T=null;try{for(var s=t.onRecoverableError,i=0;i<r.length;i++){var a=r[i];s(a.value,{componentStack:a.stack})}}finally{H.T=e,re.p=o}}(qn&3)!==0&&xu(),Tn(t),o=t.pendingLanes,(n&261930)!==0&&(o&42)!==0?t===Vm?Li++:(Li=0,Vm=t):Li=0,ua(0,!1)}}function O1(t,e){(t.pooledCacheLanes&=e)===0&&(e=t.pooledCache,e!=null&&(t.pooledCache=null,ia(e)))}function xu(){return D1(),k1(),I1(),U1()}function U1(){if(Fe!==5)return!1;var t=Mr,e=Mm;Mm=0;var n=Jm(qn),r=H.T,o=re.p;try{re.p=32>n?32:n,H.T=null,n=Cm,Cm=null;var s=Mr,i=qn;if(Fe=0,ps=Mr=null,qn=0,(ne&6)!==0)throw Error(I(331));var a=ne;if(ne|=4,v1(s.current),y1(s,s.current,i,n),ne=a,ua(0,!1),kt&&typeof kt.onPostCommitFiberRoot=="function")try{kt.onPostCommitFiberRoot(ta,s)}catch{}return!0}finally{re.p=o,H.T=r,O1(t,e)}}function J0(t,e,n){e=Yt(n,e),e=wm(t.stateNode,e,2),t=Er(t,e,2),t!==null&&(ra(t,2),Tn(t))}function ce(t,e,n){if(t.tag===3)J0(t,t,n);else for(;e!==null;){if(e.tag===3){J0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sr===null||!Sr.has(r))){t=Yt(n,t),n=Wx(2),r=Er(e,n,2),r!==null&&($x(n,r,e,t),ra(r,2),Tn(r));break}}e=e.return}}function zf(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new o3;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(n)||(Sh=!0,o.add(n),t=u3.bind(null,t,e,n),e.then(t,t))}function u3(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),t.pingedLanes|=t.suspendedLanes&n,t.warmLanes&=~n,fe===t&&(W&n)===n&&(Ee===4||Ee===3&&(W&62914560)===W&&300>Dt()-pu?(ne&2)===0&&gs(t,0):Mh|=n,ds===W&&(ds=0)),Tn(t)}function G1(t,e){e===0&&(e=My()),t=go(t,e),t!==null&&(ra(t,e),Tn(t))}function l3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),G1(t,n)}function f3(t,e){var n=0;switch(t.tag){case 31:case 13:var r=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=t.stateNode;break;case 22:r=t.stateNode._retryCache;break;default:throw Error(I(314))}r!==null&&r.delete(e),G1(t,n)}function m3(t,e){return jm(t,e)}var Yc=null,Ho=null,Rm=!1,Qc=!1,Hf=!1,_r=0;function Tn(t){t!==Ho&&t.next===null&&(Ho===null?Yc=Ho=t:Ho=Ho.next=t),Qc=!0,Rm||(Rm=!0,d3())}function ua(t,e){if(!Hf&&Qc){Hf=!0;do for(var n=!1,r=Yc;r!==null;){if(!e)if(t!==0){var o=r.pendingLanes;if(o===0)var s=0;else{var i=r.suspendedLanes,a=r.pingedLanes;s=(1<<31-It(42|t)+1)-1,s&=o&~(i&~a),s=s&201326741?s&201326741|1:s?s|2:0}s!==0&&(n=!0,q0(r,s))}else s=W,s=ou(r,r===fe?s:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),(s&3)===0||na(r,s)||(n=!0,q0(r,s));r=r.next}while(n);Hf=!1}}function h3(){L1()}function L1(){Qc=Rm=!1;var t=0;_r!==0&&_3()&&(t=_r);for(var e=Dt(),n=null,r=Yc;r!==null;){var o=r.next,s=F1(r,e);s===0?(r.next=null,n===null?Yc=o:n.next=o,o===null&&(Ho=n)):(n=r,(t!==0||(s&3)!==0)&&(Qc=!0)),r=o}Fe!==0&&Fe!==5||ua(t,!1),_r!==0&&(_r=0)}function F1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes&-62914561;0<s;){var i=31-It(s),a=1<<i,c=o[i];c===-1?((a&n)===0||(a&r)!==0)&&(o[i]=N_(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}if(e=fe,n=W,n=ou(t,t===e?n:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r=t.callbackNode,n===0||t===e&&(ae===2||ae===9)||t.cancelPendingCommit!==null)return r!==null&&r!==null&&yf(r),t.callbackNode=null,t.callbackPriority=0;if((n&3)===0||na(t,n)){if(e=n&-n,e===t.callbackPriority)return e;switch(r!==null&&yf(r),Jm(n)){case 2:case 8:n=Ey;break;case 32:n=Dc;break;case 268435456:n=Sy;break;default:n=Dc}return r=N1.bind(null,t),n=jm(n,r),t.callbackPriority=e,t.callbackNode=n,e}return r!==null&&r!==null&&yf(r),t.callbackPriority=2,t.callbackNode=null,2}function N1(t,e){if(Fe!==0&&Fe!==5)return t.callbackNode=null,t.callbackPriority=0,null;var n=t.callbackNode;if(xu()&&t.callbackNode!==n)return null;var r=W;return r=ou(t,t===fe?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),r===0?null:(B1(t,r,e),F1(t,Dt()),t.callbackNode!=null&&t.callbackNode===n?N1.bind(null,t):null)}function q0(t,e){if(xu())return null;B1(t,e,!0)}function d3(){T3(function(){(ne&6)!==0?jm(By,h3):L1()})}function Vh(){if(_r===0){var t=fs;t===0&&(t=Wa,Wa<<=1,(Wa&261888)===0&&(Wa=256)),_r=t}return _r}function X0(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:pc(""+t)}function Y0(t,e){var n=e.ownerDocument.createElement("input");return n.name=e.name,n.value=e.value,t.id&&n.setAttribute("form",t.id),e.parentNode.insertBefore(n,e),t=new FormData(t),n.parentNode.removeChild(n),t}function p3(t,e,n,r,o){if(e==="submit"&&n&&n.stateNode===o){var s=X0((o[wt]||null).action),i=r.submitter;i&&(e=(e=i[wt]||null)?X0(e.formAction):i.getAttribute("formAction"),e!==null&&(s=e,i=null));var a=new su("action","action",null,r,o);t.push({event:a,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(_r!==0){var c=i?Y0(o,i):new FormData(o);Am(n,{pending:!0,data:c,method:o.method,action:s},null,c)}}else typeof s=="function"&&(a.preventDefault(),c=i?Y0(o,i):new FormData(o),Am(n,{pending:!0,data:c,method:o.method,action:s},s,c))},currentTarget:o}]})}}for(uc=0;uc<um.length;uc++)lc=um[uc],Q0=lc.toLowerCase(),W0=lc[0].toUpperCase()+lc.slice(1),fn(Q0,"on"+W0);var lc,Q0,W0,uc;fn($y,"onAnimationEnd");fn(Zy,"onAnimationIteration");fn(ex,"onAnimationStart");fn("dblclick","onDoubleClick");fn("focusin","onFocus");fn("focusout","onBlur");fn(kw,"onTransitionRun");fn(Iw,"onTransitionStart");fn(Ow,"onTransitionCancel");fn(tx,"onTransitionEnd");us("onMouseEnter",["mouseout","mouseover"]);us("onMouseLeave",["mouseout","mouseover"]);us("onPointerEnter",["pointerout","pointerover"]);us("onPointerLeave",["pointerout","pointerover"]);mo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mo("onBeforeInput",["compositionend","keypress","textInput","paste"]);mo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),g3=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yi));function z1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],o=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var i=r.length-1;0<=i;i--){var a=r[i],c=a.instance,u=a.currentTarget;if(a=a.listener,c!==s&&o.isPropagationStopped())break e;s=a,o.currentTarget=u;try{s(o)}catch(l){Ic(l)}o.currentTarget=null,s=c}else for(i=0;i<r.length;i++){if(a=r[i],c=a.instance,u=a.currentTarget,a=a.listener,c!==s&&o.isPropagationStopped())break e;s=a,o.currentTarget=u;try{s(o)}catch(l){Ic(l)}o.currentTarget=null,s=c}}}}function Y(t,e){var n=e[tm];n===void 0&&(n=e[tm]=new Set);var r=t+"__bubble";n.has(r)||(H1(e,t,2,!1),n.add(r))}function Pf(t,e,n){var r=0;e&&(r|=4),H1(n,t,r,e)}var fc="_reactListening"+Math.random().toString(36).slice(2);function Rh(t){if(!t[fc]){t[fc]=!0,ky.forEach(function(n){n!=="selectionchange"&&(g3.has(n)||Pf(n,!1,t),Pf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fc]||(e[fc]=!0,Pf("selectionchange",!1,e))}}function H1(t,e,n,r){switch(t2(e)){case 2:var o=j3;break;case 8:o=K3;break;default:o=Oh}n=o.bind(null,e,n,t),o=void 0,!im||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function jf(t,e,n,r,o){var s=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var a=r.stateNode.containerInfo;if(a===o)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&i.stateNode.containerInfo===o)return;i=i.return}for(;a!==null;){if(i=Ko(a),i===null)return;if(c=i.tag,c===5||c===6||c===26||c===27){r=s=i;continue e}a=a.parentNode}}r=r.return}zy(function(){var u=s,l=Ym(n),f=[];e:{var m=nx.get(t);if(m!==void 0){var d=su,p=t;switch(t){case"keypress":if(yc(n)===0)break e;case"keydown":case"keyup":d=fw;break;case"focusin":p="focus",d=_f;break;case"focusout":p="blur",d=_f;break;case"beforeblur":case"afterblur":d=_f;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=o0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=Z_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=dw;break;case $y:case Zy:case ex:d=nw;break;case tx:d=gw;break;case"scroll":case"scrollend":d=W_;break;case"wheel":d=xw;break;case"copy":case"cut":case"paste":d=ow;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=i0;break;case"toggle":case"beforetoggle":d=vw}var b=(e&4)!==0,w=!b&&(t==="scroll"||t==="scrollend"),h=b?m!==null?m+"Capture":null:m;b=[];for(var g=u,y;g!==null;){var A=g;if(y=A.stateNode,A=A.tag,A!==5&&A!==26&&A!==27||y===null||h===null||(A=zi(g,h),A!=null&&b.push(Qi(g,A,y))),w)break;g=g.return}0<b.length&&(m=new d(m,p,null,n,l),f.push({event:m,listeners:b}))}}if((e&7)===0){e:{if(m=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",m&&n!==sm&&(p=n.relatedTarget||n.fromElement)&&(Ko(p)||p[bs]))break e;if((d||m)&&(m=l.window===l?l:(m=l.ownerDocument)?m.defaultView||m.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=u,p=p?Ko(p):null,p!==null&&(w=ea(p),b=p.tag,p!==w||b!==5&&b!==27&&b!==6)&&(p=null)):(d=null,p=u),d!==p)){if(b=o0,A="onMouseLeave",h="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(b=i0,A="onPointerLeave",h="onPointerEnter",g="pointer"),w=d==null?m:Ti(d),y=p==null?m:Ti(p),m=new b(A,g+"leave",d,n,l),m.target=w,m.relatedTarget=y,A=null,Ko(l)===u&&(b=new b(h,g+"enter",p,n,l),b.target=y,b.relatedTarget=w,A=b),w=A,d&&p)t:{for(b=y3,h=d,g=p,y=0,A=h;A;A=b(A))y++;A=0;for(var C=g;C;C=b(C))A++;for(;0<y-A;)h=b(h),y--;for(;0<A-y;)g=b(g),A--;for(;y--;){if(h===g||g!==null&&h===g.alternate){b=h;break t}h=b(h),g=b(g)}b=null}else b=null;d!==null&&$0(f,m,d,b,!1),p!==null&&w!==null&&$0(f,w,p,b,!0)}}e:{if(m=u?Ti(u):window,d=m.nodeName&&m.nodeName.toLowerCase(),d==="select"||d==="input"&&m.type==="file")var U=l0;else if(u0(m))if(qy)U=Vw;else{U=Mw;var V=Sw}else d=m.nodeName,!d||d.toLowerCase()!=="input"||m.type!=="checkbox"&&m.type!=="radio"?u&&Xm(u.elementType)&&(U=l0):U=Cw;if(U&&(U=U(t,u))){Jy(f,U,n,l);break e}V&&V(t,m,u),t==="focusout"&&u&&m.type==="number"&&u.memoizedProps.value!=null&&om(m,"number",m.value)}switch(V=u?Ti(u):window,t){case"focusin":(u0(V)||V.contentEditable==="true")&&(Xo=V,am=u,Ci=null);break;case"focusout":Ci=am=Xo=null;break;case"mousedown":cm=!0;break;case"contextmenu":case"mouseup":case"dragend":cm=!1,d0(f,n,l);break;case"selectionchange":if(Dw)break;case"keydown":case"keyup":d0(f,n,l)}var k;if($m)e:{switch(t){case"compositionstart":var G="onCompositionStart";break e;case"compositionend":G="onCompositionEnd";break e;case"compositionupdate":G="onCompositionUpdate";break e}G=void 0}else qo?jy(t,n)&&(G="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(G="onCompositionStart");G&&(Py&&n.locale!=="ko"&&(qo||G!=="onCompositionStart"?G==="onCompositionEnd"&&qo&&(k=Hy()):(br=l,Qm="value"in br?br.value:br.textContent,qo=!0)),V=Wc(u,G),0<V.length&&(G=new s0(G,t,null,n,l),f.push({event:G,listeners:V}),k?G.data=k:(k=Ky(n),k!==null&&(G.data=k)))),(k=_w?ww(t,n):Tw(t,n))&&(G=Wc(u,"onBeforeInput"),0<G.length&&(V=new s0("onBeforeInput","beforeinput",null,n,l),f.push({event:V,listeners:G}),V.data=k)),p3(f,t,u,n,l)}z1(f,e)})}function Qi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Wc(t,e){for(var n=e+"Capture",r=[];t!==null;){var o=t,s=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||s===null||(o=zi(t,n),o!=null&&r.unshift(Qi(t,o,s)),o=zi(t,e),o!=null&&r.push(Qi(t,o,s))),t.tag===3)return r;t=t.return}return[]}function y3(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function $0(t,e,n,r,o){for(var s=e._reactName,i=[];n!==null&&n!==r;){var a=n,c=a.alternate,u=a.stateNode;if(a=a.tag,c!==null&&c===r)break;a!==5&&a!==26&&a!==27||u===null||(c=u,o?(u=zi(n,s),u!=null&&i.unshift(Qi(n,u,c))):o||(u=zi(n,s),u!=null&&i.push(Qi(n,u,c)))),n=n.return}i.length!==0&&t.push({event:e,listeners:i})}var x3=/\r\n?/g,b3=/\u0000|\uFFFD/g;function Z0(t){return(typeof t=="string"?t:""+t).replace(x3,`
`).replace(b3,"")}function P1(t,e){return e=Z0(e),Z0(t)===e}function ue(t,e,n,r,o,s){switch(n){case"children":typeof r=="string"?e==="body"||e==="textarea"&&r===""||ls(t,r):(typeof r=="number"||typeof r=="bigint")&&e!=="body"&&ls(t,""+r);break;case"className":ec(t,"class",r);break;case"tabIndex":ec(t,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ec(t,n,r);break;case"style":Ny(t,r,s);break;case"data":if(e!=="object"){ec(t,"data",r);break}case"src":case"href":if(r===""&&(e!=="a"||n!=="href")){t.removeAttribute(n);break}if(r==null||typeof r=="function"||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=pc(""+r),t.setAttribute(n,r);break;case"action":case"formAction":if(typeof r=="function"){t.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof s=="function"&&(n==="formAction"?(e!=="input"&&ue(t,e,"name",o.name,o,null),ue(t,e,"formEncType",o.formEncType,o,null),ue(t,e,"formMethod",o.formMethod,o,null),ue(t,e,"formTarget",o.formTarget,o,null)):(ue(t,e,"encType",o.encType,o,null),ue(t,e,"method",o.method,o,null),ue(t,e,"target",o.target,o,null)));if(r==null||typeof r=="symbol"||typeof r=="boolean"){t.removeAttribute(n);break}r=pc(""+r),t.setAttribute(n,r);break;case"onClick":r!=null&&(t.onclick=Pn);break;case"onScroll":r!=null&&Y("scroll",t);break;case"onScrollEnd":r!=null&&Y("scrollend",t);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(I(61));if(n=r.__html,n!=null){if(o.children!=null)throw Error(I(60));t.innerHTML=n}}break;case"multiple":t.multiple=r&&typeof r!="function"&&typeof r!="symbol";break;case"muted":t.muted=r&&typeof r!="function"&&typeof r!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(r==null||typeof r=="function"||typeof r=="boolean"||typeof r=="symbol"){t.removeAttribute("xlink:href");break}n=pc(""+r),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""+r):t.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,""):t.removeAttribute(n);break;case"capture":case"download":r===!0?t.setAttribute(n,""):r!==!1&&r!=null&&typeof r!="function"&&typeof r!="symbol"?t.setAttribute(n,r):t.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":r!=null&&typeof r!="function"&&typeof r!="symbol"&&!isNaN(r)&&1<=r?t.setAttribute(n,r):t.removeAttribute(n);break;case"rowSpan":case"start":r==null||typeof r=="function"||typeof r=="symbol"||isNaN(r)?t.removeAttribute(n):t.setAttribute(n,r);break;case"popover":Y("beforetoggle",t),Y("toggle",t),dc(t,"popover",r);break;case"xlinkActuate":On(t,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":On(t,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":On(t,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":On(t,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":On(t,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":On(t,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":On(t,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":On(t,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":On(t,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":dc(t,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=Y_.get(n)||n,dc(t,n,r))}}function Dm(t,e,n,r,o,s){switch(n){case"style":Ny(t,r,s);break;case"dangerouslySetInnerHTML":if(r!=null){if(typeof r!="object"||!("__html"in r))throw Error(I(61));if(n=r.__html,n!=null){if(o.children!=null)throw Error(I(60));t.innerHTML=n}}break;case"children":typeof r=="string"?ls(t,r):(typeof r=="number"||typeof r=="bigint")&&ls(t,""+r);break;case"onScroll":r!=null&&Y("scroll",t);break;case"onScrollEnd":r!=null&&Y("scrollend",t);break;case"onClick":r!=null&&(t.onclick=Pn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Iy.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),e=n.slice(2,o?n.length-7:void 0),s=t[wt]||null,s=s!=null?s[n]:null,typeof s=="function"&&t.removeEventListener(e,s,o),typeof r=="function")){typeof s!="function"&&s!==null&&(n in t?t[n]=null:t.hasAttribute(n)&&t.removeAttribute(n)),t.addEventListener(e,r,o);break e}n in t?t[n]=r:r===!0?t.setAttribute(n,""):dc(t,n,r)}}}function We(t,e,n){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Y("error",t),Y("load",t);var r=!1,o=!1,s;for(s in n)if(n.hasOwnProperty(s)){var i=n[s];if(i!=null)switch(s){case"src":r=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(I(137,e));default:ue(t,e,s,i,n,null)}}o&&ue(t,e,"srcSet",n.srcSet,n,null),r&&ue(t,e,"src",n.src,n,null);return;case"input":Y("invalid",t);var a=s=i=o=null,c=null,u=null;for(r in n)if(n.hasOwnProperty(r)){var l=n[r];if(l!=null)switch(r){case"name":o=l;break;case"type":i=l;break;case"checked":c=l;break;case"defaultChecked":u=l;break;case"value":s=l;break;case"defaultValue":a=l;break;case"children":case"dangerouslySetInnerHTML":if(l!=null)throw Error(I(137,e));break;default:ue(t,e,r,l,n,null)}}Gy(t,s,a,c,u,i,o,!1);return;case"select":Y("invalid",t),r=i=s=null;for(o in n)if(n.hasOwnProperty(o)&&(a=n[o],a!=null))switch(o){case"value":s=a;break;case"defaultValue":i=a;break;case"multiple":r=a;default:ue(t,e,o,a,n,null)}e=s,n=i,t.multiple=!!r,e!=null?ns(t,!!r,e,!1):n!=null&&ns(t,!!r,n,!0);return;case"textarea":Y("invalid",t),s=o=r=null;for(i in n)if(n.hasOwnProperty(i)&&(a=n[i],a!=null))switch(i){case"value":r=a;break;case"defaultValue":o=a;break;case"children":s=a;break;case"dangerouslySetInnerHTML":if(a!=null)throw Error(I(91));break;default:ue(t,e,i,a,n,null)}Fy(t,r,o,s);return;case"option":for(c in n)if(n.hasOwnProperty(c)&&(r=n[c],r!=null))switch(c){case"selected":t.selected=r&&typeof r!="function"&&typeof r!="symbol";break;default:ue(t,e,c,r,n,null)}return;case"dialog":Y("beforetoggle",t),Y("toggle",t),Y("cancel",t),Y("close",t);break;case"iframe":case"object":Y("load",t);break;case"video":case"audio":for(r=0;r<Yi.length;r++)Y(Yi[r],t);break;case"image":Y("error",t),Y("load",t);break;case"details":Y("toggle",t);break;case"embed":case"source":case"link":Y("error",t),Y("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&(r=n[u],r!=null))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(I(137,e));default:ue(t,e,u,r,n,null)}return;default:if(Xm(e)){for(l in n)n.hasOwnProperty(l)&&(r=n[l],r!==void 0&&Dm(t,e,l,r,n,void 0));return}}for(a in n)n.hasOwnProperty(a)&&(r=n[a],r!=null&&ue(t,e,a,r,n,null))}function v3(t,e,n,r){switch(e){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,s=null,i=null,a=null,c=null,u=null,l=null;for(d in n){var f=n[d];if(n.hasOwnProperty(d)&&f!=null)switch(d){case"checked":break;case"value":break;case"defaultValue":c=f;default:r.hasOwnProperty(d)||ue(t,e,d,null,r,f)}}for(var m in r){var d=r[m];if(f=n[m],r.hasOwnProperty(m)&&(d!=null||f!=null))switch(m){case"type":s=d;break;case"name":o=d;break;case"checked":u=d;break;case"defaultChecked":l=d;break;case"value":i=d;break;case"defaultValue":a=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(I(137,e));break;default:d!==f&&ue(t,e,m,d,r,f)}}rm(t,i,a,c,u,l,s,o);return;case"select":d=i=a=m=null;for(s in n)if(c=n[s],n.hasOwnProperty(s)&&c!=null)switch(s){case"value":break;case"multiple":d=c;default:r.hasOwnProperty(s)||ue(t,e,s,null,r,c)}for(o in r)if(s=r[o],c=n[o],r.hasOwnProperty(o)&&(s!=null||c!=null))switch(o){case"value":m=s;break;case"defaultValue":a=s;break;case"multiple":i=s;default:s!==c&&ue(t,e,o,s,r,c)}e=a,n=i,r=d,m!=null?ns(t,!!n,m,!1):!!r!=!!n&&(e!=null?ns(t,!!n,e,!0):ns(t,!!n,n?[]:"",!1));return;case"textarea":d=m=null;for(a in n)if(o=n[a],n.hasOwnProperty(a)&&o!=null&&!r.hasOwnProperty(a))switch(a){case"value":break;case"children":break;default:ue(t,e,a,null,r,o)}for(i in r)if(o=r[i],s=n[i],r.hasOwnProperty(i)&&(o!=null||s!=null))switch(i){case"value":m=o;break;case"defaultValue":d=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(I(91));break;default:o!==s&&ue(t,e,i,o,r,s)}Ly(t,m,d);return;case"option":for(var p in n)if(m=n[p],n.hasOwnProperty(p)&&m!=null&&!r.hasOwnProperty(p))switch(p){case"selected":t.selected=!1;break;default:ue(t,e,p,null,r,m)}for(c in r)if(m=r[c],d=n[c],r.hasOwnProperty(c)&&m!==d&&(m!=null||d!=null))switch(c){case"selected":t.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ue(t,e,c,m,r,d)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var b in n)m=n[b],n.hasOwnProperty(b)&&m!=null&&!r.hasOwnProperty(b)&&ue(t,e,b,null,r,m);for(u in r)if(m=r[u],d=n[u],r.hasOwnProperty(u)&&m!==d&&(m!=null||d!=null))switch(u){case"children":case"dangerouslySetInnerHTML":if(m!=null)throw Error(I(137,e));break;default:ue(t,e,u,m,r,d)}return;default:if(Xm(e)){for(var w in n)m=n[w],n.hasOwnProperty(w)&&m!==void 0&&!r.hasOwnProperty(w)&&Dm(t,e,w,void 0,r,m);for(l in r)m=r[l],d=n[l],!r.hasOwnProperty(l)||m===d||m===void 0&&d===void 0||Dm(t,e,l,m,r,d);return}}for(var h in n)m=n[h],n.hasOwnProperty(h)&&m!=null&&!r.hasOwnProperty(h)&&ue(t,e,h,null,r,m);for(f in r)m=r[f],d=n[f],!r.hasOwnProperty(f)||m===d||m==null&&d==null||ue(t,e,f,m,r,d)}function ey(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function A3(){if(typeof performance.getEntriesByType=="function"){for(var t=0,e=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var o=n[r],s=o.transferSize,i=o.initiatorType,a=o.duration;if(s&&a&&ey(i)){for(i=0,a=o.responseEnd,r+=1;r<n.length;r++){var c=n[r],u=c.startTime;if(u>a)break;var l=c.transferSize,f=c.initiatorType;l&&ey(f)&&(c=c.responseEnd,i+=l*(c<a?1:(a-u)/(c-u)))}if(--r,e+=8*(s+i)/(o.duration/1e3),t++,10<t)break}}if(0<t)return e/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var km=null,Im=null;function $c(t){return t.nodeType===9?t:t.ownerDocument}function ty(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function j1(t,e){if(t===0)switch(e){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&e==="foreignObject"?0:t}function Om(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.children=="bigint"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Kf=null;function _3(){var t=window.event;return t&&t.type==="popstate"?t===Kf?!1:(Kf=t,!0):(Kf=null,!1)}var K1=typeof setTimeout=="function"?setTimeout:void 0,w3=typeof clearTimeout=="function"?clearTimeout:void 0,ny=typeof Promise=="function"?Promise:void 0,T3=typeof queueMicrotask=="function"?queueMicrotask:typeof ny<"u"?function(t){return ny.resolve(null).then(t).catch(B3)}:K1;function B3(t){setTimeout(function(){throw t})}function Gr(t){return t==="head"}function ry(t,e){var n=e,r=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(r===0){t.removeChild(o),xs(e);return}r--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")r++;else if(n==="html")Fi(t.ownerDocument.documentElement);else if(n==="head"){n=t.ownerDocument.head,Fi(n);for(var s=n.firstChild;s;){var i=s.nextSibling,a=s.nodeName;s[oa]||a==="SCRIPT"||a==="STYLE"||a==="LINK"&&s.rel.toLowerCase()==="stylesheet"||n.removeChild(s),s=i}}else n==="body"&&Fi(t.ownerDocument.body);n=o}while(n);xs(e)}function oy(t,e){var n=t;t=0;do{var r=n.nextSibling;if(n.nodeType===1?e?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(e?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(t===0)break;t--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||t++;n=r}while(n)}function Um(t){var e=t.firstChild;for(e&&e.nodeType===10&&(e=e.nextSibling);e;){var n=e;switch(e=e.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Um(n),qm(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}t.removeChild(n)}}function E3(t,e,n,r){for(;t.nodeType===1;){var o=n;if(t.nodeName.toLowerCase()!==e.toLowerCase()){if(!r&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(r){if(!t[oa])switch(e){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(s=t.getAttribute("rel"),s==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(s!==o.rel||t.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||t.getAttribute("title")!==(o.title==null?null:o.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(s=t.getAttribute("src"),(s!==(o.src==null?null:o.src)||t.getAttribute("type")!==(o.type==null?null:o.type)||t.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&s&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(e==="input"&&t.type==="hidden"){var s=o.name==null?null:""+o.name;if(o.type==="hidden"&&t.getAttribute("name")===s)return t}else return t;if(t=$t(t.nextSibling),t===null)break}return null}function S3(t,e,n){if(e==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=$t(t.nextSibling),t===null))return null;return t}function J1(t,e){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!e||(t=$t(t.nextSibling),t===null))return null;return t}function Gm(t){return t.data==="$?"||t.data==="$~"}function Lm(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function M3(t,e){var n=t.ownerDocument;if(t.data==="$~")t._reactRetry=e;else if(t.data!=="$?"||n.readyState!=="loading")e();else{var r=function(){e(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),t._reactRetry=r}}function $t(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?"||e==="$~"||e==="&"||e==="F!"||e==="F")break;if(e==="/$"||e==="/&")return null}}return t}var Fm=null;function sy(t){t=t.nextSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"||n==="/&"){if(e===0)return $t(t.nextSibling);e--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||e++}t=t.nextSibling}return null}function iy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(e===0)return t;e--}else n!=="/$"&&n!=="/&"||e++}t=t.previousSibling}return null}function q1(t,e,n){switch(e=$c(n),t){case"html":if(t=e.documentElement,!t)throw Error(I(452));return t;case"head":if(t=e.head,!t)throw Error(I(453));return t;case"body":if(t=e.body,!t)throw Error(I(454));return t;default:throw Error(I(451))}}function Fi(t){for(var e=t.attributes;e.length;)t.removeAttributeNode(e[0]);qm(t)}var Zt=new Map,ay=new Set;function Zc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Zn=re.d;re.d={f:C3,r:V3,D:R3,C:D3,L:k3,m:I3,X:U3,S:O3,M:G3};function C3(){var t=Zn.f(),e=gu();return t||e}function V3(t){var e=vs(t);e!==null&&e.tag===5&&e.type==="form"?Nx(e):Zn.r(t)}var Ts=typeof document>"u"?null:document;function X1(t,e,n){var r=Ts;if(r&&typeof e=="string"&&e){var o=Xt(e);o='link[rel="'+t+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),ay.has(o)||(ay.add(o),t={rel:t,crossOrigin:n,href:e},r.querySelector(o)===null&&(e=r.createElement("link"),We(e,"link",t),Pe(e),r.head.appendChild(e)))}}function R3(t){Zn.D(t),X1("dns-prefetch",t,null)}function D3(t,e){Zn.C(t,e),X1("preconnect",t,e)}function k3(t,e,n){Zn.L(t,e,n);var r=Ts;if(r&&t&&e){var o='link[rel="preload"][as="'+Xt(e)+'"]';e==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+Xt(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+Xt(n.imageSizes)+'"]')):o+='[href="'+Xt(t)+'"]';var s=o;switch(e){case"style":s=ys(t);break;case"script":s=Bs(t)}Zt.has(s)||(t=be({rel:"preload",href:e==="image"&&n&&n.imageSrcSet?void 0:t,as:e},n),Zt.set(s,t),r.querySelector(o)!==null||e==="style"&&r.querySelector(la(s))||e==="script"&&r.querySelector(fa(s))||(e=r.createElement("link"),We(e,"link",t),Pe(e),r.head.appendChild(e)))}}function I3(t,e){Zn.m(t,e);var n=Ts;if(n&&t){var r=e&&typeof e.as=="string"?e.as:"script",o='link[rel="modulepreload"][as="'+Xt(r)+'"][href="'+Xt(t)+'"]',s=o;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":s=Bs(t)}if(!Zt.has(s)&&(t=be({rel:"modulepreload",href:t},e),Zt.set(s,t),n.querySelector(o)===null)){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(fa(s)))return}r=n.createElement("link"),We(r,"link",t),Pe(r),n.head.appendChild(r)}}}function O3(t,e,n){Zn.S(t,e,n);var r=Ts;if(r&&t){var o=ts(r).hoistableStyles,s=ys(t);e=e||"default";var i=o.get(s);if(!i){var a={loading:0,preload:null};if(i=r.querySelector(la(s)))a.loading=5;else{t=be({rel:"stylesheet",href:t,"data-precedence":e},n),(n=Zt.get(s))&&Dh(t,n);var c=i=r.createElement("link");Pe(c),We(c,"link",t),c._p=new Promise(function(u,l){c.onload=u,c.onerror=l}),c.addEventListener("load",function(){a.loading|=1}),c.addEventListener("error",function(){a.loading|=2}),a.loading|=4,Bc(i,e,r)}i={type:"stylesheet",instance:i,count:1,state:a},o.set(s,i)}}}function U3(t,e){Zn.X(t,e);var n=Ts;if(n&&t){var r=ts(n).hoistableScripts,o=Bs(t),s=r.get(o);s||(s=n.querySelector(fa(o)),s||(t=be({src:t,async:!0},e),(e=Zt.get(o))&&kh(t,e),s=n.createElement("script"),Pe(s),We(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(o,s))}}function G3(t,e){Zn.M(t,e);var n=Ts;if(n&&t){var r=ts(n).hoistableScripts,o=Bs(t),s=r.get(o);s||(s=n.querySelector(fa(o)),s||(t=be({src:t,async:!0,type:"module"},e),(e=Zt.get(o))&&kh(t,e),s=n.createElement("script"),Pe(s),We(s,"link",t),n.head.appendChild(s)),s={type:"script",instance:s,count:1,state:null},r.set(o,s))}}function cy(t,e,n,r){var o=(o=wr.current)?Zc(o):null;if(!o)throw Error(I(446));switch(t){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(e=ys(n.href),n=ts(o).hoistableStyles,r=n.get(e),r||(r={type:"style",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){t=ys(n.href);var s=ts(o).hoistableStyles,i=s.get(t);if(i||(o=o.ownerDocument||o,i={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},s.set(t,i),(s=o.querySelector(la(t)))&&!s._p&&(i.instance=s,i.state.loading=5),Zt.has(t)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Zt.set(t,n),s||L3(o,t,n,i.state))),e&&r===null)throw Error(I(528,""));return i}if(e&&r!==null)throw Error(I(529,""));return null;case"script":return e=n.async,n=n.src,typeof n=="string"&&e&&typeof e!="function"&&typeof e!="symbol"?(e=Bs(n),n=ts(o).hoistableScripts,r=n.get(e),r||(r={type:"script",instance:null,count:0,state:null},n.set(e,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(I(444,t))}}function ys(t){return'href="'+Xt(t)+'"'}function la(t){return'link[rel="stylesheet"]['+t+"]"}function Y1(t){return be({},t,{"data-precedence":t.precedence,precedence:null})}function L3(t,e,n,r){t.querySelector('link[rel="preload"][as="style"]['+e+"]")?r.loading=1:(e=t.createElement("link"),r.preload=e,e.addEventListener("load",function(){return r.loading|=1}),e.addEventListener("error",function(){return r.loading|=2}),We(e,"link",n),Pe(e),t.head.appendChild(e))}function Bs(t){return'[src="'+Xt(t)+'"]'}function fa(t){return"script[async]"+t}function uy(t,e,n){if(e.count++,e.instance===null)switch(e.type){case"style":var r=t.querySelector('style[data-href~="'+Xt(n.href)+'"]');if(r)return e.instance=r,Pe(r),r;var o=be({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return r=(t.ownerDocument||t).createElement("style"),Pe(r),We(r,"style",o),Bc(r,n.precedence,t),e.instance=r;case"stylesheet":o=ys(n.href);var s=t.querySelector(la(o));if(s)return e.state.loading|=4,e.instance=s,Pe(s),s;r=Y1(n),(o=Zt.get(o))&&Dh(r,o),s=(t.ownerDocument||t).createElement("link"),Pe(s);var i=s;return i._p=new Promise(function(a,c){i.onload=a,i.onerror=c}),We(s,"link",r),e.state.loading|=4,Bc(s,n.precedence,t),e.instance=s;case"script":return s=Bs(n.src),(o=t.querySelector(fa(s)))?(e.instance=o,Pe(o),o):(r=n,(o=Zt.get(s))&&(r=be({},n),kh(r,o)),t=t.ownerDocument||t,o=t.createElement("script"),Pe(o),We(o,"link",r),t.head.appendChild(o),e.instance=o);case"void":return null;default:throw Error(I(443,e.type))}else e.type==="stylesheet"&&(e.state.loading&4)===0&&(r=e.instance,e.state.loading|=4,Bc(r,n.precedence,t));return e.instance}function Bc(t,e,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=r.length?r[r.length-1]:null,s=o,i=0;i<r.length;i++){var a=r[i];if(a.dataset.precedence===e)s=a;else if(s!==o)break}s?s.parentNode.insertBefore(t,s.nextSibling):(e=n.nodeType===9?n.head:n,e.insertBefore(t,e.firstChild))}function Dh(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.title==null&&(t.title=e.title)}function kh(t,e){t.crossOrigin==null&&(t.crossOrigin=e.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=e.referrerPolicy),t.integrity==null&&(t.integrity=e.integrity)}var Ec=null;function ly(t,e,n){if(Ec===null){var r=new Map,o=Ec=new Map;o.set(n,r)}else o=Ec,r=o.get(n),r||(r=new Map,o.set(n,r));if(r.has(t))return r;for(r.set(t,null),n=n.getElementsByTagName(t),o=0;o<n.length;o++){var s=n[o];if(!(s[oa]||s[Xe]||t==="link"&&s.getAttribute("rel")==="stylesheet")&&s.namespaceURI!=="http://www.w3.org/2000/svg"){var i=s.getAttribute(e)||"";i=t+i;var a=r.get(i);a?a.push(s):r.set(i,[s])}}return r}function fy(t,e,n){t=t.ownerDocument||t,t.head.insertBefore(n,e==="title"?t.querySelector("head > title"):null)}function F3(t,e,n){if(n===1||e.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof e.precedence!="string"||typeof e.href!="string"||e.href==="")break;return!0;case"link":if(typeof e.rel!="string"||typeof e.href!="string"||e.href===""||e.onLoad||e.onError)break;switch(e.rel){case"stylesheet":return t=e.disabled,typeof e.precedence=="string"&&t==null;default:return!0}case"script":if(e.async&&typeof e.async!="function"&&typeof e.async!="symbol"&&!e.onLoad&&!e.onError&&e.src&&typeof e.src=="string")return!0}return!1}function Q1(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function N3(t,e,n,r){if(n.type==="stylesheet"&&(typeof r.media!="string"||matchMedia(r.media).matches!==!1)&&(n.state.loading&4)===0){if(n.instance===null){var o=ys(r.href),s=e.querySelector(la(o));if(s){e=s._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(t.count++,t=eu.bind(t),e.then(t,t)),n.state.loading|=4,n.instance=s,Pe(s);return}s=e.ownerDocument||e,r=Y1(r),(o=Zt.get(o))&&Dh(r,o),s=s.createElement("link"),Pe(s);var i=s;i._p=new Promise(function(a,c){i.onload=a,i.onerror=c}),We(s,"link",r),n.instance=s}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(n,e),(e=n.state.preload)&&(n.state.loading&3)===0&&(t.count++,n=eu.bind(t),e.addEventListener("load",n),e.addEventListener("error",n))}}var Jf=0;function z3(t,e){return t.stylesheets&&t.count===0&&Sc(t,t.stylesheets),0<t.count||0<t.imgCount?function(n){var r=setTimeout(function(){if(t.stylesheets&&Sc(t,t.stylesheets),t.unsuspend){var s=t.unsuspend;t.unsuspend=null,s()}},6e4+e);0<t.imgBytes&&Jf===0&&(Jf=62500*A3());var o=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Sc(t,t.stylesheets),t.unsuspend)){var s=t.unsuspend;t.unsuspend=null,s()}},(t.imgBytes>Jf?50:800)+e);return t.unsuspend=n,function(){t.unsuspend=null,clearTimeout(r),clearTimeout(o)}}:null}function eu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Sc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var tu=null;function Sc(t,e){t.stylesheets=null,t.unsuspend!==null&&(t.count++,tu=new Map,e.forEach(H3,t),tu=null,eu.call(t))}function H3(t,e){if(!(e.state.loading&4)){var n=tu.get(t);if(n)var r=n.get(null);else{n=new Map,tu.set(t,n);for(var o=t.querySelectorAll("link[data-precedence],style[data-precedence]"),s=0;s<o.length;s++){var i=o[s];(i.nodeName==="LINK"||i.getAttribute("media")!=="not all")&&(n.set(i.dataset.precedence,i),r=i)}r&&n.set(null,r)}o=e.instance,i=o.getAttribute("data-precedence"),s=n.get(i)||r,s===r&&n.set(null,o),n.set(i,o),this.count++,r=eu.bind(this),o.addEventListener("load",r),o.addEventListener("error",r),s?s.parentNode.insertBefore(o,s.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(o,t.firstChild)),e.state.loading|=4}}var Wi={$$typeof:Hn,Provider:null,Consumer:null,_currentValue:no,_currentValue2:no,_threadCount:0};function P3(t,e,n,r,o,s,i,a,c){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=xf(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xf(0),this.hiddenUpdates=xf(null),this.identifierPrefix=r,this.onUncaughtError=o,this.onCaughtError=s,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=c,this.incompleteTransitions=new Map}function W1(t,e,n,r,o,s,i,a,c,u,l,f){return t=new P3(t,e,n,i,c,u,l,f,a),e=1,s===!0&&(e|=24),s=Vt(3,null,null,e),t.current=s,s.stateNode=t,e=sh(),e.refCount++,t.pooledCache=e,e.refCount++,s.memoizedState={element:r,isDehydrated:n,cache:e},ch(s),t}function $1(t){return t?(t=Wo,t):Wo}function Z1(t,e,n,r,o,s){o=$1(o),r.context===null?r.context=o:r.pendingContext=o,r=Br(e),r.payload={element:n},s=s===void 0?null:s,s!==null&&(r.callback=s),n=Er(t,r,e),n!==null&&(_t(n,t,e),Ri(n,t,e))}function my(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ih(t,e){my(t,e),(t=t.alternate)&&my(t,e)}function e2(t){if(t.tag===13||t.tag===31){var e=go(t,67108864);e!==null&&_t(e,t,67108864),Ih(t,67108864)}}function hy(t){if(t.tag===13||t.tag===31){var e=Ot();e=Km(e);var n=go(t,e);n!==null&&_t(n,t,e),Ih(t,e)}}var nu=!0;function j3(t,e,n,r){var o=H.T;H.T=null;var s=re.p;try{re.p=2,Oh(t,e,n,r)}finally{re.p=s,H.T=o}}function K3(t,e,n,r){var o=H.T;H.T=null;var s=re.p;try{re.p=8,Oh(t,e,n,r)}finally{re.p=s,H.T=o}}function Oh(t,e,n,r){if(nu){var o=Nm(r);if(o===null)jf(t,e,r,ru,n),dy(t,r);else if(q3(o,t,e,n,r))r.stopPropagation();else if(dy(t,r),e&4&&-1<J3.indexOf(t)){for(;o!==null;){var s=vs(o);if(s!==null)switch(s.tag){case 3:if(s=s.stateNode,s.current.memoizedState.isDehydrated){var i=Zr(s.pendingLanes);if(i!==0){var a=s;for(a.pendingLanes|=2,a.entangledLanes|=2;i;){var c=1<<31-It(i);a.entanglements[1]|=c,i&=~c}Tn(s),(ne&6)===0&&(Jc=Dt()+500,ua(0,!1))}}break;case 31:case 13:a=go(s,2),a!==null&&_t(a,s,2),gu(),Ih(s,2)}if(s=Nm(r),s===null&&jf(t,e,r,ru,n),s===o)break;o=s}o!==null&&r.stopPropagation()}else jf(t,e,r,null,n)}}function Nm(t){return t=Ym(t),Uh(t)}var ru=null;function Uh(t){if(ru=null,t=Ko(t),t!==null){var e=ea(t);if(e===null)t=null;else{var n=e.tag;if(n===13){if(t=vy(e),t!==null)return t;t=null}else if(n===31){if(t=Ay(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null)}}return ru=t,null}function t2(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(k_()){case By:return 2;case Ey:return 8;case Dc:case I_:return 32;case Sy:return 268435456;default:return 32}default:return 32}}var zm=!1,Cr=null,Vr=null,Rr=null,$i=new Map,Zi=new Map,yr=[],J3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dy(t,e){switch(t){case"focusin":case"focusout":Cr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":Rr=null;break;case"pointerover":case"pointerout":$i.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zi.delete(e.pointerId)}}function vi(t,e,n,r,o,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[o]},e!==null&&(e=vs(e),e!==null&&e2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function q3(t,e,n,r,o){switch(e){case"focusin":return Cr=vi(Cr,t,e,n,r,o),!0;case"dragenter":return Vr=vi(Vr,t,e,n,r,o),!0;case"mouseover":return Rr=vi(Rr,t,e,n,r,o),!0;case"pointerover":var s=o.pointerId;return $i.set(s,vi($i.get(s)||null,t,e,n,r,o)),!0;case"gotpointercapture":return s=o.pointerId,Zi.set(s,vi(Zi.get(s)||null,t,e,n,r,o)),!0}return!1}function n2(t){var e=Ko(t.target);if(e!==null){var n=ea(e);if(n!==null){if(e=n.tag,e===13){if(e=vy(n),e!==null){t.blockedOn=e,Wg(t.priority,function(){hy(n)});return}}else if(e===31){if(e=Ay(n),e!==null){t.blockedOn=e,Wg(t.priority,function(){hy(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Mc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nm(t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);sm=r,n.target.dispatchEvent(r),sm=null}else return e=vs(n),e!==null&&e2(e),t.blockedOn=n,!1;e.shift()}return!0}function py(t,e,n){Mc(t)&&n.delete(e)}function X3(){zm=!1,Cr!==null&&Mc(Cr)&&(Cr=null),Vr!==null&&Mc(Vr)&&(Vr=null),Rr!==null&&Mc(Rr)&&(Rr=null),$i.forEach(py),Zi.forEach(py)}function mc(t,e){t.blockedOn===e&&(t.blockedOn=null,zm||(zm=!0,Ne.unstable_scheduleCallback(Ne.unstable_NormalPriority,X3)))}var hc=null;function gy(t){hc!==t&&(hc=t,Ne.unstable_scheduleCallback(Ne.unstable_NormalPriority,function(){hc===t&&(hc=null);for(var e=0;e<t.length;e+=3){var n=t[e],r=t[e+1],o=t[e+2];if(typeof r!="function"){if(Uh(r||n)===null)continue;break}var s=vs(n);s!==null&&(t.splice(e,3),e-=3,Am(s,{pending:!0,data:o,method:n.method,action:r},r,o))}}))}function xs(t){function e(c){return mc(c,t)}Cr!==null&&mc(Cr,t),Vr!==null&&mc(Vr,t),Rr!==null&&mc(Rr,t),$i.forEach(e),Zi.forEach(e);for(var n=0;n<yr.length;n++){var r=yr[n];r.blockedOn===t&&(r.blockedOn=null)}for(;0<yr.length&&(n=yr[0],n.blockedOn===null);)n2(n),n.blockedOn===null&&yr.shift();if(n=(t.ownerDocument||t).$$reactFormReplay,n!=null)for(r=0;r<n.length;r+=3){var o=n[r],s=n[r+1],i=o[wt]||null;if(typeof s=="function")i||gy(n);else if(i){var a=null;if(s&&s.hasAttribute("formAction")){if(o=s,i=s[wt]||null)a=i.formAction;else if(Uh(o)!==null)continue}else a=i.action;typeof a=="function"?n[r+1]=a:(n.splice(r,3),r-=3),gy(n)}}}function r2(){function t(s){s.canIntercept&&s.info==="react-transition"&&s.intercept({handler:function(){return new Promise(function(i){return o=i})},focusReset:"manual",scroll:"manual"})}function e(){o!==null&&(o(),o=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var s=navigation.currentEntry;s&&s.url!=null&&navigation.navigate(s.url,{state:s.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var r=!1,o=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",e),navigation.addEventListener("navigateerror",e),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",e),navigation.removeEventListener("navigateerror",e),o!==null&&(o(),o=null)}}}function Gh(t){this._internalRoot=t}bu.prototype.render=Gh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));var n=e.current,r=Ot();Z1(n,r,t,e,null,null)};bu.prototype.unmount=Gh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Z1(t.current,2,null,t,null,null),gu(),e[bs]=null}};function bu(t){this._internalRoot=t}bu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Dy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<yr.length&&e!==0&&e<yr[n].priority;n++);yr.splice(n,0,t),n===0&&n2(t)}};var yy=xy.version;if(yy!=="19.2.0")throw Error(I(527,yy,"19.2.0"));re.findDOMNode=function(t){var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=E_(e),t=t!==null?_y(t):null,t=t===null?null:t.stateNode,t};var Y3={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&(Ai=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Ai.isDisabled&&Ai.supportsFiber))try{ta=Ai.inject(Y3),kt=Ai}catch{}var Ai;vu.createRoot=function(t,e){if(!by(t))throw Error(I(299));var n=!1,r="",o=Xx,s=Yx,i=Qx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onUncaughtError!==void 0&&(o=e.onUncaughtError),e.onCaughtError!==void 0&&(s=e.onCaughtError),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=W1(t,1,!1,null,null,n,r,null,o,s,i,r2),t[bs]=e.current,Rh(t),new Gh(e)};vu.hydrateRoot=function(t,e,n){if(!by(t))throw Error(I(299));var r=!1,o="",s=Xx,i=Yx,a=Qx,c=null;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(s=n.onUncaughtError),n.onCaughtError!==void 0&&(i=n.onCaughtError),n.onRecoverableError!==void 0&&(a=n.onRecoverableError),n.formState!==void 0&&(c=n.formState)),e=W1(t,1,!0,e,n??null,r,o,c,s,i,a,r2),e.context=$1(null),n=e.current,r=Ot(),r=Km(r),o=Br(r),o.callback=null,Er(n,o,r),n=r,e.current.lanes=n,ra(e,n),Tn(e),t[bs]=e.current,Rh(t),new bu(e)};vu.version="19.2.0"});var a2=it((cR,i2)=>{"use strict";function s2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s2)}catch(t){console.error(t)}}s2(),i2.exports=o2()});var Aa=it(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.isAnyArray=void 0;var yT=Object.prototype.toString;function xT(t){let e=yT.call(t);return e.endsWith("Array]")&&!e.includes("Big")}Wu.isAnyArray=xT});var V2=it((WD,C2)=>{"use strict";var bT=Aa();function vT(t,e={}){if(!bT.isAnyArray(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");let{fromIndex:n=0,toIndex:r=t.length}=e;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(r<=n||r>t.length||!Number.isInteger(r))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");let o=t[n];for(let s=n+1;s<r;s++)t[s]>o&&(o=t[s]);return o}C2.exports=vT});var D2=it(($D,R2)=>{"use strict";var AT=Aa();function _T(t,e={}){if(!AT.isAnyArray(t))throw new TypeError("input must be an array");if(t.length===0)throw new TypeError("input must not be empty");let{fromIndex:n=0,toIndex:r=t.length}=e;if(n<0||n>=t.length||!Number.isInteger(n))throw new Error("fromIndex must be a positive integer smaller than length");if(r<=n||r>t.length||!Number.isInteger(r))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");let o=t[n];for(let s=n+1;s<r;s++)t[s]<o&&(o=t[s]);return o}R2.exports=_T});var U2=it((ZD,O2)=>{"use strict";var k2=Aa(),wT=V2(),TT=D2();function I2(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}var BT=I2(wT),ET=I2(TT);function ST(t,e={}){if(k2.isAnyArray(t)){if(t.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");let n;if(e.output!==void 0){if(!k2.isAnyArray(e.output))throw new TypeError("output option must be an array if specified");n=e.output}else n=new Array(t.length);let r=ET.default(t),o=BT.default(t);if(r===o)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");let{min:s=e.autoMinMax?r:0,max:i=e.autoMinMax?o:1}=e;if(s>=i)throw new RangeError("min option must be smaller than max option");let a=(i-s)/(o-r);for(let c=0;c<t.length;c++)n[c]=(t[c]-r)*a+s;return n}O2.exports=ST});var P2=it(q=>{"use strict";Object.defineProperty(q,"__esModule",{value:!0});var Et=Aa(),G2=U2(),$u=" ".repeat(2),N2=" ".repeat(4);function MT(){return z2(this)}function z2(t,e={}){let{maxRows:n=15,maxColumns:r=10,maxNumSize:o=8,padMinus:s="auto"}=e;return`${t.constructor.name} {
${$u}[
${N2}${CT(t,n,r,o,s)}
${$u}]
${$u}rows: ${t.rows}
${$u}columns: ${t.columns}
}`}function CT(t,e,n,r,o){let{rows:s,columns:i}=t,a=Math.min(s,e),c=Math.min(i,n),u=[];if(o==="auto"){o=!1;e:for(let l=0;l<a;l++)for(let f=0;f<c;f++)if(t.get(l,f)<0){o=!0;break e}}for(let l=0;l<a;l++){let f=[];for(let m=0;m<c;m++)f.push(VT(t.get(l,m),r,o));u.push(`${f.join(" ")}`)}return c!==i&&(u[u.length-1]+=` ... ${i-n} more columns`),a!==s&&u.push(`... ${s-e} more rows`),u.join(`
${N2}`)}function VT(t,e,n){return(t>=0&&n?` ${L2(t,e-1)}`:L2(t,e)).padEnd(e)}function L2(t,e){let n=t.toString();if(n.length<=e)return n;let r=t.toFixed(e);if(r.length>e&&(r=t.toFixed(Math.max(0,e-(r.length-e)))),r.length<=e&&!r.startsWith("0.000")&&!r.startsWith("-0.000"))return r;let o=t.toExponential(e);return o.length>e&&(o=t.toExponential(Math.max(0,e-(o.length-e)))),o.slice(0)}function RT(t,e){t.prototype.add=function(r){return typeof r=="number"?this.addS(r):this.addM(r)},t.prototype.addS=function(r){for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)+r);return this},t.prototype.addM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)+r.get(o,s));return this},t.add=function(r,o){return new e(r).add(o)},t.prototype.sub=function(r){return typeof r=="number"?this.subS(r):this.subM(r)},t.prototype.subS=function(r){for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)-r);return this},t.prototype.subM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)-r.get(o,s));return this},t.sub=function(r,o){return new e(r).sub(o)},t.prototype.subtract=t.prototype.sub,t.prototype.subtractS=t.prototype.subS,t.prototype.subtractM=t.prototype.subM,t.subtract=t.sub,t.prototype.mul=function(r){return typeof r=="number"?this.mulS(r):this.mulM(r)},t.prototype.mulS=function(r){for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)*r);return this},t.prototype.mulM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)*r.get(o,s));return this},t.mul=function(r,o){return new e(r).mul(o)},t.prototype.multiply=t.prototype.mul,t.prototype.multiplyS=t.prototype.mulS,t.prototype.multiplyM=t.prototype.mulM,t.multiply=t.mul,t.prototype.div=function(r){return typeof r=="number"?this.divS(r):this.divM(r)},t.prototype.divS=function(r){for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)/r);return this},t.prototype.divM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)/r.get(o,s));return this},t.div=function(r,o){return new e(r).div(o)},t.prototype.divide=t.prototype.div,t.prototype.divideS=t.prototype.divS,t.prototype.divideM=t.prototype.divM,t.divide=t.div,t.prototype.mod=function(r){return typeof r=="number"?this.modS(r):this.modM(r)},t.prototype.modS=function(r){for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)%r);return this},t.prototype.modM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)%r.get(o,s));return this},t.mod=function(r,o){return new e(r).mod(o)},t.prototype.modulus=t.prototype.mod,t.prototype.modulusS=t.prototype.modS,t.prototype.modulusM=t.prototype.modM,t.modulus=t.mod,t.prototype.and=function(r){return typeof r=="number"?this.andS(r):this.andM(r)},t.prototype.andS=function(r){for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)&r);return this},t.prototype.andM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)&r.get(o,s));return this},t.and=function(r,o){return new e(r).and(o)},t.prototype.or=function(r){return typeof r=="number"?this.orS(r):this.orM(r)},t.prototype.orS=function(r){for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)|r);return this},t.prototype.orM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)|r.get(o,s));return this},t.or=function(r,o){return new e(r).or(o)},t.prototype.xor=function(r){return typeof r=="number"?this.xorS(r):this.xorM(r)},t.prototype.xorS=function(r){for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)^r);return this},t.prototype.xorM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)^r.get(o,s));return this},t.xor=function(r,o){return new e(r).xor(o)},t.prototype.leftShift=function(r){return typeof r=="number"?this.leftShiftS(r):this.leftShiftM(r)},t.prototype.leftShiftS=function(r){for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)<<r);return this},t.prototype.leftShiftM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)<<r.get(o,s));return this},t.leftShift=function(r,o){return new e(r).leftShift(o)},t.prototype.signPropagatingRightShift=function(r){return typeof r=="number"?this.signPropagatingRightShiftS(r):this.signPropagatingRightShiftM(r)},t.prototype.signPropagatingRightShiftS=function(r){for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)>>r);return this},t.prototype.signPropagatingRightShiftM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)>>r.get(o,s));return this},t.signPropagatingRightShift=function(r,o){return new e(r).signPropagatingRightShift(o)},t.prototype.rightShift=function(r){return typeof r=="number"?this.rightShiftS(r):this.rightShiftM(r)},t.prototype.rightShiftS=function(r){for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)>>>r);return this},t.prototype.rightShiftM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)>>>r.get(o,s));return this},t.rightShift=function(r,o){return new e(r).rightShift(o)},t.prototype.zeroFillRightShift=t.prototype.rightShift,t.prototype.zeroFillRightShiftS=t.prototype.rightShiftS,t.prototype.zeroFillRightShiftM=t.prototype.rightShiftM,t.zeroFillRightShift=t.rightShift,t.prototype.not=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,~this.get(r,o));return this},t.not=function(r){return new e(r).not()},t.prototype.abs=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.abs(this.get(r,o)));return this},t.abs=function(r){return new e(r).abs()},t.prototype.acos=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.acos(this.get(r,o)));return this},t.acos=function(r){return new e(r).acos()},t.prototype.acosh=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.acosh(this.get(r,o)));return this},t.acosh=function(r){return new e(r).acosh()},t.prototype.asin=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.asin(this.get(r,o)));return this},t.asin=function(r){return new e(r).asin()},t.prototype.asinh=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.asinh(this.get(r,o)));return this},t.asinh=function(r){return new e(r).asinh()},t.prototype.atan=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.atan(this.get(r,o)));return this},t.atan=function(r){return new e(r).atan()},t.prototype.atanh=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.atanh(this.get(r,o)));return this},t.atanh=function(r){return new e(r).atanh()},t.prototype.cbrt=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.cbrt(this.get(r,o)));return this},t.cbrt=function(r){return new e(r).cbrt()},t.prototype.ceil=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.ceil(this.get(r,o)));return this},t.ceil=function(r){return new e(r).ceil()},t.prototype.clz32=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.clz32(this.get(r,o)));return this},t.clz32=function(r){return new e(r).clz32()},t.prototype.cos=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.cos(this.get(r,o)));return this},t.cos=function(r){return new e(r).cos()},t.prototype.cosh=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.cosh(this.get(r,o)));return this},t.cosh=function(r){return new e(r).cosh()},t.prototype.exp=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.exp(this.get(r,o)));return this},t.exp=function(r){return new e(r).exp()},t.prototype.expm1=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.expm1(this.get(r,o)));return this},t.expm1=function(r){return new e(r).expm1()},t.prototype.floor=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.floor(this.get(r,o)));return this},t.floor=function(r){return new e(r).floor()},t.prototype.fround=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.fround(this.get(r,o)));return this},t.fround=function(r){return new e(r).fround()},t.prototype.log=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.log(this.get(r,o)));return this},t.log=function(r){return new e(r).log()},t.prototype.log1p=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.log1p(this.get(r,o)));return this},t.log1p=function(r){return new e(r).log1p()},t.prototype.log10=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.log10(this.get(r,o)));return this},t.log10=function(r){return new e(r).log10()},t.prototype.log2=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.log2(this.get(r,o)));return this},t.log2=function(r){return new e(r).log2()},t.prototype.round=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.round(this.get(r,o)));return this},t.round=function(r){return new e(r).round()},t.prototype.sign=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.sign(this.get(r,o)));return this},t.sign=function(r){return new e(r).sign()},t.prototype.sin=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.sin(this.get(r,o)));return this},t.sin=function(r){return new e(r).sin()},t.prototype.sinh=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.sinh(this.get(r,o)));return this},t.sinh=function(r){return new e(r).sinh()},t.prototype.sqrt=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.sqrt(this.get(r,o)));return this},t.sqrt=function(r){return new e(r).sqrt()},t.prototype.tan=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.tan(this.get(r,o)));return this},t.tan=function(r){return new e(r).tan()},t.prototype.tanh=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.tanh(this.get(r,o)));return this},t.tanh=function(r){return new e(r).tanh()},t.prototype.trunc=function(){for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.set(r,o,Math.trunc(this.get(r,o)));return this},t.trunc=function(r){return new e(r).trunc()},t.pow=function(r,o){return new e(r).pow(o)},t.prototype.pow=function(r){return typeof r=="number"?this.powS(r):this.powM(r)},t.prototype.powS=function(r){for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)**r);return this},t.prototype.powM=function(r){if(r=e.checkMatrix(r),this.rows!==r.rows||this.columns!==r.columns)throw new RangeError("Matrices dimensions must be equal");for(let o=0;o<this.rows;o++)for(let s=0;s<this.columns;s++)this.set(o,s,this.get(o,s)**r.get(o,s));return this}}function rn(t,e,n){let r=n?t.rows:t.rows-1;if(e<0||e>r)throw new RangeError("Row index out of range")}function on(t,e,n){let r=n?t.columns:t.columns-1;if(e<0||e>r)throw new RangeError("Column index out of range")}function Us(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.columns)throw new RangeError("vector size must be the same as the number of columns");return e}function Gs(t,e){if(e.to1DArray&&(e=e.to1DArray()),e.length!==t.rows)throw new RangeError("vector size must be the same as the number of rows");return e}function vd(t,e){if(!Et.isAnyArray(e))throw new TypeError("row indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.rows)throw new RangeError("row indices are out of range")}function Ad(t,e){if(!Et.isAnyArray(e))throw new TypeError("column indices must be an array");for(let n=0;n<e.length;n++)if(e[n]<0||e[n]>=t.columns)throw new RangeError("column indices are out of range")}function fd(t,e,n,r,o){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Zu("startRow",e),Zu("endRow",n),Zu("startColumn",r),Zu("endColumn",o),e>n||r>o||e<0||e>=t.rows||n<0||n>=t.rows||r<0||r>=t.columns||o<0||o>=t.columns)throw new RangeError("Submatrix indices are out of range")}function al(t,e=0){let n=[];for(let r=0;r<t;r++)n.push(e);return n}function Zu(t,e){if(typeof e!="number")throw new TypeError(`${t} must be a number`)}function Os(t){if(t.isEmpty())throw new Error("Empty matrix has no elements to index")}function DT(t){let e=al(t.rows);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]+=t.get(n,r);return e}function kT(t){let e=al(t.columns);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]+=t.get(n,r);return e}function IT(t){let e=0;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e+=t.get(n,r);return e}function OT(t){let e=al(t.rows,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[n]*=t.get(n,r);return e}function UT(t){let e=al(t.columns,1);for(let n=0;n<t.rows;++n)for(let r=0;r<t.columns;++r)e[r]*=t.get(n,r);return e}function GT(t){let e=1;for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)e*=t.get(n,r);return e}function LT(t,e,n){let r=t.rows,o=t.columns,s=[];for(let i=0;i<r;i++){let a=0,c=0,u=0;for(let l=0;l<o;l++)u=t.get(i,l)-n[i],a+=u,c+=u*u;e?s.push((c-a*a/o)/(o-1)):s.push((c-a*a/o)/o)}return s}function FT(t,e,n){let r=t.rows,o=t.columns,s=[];for(let i=0;i<o;i++){let a=0,c=0,u=0;for(let l=0;l<r;l++)u=t.get(l,i)-n[i],a+=u,c+=u*u;e?s.push((c-a*a/r)/(r-1)):s.push((c-a*a/r)/r)}return s}function NT(t,e,n){let r=t.rows,o=t.columns,s=r*o,i=0,a=0,c=0;for(let u=0;u<r;u++)for(let l=0;l<o;l++)c=t.get(u,l)-n,i+=c,a+=c*c;return e?(a-i*i/s)/(s-1):(a-i*i/s)/s}function zT(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[n])}function HT(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e[r])}function PT(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)-e)}function jT(t){let e=[];for(let n=0;n<t.rows;n++){let r=0;for(let o=0;o<t.columns;o++)r+=t.get(n,o)**2/(t.columns-1);e.push(Math.sqrt(r))}return e}function KT(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[n])}function JT(t){let e=[];for(let n=0;n<t.columns;n++){let r=0;for(let o=0;o<t.rows;o++)r+=t.get(o,n)**2/(t.rows-1);e.push(Math.sqrt(r))}return e}function qT(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e[r])}function XT(t){let e=t.size-1,n=0;for(let r=0;r<t.columns;r++)for(let o=0;o<t.rows;o++)n+=t.get(o,r)**2/e;return Math.sqrt(n)}function YT(t,e){for(let n=0;n<t.rows;n++)for(let r=0;r<t.columns;r++)t.set(n,r,t.get(n,r)/e)}var ve=class t{static from1DArray(e,n,r){if(e*n!==r.length)throw new RangeError("data length does not match given dimensions");let s=new F(e,n);for(let i=0;i<e;i++)for(let a=0;a<n;a++)s.set(i,a,r[i*n+a]);return s}static rowVector(e){let n=new F(1,e.length);for(let r=0;r<e.length;r++)n.set(0,r,e[r]);return n}static columnVector(e){let n=new F(e.length,1);for(let r=0;r<e.length;r++)n.set(r,0,e[r]);return n}static zeros(e,n){return new F(e,n)}static ones(e,n){return new F(e,n).fill(1)}static rand(e,n,r={}){if(typeof r!="object")throw new TypeError("options must be an object");let{random:o=Math.random}=r,s=new F(e,n);for(let i=0;i<e;i++)for(let a=0;a<n;a++)s.set(i,a,o());return s}static randInt(e,n,r={}){if(typeof r!="object")throw new TypeError("options must be an object");let{min:o=0,max:s=1e3,random:i=Math.random}=r;if(!Number.isInteger(o))throw new TypeError("min must be an integer");if(!Number.isInteger(s))throw new TypeError("max must be an integer");if(o>=s)throw new RangeError("min must be smaller than max");let a=s-o,c=new F(e,n);for(let u=0;u<e;u++)for(let l=0;l<n;l++){let f=o+Math.round(i()*a);c.set(u,l,f)}return c}static eye(e,n,r){n===void 0&&(n=e),r===void 0&&(r=1);let o=Math.min(e,n),s=this.zeros(e,n);for(let i=0;i<o;i++)s.set(i,i,r);return s}static diag(e,n,r){let o=e.length;n===void 0&&(n=o),r===void 0&&(r=n);let s=Math.min(o,n,r),i=this.zeros(n,r);for(let a=0;a<s;a++)i.set(a,a,e[a]);return i}static min(e,n){e=this.checkMatrix(e),n=this.checkMatrix(n);let r=e.rows,o=e.columns,s=new F(r,o);for(let i=0;i<r;i++)for(let a=0;a<o;a++)s.set(i,a,Math.min(e.get(i,a),n.get(i,a)));return s}static max(e,n){e=this.checkMatrix(e),n=this.checkMatrix(n);let r=e.rows,o=e.columns,s=new this(r,o);for(let i=0;i<r;i++)for(let a=0;a<o;a++)s.set(i,a,Math.max(e.get(i,a),n.get(i,a)));return s}static checkMatrix(e){return t.isMatrix(e)?e:new F(e)}static isMatrix(e){return e!=null&&e.klass==="Matrix"}get size(){return this.rows*this.columns}apply(e){if(typeof e!="function")throw new TypeError("callback must be a function");for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)e.call(this,n,r);return this}to1DArray(){let e=[];for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)e.push(this.get(n,r));return e}to2DArray(){let e=[];for(let n=0;n<this.rows;n++){e.push([]);for(let r=0;r<this.columns;r++)e[n].push(this.get(n,r))}return e}toJSON(){return this.to2DArray()}isRowVector(){return this.rows===1}isColumnVector(){return this.columns===1}isVector(){return this.rows===1||this.columns===1}isSquare(){return this.rows===this.columns}isEmpty(){return this.rows===0||this.columns===0}isSymmetric(){if(this.isSquare()){for(let e=0;e<this.rows;e++)for(let n=0;n<=e;n++)if(this.get(e,n)!==this.get(n,e))return!1;return!0}return!1}isDistance(){if(!this.isSymmetric())return!1;for(let e=0;e<this.rows;e++)if(this.get(e,e)!==0)return!1;return!0}isEchelonForm(){let e=0,n=0,r=-1,o=!0,s=!1;for(;e<this.rows&&o;){for(n=0,s=!1;n<this.columns&&s===!1;)this.get(e,n)===0?n++:this.get(e,n)===1&&n>r?(s=!0,r=n):(o=!1,s=!0);e++}return o}isReducedEchelonForm(){let e=0,n=0,r=-1,o=!0,s=!1;for(;e<this.rows&&o;){for(n=0,s=!1;n<this.columns&&s===!1;)this.get(e,n)===0?n++:this.get(e,n)===1&&n>r?(s=!0,r=n):(o=!1,s=!0);for(let i=n+1;i<this.rows;i++)this.get(e,i)!==0&&(o=!1);e++}return o}echelonForm(){let e=this.clone(),n=0,r=0;for(;n<e.rows&&r<e.columns;){let o=n;for(let s=n;s<e.rows;s++)e.get(s,r)>e.get(o,r)&&(o=s);if(e.get(o,r)===0)r++;else{e.swapRows(n,o);let s=e.get(n,r);for(let i=r;i<e.columns;i++)e.set(n,i,e.get(n,i)/s);for(let i=n+1;i<e.rows;i++){let a=e.get(i,r)/e.get(n,r);e.set(i,r,0);for(let c=r+1;c<e.columns;c++)e.set(i,c,e.get(i,c)-e.get(n,c)*a)}n++,r++}}return e}reducedEchelonForm(){let e=this.echelonForm(),n=e.columns,r=e.rows,o=r-1;for(;o>=0;)if(e.maxRow(o)===0)o--;else{let s=0,i=!1;for(;s<r&&i===!1;)e.get(o,s)===1?i=!0:s++;for(let a=0;a<o;a++){let c=e.get(a,s);for(let u=s;u<n;u++){let l=e.get(a,u)-c*e.get(o,u);e.set(a,u,l)}}o--}return e}set(){throw new Error("set method is unimplemented")}get(){throw new Error("get method is unimplemented")}repeat(e={}){if(typeof e!="object")throw new TypeError("options must be an object");let{rows:n=1,columns:r=1}=e;if(!Number.isInteger(n)||n<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(r)||r<=0)throw new TypeError("columns must be a positive integer");let o=new F(this.rows*n,this.columns*r);for(let s=0;s<n;s++)for(let i=0;i<r;i++)o.setSubMatrix(this,this.rows*s,this.columns*i);return o}fill(e){for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,e);return this}neg(){return this.mulS(-1)}getRow(e){rn(this,e);let n=[];for(let r=0;r<this.columns;r++)n.push(this.get(e,r));return n}getRowVector(e){return F.rowVector(this.getRow(e))}setRow(e,n){rn(this,e),n=Us(this,n);for(let r=0;r<this.columns;r++)this.set(e,r,n[r]);return this}swapRows(e,n){rn(this,e),rn(this,n);for(let r=0;r<this.columns;r++){let o=this.get(e,r);this.set(e,r,this.get(n,r)),this.set(n,r,o)}return this}getColumn(e){on(this,e);let n=[];for(let r=0;r<this.rows;r++)n.push(this.get(r,e));return n}getColumnVector(e){return F.columnVector(this.getColumn(e))}setColumn(e,n){on(this,e),n=Gs(this,n);for(let r=0;r<this.rows;r++)this.set(r,e,n[r]);return this}swapColumns(e,n){on(this,e),on(this,n);for(let r=0;r<this.rows;r++){let o=this.get(r,e);this.set(r,e,this.get(r,n)),this.set(r,n,o)}return this}addRowVector(e){e=Us(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)+e[r]);return this}subRowVector(e){e=Us(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)-e[r]);return this}mulRowVector(e){e=Us(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)*e[r]);return this}divRowVector(e){e=Us(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)/e[r]);return this}addColumnVector(e){e=Gs(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)+e[n]);return this}subColumnVector(e){e=Gs(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)-e[n]);return this}mulColumnVector(e){e=Gs(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)*e[n]);return this}divColumnVector(e){e=Gs(this,e);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)this.set(n,r,this.get(n,r)/e[n]);return this}mulRow(e,n){rn(this,e);for(let r=0;r<this.columns;r++)this.set(e,r,this.get(e,r)*n);return this}mulColumn(e,n){on(this,e);for(let r=0;r<this.rows;r++)this.set(r,e,this.get(r,e)*n);return this}max(e){if(this.isEmpty())return NaN;switch(e){case"row":{let n=new Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.get(r,o)>n[r]&&(n[r]=this.get(r,o));return n}case"column":{let n=new Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.get(r,o)>n[o]&&(n[o]=this.get(r,o));return n}case void 0:{let n=this.get(0,0);for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.get(r,o)>n&&(n=this.get(r,o));return n}default:throw new Error(`invalid option: ${e}`)}}maxIndex(){Os(this);let e=this.get(0,0),n=[0,0];for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.get(r,o)>e&&(e=this.get(r,o),n[0]=r,n[1]=o);return n}min(e){if(this.isEmpty())return NaN;switch(e){case"row":{let n=new Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.get(r,o)<n[r]&&(n[r]=this.get(r,o));return n}case"column":{let n=new Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.get(r,o)<n[o]&&(n[o]=this.get(r,o));return n}case void 0:{let n=this.get(0,0);for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.get(r,o)<n&&(n=this.get(r,o));return n}default:throw new Error(`invalid option: ${e}`)}}minIndex(){Os(this);let e=this.get(0,0),n=[0,0];for(let r=0;r<this.rows;r++)for(let o=0;o<this.columns;o++)this.get(r,o)<e&&(e=this.get(r,o),n[0]=r,n[1]=o);return n}maxRow(e){if(rn(this,e),this.isEmpty())return NaN;let n=this.get(e,0);for(let r=1;r<this.columns;r++)this.get(e,r)>n&&(n=this.get(e,r));return n}maxRowIndex(e){rn(this,e),Os(this);let n=this.get(e,0),r=[e,0];for(let o=1;o<this.columns;o++)this.get(e,o)>n&&(n=this.get(e,o),r[1]=o);return r}minRow(e){if(rn(this,e),this.isEmpty())return NaN;let n=this.get(e,0);for(let r=1;r<this.columns;r++)this.get(e,r)<n&&(n=this.get(e,r));return n}minRowIndex(e){rn(this,e),Os(this);let n=this.get(e,0),r=[e,0];for(let o=1;o<this.columns;o++)this.get(e,o)<n&&(n=this.get(e,o),r[1]=o);return r}maxColumn(e){if(on(this,e),this.isEmpty())return NaN;let n=this.get(0,e);for(let r=1;r<this.rows;r++)this.get(r,e)>n&&(n=this.get(r,e));return n}maxColumnIndex(e){on(this,e),Os(this);let n=this.get(0,e),r=[0,e];for(let o=1;o<this.rows;o++)this.get(o,e)>n&&(n=this.get(o,e),r[0]=o);return r}minColumn(e){if(on(this,e),this.isEmpty())return NaN;let n=this.get(0,e);for(let r=1;r<this.rows;r++)this.get(r,e)<n&&(n=this.get(r,e));return n}minColumnIndex(e){on(this,e),Os(this);let n=this.get(0,e),r=[0,e];for(let o=1;o<this.rows;o++)this.get(o,e)<n&&(n=this.get(o,e),r[0]=o);return r}diag(){let e=Math.min(this.rows,this.columns),n=[];for(let r=0;r<e;r++)n.push(this.get(r,r));return n}norm(e="frobenius"){switch(e){case"max":return this.max();case"frobenius":return Math.sqrt(this.dot(this));default:throw new RangeError(`unknown norm type: ${e}`)}}cumulativeSum(){let e=0;for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)e+=this.get(n,r),this.set(n,r,e);return this}dot(e){t.isMatrix(e)&&(e=e.to1DArray());let n=this.to1DArray();if(n.length!==e.length)throw new RangeError("vectors do not have the same size");let r=0;for(let o=0;o<n.length;o++)r+=n[o]*e[o];return r}mmul(e){e=F.checkMatrix(e);let n=this.rows,r=this.columns,o=e.columns,s=new F(n,o),i=new Float64Array(r);for(let a=0;a<o;a++){for(let c=0;c<r;c++)i[c]=e.get(c,a);for(let c=0;c<n;c++){let u=0;for(let l=0;l<r;l++)u+=this.get(c,l)*i[l];s.set(c,a,u)}}return s}mpow(e){if(!this.isSquare())throw new RangeError("Matrix must be square");if(!Number.isInteger(e)||e<0)throw new RangeError("Exponent must be a non-negative integer");let n=F.eye(this.rows),r=this;for(let o=e;o>=1;o/=2)(o&1)!==0&&(n=n.mmul(r)),r=r.mmul(r);return n}strassen2x2(e){e=F.checkMatrix(e);let n=new F(2,2),r=this.get(0,0),o=e.get(0,0),s=this.get(0,1),i=e.get(0,1),a=this.get(1,0),c=e.get(1,0),u=this.get(1,1),l=e.get(1,1),f=(r+u)*(o+l),m=(a+u)*o,d=r*(i-l),p=u*(c-o),b=(r+s)*l,w=(a-r)*(o+i),h=(s-u)*(c+l),g=f+p-b+h,y=d+b,A=m+p,C=f-m+d+w;return n.set(0,0,g),n.set(0,1,y),n.set(1,0,A),n.set(1,1,C),n}strassen3x3(e){e=F.checkMatrix(e);let n=new F(3,3),r=this.get(0,0),o=this.get(0,1),s=this.get(0,2),i=this.get(1,0),a=this.get(1,1),c=this.get(1,2),u=this.get(2,0),l=this.get(2,1),f=this.get(2,2),m=e.get(0,0),d=e.get(0,1),p=e.get(0,2),b=e.get(1,0),w=e.get(1,1),h=e.get(1,2),g=e.get(2,0),y=e.get(2,1),A=e.get(2,2),C=(r+o+s-i-a-l-f)*w,U=(r-i)*(-d+w),V=a*(-m+d+b-w-h-g+A),k=(-r+i+a)*(m-d+w),G=(i+a)*(-m+d),_=r*m,R=(-r+u+l)*(m-p+h),L=(-r+u)*(p-h),D=(u+l)*(-m+p),Z=(r+o+s-a-c-u-l)*h,X=l*(-m+p+b-w-h-g+y),ee=(-s+l+f)*(w+g-y),se=(s-f)*(w-y),we=s*g,Je=(l+f)*(-g+y),pe=(-s+a+c)*(h+g-A),tt=(s-c)*(h-A),st=(a+c)*(-g+A),j=o*b,Te=c*y,Le=i*p,Re=u*d,me=f*A,Jr=_+we+j,qr=C+k+G+_+ee+we+Je,ar=_+R+D+Z+we+pe+st,cr=U+V+k+_+we+pe+tt,Xr=U+k+G+_+Te,ko=we+pe+tt+st+Le,ii=_+R+L+X+ee+se+we,ai=ee+se+we+Je+Re,ci=_+R+L+D+me;return n.set(0,0,Jr),n.set(0,1,qr),n.set(0,2,ar),n.set(1,0,cr),n.set(1,1,Xr),n.set(1,2,ko),n.set(2,0,ii),n.set(2,1,ai),n.set(2,2,ci),n}mmulStrassen(e){e=F.checkMatrix(e);let n=this.clone(),r=n.rows,o=n.columns,s=e.rows,i=e.columns;o!==s&&console.warn(`Multiplying ${r} x ${o} and ${s} x ${i} matrix: dimensions do not match.`);function a(f,m,d){let p=f.rows,b=f.columns;if(p===m&&b===d)return f;{let w=t.zeros(m,d);return w=w.setSubMatrix(f,0,0),w}}let c=Math.max(r,s),u=Math.max(o,i);n=a(n,c,u),e=a(e,c,u);function l(f,m,d,p){if(d<=512||p<=512)return f.mmul(m);d%2===1&&p%2===1?(f=a(f,d+1,p+1),m=a(m,d+1,p+1)):d%2===1?(f=a(f,d+1,p),m=a(m,d+1,p)):p%2===1&&(f=a(f,d,p+1),m=a(m,d,p+1));let b=parseInt(f.rows/2,10),w=parseInt(f.columns/2,10),h=f.subMatrix(0,b-1,0,w-1),g=m.subMatrix(0,b-1,0,w-1),y=f.subMatrix(0,b-1,w,f.columns-1),A=m.subMatrix(0,b-1,w,m.columns-1),C=f.subMatrix(b,f.rows-1,0,w-1),U=m.subMatrix(b,m.rows-1,0,w-1),V=f.subMatrix(b,f.rows-1,w,f.columns-1),k=m.subMatrix(b,m.rows-1,w,m.columns-1),G=l(t.add(h,V),t.add(g,k),b,w),_=l(t.add(C,V),g,b,w),R=l(h,t.sub(A,k),b,w),L=l(V,t.sub(U,g),b,w),D=l(t.add(h,y),k,b,w),Z=l(t.sub(C,h),t.add(g,A),b,w),X=l(t.sub(y,V),t.add(U,k),b,w),ee=t.add(G,L);ee.sub(D),ee.add(X);let se=t.add(R,D),we=t.add(_,L),Je=t.sub(G,_);Je.add(R),Je.add(Z);let pe=t.zeros(2*ee.rows,2*ee.columns);return pe=pe.setSubMatrix(ee,0,0),pe=pe.setSubMatrix(se,ee.rows,0),pe=pe.setSubMatrix(we,0,ee.columns),pe=pe.setSubMatrix(Je,ee.rows,ee.columns),pe.subMatrix(0,d-1,0,p-1)}return l(n,e,c,u)}scaleRows(e={}){if(typeof e!="object")throw new TypeError("options must be an object");let{min:n=0,max:r=1}=e;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(n>=r)throw new RangeError("min must be smaller than max");let o=new F(this.rows,this.columns);for(let s=0;s<this.rows;s++){let i=this.getRow(s);i.length>0&&G2(i,{min:n,max:r,output:i}),o.setRow(s,i)}return o}scaleColumns(e={}){if(typeof e!="object")throw new TypeError("options must be an object");let{min:n=0,max:r=1}=e;if(!Number.isFinite(n))throw new TypeError("min must be a number");if(!Number.isFinite(r))throw new TypeError("max must be a number");if(n>=r)throw new RangeError("min must be smaller than max");let o=new F(this.rows,this.columns);for(let s=0;s<this.columns;s++){let i=this.getColumn(s);i.length&&G2(i,{min:n,max:r,output:i}),o.setColumn(s,i)}return o}flipRows(){let e=Math.ceil(this.columns/2);for(let n=0;n<this.rows;n++)for(let r=0;r<e;r++){let o=this.get(n,r),s=this.get(n,this.columns-1-r);this.set(n,r,s),this.set(n,this.columns-1-r,o)}return this}flipColumns(){let e=Math.ceil(this.rows/2);for(let n=0;n<this.columns;n++)for(let r=0;r<e;r++){let o=this.get(r,n),s=this.get(this.rows-1-r,n);this.set(r,n,s),this.set(this.rows-1-r,n,o)}return this}kroneckerProduct(e){e=F.checkMatrix(e);let n=this.rows,r=this.columns,o=e.rows,s=e.columns,i=new F(n*o,r*s);for(let a=0;a<n;a++)for(let c=0;c<r;c++)for(let u=0;u<o;u++)for(let l=0;l<s;l++)i.set(o*a+u,s*c+l,this.get(a,c)*e.get(u,l));return i}kroneckerSum(e){if(e=F.checkMatrix(e),!this.isSquare()||!e.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");let n=this.rows,r=e.rows,o=this.kroneckerProduct(F.eye(r,r)),s=F.eye(n,n).kroneckerProduct(e);return o.add(s)}transpose(){let e=new F(this.columns,this.rows);for(let n=0;n<this.rows;n++)for(let r=0;r<this.columns;r++)e.set(r,n,this.get(n,r));return e}sortRows(e=F2){for(let n=0;n<this.rows;n++)this.setRow(n,this.getRow(n).sort(e));return this}sortColumns(e=F2){for(let n=0;n<this.columns;n++)this.setColumn(n,this.getColumn(n).sort(e));return this}subMatrix(e,n,r,o){fd(this,e,n,r,o);let s=new F(n-e+1,o-r+1);for(let i=e;i<=n;i++)for(let a=r;a<=o;a++)s.set(i-e,a-r,this.get(i,a));return s}subMatrixRow(e,n,r){if(n===void 0&&(n=0),r===void 0&&(r=this.columns-1),n>r||n<0||n>=this.columns||r<0||r>=this.columns)throw new RangeError("Argument out of range");let o=new F(e.length,r-n+1);for(let s=0;s<e.length;s++)for(let i=n;i<=r;i++){if(e[s]<0||e[s]>=this.rows)throw new RangeError(`Row index out of range: ${e[s]}`);o.set(s,i-n,this.get(e[s],i))}return o}subMatrixColumn(e,n,r){if(n===void 0&&(n=0),r===void 0&&(r=this.rows-1),n>r||n<0||n>=this.rows||r<0||r>=this.rows)throw new RangeError("Argument out of range");let o=new F(r-n+1,e.length);for(let s=0;s<e.length;s++)for(let i=n;i<=r;i++){if(e[s]<0||e[s]>=this.columns)throw new RangeError(`Column index out of range: ${e[s]}`);o.set(i-n,s,this.get(i,e[s]))}return o}setSubMatrix(e,n,r){if(e=F.checkMatrix(e),e.isEmpty())return this;let o=n+e.rows-1,s=r+e.columns-1;fd(this,n,o,r,s);for(let i=0;i<e.rows;i++)for(let a=0;a<e.columns;a++)this.set(n+i,r+a,e.get(i,a));return this}selection(e,n){vd(this,e),Ad(this,n);let r=new F(e.length,n.length);for(let o=0;o<e.length;o++){let s=e[o];for(let i=0;i<n.length;i++){let a=n[i];r.set(o,i,this.get(s,a))}}return r}trace(){let e=Math.min(this.rows,this.columns),n=0;for(let r=0;r<e;r++)n+=this.get(r,r);return n}clone(){return this.constructor.copy(this,new F(this.rows,this.columns))}static copy(e,n){for(let[r,o,s]of e.entries())n.set(r,o,s);return n}sum(e){switch(e){case"row":return DT(this);case"column":return kT(this);case void 0:return IT(this);default:throw new Error(`invalid option: ${e}`)}}product(e){switch(e){case"row":return OT(this);case"column":return UT(this);case void 0:return GT(this);default:throw new Error(`invalid option: ${e}`)}}mean(e){let n=this.sum(e);switch(e){case"row":{for(let r=0;r<this.rows;r++)n[r]/=this.columns;return n}case"column":{for(let r=0;r<this.columns;r++)n[r]/=this.rows;return n}case void 0:return n/this.size;default:throw new Error(`invalid option: ${e}`)}}variance(e,n={}){if(typeof e=="object"&&(n=e,e=void 0),typeof n!="object")throw new TypeError("options must be an object");let{unbiased:r=!0,mean:o=this.mean(e)}=n;if(typeof r!="boolean")throw new TypeError("unbiased must be a boolean");switch(e){case"row":{if(!Et.isAnyArray(o))throw new TypeError("mean must be an array");return LT(this,r,o)}case"column":{if(!Et.isAnyArray(o))throw new TypeError("mean must be an array");return FT(this,r,o)}case void 0:{if(typeof o!="number")throw new TypeError("mean must be a number");return NT(this,r,o)}default:throw new Error(`invalid option: ${e}`)}}standardDeviation(e,n){typeof e=="object"&&(n=e,e=void 0);let r=this.variance(e,n);if(e===void 0)return Math.sqrt(r);for(let o=0;o<r.length;o++)r[o]=Math.sqrt(r[o]);return r}center(e,n={}){if(typeof e=="object"&&(n=e,e=void 0),typeof n!="object")throw new TypeError("options must be an object");let{center:r=this.mean(e)}=n;switch(e){case"row":{if(!Et.isAnyArray(r))throw new TypeError("center must be an array");return zT(this,r),this}case"column":{if(!Et.isAnyArray(r))throw new TypeError("center must be an array");return HT(this,r),this}case void 0:{if(typeof r!="number")throw new TypeError("center must be a number");return PT(this,r),this}default:throw new Error(`invalid option: ${e}`)}}scale(e,n={}){if(typeof e=="object"&&(n=e,e=void 0),typeof n!="object")throw new TypeError("options must be an object");let r=n.scale;switch(e){case"row":{if(r===void 0)r=jT(this);else if(!Et.isAnyArray(r))throw new TypeError("scale must be an array");return KT(this,r),this}case"column":{if(r===void 0)r=JT(this);else if(!Et.isAnyArray(r))throw new TypeError("scale must be an array");return qT(this,r),this}case void 0:{if(r===void 0)r=XT(this);else if(typeof r!="number")throw new TypeError("scale must be a number");return YT(this,r),this}default:throw new Error(`invalid option: ${e}`)}}toString(e){return z2(this,e)}[Symbol.iterator](){return this.entries()}*entries(){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)yield[e,n,this.get(e,n)]}*values(){for(let e=0;e<this.rows;e++)for(let n=0;n<this.columns;n++)yield this.get(e,n)}};ve.prototype.klass="Matrix";typeof Symbol<"u"&&(ve.prototype[Symbol.for("nodejs.util.inspect.custom")]=MT);function F2(t,e){return t-e}function QT(t){return t.every(e=>typeof e=="number")}ve.random=ve.rand;ve.randomInt=ve.randInt;ve.diagonal=ve.diag;ve.prototype.diagonal=ve.prototype.diag;ve.identity=ve.eye;ve.prototype.negate=ve.prototype.neg;ve.prototype.tensorProduct=ve.prototype.kroneckerProduct;var F=class t extends ve{data;#e(e,n){if(this.data=[],Number.isInteger(n)&&n>=0)for(let r=0;r<e;r++)this.data.push(new Float64Array(n));else throw new TypeError("nColumns must be a positive integer");this.rows=e,this.columns=n}constructor(e,n){if(super(),t.isMatrix(e))this.#e(e.rows,e.columns),t.copy(e,this);else if(Number.isInteger(e)&&e>=0)this.#e(e,n);else if(Et.isAnyArray(e)){let r=e;if(e=r.length,n=e?r[0].length:0,typeof n!="number")throw new TypeError("Data must be a 2D array with at least one element");this.data=[];for(let o=0;o<e;o++){if(r[o].length!==n)throw new RangeError("Inconsistent array dimensions");if(!QT(r[o]))throw new TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(r[o]))}this.rows=e,this.columns=n}else throw new TypeError("First argument must be a positive number or an array")}set(e,n,r){return this.data[e][n]=r,this}get(e,n){return this.data[e][n]}removeRow(e){return rn(this,e),this.data.splice(e,1),this.rows-=1,this}addRow(e,n){return n===void 0&&(n=e,e=this.rows),rn(this,e,!0),n=Float64Array.from(Us(this,n)),this.data.splice(e,0,n),this.rows+=1,this}removeColumn(e){on(this,e);for(let n=0;n<this.rows;n++){let r=new Float64Array(this.columns-1);for(let o=0;o<e;o++)r[o]=this.data[n][o];for(let o=e+1;o<this.columns;o++)r[o-1]=this.data[n][o];this.data[n]=r}return this.columns-=1,this}addColumn(e,n){typeof n>"u"&&(n=e,e=this.columns),on(this,e,!0),n=Gs(this,n);for(let r=0;r<this.rows;r++){let o=new Float64Array(this.columns+1),s=0;for(;s<e;s++)o[s]=this.data[r][s];for(o[s++]=n[r];s<this.columns+1;s++)o[s]=this.data[r][s-1];this.data[r]=o}return this.columns+=1,this}};RT(ve,F);var wo=class t extends ve{#e;get size(){return this.#e.size}get rows(){return this.#e.rows}get columns(){return this.#e.columns}get diagonalSize(){return this.rows}static isSymmetricMatrix(e){return F.isMatrix(e)&&e.klassType==="SymmetricMatrix"}static zeros(e){return new this(e)}static ones(e){return new this(e).fill(1)}constructor(e){if(super(),F.isMatrix(e)){if(!e.isSymmetric())throw new TypeError("not symmetric data");this.#e=F.copy(e,new F(e.rows,e.rows))}else if(Number.isInteger(e)&&e>=0)this.#e=new F(e,e);else if(this.#e=new F(e),!this.isSymmetric())throw new TypeError("not symmetric data")}clone(){let e=new t(this.diagonalSize);for(let[n,r,o]of this.upperRightEntries())e.set(n,r,o);return e}toMatrix(){return new F(this)}get(e,n){return this.#e.get(e,n)}set(e,n,r){return this.#e.set(e,n,r),this.#e.set(n,e,r),this}removeCross(e){return this.#e.removeRow(e),this.#e.removeColumn(e),this}addCross(e,n){n===void 0&&(n=e,e=this.diagonalSize);let r=n.slice();return r.splice(e,1),this.#e.addRow(e,r),this.#e.addColumn(e,n),this}applyMask(e){if(e.length!==this.diagonalSize)throw new RangeError("Mask size do not match with matrix size");let n=[];for(let[r,o]of e.entries())o||n.push(r);n.reverse();for(let r of n)this.removeCross(r);return this}toCompact(){let{diagonalSize:e}=this,n=new Array(e*(e+1)/2);for(let r=0,o=0,s=0;s<n.length;s++)n[s]=this.get(o,r),++r>=e&&(r=++o);return n}static fromCompact(e){let n=e.length,r=(Math.sqrt(8*n+1)-1)/2;if(!Number.isInteger(r))throw new TypeError(`This array is not a compact representation of a Symmetric Matrix, ${JSON.stringify(e)}`);let o=new t(r);for(let s=0,i=0,a=0;a<n;a++)o.set(s,i,e[a]),++s>=r&&(s=++i);return o}*upperRightEntries(){for(let e=0,n=0;e<this.diagonalSize;void 0){let r=this.get(e,n);yield[e,n,r],++n>=this.diagonalSize&&(n=++e)}}*upperRightValues(){for(let e=0,n=0;e<this.diagonalSize;void 0)yield this.get(e,n),++n>=this.diagonalSize&&(n=++e)}};wo.prototype.klassType="SymmetricMatrix";var nl=class t extends wo{static isDistanceMatrix(e){return wo.isSymmetricMatrix(e)&&e.klassSubType==="DistanceMatrix"}constructor(e){if(super(e),!this.isDistance())throw new TypeError("Provided arguments do no produce a distance matrix")}set(e,n,r){return e===n&&(r=0),super.set(e,n,r)}addCross(e,n){return n===void 0&&(n=e,e=this.diagonalSize),n=n.slice(),n[e]=0,super.addCross(e,n)}toSymmetricMatrix(){return new wo(this)}clone(){let e=new t(this.diagonalSize);for(let[n,r,o]of this.upperRightEntries())n!==r&&e.set(n,r,o);return e}toCompact(){let{diagonalSize:e}=this,n=(e-1)*e/2,r=new Array(n);for(let o=1,s=0,i=0;i<r.length;i++)r[i]=this.get(s,o),++o>=e&&(o=++s+1);return r}static fromCompact(e){let n=e.length;if(n===0)return new this(0);let r=(Math.sqrt(8*n+1)+1)/2;if(!Number.isInteger(r))throw new TypeError(`This array is not a compact representation of a DistanceMatrix, ${JSON.stringify(e)}`);let o=new this(r);for(let s=1,i=0,a=0;a<n;a++)o.set(s,i,e[a]),++s>=r&&(s=++i+1);return o}};nl.prototype.klassSubType="DistanceMatrix";var dn=class extends ve{constructor(e,n,r){super(),this.matrix=e,this.rows=n,this.columns=r}},md=class extends dn{constructor(e,n){on(e,n),super(e,e.rows,1),this.column=n}set(e,n,r){return this.matrix.set(e,this.column,r),this}get(e){return this.matrix.get(e,this.column)}},hd=class extends dn{constructor(e,n){Ad(e,n),super(e,e.rows,n.length),this.columnIndices=n}set(e,n,r){return this.matrix.set(e,this.columnIndices[n],r),this}get(e,n){return this.matrix.get(e,this.columnIndices[n])}},dd=class extends dn{constructor(e){super(e,e.rows,e.columns)}set(e,n,r){return this.matrix.set(e,this.columns-n-1,r),this}get(e,n){return this.matrix.get(e,this.columns-n-1)}},pd=class extends dn{constructor(e){super(e,e.rows,e.columns)}set(e,n,r){return this.matrix.set(this.rows-e-1,n,r),this}get(e,n){return this.matrix.get(this.rows-e-1,n)}},gd=class extends dn{constructor(e,n){rn(e,n),super(e,1,e.columns),this.row=n}set(e,n,r){return this.matrix.set(this.row,n,r),this}get(e,n){return this.matrix.get(this.row,n)}},yd=class extends dn{constructor(e,n){vd(e,n),super(e,n.length,e.columns),this.rowIndices=n}set(e,n,r){return this.matrix.set(this.rowIndices[e],n,r),this}get(e,n){return this.matrix.get(this.rowIndices[e],n)}},Ls=class extends dn{constructor(e,n,r){vd(e,n),Ad(e,r),super(e,n.length,r.length),this.rowIndices=n,this.columnIndices=r}set(e,n,r){return this.matrix.set(this.rowIndices[e],this.columnIndices[n],r),this}get(e,n){return this.matrix.get(this.rowIndices[e],this.columnIndices[n])}},xd=class extends dn{constructor(e,n,r,o,s){fd(e,n,r,o,s),super(e,r-n+1,s-o+1),this.startRow=n,this.startColumn=o}set(e,n,r){return this.matrix.set(this.startRow+e,this.startColumn+n,r),this}get(e,n){return this.matrix.get(this.startRow+e,this.startColumn+n)}},bd=class extends dn{constructor(e){super(e,e.columns,e.rows)}set(e,n,r){return this.matrix.set(n,e,r),this}get(e,n){return this.matrix.get(n,e)}},rl=class extends ve{constructor(e,n={}){let{rows:r=1}=n;if(e.length%r!==0)throw new Error("the data length is not divisible by the number of rows");super(),this.rows=r,this.columns=e.length/r,this.data=e}set(e,n,r){let o=this._calculateIndex(e,n);return this.data[o]=r,this}get(e,n){let r=this._calculateIndex(e,n);return this.data[r]}_calculateIndex(e,n){return e*this.columns+n}},ht=class extends ve{constructor(e){super(),this.data=e,this.rows=e.length,this.columns=e[0].length}set(e,n,r){return this.data[e][n]=r,this}get(e,n){return this.data[e][n]}};function WT(t,e){if(Et.isAnyArray(t))return t[0]&&Et.isAnyArray(t[0])?new ht(t):new rl(t,e);throw new Error("the argument is not an array")}var Fs=class{constructor(e){e=ht.checkMatrix(e);let n=e.clone(),r=n.rows,o=n.columns,s=new Float64Array(r),i=1,a,c,u,l,f,m,d,p,b;for(a=0;a<r;a++)s[a]=a;for(p=new Float64Array(r),c=0;c<o;c++){for(a=0;a<r;a++)p[a]=n.get(a,c);for(a=0;a<r;a++){for(b=Math.min(a,c),f=0,u=0;u<b;u++)f+=n.get(a,u)*p[u];p[a]-=f,n.set(a,c,p[a])}for(l=c,a=c+1;a<r;a++)Math.abs(p[a])>Math.abs(p[l])&&(l=a);if(l!==c){for(u=0;u<o;u++)m=n.get(l,u),n.set(l,u,n.get(c,u)),n.set(c,u,m);d=s[l],s[l]=s[c],s[c]=d,i=-i}if(c<r&&n.get(c,c)!==0)for(a=c+1;a<r;a++)n.set(a,c,n.get(a,c)/n.get(c,c))}this.LU=n,this.pivotVector=s,this.pivotSign=i}isSingular(){let e=this.LU,n=e.columns;for(let r=0;r<n;r++)if(e.get(r,r)===0)return!0;return!1}solve(e){e=F.checkMatrix(e);let n=this.LU;if(n.rows!==e.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");let o=e.columns,s=e.subMatrixRow(this.pivotVector,0,o-1),i=n.columns,a,c,u;for(u=0;u<i;u++)for(a=u+1;a<i;a++)for(c=0;c<o;c++)s.set(a,c,s.get(a,c)-s.get(u,c)*n.get(a,u));for(u=i-1;u>=0;u--){for(c=0;c<o;c++)s.set(u,c,s.get(u,c)/n.get(u,u));for(a=0;a<u;a++)for(c=0;c<o;c++)s.set(a,c,s.get(a,c)-s.get(u,c)*n.get(a,u))}return s}get determinant(){let e=this.LU;if(!e.isSquare())throw new Error("Matrix must be square");let n=this.pivotSign,r=e.columns;for(let o=0;o<r;o++)n*=e.get(o,o);return n}get lowerTriangularMatrix(){let e=this.LU,n=e.rows,r=e.columns,o=new F(n,r);for(let s=0;s<n;s++)for(let i=0;i<r;i++)s>i?o.set(s,i,e.get(s,i)):s===i?o.set(s,i,1):o.set(s,i,0);return o}get upperTriangularMatrix(){let e=this.LU,n=e.rows,r=e.columns,o=new F(n,r);for(let s=0;s<n;s++)for(let i=0;i<r;i++)s<=i?o.set(s,i,e.get(s,i)):o.set(s,i,0);return o}get pivotPermutationVector(){return Array.from(this.pivotVector)}};function rr(t,e){let n=0;return Math.abs(t)>Math.abs(e)?(n=e/t,Math.abs(t)*Math.sqrt(1+n*n)):e!==0?(n=t/e,Math.abs(e)*Math.sqrt(1+n*n)):0}var _a=class{constructor(e){e=ht.checkMatrix(e);let n=e.clone(),r=e.rows,o=e.columns,s=new Float64Array(o),i,a,c,u;for(c=0;c<o;c++){let l=0;for(i=c;i<r;i++)l=rr(l,n.get(i,c));if(l!==0){for(n.get(c,c)<0&&(l=-l),i=c;i<r;i++)n.set(i,c,n.get(i,c)/l);for(n.set(c,c,n.get(c,c)+1),a=c+1;a<o;a++){for(u=0,i=c;i<r;i++)u+=n.get(i,c)*n.get(i,a);for(u=-u/n.get(c,c),i=c;i<r;i++)n.set(i,a,n.get(i,a)+u*n.get(i,c))}}s[c]=-l}this.QR=n,this.Rdiag=s}solve(e){e=F.checkMatrix(e);let n=this.QR,r=n.rows;if(e.rows!==r)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");let o=e.columns,s=e.clone(),i=n.columns,a,c,u,l;for(u=0;u<i;u++)for(c=0;c<o;c++){for(l=0,a=u;a<r;a++)l+=n.get(a,u)*s.get(a,c);for(l=-l/n.get(u,u),a=u;a<r;a++)s.set(a,c,s.get(a,c)+l*n.get(a,u))}for(u=i-1;u>=0;u--){for(c=0;c<o;c++)s.set(u,c,s.get(u,c)/this.Rdiag[u]);for(a=0;a<u;a++)for(c=0;c<o;c++)s.set(a,c,s.get(a,c)-s.get(u,c)*n.get(a,u))}return s.subMatrix(0,i-1,0,o-1)}isFullRank(){let e=this.QR.columns;for(let n=0;n<e;n++)if(this.Rdiag[n]===0)return!1;return!0}get upperTriangularMatrix(){let e=this.QR,n=e.columns,r=new F(n,n),o,s;for(o=0;o<n;o++)for(s=0;s<n;s++)o<s?r.set(o,s,e.get(o,s)):o===s?r.set(o,s,this.Rdiag[o]):r.set(o,s,0);return r}get orthogonalMatrix(){let e=this.QR,n=e.rows,r=e.columns,o=new F(n,r),s,i,a,c;for(a=r-1;a>=0;a--){for(s=0;s<n;s++)o.set(s,a,0);for(o.set(a,a,1),i=a;i<r;i++)if(e.get(a,a)!==0){for(c=0,s=a;s<n;s++)c+=e.get(s,a)*o.get(s,i);for(c=-c/e.get(a,a),s=a;s<n;s++)o.set(s,i,o.get(s,i)+c*e.get(s,a))}}return o}},zr=class{constructor(e,n={}){if(e=ht.checkMatrix(e),e.isEmpty())throw new Error("Matrix must be non-empty");let r=e.rows,o=e.columns,{computeLeftSingularVectors:s=!0,computeRightSingularVectors:i=!0,autoTranspose:a=!1}=n,c=!!s,u=!!i,l=!1,f;if(r<o)if(!a)f=e.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{f=e.transpose(),r=f.rows,o=f.columns,l=!0;let _=c;c=u,u=_}else f=e.clone();let m=Math.min(r,o),d=Math.min(r+1,o),p=new Float64Array(d),b=new F(r,m),w=new F(o,o),h=new Float64Array(o),g=new Float64Array(r),y=new Float64Array(d);for(let _=0;_<d;_++)y[_]=_;let A=Math.min(r-1,o),C=Math.max(0,Math.min(o-2,r)),U=Math.max(A,C);for(let _=0;_<U;_++){if(_<A){p[_]=0;for(let R=_;R<r;R++)p[_]=rr(p[_],f.get(R,_));if(p[_]!==0){f.get(_,_)<0&&(p[_]=-p[_]);for(let R=_;R<r;R++)f.set(R,_,f.get(R,_)/p[_]);f.set(_,_,f.get(_,_)+1)}p[_]=-p[_]}for(let R=_+1;R<o;R++){if(_<A&&p[_]!==0){let L=0;for(let D=_;D<r;D++)L+=f.get(D,_)*f.get(D,R);L=-L/f.get(_,_);for(let D=_;D<r;D++)f.set(D,R,f.get(D,R)+L*f.get(D,_))}h[R]=f.get(_,R)}if(c&&_<A)for(let R=_;R<r;R++)b.set(R,_,f.get(R,_));if(_<C){h[_]=0;for(let R=_+1;R<o;R++)h[_]=rr(h[_],h[R]);if(h[_]!==0){h[_+1]<0&&(h[_]=0-h[_]);for(let R=_+1;R<o;R++)h[R]/=h[_];h[_+1]+=1}if(h[_]=-h[_],_+1<r&&h[_]!==0){for(let R=_+1;R<r;R++)g[R]=0;for(let R=_+1;R<r;R++)for(let L=_+1;L<o;L++)g[R]+=h[L]*f.get(R,L);for(let R=_+1;R<o;R++){let L=-h[R]/h[_+1];for(let D=_+1;D<r;D++)f.set(D,R,f.get(D,R)+L*g[D])}}if(u)for(let R=_+1;R<o;R++)w.set(R,_,h[R])}}let V=Math.min(o,r+1);if(A<o&&(p[A]=f.get(A,A)),r<V&&(p[V-1]=0),C+1<V&&(h[C]=f.get(C,V-1)),h[V-1]=0,c){for(let _=A;_<m;_++){for(let R=0;R<r;R++)b.set(R,_,0);b.set(_,_,1)}for(let _=A-1;_>=0;_--)if(p[_]!==0){for(let R=_+1;R<m;R++){let L=0;for(let D=_;D<r;D++)L+=b.get(D,_)*b.get(D,R);L=-L/b.get(_,_);for(let D=_;D<r;D++)b.set(D,R,b.get(D,R)+L*b.get(D,_))}for(let R=_;R<r;R++)b.set(R,_,-b.get(R,_));b.set(_,_,1+b.get(_,_));for(let R=0;R<_-1;R++)b.set(R,_,0)}else{for(let R=0;R<r;R++)b.set(R,_,0);b.set(_,_,1)}}if(u)for(let _=o-1;_>=0;_--){if(_<C&&h[_]!==0)for(let R=_+1;R<o;R++){let L=0;for(let D=_+1;D<o;D++)L+=w.get(D,_)*w.get(D,R);L=-L/w.get(_+1,_);for(let D=_+1;D<o;D++)w.set(D,R,w.get(D,R)+L*w.get(D,_))}for(let R=0;R<o;R++)w.set(R,_,0);w.set(_,_,1)}let k=V-1,G=Number.EPSILON;for(;V>0;){let _,R;for(_=V-2;_>=-1&&_!==-1;_--){let L=Number.MIN_VALUE+G*Math.abs(p[_]+Math.abs(p[_+1]));if(Math.abs(h[_])<=L||Number.isNaN(h[_])){h[_]=0;break}}if(_===V-2)R=4;else{let L;for(L=V-1;L>=_&&L!==_;L--){let D=(L!==V?Math.abs(h[L]):0)+(L!==_+1?Math.abs(h[L-1]):0);if(Math.abs(p[L])<=G*D){p[L]=0;break}}L===_?R=3:L===V-1?R=1:(R=2,_=L)}switch(_++,R){case 1:{let L=h[V-2];h[V-2]=0;for(let D=V-2;D>=_;D--){let Z=rr(p[D],L),X=p[D]/Z,ee=L/Z;if(p[D]=Z,D!==_&&(L=-ee*h[D-1],h[D-1]=X*h[D-1]),u)for(let se=0;se<o;se++)Z=X*w.get(se,D)+ee*w.get(se,V-1),w.set(se,V-1,-ee*w.get(se,D)+X*w.get(se,V-1)),w.set(se,D,Z)}break}case 2:{let L=h[_-1];h[_-1]=0;for(let D=_;D<V;D++){let Z=rr(p[D],L),X=p[D]/Z,ee=L/Z;if(p[D]=Z,L=-ee*h[D],h[D]=X*h[D],c)for(let se=0;se<r;se++)Z=X*b.get(se,D)+ee*b.get(se,_-1),b.set(se,_-1,-ee*b.get(se,D)+X*b.get(se,_-1)),b.set(se,D,Z)}break}case 3:{let L=Math.max(Math.abs(p[V-1]),Math.abs(p[V-2]),Math.abs(h[V-2]),Math.abs(p[_]),Math.abs(h[_])),D=p[V-1]/L,Z=p[V-2]/L,X=h[V-2]/L,ee=p[_]/L,se=h[_]/L,we=((Z+D)*(Z-D)+X*X)/2,Je=D*X*(D*X),pe=0;(we!==0||Je!==0)&&(we<0?pe=0-Math.sqrt(we*we+Je):pe=Math.sqrt(we*we+Je),pe=Je/(we+pe));let tt=(ee+D)*(ee-D)+pe,st=ee*se;for(let j=_;j<V-1;j++){let Te=rr(tt,st);Te===0&&(Te=Number.MIN_VALUE);let Le=tt/Te,Re=st/Te;if(j!==_&&(h[j-1]=Te),tt=Le*p[j]+Re*h[j],h[j]=Le*h[j]-Re*p[j],st=Re*p[j+1],p[j+1]=Le*p[j+1],u)for(let me=0;me<o;me++)Te=Le*w.get(me,j)+Re*w.get(me,j+1),w.set(me,j+1,-Re*w.get(me,j)+Le*w.get(me,j+1)),w.set(me,j,Te);if(Te=rr(tt,st),Te===0&&(Te=Number.MIN_VALUE),Le=tt/Te,Re=st/Te,p[j]=Te,tt=Le*h[j]+Re*p[j+1],p[j+1]=-Re*h[j]+Le*p[j+1],st=Re*h[j+1],h[j+1]=Le*h[j+1],c&&j<r-1)for(let me=0;me<r;me++)Te=Le*b.get(me,j)+Re*b.get(me,j+1),b.set(me,j+1,-Re*b.get(me,j)+Le*b.get(me,j+1)),b.set(me,j,Te)}h[V-2]=tt;break}case 4:{if(p[_]<=0&&(p[_]=p[_]<0?-p[_]:0,u))for(let L=0;L<=k;L++)w.set(L,_,-w.get(L,_));for(;_<k&&!(p[_]>=p[_+1]);){let L=p[_];if(p[_]=p[_+1],p[_+1]=L,u&&_<o-1)for(let D=0;D<o;D++)L=w.get(D,_+1),w.set(D,_+1,w.get(D,_)),w.set(D,_,L);if(c&&_<r-1)for(let D=0;D<r;D++)L=b.get(D,_+1),b.set(D,_+1,b.get(D,_)),b.set(D,_,L);_++}V--;break}}}if(l){let _=w;w=b,b=_}this.m=r,this.n=o,this.s=p,this.U=b,this.V=w}solve(e){let n=e,r=this.threshold,o=this.s.length,s=F.zeros(o,o);for(let m=0;m<o;m++)Math.abs(this.s[m])<=r?s.set(m,m,0):s.set(m,m,1/this.s[m]);let i=this.U,a=this.rightSingularVectors,c=a.mmul(s),u=a.rows,l=i.rows,f=F.zeros(u,l);for(let m=0;m<u;m++)for(let d=0;d<l;d++){let p=0;for(let b=0;b<o;b++)p+=c.get(m,b)*i.get(d,b);f.set(m,d,p)}return f.mmul(n)}solveForDiagonal(e){return this.solve(F.diag(e))}inverse(){let e=this.V,n=this.threshold,r=e.rows,o=e.columns,s=new F(r,this.s.length);for(let l=0;l<r;l++)for(let f=0;f<o;f++)Math.abs(this.s[f])>n&&s.set(l,f,e.get(l,f)/this.s[f]);let i=this.U,a=i.rows,c=i.columns,u=new F(r,a);for(let l=0;l<r;l++)for(let f=0;f<a;f++){let m=0;for(let d=0;d<c;d++)m+=s.get(l,d)*i.get(f,d);u.set(l,f,m)}return u}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let e=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,n=0,r=this.s;for(let o=0,s=r.length;o<s;o++)r[o]>e&&n++;return n}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return F.diag(this.s)}};function $T(t,e=!1){return t=ht.checkMatrix(t),e?new zr(t).inverse():H2(t,F.eye(t.rows))}function H2(t,e,n=!1){return t=ht.checkMatrix(t),e=ht.checkMatrix(e),n?new zr(t).solve(e):t.isSquare()?new Fs(t).solve(e):new _a(t).solve(e)}function tl(t){if(t=F.checkMatrix(t),t.isSquare()){if(t.columns===0)return 1;let e,n,r,o;if(t.columns===2)return e=t.get(0,0),n=t.get(0,1),r=t.get(1,0),o=t.get(1,1),e*o-n*r;if(t.columns===3){let s,i,a;return s=new Ls(t,[1,2],[1,2]),i=new Ls(t,[1,2],[0,2]),a=new Ls(t,[1,2],[0,1]),e=t.get(0,0),n=t.get(0,1),r=t.get(0,2),e*tl(s)-n*tl(i)+r*tl(a)}else return new Fs(t).determinant}else throw Error("determinant can only be calculated for a square matrix")}function ZT(t,e){let n=[];for(let r=0;r<t;r++)r!==e&&n.push(r);return n}function e4(t,e,n,r=1e-9,o=1e-9){if(t>o)return new Array(e.rows+1).fill(0);{let s=e.addRow(n,[0]);for(let i=0;i<s.rows;i++)Math.abs(s.get(i,0))<r&&s.set(i,0,0);return s.to1DArray()}}function t4(t,e={}){let{thresholdValue:n=1e-9,thresholdError:r=1e-9}=e;t=F.checkMatrix(t);let o=t.rows,s=new F(o,o);for(let i=0;i<o;i++){let a=F.columnVector(t.getRow(i)),c=t.subMatrixRow(ZT(o,i)).transpose(),l=new zr(c).solve(a),f=F.sub(a,c.mmul(l)).abs().max();s.setRow(i,e4(f,l,i,n,r))}return s}function n4(t,e=Number.EPSILON){if(t=F.checkMatrix(t),t.isEmpty())return t.transpose();let n=new zr(t,{autoTranspose:!0}),r=n.leftSingularVectors,o=n.rightSingularVectors,s=n.diagonal;for(let i=0;i<s.length;i++)Math.abs(s[i])>e?s[i]=1/s[i]:s[i]=0;return o.mmul(F.diag(s).mmul(r.transpose()))}function r4(t,e=t,n={}){t=new F(t);let r=!1;if(typeof e=="object"&&!F.isMatrix(e)&&!Et.isAnyArray(e)?(n=e,e=t,r=!0):e=new F(e),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");let{center:o=!0}=n;o&&(t=t.center("column"),r||(e=e.center("column")));let s=t.transpose().mmul(e);for(let i=0;i<s.rows;i++)for(let a=0;a<s.columns;a++)s.set(i,a,s.get(i,a)*(1/(t.rows-1)));return s}function o4(t,e=t,n={}){t=new F(t);let r=!1;if(typeof e=="object"&&!F.isMatrix(e)&&!Et.isAnyArray(e)?(n=e,e=t,r=!0):e=new F(e),t.rows!==e.rows)throw new TypeError("Both matrices must have the same number of rows");let{center:o=!0,scale:s=!0}=n;o&&(t.center("column"),r||e.center("column")),s&&(t.scale("column"),r||e.scale("column"));let i=t.standardDeviation("column",{unbiased:!0}),a=r?i:e.standardDeviation("column",{unbiased:!0}),c=t.transpose().mmul(e);for(let u=0;u<c.rows;u++)for(let l=0;l<c.columns;l++)c.set(u,l,c.get(u,l)*(1/(i[u]*a[l]))*(1/(t.rows-1)));return c}var ol=class{constructor(e,n={}){let{assumeSymmetric:r=!1}=n;if(e=ht.checkMatrix(e),!e.isSquare())throw new Error("Matrix is not a square matrix");if(e.isEmpty())throw new Error("Matrix must be non-empty");let o=e.columns,s=new F(o,o),i=new Float64Array(o),a=new Float64Array(o),c=e,u,l,f=!1;if(r?f=!0:f=e.isSymmetric(),f){for(u=0;u<o;u++)for(l=0;l<o;l++)s.set(u,l,c.get(u,l));s4(o,a,i,s),i4(o,a,i,s)}else{let m=new F(o,o),d=new Float64Array(o);for(l=0;l<o;l++)for(u=0;u<o;u++)m.set(u,l,c.get(u,l));a4(o,m,d,s),c4(o,a,i,s,m)}this.n=o,this.e=a,this.d=i,this.V=s}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let e=this.n,n=this.e,r=this.d,o=new F(e,e),s,i;for(s=0;s<e;s++){for(i=0;i<e;i++)o.set(s,i,0);o.set(s,s,r[s]),n[s]>0?o.set(s,s+1,n[s]):n[s]<0&&o.set(s,s-1,n[s])}return o}};function s4(t,e,n,r){let o,s,i,a,c,u,l,f;for(c=0;c<t;c++)n[c]=r.get(t-1,c);for(a=t-1;a>0;a--){for(f=0,i=0,u=0;u<a;u++)f=f+Math.abs(n[u]);if(f===0)for(e[a]=n[a-1],c=0;c<a;c++)n[c]=r.get(a-1,c),r.set(a,c,0),r.set(c,a,0);else{for(u=0;u<a;u++)n[u]/=f,i+=n[u]*n[u];for(o=n[a-1],s=Math.sqrt(i),o>0&&(s=-s),e[a]=f*s,i=i-o*s,n[a-1]=o-s,c=0;c<a;c++)e[c]=0;for(c=0;c<a;c++){for(o=n[c],r.set(c,a,o),s=e[c]+r.get(c,c)*o,u=c+1;u<=a-1;u++)s+=r.get(u,c)*n[u],e[u]+=r.get(u,c)*o;e[c]=s}for(o=0,c=0;c<a;c++)e[c]/=i,o+=e[c]*n[c];for(l=o/(i+i),c=0;c<a;c++)e[c]-=l*n[c];for(c=0;c<a;c++){for(o=n[c],s=e[c],u=c;u<=a-1;u++)r.set(u,c,r.get(u,c)-(o*e[u]+s*n[u]));n[c]=r.get(a-1,c),r.set(a,c,0)}}n[a]=i}for(a=0;a<t-1;a++){if(r.set(t-1,a,r.get(a,a)),r.set(a,a,1),i=n[a+1],i!==0){for(u=0;u<=a;u++)n[u]=r.get(u,a+1)/i;for(c=0;c<=a;c++){for(s=0,u=0;u<=a;u++)s+=r.get(u,a+1)*r.get(u,c);for(u=0;u<=a;u++)r.set(u,c,r.get(u,c)-s*n[u])}}for(u=0;u<=a;u++)r.set(u,a+1,0)}for(c=0;c<t;c++)n[c]=r.get(t-1,c),r.set(t-1,c,0);r.set(t-1,t-1,1),e[0]=0}function i4(t,e,n,r){let o,s,i,a,c,u,l,f,m,d,p,b,w,h,g,y;for(i=1;i<t;i++)e[i-1]=e[i];e[t-1]=0;let A=0,C=0,U=Number.EPSILON;for(u=0;u<t;u++){for(C=Math.max(C,Math.abs(n[u])+Math.abs(e[u])),l=u;l<t&&!(Math.abs(e[l])<=U*C);)l++;if(l>u)do{for(o=n[u],f=(n[u+1]-o)/(2*e[u]),m=rr(f,1),f<0&&(m=-m),n[u]=e[u]/(f+m),n[u+1]=e[u]*(f+m),d=n[u+1],s=o-n[u],i=u+2;i<t;i++)n[i]-=s;for(A=A+s,f=n[l],p=1,b=p,w=p,h=e[u+1],g=0,y=0,i=l-1;i>=u;i--)for(w=b,b=p,y=g,o=p*e[i],s=p*f,m=rr(f,e[i]),e[i+1]=g*m,g=e[i]/m,p=f/m,f=p*n[i]-g*o,n[i+1]=s+g*(p*o+g*n[i]),c=0;c<t;c++)s=r.get(c,i+1),r.set(c,i+1,g*r.get(c,i)+p*s),r.set(c,i,p*r.get(c,i)-g*s);f=-g*y*w*h*e[u]/d,e[u]=g*f,n[u]=p*f}while(Math.abs(e[u])>U*C);n[u]=n[u]+A,e[u]=0}for(i=0;i<t-1;i++){for(c=i,f=n[i],a=i+1;a<t;a++)n[a]<f&&(c=a,f=n[a]);if(c!==i)for(n[c]=n[i],n[i]=f,a=0;a<t;a++)f=r.get(a,i),r.set(a,i,r.get(a,c)),r.set(a,c,f)}}function a4(t,e,n,r){let o=0,s=t-1,i,a,c,u,l,f,m;for(f=o+1;f<=s-1;f++){for(m=0,u=f;u<=s;u++)m=m+Math.abs(e.get(u,f-1));if(m!==0){for(c=0,u=s;u>=f;u--)n[u]=e.get(u,f-1)/m,c+=n[u]*n[u];for(a=Math.sqrt(c),n[f]>0&&(a=-a),c=c-n[f]*a,n[f]=n[f]-a,l=f;l<t;l++){for(i=0,u=s;u>=f;u--)i+=n[u]*e.get(u,l);for(i=i/c,u=f;u<=s;u++)e.set(u,l,e.get(u,l)-i*n[u])}for(u=0;u<=s;u++){for(i=0,l=s;l>=f;l--)i+=n[l]*e.get(u,l);for(i=i/c,l=f;l<=s;l++)e.set(u,l,e.get(u,l)-i*n[l])}n[f]=m*n[f],e.set(f,f-1,m*a)}}for(u=0;u<t;u++)for(l=0;l<t;l++)r.set(u,l,u===l?1:0);for(f=s-1;f>=o+1;f--)if(e.get(f,f-1)!==0){for(u=f+1;u<=s;u++)n[u]=e.get(u,f-1);for(l=f;l<=s;l++){for(a=0,u=f;u<=s;u++)a+=n[u]*r.get(u,l);for(a=a/n[f]/e.get(f,f-1),u=f;u<=s;u++)r.set(u,l,r.get(u,l)+a*n[u])}}}function c4(t,e,n,r,o){let s=t-1,i=0,a=t-1,c=Number.EPSILON,u=0,l=0,f=0,m=0,d=0,p=0,b=0,w=0,h,g,y,A,C,U,V,k,G,_,R,L,D,Z,X;for(h=0;h<t;h++)for((h<i||h>a)&&(n[h]=o.get(h,h),e[h]=0),g=Math.max(h-1,0);g<t;g++)l=l+Math.abs(o.get(h,g));for(;s>=i;){for(A=s;A>i&&(p=Math.abs(o.get(A-1,A-1))+Math.abs(o.get(A,A)),p===0&&(p=l),!(Math.abs(o.get(A,A-1))<c*p));)A--;if(A===s)o.set(s,s,o.get(s,s)+u),n[s]=o.get(s,s),e[s]=0,s--,w=0;else if(A===s-1){if(V=o.get(s,s-1)*o.get(s-1,s),f=(o.get(s-1,s-1)-o.get(s,s))/2,m=f*f+V,b=Math.sqrt(Math.abs(m)),o.set(s,s,o.get(s,s)+u),o.set(s-1,s-1,o.get(s-1,s-1)+u),k=o.get(s,s),m>=0){for(b=f>=0?f+b:f-b,n[s-1]=k+b,n[s]=n[s-1],b!==0&&(n[s]=k-V/b),e[s-1]=0,e[s]=0,k=o.get(s,s-1),p=Math.abs(k)+Math.abs(b),f=k/p,m=b/p,d=Math.sqrt(f*f+m*m),f=f/d,m=m/d,g=s-1;g<t;g++)b=o.get(s-1,g),o.set(s-1,g,m*b+f*o.get(s,g)),o.set(s,g,m*o.get(s,g)-f*b);for(h=0;h<=s;h++)b=o.get(h,s-1),o.set(h,s-1,m*b+f*o.get(h,s)),o.set(h,s,m*o.get(h,s)-f*b);for(h=i;h<=a;h++)b=r.get(h,s-1),r.set(h,s-1,m*b+f*r.get(h,s)),r.set(h,s,m*r.get(h,s)-f*b)}else n[s-1]=k+f,n[s]=k+f,e[s-1]=b,e[s]=-b;s=s-2,w=0}else{if(k=o.get(s,s),G=0,V=0,A<s&&(G=o.get(s-1,s-1),V=o.get(s,s-1)*o.get(s-1,s)),w===10){for(u+=k,h=i;h<=s;h++)o.set(h,h,o.get(h,h)-k);p=Math.abs(o.get(s,s-1))+Math.abs(o.get(s-1,s-2)),k=G=.75*p,V=-.4375*p*p}if(w===30&&(p=(G-k)/2,p=p*p+V,p>0)){for(p=Math.sqrt(p),G<k&&(p=-p),p=k-V/((G-k)/2+p),h=i;h<=s;h++)o.set(h,h,o.get(h,h)-p);u+=p,k=G=V=.964}for(w=w+1,C=s-2;C>=A&&(b=o.get(C,C),d=k-b,p=G-b,f=(d*p-V)/o.get(C+1,C)+o.get(C,C+1),m=o.get(C+1,C+1)-b-d-p,d=o.get(C+2,C+1),p=Math.abs(f)+Math.abs(m)+Math.abs(d),f=f/p,m=m/p,d=d/p,!(C===A||Math.abs(o.get(C,C-1))*(Math.abs(m)+Math.abs(d))<c*(Math.abs(f)*(Math.abs(o.get(C-1,C-1))+Math.abs(b)+Math.abs(o.get(C+1,C+1))))));)C--;for(h=C+2;h<=s;h++)o.set(h,h-2,0),h>C+2&&o.set(h,h-3,0);for(y=C;y<=s-1&&(Z=y!==s-1,y!==C&&(f=o.get(y,y-1),m=o.get(y+1,y-1),d=Z?o.get(y+2,y-1):0,k=Math.abs(f)+Math.abs(m)+Math.abs(d),k!==0&&(f=f/k,m=m/k,d=d/k)),k!==0);y++)if(p=Math.sqrt(f*f+m*m+d*d),f<0&&(p=-p),p!==0){for(y!==C?o.set(y,y-1,-p*k):A!==C&&o.set(y,y-1,-o.get(y,y-1)),f=f+p,k=f/p,G=m/p,b=d/p,m=m/f,d=d/f,g=y;g<t;g++)f=o.get(y,g)+m*o.get(y+1,g),Z&&(f=f+d*o.get(y+2,g),o.set(y+2,g,o.get(y+2,g)-f*b)),o.set(y,g,o.get(y,g)-f*k),o.set(y+1,g,o.get(y+1,g)-f*G);for(h=0;h<=Math.min(s,y+3);h++)f=k*o.get(h,y)+G*o.get(h,y+1),Z&&(f=f+b*o.get(h,y+2),o.set(h,y+2,o.get(h,y+2)-f*d)),o.set(h,y,o.get(h,y)-f),o.set(h,y+1,o.get(h,y+1)-f*m);for(h=i;h<=a;h++)f=k*r.get(h,y)+G*r.get(h,y+1),Z&&(f=f+b*r.get(h,y+2),r.set(h,y+2,r.get(h,y+2)-f*d)),r.set(h,y,r.get(h,y)-f),r.set(h,y+1,r.get(h,y+1)-f*m)}}}if(l!==0){for(s=t-1;s>=0;s--)if(f=n[s],m=e[s],m===0)for(A=s,o.set(s,s,1),h=s-1;h>=0;h--){for(V=o.get(h,h)-f,d=0,g=A;g<=s;g++)d=d+o.get(h,g)*o.get(g,s);if(e[h]<0)b=V,p=d;else if(A=h,e[h]===0?o.set(h,s,V!==0?-d/V:-d/(c*l)):(k=o.get(h,h+1),G=o.get(h+1,h),m=(n[h]-f)*(n[h]-f)+e[h]*e[h],U=(k*p-b*d)/m,o.set(h,s,U),o.set(h+1,s,Math.abs(k)>Math.abs(b)?(-d-V*U)/k:(-p-G*U)/b)),U=Math.abs(o.get(h,s)),c*U*U>1)for(g=h;g<=s;g++)o.set(g,s,o.get(g,s)/U)}else if(m<0)for(A=s-1,Math.abs(o.get(s,s-1))>Math.abs(o.get(s-1,s))?(o.set(s-1,s-1,m/o.get(s,s-1)),o.set(s-1,s,-(o.get(s,s)-f)/o.get(s,s-1))):(X=el(0,-o.get(s-1,s),o.get(s-1,s-1)-f,m),o.set(s-1,s-1,X[0]),o.set(s-1,s,X[1])),o.set(s,s-1,0),o.set(s,s,1),h=s-2;h>=0;h--){for(_=0,R=0,g=A;g<=s;g++)_=_+o.get(h,g)*o.get(g,s-1),R=R+o.get(h,g)*o.get(g,s);if(V=o.get(h,h)-f,e[h]<0)b=V,d=_,p=R;else if(A=h,e[h]===0?(X=el(-_,-R,V,m),o.set(h,s-1,X[0]),o.set(h,s,X[1])):(k=o.get(h,h+1),G=o.get(h+1,h),L=(n[h]-f)*(n[h]-f)+e[h]*e[h]-m*m,D=(n[h]-f)*2*m,L===0&&D===0&&(L=c*l*(Math.abs(V)+Math.abs(m)+Math.abs(k)+Math.abs(G)+Math.abs(b))),X=el(k*d-b*_+m*R,k*p-b*R-m*_,L,D),o.set(h,s-1,X[0]),o.set(h,s,X[1]),Math.abs(k)>Math.abs(b)+Math.abs(m)?(o.set(h+1,s-1,(-_-V*o.get(h,s-1)+m*o.get(h,s))/k),o.set(h+1,s,(-R-V*o.get(h,s)-m*o.get(h,s-1))/k)):(X=el(-d-G*o.get(h,s-1),-p-G*o.get(h,s),b,m),o.set(h+1,s-1,X[0]),o.set(h+1,s,X[1]))),U=Math.max(Math.abs(o.get(h,s-1)),Math.abs(o.get(h,s))),c*U*U>1)for(g=h;g<=s;g++)o.set(g,s-1,o.get(g,s-1)/U),o.set(g,s,o.get(g,s)/U)}for(h=0;h<t;h++)if(h<i||h>a)for(g=h;g<t;g++)r.set(h,g,o.get(h,g));for(g=t-1;g>=i;g--)for(h=i;h<=a;h++){for(b=0,y=i;y<=Math.min(g,a);y++)b=b+r.get(h,y)*o.get(y,g);r.set(h,g,b)}}}function el(t,e,n,r){let o,s;return Math.abs(n)>Math.abs(r)?(o=r/n,s=n+o*r,[(t+o*e)/s,(e-o*t)/s]):(o=n/r,s=r+o*n,[(o*t+e)/s,(o*e-t)/s])}var sl=class{constructor(e){if(e=ht.checkMatrix(e),!e.isSymmetric())throw new Error("Matrix is not symmetric");let n=e,r=n.rows,o=new F(r,r),s=!0,i,a,c;for(a=0;a<r;a++){let u=0;for(c=0;c<a;c++){let l=0;for(i=0;i<c;i++)l+=o.get(c,i)*o.get(a,i);l=(n.get(a,c)-l)/o.get(c,c),o.set(a,c,l),u=u+l*l}for(u=n.get(a,a)-u,s&&=u>0,o.set(a,a,Math.sqrt(Math.max(u,0))),c=a+1;c<r;c++)o.set(a,c,0)}this.L=o,this.positiveDefinite=s}isPositiveDefinite(){return this.positiveDefinite}solve(e){e=ht.checkMatrix(e);let n=this.L,r=n.rows;if(e.rows!==r)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");let o=e.columns,s=e.clone(),i,a,c;for(c=0;c<r;c++)for(a=0;a<o;a++){for(i=0;i<c;i++)s.set(c,a,s.get(c,a)-s.get(i,a)*n.get(c,i));s.set(c,a,s.get(c,a)/n.get(c,c))}for(c=r-1;c>=0;c--)for(a=0;a<o;a++){for(i=c+1;i<r;i++)s.set(c,a,s.get(c,a)-s.get(i,a)*n.get(i,c));s.set(c,a,s.get(c,a)/n.get(c,c))}return s}get lowerTriangularMatrix(){return this.L}},il=class{constructor(e,n={}){e=ht.checkMatrix(e);let{Y:r}=n,{scaleScores:o=!1,maxIterations:s=1e3,terminationCriteria:i=1e-10}=n,a;if(r){if(Et.isAnyArray(r)&&typeof r[0]=="number"?r=F.columnVector(r):r=ht.checkMatrix(r),r.rows!==e.rows)throw new Error("Y should have the same number of rows as X");a=r.getColumnVector(0)}else a=e.getColumnVector(0);let c=1,u,l,f,m;for(let d=0;d<s&&c>i;d++)f=e.transpose().mmul(a).div(a.transpose().mmul(a).get(0,0)),f=f.div(f.norm()),u=e.mmul(f).div(f.transpose().mmul(f).get(0,0)),d>0&&(c=u.clone().sub(m).pow(2).sum()),m=u.clone(),r?(l=r.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),l=l.div(l.norm()),a=r.mmul(l).div(l.transpose().mmul(l).get(0,0))):a=u;if(r){let d=e.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0));d=d.div(d.norm());let p=e.clone().sub(u.clone().mmul(d.transpose())),b=a.transpose().mmul(u).div(u.transpose().mmul(u).get(0,0)),w=r.clone().sub(u.clone().mulS(b.get(0,0)).mmul(l.transpose()));this.t=u,this.p=d.transpose(),this.w=f.transpose(),this.q=l,this.u=a,this.s=u.transpose().mmul(u),this.xResidual=p,this.yResidual=w,this.betas=b}else this.w=f.transpose(),this.s=u.transpose().mmul(u).sqrt(),o?this.t=u.clone().div(this.s.get(0,0)):this.t=u,this.xResidual=e.sub(u.mmul(f.transpose()))}};q.AbstractMatrix=ve;q.CHO=sl;q.CholeskyDecomposition=sl;q.DistanceMatrix=nl;q.EVD=ol;q.EigenvalueDecomposition=ol;q.LU=Fs;q.LuDecomposition=Fs;q.Matrix=F;q.MatrixColumnSelectionView=hd;q.MatrixColumnView=md;q.MatrixFlipColumnView=dd;q.MatrixFlipRowView=pd;q.MatrixRowSelectionView=yd;q.MatrixRowView=gd;q.MatrixSelectionView=Ls;q.MatrixSubView=xd;q.MatrixTransposeView=bd;q.NIPALS=il;q.Nipals=il;q.QR=_a;q.QrDecomposition=_a;q.SVD=zr;q.SingularValueDecomposition=zr;q.SymmetricMatrix=wo;q.WrapperMatrix1D=rl;q.WrapperMatrix2D=ht;q.correlation=o4;q.covariance=r4;q.default=F;q.determinant=tl;q.inverse=$T;q.linearDependencies=t4;q.pseudoInverse=n4;q.solve=H2;q.wrap=WT});function og(t,e){let n=new Map;for(let r of t){let o=e(r),s=n.get(o)??[];s.push(r),n.set(o,s)}return n}function pt(t){let e=[];for(let n=0;n<t&&n<1e7;n++)e.push(n);return e}function DA(t,e){return pt(t).map((s,i,a)=>({remap(c,u,l){return s/(l?t-1:t)*(u-c)+c},remapCenter(c,u){return(s+1)/(t+1)*(u-c)+c},segment(c,u){return[s/t*(u-c)+c,(s+1)/t*(u-c)+c]},slidingWindow(c){return[c[s],c[s+1]]},randkf(){if(s===0)return 0;if(s===t-1)return 100;let c=s/(t-2)*100,u=(s+1)/(t-2)*100;return cn(c,u)},get(c){return c[s]},i:s,next:s+1,end:()=>s===t-1,start:()=>s===0})).map(e)}function Ha(t){return DA(t,ui)}function ui(t){return t}function cn(t,e,n){return n||(n=()=>Math.random()),n()*(e-t)+t}function sg(t,e){return t.length===0?[e]:t[0].map(n=>sg(t.slice(1),[...e,n])).flat(1)}function Yr(...t){return sg(t,[])}function pC(t){return Object.fromEntries(Array.from(og(t,e=>e.name).entries()).map(([e,n])=>{let r=n.reduce((s,i)=>s+i.runtime,0)/n.length,o=n.length;return[e,{totalRuntime:r,invocationCount:o,averageRuntime:r/o,worstCaseRuntime:n.reduce((s,i)=>Math.max(s,i.runtime),0),bestCaseRuntime:n.reduce((s,i)=>Math.min(s,i.runtime),0)}]}))}function kA(t){return t instanceof Promise?t:Promise.resolve(t)}function IA(t,e,n,r){let o=e??navigator.hardwareConcurrency,s=[],i=[],a=0;for(let f=0;f<o;f++)i.push(new Worker(t));function c(){let f=a;return a=(a+1)%o,f}let u=0;function l(f,m,d){let p=i[d],b=n?.[f],w=performance.now();if((b?.runMode?.(m)??"worker")==="main"){if(!r)throw new Error("If a threadpool method is to run in the main thread, its interface should be provided to the main thread!");let y=r[f](...m);return s.push(kA(y).then(A=>({name:f,inputSize:b?.estimateInputSize?.(m)??1,runtime:performance.now()-w,metadata:b?.getRuntimeMetadata?.(m,A),thread:{type:"main"}}))),y}let g=new Promise(async(y,A)=>{let C=u;u++;let U=async k=>{if(k.data.id!==C)return;p.removeEventListener("message",U);let G=n?.[f]?.parseRetVal??(_=>_);y(await G(k.data.returnValue))};p.addEventListener("message",U);let V=n?.[f]?.serializeArgs??(k=>k);p.postMessage({type:f,args:await V(m),id:C},n?.[f]?.transferArgs?.(m)??[])});return s.push(g.then(y=>({name:f,inputSize:b?.estimateInputSize?.(m)??1,runtime:performance.now()-w,metadata:b?.getRuntimeMetadata?.(m,y),thread:{type:"worker",workerId:d}}))),g}return{threadCount:o,getCurrentPerformanceRecords(){return Promise.all(s)},send:new Proxy({},{get(f,m){return async(...d)=>{let p=c();return l(m,d,p)}}}),sendToThread:f=>new Proxy({},{get(m,d){return async(...p)=>l(d,p,f)}}),broadcast:new Proxy({},{get(f,m){return async(...d)=>await Promise.all(i.map((p,b)=>l(m,d,b)))}})}}function OA(t,e){self.addEventListener("message",async n=>{let o=await(e?.[n.data.type]?.parseArgs??ui)(n.data.args),s=await t[n.data.type](...o),i=e?.[n.data.type]?.serializeRetVal??ui;postMessage({returnValue:await i(s),id:n.data.id},e?.[n.data.type]?.transferRetVal?.(s)??[])})}function gC(getInterface,src,workerCount,serialization){if(eval("self.WorkerGlobalScope")){OA(getInterface(!1),serialization);return}else return IA(src??document.currentScript.src,workerCount,serialization,getInterface(!0))}async function yC(cb){if(!eval("self.WorkerGlobalScope"))return await cb()}function ig(t){return[t[0],t[1],t[2]]}function ag(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function cg(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],t[0]*e[4]+t[1]*e[5]+t[2]*e[6]+t[3]*e[7],t[0]*e[8]+t[1]*e[9]+t[2]*e[10]+t[3]*e[11],t[0]*e[12]+t[1]*e[13]+t[2]*e[14]+t[3]*e[15]]}function ug(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3]]}function at(t,e){return[t[0]*e[0]+t[4]*e[1]+t[8]*e[2]+t[12]*e[3],t[1]*e[0]+t[5]*e[1]+t[9]*e[2]+t[13]*e[3],t[2]*e[0]+t[6]*e[1]+t[10]*e[2]+t[14]*e[3],t[3]*e[0]+t[7]*e[1]+t[11]*e[2]+t[15]*e[3],t[0]*e[4]+t[4]*e[5]+t[8]*e[6]+t[12]*e[7],t[1]*e[4]+t[5]*e[5]+t[9]*e[6]+t[13]*e[7],t[2]*e[4]+t[6]*e[5]+t[10]*e[6]+t[14]*e[7],t[3]*e[4]+t[7]*e[5]+t[11]*e[6]+t[15]*e[7],t[0]*e[8]+t[4]*e[9]+t[8]*e[10]+t[12]*e[11],t[1]*e[8]+t[5]*e[9]+t[9]*e[10]+t[13]*e[11],t[2]*e[8]+t[6]*e[9]+t[10]*e[10]+t[14]*e[11],t[3]*e[8]+t[7]*e[9]+t[11]*e[10]+t[15]*e[11],t[0]*e[12]+t[4]*e[13]+t[8]*e[14]+t[12]*e[15],t[1]*e[12]+t[5]*e[13]+t[9]*e[14]+t[13]*e[15],t[2]*e[12]+t[6]*e[13]+t[10]*e[14]+t[14]*e[15],t[3]*e[12]+t[7]*e[13]+t[11]*e[14]+t[15]*e[15]]}function Qr(t,e){return[t[0]+e[0],t[1]+e[1]]}function Ht(t,e){return[t[0]+e[0],t[1]+e[1],t[2]+e[2]]}function UA(t,e){return[t[0]*e[0],t[1]*e[1],t[2]*e[2]]}function GA(t){return t[0]+t[1]+t[2]}function lg(t,e){return GA(UA(t,e))}function Yl(t,e){return[t[0]*e,t[1]*e]}function yn(t,e){return[t[0]*e,t[1]*e,t[2]*e]}var kC=Symbol("allKeys");var IC=Symbol("all2");var JA=gn(mg()),qA=gn(dg());function QA(t,e){if(e)return e;if(t==="f32"||t==="i32"||t==="u32"||t==="f16")return t;if(t.startsWith("vec")||t.startsWith("mat")){if(t.endsWith("i"))return"i32";if(t.endsWith("u"))return"u32";if(t.endsWith("h"))return"f16"}return"f32"}function WA(t){return t.startsWith("vec2")?2:t.startsWith("vec3")?3:t.startsWith("vec4")?4:t.startsWith("mat2x3")||t.startsWith("mat3x2")?6:t.startsWith("mat2x4")||t.startsWith("mat4x2")?8:t.startsWith("mat3x4")||t.startsWith("mat4x3")?12:t.startsWith("mat2")?4:t.startsWith("mat3")?9:t.startsWith("mat4")?16:1}function $A(t,e,n,r,o){let s=QA(t,e),i=WA(t),a={i32:4,f32:4,u32:4,f16:2}[s],c={i32:"setInt32",f32:"setFloat32",u32:"setUint32",f16:"setFloat16"}[s];for(let u=0;u<i;u++)n[c](r+a*u,o[u],!0)}function Ql(t,e,n,r){if(t.members){for(let s of t.members)Ql(s.type,e[s.name],n,r+s.offset);return}if(t.name==="array")for(let s=0;s<t.count;s++)Ql(t.format,e[s],n,r+t.stride*s);else $A(t.name,t.format?.name,n,r,Array.isArray(e)?e:[e])}function ZA(t,e){let n=new ArrayBuffer(t.size),r=new DataView(n);return Ql(t,e,r,0),n}function ur(t,e,n,r){return ZA(t.bindGroups[e][n].type,r)}function r_(t){let e=Math.hypot(...t);return yn(t,1/e)}function Wl(t,e,n){return e=r_(e),Ht(Ht(yn(t,Math.cos(n)),yn(ag(e,t),Math.sin(n))),yn(e,lg(e,t)*(1-Math.cos(n))))}function li(t,e){return[...Wl([1,0,0],t,e),0,...Wl([0,1,0],t,e),0,...Wl([0,0,1],t,e),0,0,0,0,1]}function gg(t){return[t[0],0,0,0,0,t[1],0,0,0,0,t[2],0,0,0,0,1]}function yt(t){return[1,0,0,0,0,1,0,0,0,0,1,0,...t,1]}var v_=gn(kn());var Cg=gn(kn());var ja=gn(kn());var Ka=gn(kn());var Lh=gn(kn()),Q3=gn(a2());var Fh=gn(kn());async function c2(t){let e=new Map,n=new Map;for(let o of t)for(let s of o.tags)e.set(s,(e.get(s)??new Set).add(o));function r(o){if(n.has(o))return n.get(o);let s=(async()=>{let i=[];for(let a of o.waitFor)for(let c of e.get(a)??new Set)i.push(r(c));return await Promise.all(i),await o.task()})();return n.set(o,s),s}for(let o of t)r(o);return await Promise.all([...n.values()])}async function u2(t){let e={};async function n(s){e[s.brand]||(e[s.brand]=(async()=>({componentTemplate:s,instances:new Set,state:await s.init(async i=>(await n(i),(await e[i.brand]).state))}))())}for(let s of t)n(s);let r=Object.fromEntries(await Promise.all(Object.entries(e).map(async([s,i])=>[s,await i])));async function o(s){let i={},a=[];async function c(u){i[u.brand]||(i[u.brand]=u[s]?.({state:r[u.brand].state,instances:r[u.brand].instances,subsystem(l){return r[l.brand]},scheduleTask(l,f,m){a.push({task:l,tags:f??[],waitFor:m??[]})}})??Promise.resolve(),await i[u.brand])}await Promise.all(Object.values(r).map(async u=>await c(u.componentTemplate))),await c2(a)}return{subsystem(s){return{instances:r[s.brand].instances,global:r[s.brand].state}},async renderUpdate(){await o("renderUpdate")},async fixedUpdate(){await o("fixedUpdate")},entity(s){let i={};function a(c,u){if(i[c])return;let l=r[c].componentTemplate.create(u,r[c],r,f=>(a(f.brand,s[f.brand]),i[f.brand]));r[c].instances.add({data:l,entity:i}),i[c]=l}for(let[c,u]of Object.entries(s))a(c,u);return{component(c){return i[c.brand]},destroy(){for(let[c,u]of Object.entries(i))r[c]?.instances.delete(u)}}}}}var Nh=`struct DOFFragInput {\r
  @builtin(position) position : vec4f,\r
  @location(0) uv : vec2f,\r
}\r
\r
@group(0) @binding(0) var tex_sampler : sampler;\r
@group(0) @binding(1) var tex_color : texture_2d<f32>;\r
@group(0) @binding(2) var tex_position : texture_2d<f32>;\r
@group(0) @binding(3) var tex_linear_sampler : sampler;\r
\r
@vertex\r
fn VSMain(@builtin(vertex_index) vertexIndex: u32) -> DOFFragInput {\r
  var output: DOFFragInput;\r
\r
  output.position = vec4(array(\r
    vec2( 1.0,  1.0),\r
    vec2( 1.0, -1.0),\r
    vec2(-1.0, -1.0),\r
    vec2( 1.0,  1.0),\r
    vec2(-1.0, -1.0),\r
    vec2(-1.0,  1.0),\r
  )[vertexIndex], 0.5, 1.0);\r
\r
  output.uv = array(\r
    vec2(1.0, 0.0),\r
    vec2(1.0, 1.0),\r
    vec2(0.0, 1.0),\r
    vec2(1.0, 0.0),\r
    vec2(0.0, 1.0),\r
    vec2(0.0, 0.0),\r
  )[vertexIndex];\r
  return output;\r
}\r
\r
\r
fn get_individual_defocus_amount(dist: f32) -> f32 {\r
  return max(abs(dist - 10.0) / dist * 35.0 - 00.0, 0.01); \r
}\r
\r
fn get_defocus_amount(dists: vec2f) -> f32 {\r
  return max(\r
    get_individual_defocus_amount(dists.x),\r
    get_individual_defocus_amount(dists.y)\r
  );  \r
}\r
\r
fn logistic(x: f32) -> f32 {\r
  return 1.0 / (1.0 + exp(-x)); \r
}\r
\r
fn blur(uv: vec2f, size: f32) -> vec4f {\r
  let dims = vec2f(textureDimensions(tex_color, 0));\r
  var accum = vec4f(0.0);\r
  let mip_level = log2(f32(size)) * 1.0;\r
  var factor = 0.0;\r
  for (var i = 0; i < i32(floor(size)) + 1; i += 1) {\r
    let offset = OFFSET_LUT[i];\r
    let uv2 = uv + offset.xy / dims * 1.0;\r
    let pos = textureSampleLevel(tex_position, tex_sampler, uv2, 0.0);\r
    let f = \r
    select(\r
      0.0,\r
      clamp(size - offset.z, 0.0, 1.0),\r
      pos.y < 23 && pos.y > 17 \r
    );\r
    accum += textureSampleLevel(tex_color, tex_linear_sampler, uv2, 0.0) \r
      * f;\r
    factor += f;\r
  }\r
  return accum / factor;\r
}\r
\r
@fragment\r
fn FSMain(@location(0) uv:  vec2f) -> @location(0) vec4f {\r
  _ = tex_sampler;\r
  _ = tex_color;\r
  _ = tex_position;\r
\r
  let dims = vec2f(textureDimensions(tex_color, 0));\r
\r
  let pos = textureSampleLevel(tex_position, tex_linear_sampler, uv, 0.0);\r
  let center_color = textureSampleLevel(tex_color, tex_linear_sampler, uv, 0.0);\r
\r
  var factor = 0.0;\r
\r
  var accum = vec4f(0.0);\r
\r
  for (var i = 0; i < 30; i += 1) {\r
    let offset = OFFSET_LUT[i];\r
    let uv2 = uv + offset.xy / dims * 1.0;\r
    let pos_mip_level = min(log2(offset.z), 2.0);\r
    let pos2 = textureSampleLevel(tex_position, tex_linear_sampler, uv2, pos_mip_level);\r
\r
    let defocus = min(get_defocus_amount(pos2.xy), 30.0);\r
\r
    let mip_level = min(log2(defocus), 2.0);\r
    let f = (offset.z + 1.0)\r
      * logistic(defocus - offset.z)\r
      * select(0.0, 1.0, pos.y >= pos2.y);\r
      // * logistic(pos.y - pos2.y);\r
    accum += textureSampleLevel(tex_color, tex_linear_sampler, uv2, mip_level) \r
      * f;\r
    factor += f;\r
  }\r
\r
  return vec4f(\r
    accum.rgb / factor,\r
    1.0\r
  );\r
}\r
\r
/*\r
\`array(\r
	\${new Array(100).fill(0).map((e,i) => {\r
		const factor = i;\r
		const angle = factor * 2.399963;\r
		const x = factor * Math.cos(angle);\r
		const y = factor * Math.sin(angle);\r
		const dist = Math.hypot(x, y);\r
		return \`vec3f(\${x}, \${y}, \${dist})\`\r
	}).join(",\\n  ")}\r
)\`\r
*/\r
\r
const OFFSET_LUT = array(\r
	vec3f(0, 0, 0),\r
  vec3f(-0.7373687228988248, 0.6754904636562651, 1),\r
  vec3f(0.17485053403777584, -1.9923421620662212, 2),\r
  vec3f(1.8253182237516365, 2.3808009958919643, 3),\r
  vec3f(-3.938854581493409, -0.6967241820465114, 4),\r
  vec3f(4.218773391513887, -2.6836451089990305, 5),\r
  vec3f(-1.5576178427202265, 5.7942925932368645, 6),\r
  vec3f(-3.2263591627336985, -6.2121338164147994, 7),\r
  vec3f(7.5145754141516194, 2.7442952364911495, 8),\r
  vec3f(-8.319102905212844, 3.4340248765084995, 9),\r
  vec3f(4.238439143156467, -9.057352462489195, 10),\r
  vec3f(3.2921490319425093, 10.495797004109788, 11),\r
  vec3f(-10.382551104026392, -6.016862352778261, 12),\r
  vec3f(12.696776720811991, -2.791390496123163, 13),\r
  vec3f(-8.051775173168176, 11.452899919267285, 14),\r
  vec3f(-1.9277116073219824, -14.875615212790228, 15),\r
  vec3f(12.234421827485994, 10.311106756654898, 16),\r
  vec3f(-16.985480174838475, 0.702469380235959, 17),\r
  vec3f(12.758876954453681, -12.696891700771129, 18),\r
  vec3f(-0.8775546293360044, 18.979723334983863, 19),\r
  vec3f(-12.81425345190363, -15.355614884151525, 20),\r
  vec3f(20.81247117658233, 2.800186337358594, 21),\r
  vec3f(-18.058819909629094, 12.564991980561862, 22),\r
  vec3f(5.047952929355901, -22.43921057486219, 23),\r
  vec3f(11.932455809239883, 20.823460287870923, 24),\r
  vec3f(-23.81736306863295, -7.598237720479611, 25),\r
  vec3f(23.60250433789332, -10.905126729191508, 26),\r
  vec3f(-10.423494730711166, 24.906841582160443, 27),\r
  vec3f(-9.476833303072167, -26.347478637353184, 28),\r
  vec3f(25.670583567542433, 13.491521015134673, 29)\r
);`;var l2=`@group(0) @binding(0) \r
var tex_color_in : texture_storage_2d<rgba8unorm, read>;\r
@group(0) @binding(1) \r
var tex_depth_in : texture_storage_2d<rg32float, read>;\r
@group(0) @binding(2) \r
var tex_color_out : texture_storage_2d<rgba8unorm, write>;\r
@group(0) @binding(3) \r
var tex_depth_out : texture_storage_2d<rg32float, write>;\r
\r
@compute @workgroup_size(8, 8)\r
fn ComputeMain(\r
  @builtin(global_invocation_id) id : vec3<u32>\r
) {\r
  let i1 = id.xy * 2;\r
  let i2 = i1 + vec2u(1, 0);\r
  let i3 = i1 + vec2u(0, 1);\r
  let i4 = i1 + vec2u(1, 1);\r
\r
  let d1 = textureLoad(tex_depth_in, i1);\r
  let d2 = textureLoad(tex_depth_in, i2);\r
  let d3 = textureLoad(tex_depth_in, i3);\r
  let d4 = textureLoad(tex_depth_in, i4);\r
\r
  let c1 = textureLoad(tex_color_in, i1);\r
  let c2 = textureLoad(tex_color_in, i2);\r
  let c3 = textureLoad(tex_color_in, i3);\r
  let c4 = textureLoad(tex_color_in, i4);\r
\r
  let avg_color = (\r
    c1 + c2 + c3 + c4\r
  ) / 4.0;\r
\r
  let min_max_depth = vec4f(\r
    min(\r
      min(d1.x, d2.x),\r
      min(d3.x, d4.x)\r
    ),\r
    max(\r
      max(d1.y, d2.y),\r
      max(d3.y, d4.y)\r
    ),0.0,0.0\r
  );\r
\r
  textureStore(tex_color_out, id.xy, avg_color);\r
  textureStore(tex_depth_out, id.xy, min_max_depth);\r
}\r
`;var f2=`\r
@group(0) @binding(0)\r
var tex_src : texture_storage_2d<rgba32float, read>;\r
@group(0) @binding(1)\r
var tex_dst : texture_storage_2d<rg32float, write>;\r
\r
@compute @workgroup_size(8, 8)\r
fn ComputeMain(\r
  @builtin(global_invocation_id) id : vec3<u32>\r
) {\r
  var src_pixel = textureLoad(tex_src, id.xy);\r
  if (src_pixel.z == 0.0) {\r
    src_pixel.z = 100.0;\r
  }\r
  textureStore(tex_dst, id.xy, src_pixel.zzzz);\r
}`;function m2(t,e){let n=t.createBindGroupLayout({entries:[{binding:0,sampler:{type:"filtering"},visibility:GPUShaderStage.FRAGMENT},{binding:1,texture:{sampleType:"float",viewDimension:"2d"},visibility:GPUShaderStage.FRAGMENT},{binding:2,texture:{sampleType:"float",viewDimension:"2d"},visibility:GPUShaderStage.FRAGMENT},{binding:3,sampler:{type:"filtering"},visibility:GPUShaderStage.FRAGMENT}]}),r=t.createRenderPipeline({layout:t.createPipelineLayout({bindGroupLayouts:[n]}),vertex:{module:t.createShaderModule({code:Nh})},fragment:{module:t.createShaderModule({code:Nh}),targets:[{format:e}]},primitive:{topology:"triangle-list"}});return{dofBindGroupLayout:n,dofPipeline:r}}function h2(t){return{pipeline:t.createComputePipeline({compute:{module:t.createShaderModule({code:l2})},layout:"auto"})}}function d2(t){return{pipeline:t.createComputePipeline({compute:{module:t.createShaderModule({code:f2})},layout:"auto"})}}var p2=`@group(0) @binding(0)\r
var samp : sampler;\r
@group(0) @binding(1)\r
var tex_src : texture_2d<f32>;\r
\r
/*PASTE_START*/\r
const KERNEL = array(\r
);\r
\r
fn accumulate(acc: vec4f, curr: vec4f, k: vec4f) -> vec4f {\r
  return max(acc, curr); \r
}\r
\r
fn convert(acc: vec4f) -> vec4f {\r
  return acc;\r
}\r
/*PASTE_END*/\r
\r
struct FragInput {\r
  @builtin(position) position : vec4f,\r
  @location(0) uv : vec2f,\r
}\r
\r
@vertex\r
fn VSMain(@builtin(vertex_index) vertexIndex: u32) -> FragInput {\r
  var output: FragInput;\r
\r
  output.position = vec4(array(\r
    vec2( 1.0,  1.0),\r
    vec2( 1.0, -1.0),\r
    vec2(-1.0, -1.0),\r
    vec2( 1.0,  1.0),\r
    vec2(-1.0, -1.0),\r
    vec2(-1.0,  1.0),\r
  )[vertexIndex], 0.5, 1.0);\r
\r
  output.uv = array(\r
    vec2(1.0, 0.0),\r
    vec2(1.0, 1.0),\r
    vec2(0.0, 1.0),\r
    vec2(1.0, 0.0),\r
    vec2(0.0, 1.0),\r
    vec2(0.0, 0.0),\r
  )[vertexIndex];\r
  return output;\r
}\r
\r
@fragment\r
fn FSMain(@location(0) uv : vec2f) -> /*OUT_LOCATION*/@location(0)/*OUT_LOCATION*/ /*OUT_TYPE*/vec4f/*OUT_TYPE*/ {\r
  /*BODY_START*/\r
  var acc = vec4(0.0);\r
  let dims = textureDimensions(tex_src, 0);\r
  for (var i = 0; i < 10; i++) {\r
    let smpl = KERNEL[i];\r
    let uv2 = uv + smpl.xy / dims;\r
    acc = accumulate(acc, uv2, smpl);\r
  }\r
  /*BODY_END*/\r
  return convert(acc);\r
}`;function g2(t,e){return new RegExp(RegExp.escape(t)+"[\\s\\S]*?"+RegExp.escape(e),"g")}function Au(t,e){for(let n of e)t=t.replaceAll(typeof n.delimiter=="string"?g2(n.delimiter,n.delimiter):g2(n.start,n.end),n.replaceWith);return t}function tT(t){return Au(p2,[{start:"/*PASTE_START*/",end:"/*PASTE_END*/",replaceWith:t.paste},{start:"/*OUT_LOCATION*/",end:"/*OUT_LOCATION*/",replaceWith:t.outLocation},{start:"/*OUT_TYPE*/",end:"/*OUT_TYPE*/",replaceWith:t.outType},{start:"/*BODY_START*/",end:"/*BODY_END*/",replaceWith:t.body}])}function nT(t){let e=t.outType??"vec4f",n=t.accumulatorType??"vec4f",r=t.kernelType??"vec2f",o=t.extraGlobal??"",s=t.extraInMain??"",i=t.outLocation??"@location(0)";return tT({paste:`${o}const KERNEL = array(
  ${t.kernel.join(`,
  `)}
);

fn accumulate(acc: ${n}, curr: vec4f, k: ${r}) -> ${n} {
  return ${t.accumulate};
}

fn convert(acc: vec4f) -> vec4f {
  return ${t.convert};
}`,outType:e,outLocation:i,body:`${s}  var acc = ${t.initial};
  let dims = vec2f(textureDimensions(tex_src, 0).xy);
  for (var i = 0; i < ${t.kernel.length}; i++) {
    let smpl = KERNEL[i];
    let uv2 = uv + smpl.xy / dims;
    let pixel = textureSample(tex_src, samp, uv2);
    acc = accumulate(acc, pixel, smpl);
  }`})}function _u(t,e,n){let r=nT(e),o=t.createShaderModule({code:r}),s=t.createRenderPipeline({layout:"auto",vertex:{module:o},fragment:{module:o,targets:[{format:n}]}});return{pipeline:s,drawUsing(i,a,c){i.setPipeline(s),i.setBindGroup(0,t.createBindGroup({layout:s.getBindGroupLayout(0),entries:[{binding:0,resource:a},{binding:1,resource:c}]})),i.draw(6)}}}var Bt=class{constructor(e,n){this.name=e,this.attributes=n,this.size=0}get isArray(){return!1}get isStruct(){return!1}get isTemplate(){return!1}get isPointer(){return!1}getTypeName(){return this.name}},wu=class{constructor(e,n,r){this.name=e,this.type=n,this.attributes=r,this.offset=0,this.size=0}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}},Bn=class extends Bt{constructor(e,n){super(e,n),this.members=[],this.align=0,this.startLine=-1,this.endLine=-1,this.inUse=!1}get isStruct(){return!0}},En=class extends Bt{constructor(e,n){super(e,n),this.count=0,this.stride=0}get isArray(){return!0}getTypeName(){return`array<${this.format.getTypeName()}, ${this.count}>`}},ha=class extends Bt{constructor(e,n,r){super(e,r),this.format=n}get isPointer(){return!0}getTypeName(){return`&${this.format.getTypeName()}`}},tr=class extends Bt{constructor(e,n,r,o){super(e,r),this.format=n,this.access=o}get isTemplate(){return!0}getTypeName(){let e=this.name;if(this.format!==null){if(e==="vec2"||e==="vec3"||e==="vec4"||e==="mat2x2"||e==="mat2x3"||e==="mat2x4"||e==="mat3x2"||e==="mat3x3"||e==="mat3x4"||e==="mat4x2"||e==="mat4x3"||e==="mat4x4"){if(this.format.name==="f32")return e+="f",e;if(this.format.name==="i32")return e+="i",e;if(this.format.name==="u32")return e+="u",e;if(this.format.name==="bool")return e+="b",e;if(this.format.name==="f16")return e+="h",e}e+=`<${this.format.name}>`}else if(e==="vec2"||e==="vec3"||e==="vec4")return e;return e}},Lr;(t=>{t[t.Uniform=0]="Uniform",t[t.Storage=1]="Storage",t[t.Texture=2]="Texture",t[t.Sampler=3]="Sampler",t[t.StorageTexture=4]="StorageTexture"})(Lr||(Lr={}));var Es=class{constructor(e,n,r,o,s,i,a){this.name=e,this.type=n,this.group=r,this.binding=o,this.attributes=s,this.resourceType=i,this.access=a}get isArray(){return this.type.isArray}get isStruct(){return this.type.isStruct}get isTemplate(){return this.type.isTemplate}get size(){return this.type.size}get align(){return this.type.isStruct?this.type.align:0}get members(){return this.type.isStruct?this.type.members:null}get format(){return this.type.isArray||this.type.isTemplate?this.type.format:null}get count(){return this.type.isArray?this.type.count:0}get stride(){return this.type.isArray?this.type.stride:this.size}},Ph=class{constructor(e,n){this.name=e,this.type=n}},jh=class{constructor(e,n,r,o){this.name=e,this.type=n,this.locationType=r,this.location=o,this.interpolation=null}},Tu=class{constructor(e,n,r,o){this.name=e,this.type=n,this.locationType=r,this.location=o}},Kh=class{constructor(e,n,r,o){this.name=e,this.type=n,this.attributes=r,this.id=o}},Jh=class{constructor(e,n,r){this.name=e,this.type=n,this.attributes=r}},qh=class{constructor(e,n=null,r){this.stage=null,this.inputs=[],this.outputs=[],this.arguments=[],this.returnType=null,this.resources=[],this.overrides=[],this.startLine=-1,this.endLine=-1,this.inUse=!1,this.calls=new Set,this.name=e,this.stage=n,this.attributes=r}},Xh=class{constructor(){this.vertex=[],this.fragment=[],this.compute=[]}};function rT(t){var e=(32768&t)>>15,n=(31744&t)>>10,r=1023&t;return n==0?(e?-1:1)*Math.pow(2,-14)*(r/Math.pow(2,10)):n==31?r?NaN:1/0*(e?-1:1):(e?-1:1)*Math.pow(2,n-15)*(1+r/Math.pow(2,10))}var b2=new Float32Array(1),oT=new Int32Array(b2.buffer),rt=new Uint16Array(1);function sT(t){b2[0]=t;let e=oT[0],n=e>>31&1,r=e>>23&255,o=8388607&e;if(r===255)return rt[0]=n<<15|31744|(o!==0?512:0),rt[0];if(r===0){if(o===0)return rt[0]=n<<15,rt[0];o|=8388608;let s=113;for(;!(8388608&o);)o<<=1,s--;return r=127-s,o&=8388607,r>0?(o=(o>>126-r)+(o>>127-r&1),rt[0]=n<<15|r<<10|o>>13,rt[0]):(rt[0]=n<<15,rt[0])}return r=r-127+15,r>=31?(rt[0]=n<<15|31744,rt[0]):r<=0?r<-10?(rt[0]=n<<15,rt[0]):(o=(8388608|o)>>1-r,rt[0]=n<<15|o>>13,rt[0]):(o>>=13,rt[0]=n<<15|r<<10|o,rt[0])}var ud=new Uint32Array(1),v2=new Float32Array(ud.buffer,0,1);function y2(t){let e=112+(t>>6&31)<<23|(63&t)<<17;return ud[0]=e,v2[0]}function iT(t,e,n,r,o,s,i,a,c){let u=r*(i>>=o)*(s>>=o)+n*i+e*a;switch(c){case"r8unorm":return[oe(t,u,"8unorm",1)[0]];case"r8snorm":return[oe(t,u,"8snorm",1)[0]];case"r8uint":return[oe(t,u,"8uint",1)[0]];case"r8sint":return[oe(t,u,"8sint",1)[0]];case"rg8unorm":{let l=oe(t,u,"8unorm",2);return[l[0],l[1]]}case"rg8snorm":{let l=oe(t,u,"8snorm",2);return[l[0],l[1]]}case"rg8uint":{let l=oe(t,u,"8uint",2);return[l[0],l[1]]}case"rg8sint":{let l=oe(t,u,"8sint",2);return[l[0],l[1]]}case"rgba8unorm-srgb":case"rgba8unorm":{let l=oe(t,u,"8unorm",4);return[l[0],l[1],l[2],l[3]]}case"rgba8snorm":{let l=oe(t,u,"8snorm",4);return[l[0],l[1],l[2],l[3]]}case"rgba8uint":{let l=oe(t,u,"8uint",4);return[l[0],l[1],l[2],l[3]]}case"rgba8sint":{let l=oe(t,u,"8sint",4);return[l[0],l[1],l[2],l[3]]}case"bgra8unorm-srgb":case"bgra8unorm":{let l=oe(t,u,"8unorm",4);return[l[2],l[1],l[0],l[3]]}case"r16uint":return[oe(t,u,"16uint",1)[0]];case"r16sint":return[oe(t,u,"16sint",1)[0]];case"r16float":return[oe(t,u,"16float",1)[0]];case"rg16uint":{let l=oe(t,u,"16uint",2);return[l[0],l[1]]}case"rg16sint":{let l=oe(t,u,"16sint",2);return[l[0],l[1]]}case"rg16float":{let l=oe(t,u,"16float",2);return[l[0],l[1]]}case"rgba16uint":{let l=oe(t,u,"16uint",4);return[l[0],l[1],l[2],l[3]]}case"rgba16sint":{let l=oe(t,u,"16sint",4);return[l[0],l[1],l[2],l[3]]}case"rgba16float":{let l=oe(t,u,"16float",4);return[l[0],l[1],l[2],l[3]]}case"r32uint":return[oe(t,u,"32uint",1)[0]];case"r32sint":return[oe(t,u,"32sint",1)[0]];case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return[oe(t,u,"32float",1)[0]];case"rg32uint":{let l=oe(t,u,"32uint",2);return[l[0],l[1]]}case"rg32sint":{let l=oe(t,u,"32sint",2);return[l[0],l[1]]}case"rg32float":{let l=oe(t,u,"32float",2);return[l[0],l[1]]}case"rgba32uint":{let l=oe(t,u,"32uint",4);return[l[0],l[1],l[2],l[3]]}case"rgba32sint":{let l=oe(t,u,"32sint",4);return[l[0],l[1],l[2],l[3]]}case"rgba32float":{let l=oe(t,u,"32float",4);return[l[0],l[1],l[2],l[3]]}case"rg11b10ufloat":{let l=new Uint32Array(t.buffer,u,1)[0],f=(4192256&l)>>11,m=(4290772992&l)>>22;return[y2(2047&l),y2(f),(function(d){let p=112+(d>>5&31)<<23|(31&d)<<18;return ud[0]=p,v2[0]})(m),1]}}return null}function oe(t,e,n,r){let o=[0,0,0,0];for(let s=0;s<r;++s)switch(n){case"8unorm":o[s]=t[e]/255,e++;break;case"8snorm":o[s]=t[e]/255*2-1,e++;break;case"8uint":o[s]=t[e],e++;break;case"8sint":o[s]=t[e]-127,e++;break;case"16uint":o[s]=t[e]|t[e+1]<<8,e+=2;break;case"16sint":o[s]=(t[e]|t[e+1]<<8)-32768,e+=2;break;case"16float":o[s]=rT(t[e]|t[e+1]<<8),e+=2;break;case"32uint":case"32sint":o[s]=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24,e+=4;break;case"32float":o[s]=new Float32Array(t.buffer,e,1)[0],e+=4}return o}function ie(t,e,n,r,o){for(let s=0;s<r;++s)switch(n){case"8unorm":t[e]=255*o[s],e++;break;case"8snorm":t[e]=.5*(o[s]+1)*255,e++;break;case"8uint":t[e]=o[s],e++;break;case"8sint":t[e]=o[s]+127,e++;break;case"16uint":new Uint16Array(t.buffer,e,1)[0]=o[s],e+=2;break;case"16sint":new Int16Array(t.buffer,e,1)[0]=o[s],e+=2;break;case"16float":{let i=sT(o[s]);new Uint16Array(t.buffer,e,1)[0]=i,e+=2;break}case"32uint":new Uint32Array(t.buffer,e,1)[0]=o[s],e+=4;break;case"32sint":new Int32Array(t.buffer,e,1)[0]=o[s],e+=4;break;case"32float":new Float32Array(t.buffer,e,1)[0]=o[s],e+=4}return o}var zh={r8unorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8snorm:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8uint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r8sint:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg8unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8snorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg8sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"rgba8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8snorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba8sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},bgra8unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bgra8unorm-srgb":{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r16uint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16sint:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r16float:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg16uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg16float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba16uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba16float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},r32uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32sint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},r32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:1},rg32uint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32sint:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rg32float:{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,channels:2},rgba32uint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32sint:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgba32float:{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2uint:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rgb10a2unorm:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},rg11b10ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},stencil8:{bytesPerBlock:1,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!1,hasStencil:!0,channels:1},depth16unorm:{bytesPerBlock:2,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},depth24plus:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,depthOnlyFormat:"depth32float",channels:1},"depth24plus-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,depthOnlyFormat:"depth32float",channels:1},depth32float:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!1,channels:1},"depth32float-stencil8":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!1,isDepthStencil:!0,hasDepth:!0,hasStencil:!0,stencilOnlyFormat:"depth32float",channels:1},rgb9e5ufloat:{bytesPerBlock:4,blockWidth:1,blockHeight:1,isCompressed:!1,channels:4},"bc1-rgba-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc1-rgba-unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc2-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc3-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc4-r-unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc4-r-snorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:1},"bc5-rg-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc5-rg-snorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:2},"bc6h-rgb-ufloat":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc6h-rgb-float":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"bc7-rgba-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgb8a1unorm-srgb":{bytesPerBlock:8,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"etc2-rgba8unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"eac-r11unorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-r11snorm":{bytesPerBlock:8,blockWidth:1,blockHeight:1,isCompressed:!0,channels:1},"eac-rg11unorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"eac-rg11snorm":{bytesPerBlock:16,blockWidth:1,blockHeight:1,isCompressed:!0,channels:2},"astc-4x4-unorm":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-4x4-unorm-srgb":{bytesPerBlock:16,blockWidth:4,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x4-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:4,isCompressed:!0,channels:4},"astc-5x5-unorm":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-5x5-unorm-srgb":{bytesPerBlock:16,blockWidth:5,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x5-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:5,isCompressed:!0,channels:4},"astc-6x6-unorm":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-6x6-unorm-srgb":{bytesPerBlock:16,blockWidth:6,blockHeight:6,isCompressed:!0,channels:4},"astc-8x5-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x5-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:5,isCompressed:!0,channels:4},"astc-8x6-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x6-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:6,isCompressed:!0,channels:4},"astc-8x8-unorm":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-8x8-unorm-srgb":{bytesPerBlock:16,blockWidth:8,blockHeight:8,isCompressed:!0,channels:4},"astc-10x5-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x5-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:5,isCompressed:!0,channels:4},"astc-10x6-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x6-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:6,isCompressed:!0,channels:4},"astc-10x8-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x8-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:8,isCompressed:!0,channels:4},"astc-10x10-unorm":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-10x10-unorm-srgb":{bytesPerBlock:16,blockWidth:10,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x10-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:10,isCompressed:!0,channels:4},"astc-12x12-unorm":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4},"astc-12x12-unorm-srgb":{bytesPerBlock:16,blockWidth:12,blockHeight:12,isCompressed:!0,channels:4}},tn=class t{constructor(){this.id=t._id++,this.line=0}get isAstNode(){return!0}get astNodeType(){return""}search(e){e(this)}searchBlock(e,n){if(e){n(ks.instance);for(let r of e)r instanceof Array?this.searchBlock(r,n):r.search(n);n(Is.instance)}}constEvaluate(e,n){throw new Error("Cannot evaluate node")}constEvaluateString(e){return this.constEvaluate(e).toString()}};tn._id=0;var ks=class extends tn{};ks.instance=new ks;var Is=class extends tn{};Is.instance=new Is;var A2=new Set(["all","all","any","select","arrayLength","abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","clamp","cos","cosh","countLeadingZeros","countOneBits","countTrailingZeros","cross","degrees","determinant","distance","dot","dot4U8Packed","dot4I8Packed","exp","exp2","extractBits","faceForward","firstLeadingBit","firstTrailingBit","floor","fma","fract","frexp","insertBits","inverseSqrt","ldexp","length","log","log2","max","min","mix","modf","normalize","pow","quantizeToF16","radians","reflect","refract","reverseBits","round","saturate","sign","sin","sinh","smoothStep","sqrt","step","tan","tanh","transpose","trunc","dpdx","dpdxCoarse","dpdxFine","dpdy","dpdyCoarse","dpdyFine","fwidth","fwidthCoarse","fwidthFine","textureDimensions","textureGather","textureGatherCompare","textureLoad","textureNumLayers","textureNumLevels","textureNumSamples","textureSample","textureSampleBias","textureSampleCompare","textureSampleCompareLevel","textureSampleGrad","textureSampleLevel","textureSampleBaseClampToEdge","textureStore","atomicLoad","atomicStore","atomicAdd","atomicSub","atomicMax","atomicMin","atomicAnd","atomicOr","atomicXor","atomicExchange","atomicCompareExchangeWeak","pack4x8snorm","pack4x8unorm","pack4xI8","pack4xU8","pack4x8Clamp","pack4xU8Clamp","pack2x16snorm","pack2x16unorm","pack2x16float","unpack4x8snorm","unpack4x8unorm","unpack4xI8","unpack4xU8","unpack2x16snorm","unpack2x16unorm","unpack2x16float","storageBarrier","textureBarrier","workgroupBarrier","workgroupUniformLoad","subgroupAdd","subgroupExclusiveAdd","subgroupInclusiveAdd","subgroupAll","subgroupAnd","subgroupAny","subgroupBallot","subgroupBroadcast","subgroupBroadcastFirst","subgroupElect","subgroupMax","subgroupMin","subgroupMul","subgroupExclusiveMul","subgroupInclusiveMul","subgroupOr","subgroupShuffle","subgroupShuffleDown","subgroupShuffleUp","subgroupShuffleXor","subgroupXor","quadBroadcast","quadSwapDiagonal","quadSwapX","quadSwapY"]),de=class extends tn{constructor(){super()}},_o=class extends de{constructor(e,n,r,o,s,i){super(),this.calls=new Set,this.name=e,this.args=n,this.returnType=r,this.body=o,this.startLine=s,this.endLine=i}get astNodeType(){return"function"}search(e){if(this.attributes)for(let n of this.attributes)e(n);e(this);for(let n of this.args)e(n);this.searchBlock(this.body,e)}},Yh=class extends de{constructor(e){super(),this.expression=e}get astNodeType(){return"staticAssert"}search(e){this.expression.search(e)}},Bu=class extends de{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"while"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}},da=class extends de{constructor(e,n){super(),this.body=e,this.loopId=n}get astNodeType(){return"continuing"}search(e){this.searchBlock(this.body,e)}},Eu=class extends de{constructor(e,n,r,o){super(),this.init=e,this.condition=n,this.increment=r,this.body=o}get astNodeType(){return"for"}search(e){var n,r,o;(n=this.init)===null||n===void 0||n.search(e),(r=this.condition)===null||r===void 0||r.search(e),(o=this.increment)===null||o===void 0||o.search(e),this.searchBlock(this.body,e)}},hn=class extends de{constructor(e,n,r,o,s){super(),this.attributes=null,this.name=e,this.type=n,this.storage=r,this.access=o,this.value=s}get astNodeType(){return"var"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}},pa=class extends de{constructor(e,n,r){super(),this.attributes=null,this.name=e,this.type=n,this.value=r}get astNodeType(){return"override"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}},bo=class extends de{constructor(e,n,r,o,s){super(),this.attributes=null,this.name=e,this.type=n,this.storage=r,this.access=o,this.value=s}get astNodeType(){return"let"}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}},Cs=class extends de{constructor(e,n,r,o,s){super(),this.attributes=null,this.name=e,this.type=n,this.storage=r,this.access=o,this.value=s}get astNodeType(){return"const"}constEvaluate(e,n){return this.value.constEvaluate(e,n)}search(e){var n;e(this),(n=this.value)===null||n===void 0||n.search(e)}},Ss,ma,M,B;(t=>{t.increment="++",t.decrement="--"})(Ss||(Ss={})),(t=>{t.parse=function(e){let n=e;if(n=="parse")throw new Error("Invalid value for IncrementOperator");return t[n]}})(Ss||(Ss={}));var Su=class extends de{constructor(e,n){super(),this.operator=e,this.variable=n}get astNodeType(){return"increment"}search(e){this.variable.search(e)}};(t=>{t.assign="=",t.addAssign="+=",t.subtractAssin="-=",t.multiplyAssign="*=",t.divideAssign="/=",t.moduloAssign="%=",t.andAssign="&=",t.orAssign="|=",t.xorAssign="^=",t.shiftLeftAssign="<<=",t.shiftRightAssign=">>="})(ma||(ma={})),(t=>{t.parse=function(e){let n=e;if(n=="parse")throw new Error("Invalid value for AssignOperator");return n}})(ma||(ma={}));var Mu=class extends de{constructor(e,n,r){super(),this.operator=e,this.variable=n,this.value=r}get astNodeType(){return"assign"}search(e){this.variable.search(e),this.value.search(e)}},ga=class extends de{constructor(e,n){super(),this.name=e,this.args=n}get astNodeType(){return"call"}isBuiltin(){return A2.has(this.name)}search(e){for(let n of this.args)n.search(e);e(this)}},Cu=class extends de{constructor(e,n){super(),this.body=e,this.continuing=n}get astNodeType(){return"loop"}search(e){var n;this.searchBlock(this.body,e),(n=this.continuing)===null||n===void 0||n.search(e)}},Vu=class extends de{constructor(e,n){super(),this.condition=e,this.cases=n}get astNodeType(){return"switch"}search(e){e(this);for(let n of this.cases)n.search(e)}},Ru=class extends de{constructor(e,n,r,o){super(),this.condition=e,this.body=n,this.elseif=r,this.else=o}get astNodeType(){return"if"}search(e){this.condition.search(e),this.searchBlock(this.body,e),this.searchBlock(this.elseif,e),this.searchBlock(this.else,e)}},Du=class extends de{constructor(e){super(),this.value=e}get astNodeType(){return"return"}search(e){var n;(n=this.value)===null||n===void 0||n.search(e)}},Qh=class extends de{constructor(e){super(),this.name=e}get astNodeType(){return"enable"}},Wh=class extends de{constructor(e){super(),this.extensions=e}get astNodeType(){return"requires"}},ku=class extends de{constructor(e,n){super(),this.severity=e,this.rule=n}get astNodeType(){return"diagnostic"}},ya=class extends de{constructor(e,n){super(),this.name=e,this.type=n}get astNodeType(){return"alias"}},$h=class extends de{constructor(){super()}get astNodeType(){return"discard"}},Iu=class extends de{constructor(){super(),this.condition=null,this.loopId=-1}get astNodeType(){return"break"}},Ou=class extends de{constructor(){super(),this.loopId=-1}get astNodeType(){return"continue"}},O=class t extends de{constructor(e){super(),this.attributes=null,this.name=e}get astNodeType(){return"type"}get isStruct(){return!1}get isArray(){return!1}static maxFormatType(e){let n=e[0];if(n.name==="f32")return n;for(let r=1;r<e.length;++r){let o=t._priority.get(n.name);t._priority.get(e[r].name)<o&&(n=e[r])}return n.name==="x32"?t.i32:n}getTypeName(){return this.name}};O.x32=new O("x32"),O.f32=new O("f32"),O.i32=new O("i32"),O.u32=new O("u32"),O.f16=new O("f16"),O.bool=new O("bool"),O.void=new O("void"),O._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);var Uu=class extends O{constructor(e){super(e)}},mn=class extends O{constructor(e,n,r,o){super(e),this.members=n,this.startLine=r,this.endLine=o}get astNodeType(){return"struct"}get isStruct(){return!0}getMemberIndex(e){for(let n=0;n<this.members.length;n++)if(this.members[n].name==e)return n;return-1}search(e){for(let n of this.members)e(n)}},S=class extends O{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"template"}getTypeName(){let e=this.name;if(this.format!==null){if(e==="vec2"||e==="vec3"||e==="vec4"||e==="mat2x2"||e==="mat2x3"||e==="mat2x4"||e==="mat3x2"||e==="mat3x3"||e==="mat3x4"||e==="mat4x2"||e==="mat4x3"||e==="mat4x4"){if(this.format.name==="f32")return e+="f",e;if(this.format.name==="i32")return e+="i",e;if(this.format.name==="u32")return e+="u",e;if(this.format.name==="bool")return e+="b",e;if(this.format.name==="f16")return e+="h",e}e+=`<${this.format.name}>`}else if(e==="vec2"||e==="vec3"||e==="vec4")return e;return e}};S.vec2f=new S("vec2",O.f32,null),S.vec3f=new S("vec3",O.f32,null),S.vec4f=new S("vec4",O.f32,null),S.vec2i=new S("vec2",O.i32,null),S.vec3i=new S("vec3",O.i32,null),S.vec4i=new S("vec4",O.i32,null),S.vec2u=new S("vec2",O.u32,null),S.vec3u=new S("vec3",O.u32,null),S.vec4u=new S("vec4",O.u32,null),S.vec2h=new S("vec2",O.f16,null),S.vec3h=new S("vec3",O.f16,null),S.vec4h=new S("vec4",O.f16,null),S.vec2b=new S("vec2",O.bool,null),S.vec3b=new S("vec3",O.bool,null),S.vec4b=new S("vec4",O.bool,null),S.mat2x2f=new S("mat2x2",O.f32,null),S.mat2x3f=new S("mat2x3",O.f32,null),S.mat2x4f=new S("mat2x4",O.f32,null),S.mat3x2f=new S("mat3x2",O.f32,null),S.mat3x3f=new S("mat3x3",O.f32,null),S.mat3x4f=new S("mat3x4",O.f32,null),S.mat4x2f=new S("mat4x2",O.f32,null),S.mat4x3f=new S("mat4x3",O.f32,null),S.mat4x4f=new S("mat4x4",O.f32,null),S.mat2x2h=new S("mat2x2",O.f16,null),S.mat2x3h=new S("mat2x3",O.f16,null),S.mat2x4h=new S("mat2x4",O.f16,null),S.mat3x2h=new S("mat3x2",O.f16,null),S.mat3x3h=new S("mat3x3",O.f16,null),S.mat3x4h=new S("mat3x4",O.f16,null),S.mat4x2h=new S("mat4x2",O.f16,null),S.mat4x3h=new S("mat4x3",O.f16,null),S.mat4x4h=new S("mat4x4",O.f16,null),S.mat2x2i=new S("mat2x2",O.i32,null),S.mat2x3i=new S("mat2x3",O.i32,null),S.mat2x4i=new S("mat2x4",O.i32,null),S.mat3x2i=new S("mat3x2",O.i32,null),S.mat3x3i=new S("mat3x3",O.i32,null),S.mat3x4i=new S("mat3x4",O.i32,null),S.mat4x2i=new S("mat4x2",O.i32,null),S.mat4x3i=new S("mat4x3",O.i32,null),S.mat4x4i=new S("mat4x4",O.i32,null),S.mat2x2u=new S("mat2x2",O.u32,null),S.mat2x3u=new S("mat2x3",O.u32,null),S.mat2x4u=new S("mat2x4",O.u32,null),S.mat3x2u=new S("mat3x2",O.u32,null),S.mat3x3u=new S("mat3x3",O.u32,null),S.mat3x4u=new S("mat3x4",O.u32,null),S.mat4x2u=new S("mat4x2",O.u32,null),S.mat4x3u=new S("mat4x3",O.u32,null),S.mat4x4u=new S("mat4x4",O.u32,null);var Vs=class extends O{constructor(e,n,r,o){super(e),this.storage=n,this.type=r,this.access=o}get astNodeType(){return"pointer"}},vo=class extends O{constructor(e,n,r,o){super(e),this.attributes=n,this.format=r,this.count=o}get astNodeType(){return"array"}get isArray(){return!0}},xo=class extends O{constructor(e,n,r){super(e),this.format=n,this.access=r}get astNodeType(){return"sampler"}},Ft=class extends tn{constructor(){super(),this.postfix=null}},nr=class extends Ft{constructor(e){super(),this.value=e}get astNodeType(){return"stringExpr"}toString(){return this.value}constEvaluateString(){return this.value}},en=class extends Ft{constructor(e,n){super(),this.type=e,this.args=n}get astNodeType(){return"createExpr"}search(e){if(e(this),this.args)for(let n of this.args)n.search(e)}constEvaluate(e,n){return n&&(n[0]=this.type),e.evalExpression(this,e.context)}},xa=class extends Ft{constructor(e,n){super(),this.cachedReturnValue=null,this.name=e,this.args=n}get astNodeType(){return"callExpr"}setCachedReturnValue(e){this.cachedReturnValue=e}get isBuiltin(){return A2.has(this.name)}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){for(let n of this.args)n.search(e);e(this)}},mt=class extends Ft{constructor(e){super(),this.name=e}get astNodeType(){return"varExpr"}search(e){e(this),this.postfix&&this.postfix.search(e)}constEvaluate(e,n){return e.evalExpression(this,e.context)}},Gu=class extends Ft{constructor(e,n){super(),this.name=e,this.initializer=n}get astNodeType(){return"constExpr"}constEvaluate(e,n){if(this.initializer){let r=e.evalExpression(this.initializer,e.context);return r!==null&&this.postfix?r.getSubData(e,this.postfix,e.context):r}return null}search(e){this.initializer.search(e)}},Ve=class extends Ft{constructor(e,n){super(),this.value=e,this.type=n}get astNodeType(){return"literalExpr"}constEvaluate(e,n){return n!==void 0&&(n[0]=this.type),this.value}get isScalar(){return this.value instanceof E}get isVector(){return this.value instanceof v||this.value instanceof z}get scalarValue(){return this.value instanceof E?this.value.value:(console.error("Value is not scalar."),0)}get vectorValue(){return this.value instanceof v||this.value instanceof z?this.value.data:(console.error("Value is not a vector or matrix."),new Float32Array(0))}},Lu=class extends Ft{constructor(e,n){super(),this.type=e,this.value=n}get astNodeType(){return"bitcastExpr"}search(e){this.value.search(e)}};var Nr=class extends Ft{constructor(e){super(),this.index=e}search(e){this.index.search(e)}},Fu=class extends Ft{constructor(){super()}},Se=class extends Fu{constructor(e,n){super(),this.operator=e,this.right=n}get astNodeType(){return"unaryOp"}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){this.right.search(e)}},Lt=class extends Fu{constructor(e,n,r){super(),this.operator=e,this.left=n,this.right=r}get astNodeType(){return"binaryOp"}_getPromotedType(e,n){return e.name===n.name?e:e.name==="f32"||n.name==="f32"?O.f32:e.name==="u32"||n.name==="u32"?O.u32:O.i32}constEvaluate(e,n){return e.evalExpression(this,e.context)}search(e){this.left.search(e),this.right.search(e)}},Nu=class extends tn{constructor(e){super(),this.body=e}search(e){e(this),this.searchBlock(this.body,e)}},Rs=class extends Ft{constructor(){super()}get astNodeType(){return"default"}},zu=class extends Nu{constructor(e,n){super(n),this.selectors=e}get astNodeType(){return"case"}search(e){this.searchBlock(this.body,e)}},Hu=class extends Nu{constructor(e){super(e)}get astNodeType(){return"default"}search(e){this.searchBlock(this.body,e)}},Pu=class extends tn{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"argument"}},Zh=class extends tn{constructor(e,n){super(),this.condition=e,this.body=n}get astNodeType(){return"elseif"}search(e){this.condition.search(e),this.searchBlock(this.body,e)}},ju=class extends tn{constructor(e,n,r){super(),this.name=e,this.type=n,this.attributes=r}get astNodeType(){return"member"}},Ku=class extends tn{constructor(e,n){super(),this.name=e,this.value=n}get astNodeType(){return"attribute"}},nn=class t{constructor(e,n){this.parent=null,this.typeInfo=e,this.parent=n,this.id=t._id++}clone(){throw`Clone: Not implemented for ${this.constructor.name}`}setDataValue(e,n,r,o){console.error(`SetDataValue: Not implemented for ${this.constructor.name}`)}getSubData(e,n,r){return console.error(`GetDataValue: Not implemented for ${this.constructor.name}`),null}toString(){return`<${this.typeInfo.getTypeName()}>`}};nn._id=0;var ba=class extends nn{constructor(){super(new Bt("void",null),null)}toString(){return"void"}};ba.void=new ba;var Fr=class extends nn{constructor(e){super(new ha("pointer",e.typeInfo,null),null),this.reference=e}clone(){return this}setDataValue(e,n,r,o){this.reference.setDataValue(e,n,r,o)}getSubData(e,n,r){return n?this.reference.getSubData(e,n,r):this}toString(){return`&${this.reference.toString()}`}},E=class t extends nn{constructor(e,n,r=null){super(n,r),e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array?this.data=e:this.typeInfo.name==="x32"?e-Math.floor(e)!==0?this.data=new Float32Array([e]):this.data=e>=0?new Uint32Array([e]):new Int32Array([e]):this.typeInfo.name==="i32"||this.typeInfo.name==="bool"?this.data=new Int32Array([e]):this.typeInfo.name==="u32"?this.data=new Uint32Array([e]):this.typeInfo.name==="f32"||this.typeInfo.name==="f16"?this.data=new Float32Array([e]):console.error("ScalarData2: Invalid type",n)}clone(){if(this.data instanceof Float32Array)return new t(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new t(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new t(new Uint32Array(this.data),this.typeInfo,null);throw"ScalarData: Invalid data type"}get value(){return this.data[0]}set value(e){this.data[0]=e}setDataValue(e,n,r,o){if(r)return void console.error("SetDataValue: Scalar data does not support postfix",r);if(!(n instanceof t))return void console.error("SetDataValue: Invalid value",n);let s=n.data[0];this.typeInfo.name==="i32"||this.typeInfo.name==="u32"?s=Math.floor(s):this.typeInfo.name==="bool"&&(s=s?1:0),this.data[0]=s}getSubData(e,n,r){return n?(console.error("getSubData: Scalar data does not support postfix",n),null):this}toString(){return`${this.value}`}};function aT(t,e,n){let r=e.length;return r===2?n==="f32"?new v(new Float32Array(e),t.getTypeInfo("vec2f")):n==="i32"||n==="bool"?new v(new Int32Array(e),t.getTypeInfo("vec2i")):n==="u32"?new v(new Uint32Array(e),t.getTypeInfo("vec2u")):n==="f16"?new v(new Float32Array(e),t.getTypeInfo("vec2h")):(console.error(`getSubData: Unknown format ${n}`),null):r===3?n==="f32"?new v(new Float32Array(e),t.getTypeInfo("vec3f")):n==="i32"||n==="bool"?new v(new Int32Array(e),t.getTypeInfo("vec3i")):n==="u32"?new v(new Uint32Array(e),t.getTypeInfo("vec3u")):n==="f16"?new v(new Float32Array(e),t.getTypeInfo("vec3h")):(console.error(`getSubData: Unknown format ${n}`),null):r===4?n==="f32"?new v(new Float32Array(e),t.getTypeInfo("vec4f")):n==="i32"||n==="bool"?new v(new Int32Array(e),t.getTypeInfo("vec4i")):n==="u32"?new v(new Uint32Array(e),t.getTypeInfo("vec4u")):n==="f16"?new v(new Float32Array(e),t.getTypeInfo("vec4h")):(console.error(`getSubData: Unknown format ${n}`),null):(console.error(`getSubData: Invalid vector size ${e.length}`),null)}var v=class t extends nn{constructor(e,n,r=null){if(super(n,r),e instanceof Float32Array||e instanceof Uint32Array||e instanceof Int32Array)this.data=e;else{let o=this.typeInfo.name;o==="vec2f"||o==="vec3f"||o==="vec4f"?this.data=new Float32Array(e):o==="vec2i"||o==="vec3i"||o==="vec4i"?this.data=new Int32Array(e):o==="vec2u"||o==="vec3u"||o==="vec4u"?this.data=new Uint32Array(e):o==="vec2h"||o==="vec3h"||o==="vec4h"?this.data=new Float32Array(e):o==="vec2b"||o==="vec3b"||o==="vec4b"?this.data=new Int32Array(e):o==="vec2"||o==="vec3"||o==="vec4"?this.data=new Float32Array(e):console.error(`VectorData: Invalid type ${o}`)}}clone(){if(this.data instanceof Float32Array)return new t(new Float32Array(this.data),this.typeInfo,null);if(this.data instanceof Int32Array)return new t(new Int32Array(this.data),this.typeInfo,null);if(this.data instanceof Uint32Array)return new t(new Uint32Array(this.data),this.typeInfo,null);throw"VectorData: Invalid data type"}setDataValue(e,n,r,o){r instanceof nr?console.error("TODO: Set vector postfix"):n instanceof t?this.data=n.data:console.error("SetDataValue: Invalid value",n)}getSubData(e,n,r){if(n===null)return this;let o=e.getTypeInfo("f32");if(this.typeInfo instanceof tr)o=this.typeInfo.format||o;else{let i=this.typeInfo.name;i==="vec2f"||i==="vec3f"||i==="vec4f"?o=e.getTypeInfo("f32"):i==="vec2i"||i==="vec3i"||i==="vec4i"?o=e.getTypeInfo("i32"):i==="vec2b"||i==="vec3b"||i==="vec4b"?o=e.getTypeInfo("bool"):i==="vec2u"||i==="vec3u"||i==="vec4u"?o=e.getTypeInfo("u32"):i==="vec2h"||i==="vec3h"||i==="vec4h"?o=e.getTypeInfo("f16"):console.error(`GetSubData: Unknown type ${i}`)}let s=this;for(;n!==null&&s!==null;){if(n instanceof Nr){let i=n.index,a=-1;if(i instanceof Ve){if(!(i.value instanceof E))return console.error(`GetSubData: Invalid array index ${i.value}`),null;a=i.value.value}else{let c=e.evalExpression(i,r);if(!(c instanceof E))return console.error("GetSubData: Unknown index type",i),null;a=c.value}if(a<0||a>=s.data.length)return console.error("GetSubData: Index out of range",a),null;if(s.data instanceof Float32Array){let c=new Float32Array(s.data.buffer,s.data.byteOffset+4*a,1);return new E(c,o)}if(s.data instanceof Int32Array){let c=new Int32Array(s.data.buffer,s.data.byteOffset+4*a,1);return new E(c,o)}if(s.data instanceof Uint32Array){let c=new Uint32Array(s.data.buffer,s.data.byteOffset+4*a,1);return new E(c,o)}throw"GetSubData: Invalid data type"}if(!(n instanceof nr))return console.error("GetSubData: Unknown postfix",n),null;{let i=n.value.toLowerCase();if(i.length===1){let c=0;if(i==="x"||i==="r")c=0;else if(i==="y"||i==="g")c=1;else if(i==="z"||i==="b")c=2;else{if(i!=="w"&&i!=="a")return console.error(`GetSubData: Unknown member ${i}`),null;c=3}if(this.data instanceof Float32Array){let u=new Float32Array(this.data.buffer,this.data.byteOffset+4*c,1);return new E(u,o,this)}if(this.data instanceof Int32Array){let u=new Int32Array(this.data.buffer,this.data.byteOffset+4*c,1);return new E(u,o,this)}if(this.data instanceof Uint32Array){let u=new Uint32Array(this.data.buffer,this.data.byteOffset+4*c,1);return new E(u,o,this)}}let a=[];for(let c of i)c==="x"||c==="r"?a.push(this.data[0]):c==="y"||c==="g"?a.push(this.data[1]):c==="z"||c==="b"?a.push(this.data[2]):c==="w"||c==="a"?a.push(this.data[3]):console.error(`GetDataValue: Unknown member ${c}`);s=aT(e,a,o.name)}n=n.postfix}return s}toString(){let e=`${this.data[0]}`;for(let n=1;n<this.data.length;++n)e+=`, ${this.data[n]}`;return e}},z=class t extends nn{constructor(e,n,r=null){super(n,r),e instanceof Float32Array?this.data=e:this.data=new Float32Array(e)}clone(){return new t(new Float32Array(this.data),this.typeInfo,null)}setDataValue(e,n,r,o){r instanceof nr?console.error("TODO: Set matrix postfix"):n instanceof t?this.data=n.data:console.error("SetDataValue: Invalid value",n)}getSubData(e,n,r){if(n===null)return this;let o=this.typeInfo.name;if(e.getTypeInfo("f32"),this.typeInfo instanceof tr)this.typeInfo.format;else if(o.endsWith("f"))e.getTypeInfo("f32");else if(o.endsWith("i"))e.getTypeInfo("i32");else if(o.endsWith("u"))e.getTypeInfo("u32");else{if(!o.endsWith("h"))return console.error(`GetDataValue: Unknown type ${o}`),null;e.getTypeInfo("f16")}if(n instanceof Nr){let s=n.index,i=-1;if(s instanceof Ve){if(!(s.value instanceof E))return console.error(`GetDataValue: Invalid array index ${s.value}`),null;i=s.value.value}else{let u=e.evalExpression(s,r);if(!(u instanceof E))return console.error("GetDataValue: Unknown index type",s),null;i=u.value}if(i<0||i>=this.data.length)return console.error("GetDataValue: Index out of range",i),null;let a=o.endsWith("h")?"h":"f",c;if(o==="mat2x2"||o==="mat2x2f"||o==="mat2x2h"||o==="mat3x2"||o==="mat3x2f"||o==="mat3x2h"||o==="mat4x2"||o==="mat4x2f"||o==="mat4x2h")c=new v(new Float32Array(this.data.buffer,this.data.byteOffset+2*i*4,2),e.getTypeInfo(`vec2${a}`));else if(o==="mat2x3"||o==="mat2x3f"||o==="mat2x3h"||o==="mat3x3"||o==="mat3x3f"||o==="mat3x3h"||o==="mat4x3"||o==="mat4x3f"||o==="mat4x3h")c=new v(new Float32Array(this.data.buffer,this.data.byteOffset+3*i*4,3),e.getTypeInfo(`vec3${a}`));else{if(o!=="mat2x4"&&o!=="mat2x4f"&&o!=="mat2x4h"&&o!=="mat3x4"&&o!=="mat3x4f"&&o!=="mat3x4h"&&o!=="mat4x4"&&o!=="mat4x4f"&&o!=="mat4x4h")return console.error(`GetDataValue: Unknown type ${o}`),null;c=new v(new Float32Array(this.data.buffer,this.data.byteOffset+4*i*4,4),e.getTypeInfo(`vec4${a}`))}return n.postfix?c.getSubData(e,n.postfix,r):c}return console.error("GetDataValue: Invalid postfix",n),null}toString(){let e=`${this.data[0]}`;for(let n=1;n<this.data.length;++n)e+=`, ${this.data[n]}`;return e}},Ue=class t extends nn{constructor(e,n,r=0,o=null){super(n,o),this.buffer=e instanceof ArrayBuffer?e:e.buffer,this.offset=r}clone(){let e=new Uint8Array(new Uint8Array(this.buffer,this.offset,this.typeInfo.size));return new t(e.buffer,this.typeInfo,0,null)}setDataValue(e,n,r,o){if(n===null)return void console.log("setDataValue: NULL data.");let s=this.offset,i=this.typeInfo;for(;r;){if(r instanceof Nr)if(i instanceof En){let a=r.index;if(a instanceof Ve){if(!(a.value instanceof E))return void console.error(`SetDataValue: Invalid index type ${a.value}`);s+=a.value.value*i.stride}else{let c=e.evalExpression(a,o);if(!(c instanceof E))return void console.error("SetDataValue: Unknown index type",a);s+=c.value*i.stride}i=i.format}else console.error(`SetDataValue: Type ${i.getTypeName()} is not an array`);else{if(!(r instanceof nr))return void console.error("SetDataValue: Unknown postfix type",r);{let a=r.value;if(i instanceof Bn){let c=!1;for(let u of i.members)if(u.name===a){s+=u.offset,i=u.type,c=!0;break}if(!c)return void console.error(`SetDataValue: Member ${a} not found`)}else if(i instanceof Bt){let c=i.getTypeName(),u=0;if(a==="x"||a==="r")u=0;else if(a==="y"||a==="g")u=1;else if(a==="z"||a==="b")u=2;else{if(a!=="w"&&a!=="a")return void console.error(`SetDataValue: Unknown member ${a}`);u=3}if(!(n instanceof E))return void console.error("SetDataValue: Invalid value",n);let l=n.value;return c==="vec2f"?void(new Float32Array(this.buffer,s,2)[u]=l):c==="vec3f"?void(new Float32Array(this.buffer,s,3)[u]=l):c==="vec4f"?void(new Float32Array(this.buffer,s,4)[u]=l):c==="vec2i"?void(new Int32Array(this.buffer,s,2)[u]=l):c==="vec3i"?void(new Int32Array(this.buffer,s,3)[u]=l):c==="vec4i"?void(new Int32Array(this.buffer,s,4)[u]=l):c==="vec2u"?void(new Uint32Array(this.buffer,s,2)[u]=l):c==="vec3u"?void(new Uint32Array(this.buffer,s,3)[u]=l):c==="vec4u"?void(new Uint32Array(this.buffer,s,4)[u]=l):void console.error(`SetDataValue: Type ${c} is not a struct`)}}}r=r.postfix}this.setData(e,n,i,s,o)}setData(e,n,r,o,s){let i=r.getTypeName();if(i!=="f32"&&i!=="f16")if(i!=="i32"&&i!=="atomic<i32>"&&i!=="x32")if(i!=="u32"&&i!=="atomic<u32>")if(i!=="bool"){if(i==="vec2f"||i==="vec2h"){let a=new Float32Array(this.buffer,o,2);return void(n instanceof v?(a[0]=n.data[0],a[1]=n.data[1]):(a[0]=n[0],a[1]=n[1]))}if(i==="vec3f"||i==="vec3h"){let a=new Float32Array(this.buffer,o,3);return void(n instanceof v?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2]):(a[0]=n[0],a[1]=n[1],a[2]=n[2]))}if(i==="vec4f"||i==="vec4h"){let a=new Float32Array(this.buffer,o,4);return void(n instanceof v?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2],a[3]=n.data[3]):(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3]))}if(i==="vec2i"){let a=new Int32Array(this.buffer,o,2);return void(n instanceof v?(a[0]=n.data[0],a[1]=n.data[1]):(a[0]=n[0],a[1]=n[1]))}if(i==="vec3i"){let a=new Int32Array(this.buffer,o,3);return void(n instanceof v?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2]):(a[0]=n[0],a[1]=n[1],a[2]=n[2]))}if(i==="vec4i"){let a=new Int32Array(this.buffer,o,4);return void(n instanceof v?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2],a[3]=n.data[3]):(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3]))}if(i==="vec2u"){let a=new Uint32Array(this.buffer,o,2);return void(n instanceof v?(a[0]=n.data[0],a[1]=n.data[1]):(a[0]=n[0],a[1]=n[1]))}if(i==="vec3u"){let a=new Uint32Array(this.buffer,o,3);return void(n instanceof v?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2]):(a[0]=n[0],a[1]=n[1],a[2]=n[2]))}if(i==="vec4u"){let a=new Uint32Array(this.buffer,o,4);return void(n instanceof v?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2],a[3]=n.data[3]):(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3]))}if(i==="vec2b"){let a=new Uint32Array(this.buffer,o,2);return void(n instanceof v?(a[0]=n.data[0],a[1]=n.data[1]):(a[0]=n[0],a[1]=n[1]))}if(i==="vec3b"){let a=new Uint32Array(this.buffer,o,3);return void(n instanceof v?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2]):(a[0]=n[0],a[1]=n[1],a[2]=n[2]))}if(i==="vec4b"){let a=new Uint32Array(this.buffer,o,4);return void(n instanceof v?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2],a[3]=n.data[3]):(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3]))}if(i==="mat2x2f"||i==="mat2x2h"){let a=new Float32Array(this.buffer,o,4);return void(n instanceof z?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2],a[3]=n.data[3]):(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3]))}if(i==="mat2x3f"||i==="mat2x3h"){let a=new Float32Array(this.buffer,o,6);return void(n instanceof z?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2],a[3]=n.data[3],a[4]=n.data[4],a[5]=n.data[5]):(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5]))}if(i==="mat2x4f"||i==="mat2x4h"){let a=new Float32Array(this.buffer,o,8);return void(n instanceof z?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2],a[3]=n.data[3],a[4]=n.data[4],a[5]=n.data[5],a[6]=n.data[6],a[7]=n.data[7]):(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7]))}if(i==="mat3x2f"||i==="mat3x2h"){let a=new Float32Array(this.buffer,o,6);return void(n instanceof z?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2],a[3]=n.data[3],a[4]=n.data[4],a[5]=n.data[5]):(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5]))}if(i==="mat3x3f"||i==="mat3x3h"){let a=new Float32Array(this.buffer,o,9);return void(n instanceof z?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2],a[3]=n.data[3],a[4]=n.data[4],a[5]=n.data[5],a[6]=n.data[6],a[7]=n.data[7],a[8]=n.data[8]):(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8]))}if(i==="mat3x4f"||i==="mat3x4h"){let a=new Float32Array(this.buffer,o,12);return void(n instanceof z?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2],a[3]=n.data[3],a[4]=n.data[4],a[5]=n.data[5],a[6]=n.data[6],a[7]=n.data[7],a[8]=n.data[8],a[9]=n.data[9],a[10]=n.data[10],a[11]=n.data[11]):(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11]))}if(i==="mat4x2f"||i==="mat4x2h"){let a=new Float32Array(this.buffer,o,8);return void(n instanceof z?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2],a[3]=n.data[3],a[4]=n.data[4],a[5]=n.data[5],a[6]=n.data[6],a[7]=n.data[7]):(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7]))}if(i==="mat4x3f"||i==="mat4x3h"){let a=new Float32Array(this.buffer,o,12);return void(n instanceof z?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2],a[3]=n.data[3],a[4]=n.data[4],a[5]=n.data[5],a[6]=n.data[6],a[7]=n.data[7],a[8]=n.data[8],a[9]=n.data[9],a[10]=n.data[10],a[11]=n.data[11]):(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11]))}if(i==="mat4x4f"||i==="mat4x4h"){let a=new Float32Array(this.buffer,o,16);return void(n instanceof z?(a[0]=n.data[0],a[1]=n.data[1],a[2]=n.data[2],a[3]=n.data[3],a[4]=n.data[4],a[5]=n.data[5],a[6]=n.data[6],a[7]=n.data[7],a[8]=n.data[8],a[9]=n.data[9],a[10]=n.data[10],a[11]=n.data[11],a[12]=n.data[12],a[13]=n.data[13],a[14]=n.data[14],a[15]=n.data[15]):(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]))}if(n instanceof t){if(r===n.typeInfo)return void new Uint8Array(this.buffer,o,n.buffer.byteLength).set(new Uint8Array(n.buffer));console.error("SetDataValue: Type mismatch",i,n.typeInfo.getTypeName())}else console.error(`SetData: Unknown type ${i}`)}else n instanceof E&&(new Int32Array(this.buffer,o,1)[0]=n.value);else n instanceof E&&(new Uint32Array(this.buffer,o,1)[0]=n.value);else n instanceof E&&(new Int32Array(this.buffer,o,1)[0]=n.value);else n instanceof E&&(new Float32Array(this.buffer,o,1)[0]=n.value)}getSubData(e,n,r){var o,s,i;if(n===null)return this;let a=this.offset,c=this.typeInfo;for(;n;){if(n instanceof Nr){let l=n.index,f=l instanceof Ft?e.evalExpression(l,r):l,m=0;if(f instanceof E?m=f.value:typeof f=="number"?m=f:console.error("GetDataValue: Invalid index type",l),c instanceof En)a+=m*c.stride,c=c.format;else{let d=c.getTypeName();d==="mat4x4"||d==="mat4x4f"||d==="mat4x4h"?(a+=16*m,c=e.getTypeInfo("vec4f")):console.error(`getDataValue: Type ${c.getTypeName()} is not an array`)}}else{if(!(n instanceof nr))return console.error("GetDataValue: Unknown postfix type",n),null;{let l=n.value;if(c instanceof Bn){let f=!1;for(let m of c.members)if(m.name===l){a+=m.offset,c=m.type,f=!0;break}if(!f)return console.error(`GetDataValue: Member ${l} not found`),null}else if(c instanceof Bt){let f=c.getTypeName();if(f==="vec2f"||f==="vec3f"||f==="vec4f"||f==="vec2i"||f==="vec3i"||f==="vec4i"||f==="vec2u"||f==="vec3u"||f==="vec4u"||f==="vec2b"||f==="vec3b"||f==="vec4b"||f==="vec2h"||f==="vec3h"||f==="vec4h"||f==="vec2"||f==="vec3"||f==="vec4"){if(l.length>0&&l.length<5){let m="f",d=[];for(let p=0;p<l.length;++p){let b=l[p].toLowerCase(),w=0;if(b==="x"||b==="r")w=0;else if(b==="y"||b==="g")w=1;else if(b==="z"||b==="b")w=2;else{if(b!=="w"&&b!=="a")return console.error(`Unknown member ${l}`),null;w=3}if(l.length===1){if(f.endsWith("f"))return this.buffer.byteLength<a+4*w+4?(console.log("Insufficient buffer data"),null):new E(new Float32Array(this.buffer,a+4*w,1),e.getTypeInfo("f32"),this);if(f.endsWith("h"))return new E(new Float32Array(this.buffer,a+4*w,1),e.getTypeInfo("f16"),this);if(f.endsWith("i"))return new E(new Int32Array(this.buffer,a+4*w,1),e.getTypeInfo("i32"),this);if(f.endsWith("b"))return new E(new Int32Array(this.buffer,a+4*w,1),e.getTypeInfo("bool"),this);if(f.endsWith("u"))return new E(new Uint32Array(this.buffer,a+4*w,1),e.getTypeInfo("i32"),this)}if(f==="vec2f")d.push(new Float32Array(this.buffer,a,2)[w]);else if(f==="vec3f"){if(a+12>=this.buffer.byteLength)return console.log("Insufficient buffer data"),null;let h=new Float32Array(this.buffer,a,3);d.push(h[w])}else if(f==="vec4f")d.push(new Float32Array(this.buffer,a,4)[w]);else if(f==="vec2i")m="i",d.push(new Int32Array(this.buffer,a,2)[w]);else if(f==="vec3i")m="i",d.push(new Int32Array(this.buffer,a,3)[w]);else if(f==="vec4i")m="i",d.push(new Int32Array(this.buffer,a,4)[w]);else if(f==="vec2u"){m="u";let h=new Uint32Array(this.buffer,a,2);d.push(h[w])}else f==="vec3u"?(m="u",d.push(new Uint32Array(this.buffer,a,3)[w])):f==="vec4u"&&(m="u",d.push(new Uint32Array(this.buffer,a,4)[w]))}return d.length===2?c=e.getTypeInfo(`vec2${m}`):d.length===3?c=e.getTypeInfo(`vec3${m}`):d.length===4?c=e.getTypeInfo(`vec4${m}`):console.error(`GetDataValue: Invalid vector length ${d.length}`),new v(d,c,null)}return console.error(`GetDataValue: Unknown member ${l}`),null}return console.error(`GetDataValue: Type ${f} is not a struct`),null}}}n=n.postfix}let u=c.getTypeName();return u==="f32"?new E(new Float32Array(this.buffer,a,1),c,this):u==="i32"?new E(new Int32Array(this.buffer,a,1),c,this):u==="u32"?new E(new Uint32Array(this.buffer,a,1),c,this):u==="vec2f"?new v(new Float32Array(this.buffer,a,2),c,this):u==="vec3f"?new v(new Float32Array(this.buffer,a,3),c,this):u==="vec4f"?new v(new Float32Array(this.buffer,a,4),c,this):u==="vec2i"?new v(new Int32Array(this.buffer,a,2),c,this):u==="vec3i"?new v(new Int32Array(this.buffer,a,3),c,this):u==="vec4i"?new v(new Int32Array(this.buffer,a,4),c,this):u==="vec2u"?new v(new Uint32Array(this.buffer,a,2),c,this):u==="vec3u"?new v(new Uint32Array(this.buffer,a,3),c,this):u==="vec4u"?new v(new Uint32Array(this.buffer,a,4),c,this):c instanceof tr&&c.name==="atomic"?((o=c.format)===null||o===void 0?void 0:o.name)==="u32"?new E(new Uint32Array(this.buffer,a,1)[0],c.format,this):((s=c.format)===null||s===void 0?void 0:s.name)==="i32"?new E(new Int32Array(this.buffer,a,1)[0],c.format,this):(console.error(`GetDataValue: Invalid atomic format ${(i=c.format)===null||i===void 0?void 0:i.name}`),null):new t(this.buffer,c,a,this)}toString(){let e="";if(this.typeInfo instanceof En)if(this.typeInfo.format.name==="f32"){let n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let r=1;r<n.length;++r)e+=`, ${n[r]}`}else if(this.typeInfo.format.name==="i32"){let n=new Int32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let r=1;r<n.length;++r)e+=`, ${n[r]}`}else if(this.typeInfo.format.name==="u32"){let n=new Uint32Array(this.buffer,this.offset);e=`[${n[0]}`;for(let r=1;r<n.length;++r)e+=`, ${n[r]}`}else if(this.typeInfo.format.name==="vec2f"){let n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}]`;for(let r=1;r<n.length/2;++r)e+=`, [${n[2*r]}, ${n[2*r+1]}]`}else if(this.typeInfo.format.name==="vec3f"){let n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}, ${n[2]}]`;for(let r=4;r<n.length;r+=4)e+=`, [${n[r]}, ${n[r+1]}, ${n[r+2]}]`}else if(this.typeInfo.format.name==="vec4f"){let n=new Float32Array(this.buffer,this.offset);e=`[${n[0]}, ${n[1]}, ${n[2]}, ${n[3]}]`;for(let r=4;r<n.length;r+=4)e+=`, [${n[r]}, ${n[r+1]}, ${n[r+2]}, ${n[r+3]}]`}else e="[...]";else this.typeInfo instanceof Bn?e+="{...}":e="[...]";return e}},er=class t extends nn{constructor(e,n,r,o){super(n,null),this.data=e,this.descriptor=r,this.view=o}clone(){return new t(this.data,this.typeInfo,this.descriptor,this.view)}get width(){var e,n;let r=this.descriptor.size;return r instanceof Array&&r.length>0?(e=r[0])!==null&&e!==void 0?e:0:r instanceof Object&&(n=r.width)!==null&&n!==void 0?n:0}get height(){var e,n;let r=this.descriptor.size;return r instanceof Array&&r.length>1?(e=r[1])!==null&&e!==void 0?e:0:r instanceof Object&&(n=r.height)!==null&&n!==void 0?n:0}get depthOrArrayLayers(){var e,n;let r=this.descriptor.size;return r instanceof Array&&r.length>2?(e=r[2])!==null&&e!==void 0?e:0:r instanceof Object&&(n=r.depthOrArrayLayers)!==null&&n!==void 0?n:0}get format(){var e;return this.descriptor&&(e=this.descriptor.format)!==null&&e!==void 0?e:"rgba8unorm"}get sampleCount(){var e;return this.descriptor&&(e=this.descriptor.sampleCount)!==null&&e!==void 0?e:1}get mipLevelCount(){var e;return this.descriptor&&(e=this.descriptor.mipLevelCount)!==null&&e!==void 0?e:1}get dimension(){var e;return this.descriptor&&(e=this.descriptor.dimension)!==null&&e!==void 0?e:"2d"}getMipLevelSize(e){if(e>=this.mipLevelCount)return[0,0,0];let n=[this.width,this.height,this.depthOrArrayLayers];for(let r=0;r<n.length;++r)n[r]=Math.max(1,n[r]>>e);return n}get texelByteSize(){let e=this.format,n=zh[e];return n?n.isDepthStencil?4:n.bytesPerBlock:0}get bytesPerRow(){return this.width*this.texelByteSize}get isDepthStencil(){let e=this.format,n=zh[e];return!!n&&n.isDepthStencil}getGpuSize(){let e=this.format,n=zh[e],r=this.width;if(!e||r<=0||!n)return-1;let o=this.height,s=this.depthOrArrayLayers,i=this.dimension;return r/n.blockWidth*(i==="1d"?1:o/n.blockHeight)*n.bytesPerBlock*s}getPixel(e,n,r=0,o=0){let s=this.texelByteSize,i=this.bytesPerRow,a=this.height,c=this.data[o];return iT(new Uint8Array(c),e,n,r,o,a,i,s,this.format)}setPixel(e,n,r,o,s){let i=this.texelByteSize,a=this.bytesPerRow,c=this.height,u=this.data[o];(function(l,f,m,d,p,b,w,h,g,y){let A=d*(w>>=p)*(b>>=p)+m*w+f*h;switch(g){case"r8unorm":return void ie(l,A,"8unorm",1,y);case"r8snorm":return void ie(l,A,"8snorm",1,y);case"r8uint":return void ie(l,A,"8uint",1,y);case"r8sint":return void ie(l,A,"8sint",1,y);case"rg8unorm":return void ie(l,A,"8unorm",2,y);case"rg8snorm":return void ie(l,A,"8snorm",2,y);case"rg8uint":return void ie(l,A,"8uint",2,y);case"rg8sint":return void ie(l,A,"8sint",2,y);case"rgba8unorm-srgb":case"rgba8unorm":case"bgra8unorm-srgb":case"bgra8unorm":return void ie(l,A,"8unorm",4,y);case"rgba8snorm":return void ie(l,A,"8snorm",4,y);case"rgba8uint":return void ie(l,A,"8uint",4,y);case"rgba8sint":return void ie(l,A,"8sint",4,y);case"r16uint":return void ie(l,A,"16uint",1,y);case"r16sint":return void ie(l,A,"16sint",1,y);case"r16float":return void ie(l,A,"16float",1,y);case"rg16uint":return void ie(l,A,"16uint",2,y);case"rg16sint":return void ie(l,A,"16sint",2,y);case"rg16float":return void ie(l,A,"16float",2,y);case"rgba16uint":return void ie(l,A,"16uint",4,y);case"rgba16sint":return void ie(l,A,"16sint",4,y);case"rgba16float":return void ie(l,A,"16float",4,y);case"r32uint":return void ie(l,A,"32uint",1,y);case"r32sint":return void ie(l,A,"32sint",1,y);case"depth16unorm":case"depth24plus":case"depth24plus-stencil8":case"depth32float":case"depth32float-stencil8":case"r32float":return void ie(l,A,"32float",1,y);case"rg32uint":return void ie(l,A,"32uint",2,y);case"rg32sint":return void ie(l,A,"32sint",2,y);case"rg32float":return void ie(l,A,"32float",2,y);case"rgba32uint":return void ie(l,A,"32uint",4,y);case"rgba32sint":return void ie(l,A,"32sint",4,y);case"rgba32float":return void ie(l,A,"32float",4,y);case"rg11b10ufloat":console.error("TODO: rg11b10ufloat not supported for writing")}})(new Uint8Array(u),e,n,r,o,c,a,i,this.format,s)}};(t=>{t[t.token=0]="token",t[t.keyword=1]="keyword",t[t.reserved=2]="reserved"})(B||(B={}));var T=class{constructor(e,n,r){this.name=e,this.type=n,this.rule=r}toString(){return this.name}},x=class{};M=x,x.none=new T("",B.reserved,""),x.eof=new T("EOF",B.token,""),x.reserved={asm:new T("asm",B.reserved,"asm"),bf16:new T("bf16",B.reserved,"bf16"),do:new T("do",B.reserved,"do"),enum:new T("enum",B.reserved,"enum"),f16:new T("f16",B.reserved,"f16"),f64:new T("f64",B.reserved,"f64"),handle:new T("handle",B.reserved,"handle"),i8:new T("i8",B.reserved,"i8"),i16:new T("i16",B.reserved,"i16"),i64:new T("i64",B.reserved,"i64"),mat:new T("mat",B.reserved,"mat"),premerge:new T("premerge",B.reserved,"premerge"),regardless:new T("regardless",B.reserved,"regardless"),typedef:new T("typedef",B.reserved,"typedef"),u8:new T("u8",B.reserved,"u8"),u16:new T("u16",B.reserved,"u16"),u64:new T("u64",B.reserved,"u64"),unless:new T("unless",B.reserved,"unless"),using:new T("using",B.reserved,"using"),vec:new T("vec",B.reserved,"vec"),void:new T("void",B.reserved,"void")},x.keywords={array:new T("array",B.keyword,"array"),atomic:new T("atomic",B.keyword,"atomic"),bool:new T("bool",B.keyword,"bool"),f32:new T("f32",B.keyword,"f32"),i32:new T("i32",B.keyword,"i32"),mat2x2:new T("mat2x2",B.keyword,"mat2x2"),mat2x3:new T("mat2x3",B.keyword,"mat2x3"),mat2x4:new T("mat2x4",B.keyword,"mat2x4"),mat3x2:new T("mat3x2",B.keyword,"mat3x2"),mat3x3:new T("mat3x3",B.keyword,"mat3x3"),mat3x4:new T("mat3x4",B.keyword,"mat3x4"),mat4x2:new T("mat4x2",B.keyword,"mat4x2"),mat4x3:new T("mat4x3",B.keyword,"mat4x3"),mat4x4:new T("mat4x4",B.keyword,"mat4x4"),ptr:new T("ptr",B.keyword,"ptr"),sampler:new T("sampler",B.keyword,"sampler"),sampler_comparison:new T("sampler_comparison",B.keyword,"sampler_comparison"),struct:new T("struct",B.keyword,"struct"),texture_1d:new T("texture_1d",B.keyword,"texture_1d"),texture_2d:new T("texture_2d",B.keyword,"texture_2d"),texture_2d_array:new T("texture_2d_array",B.keyword,"texture_2d_array"),texture_3d:new T("texture_3d",B.keyword,"texture_3d"),texture_cube:new T("texture_cube",B.keyword,"texture_cube"),texture_cube_array:new T("texture_cube_array",B.keyword,"texture_cube_array"),texture_multisampled_2d:new T("texture_multisampled_2d",B.keyword,"texture_multisampled_2d"),texture_storage_1d:new T("texture_storage_1d",B.keyword,"texture_storage_1d"),texture_storage_2d:new T("texture_storage_2d",B.keyword,"texture_storage_2d"),texture_storage_2d_array:new T("texture_storage_2d_array",B.keyword,"texture_storage_2d_array"),texture_storage_3d:new T("texture_storage_3d",B.keyword,"texture_storage_3d"),texture_depth_2d:new T("texture_depth_2d",B.keyword,"texture_depth_2d"),texture_depth_2d_array:new T("texture_depth_2d_array",B.keyword,"texture_depth_2d_array"),texture_depth_cube:new T("texture_depth_cube",B.keyword,"texture_depth_cube"),texture_depth_cube_array:new T("texture_depth_cube_array",B.keyword,"texture_depth_cube_array"),texture_depth_multisampled_2d:new T("texture_depth_multisampled_2d",B.keyword,"texture_depth_multisampled_2d"),texture_external:new T("texture_external",B.keyword,"texture_external"),u32:new T("u32",B.keyword,"u32"),vec2:new T("vec2",B.keyword,"vec2"),vec3:new T("vec3",B.keyword,"vec3"),vec4:new T("vec4",B.keyword,"vec4"),bitcast:new T("bitcast",B.keyword,"bitcast"),block:new T("block",B.keyword,"block"),break:new T("break",B.keyword,"break"),case:new T("case",B.keyword,"case"),continue:new T("continue",B.keyword,"continue"),continuing:new T("continuing",B.keyword,"continuing"),default:new T("default",B.keyword,"default"),diagnostic:new T("diagnostic",B.keyword,"diagnostic"),discard:new T("discard",B.keyword,"discard"),else:new T("else",B.keyword,"else"),enable:new T("enable",B.keyword,"enable"),fallthrough:new T("fallthrough",B.keyword,"fallthrough"),false:new T("false",B.keyword,"false"),fn:new T("fn",B.keyword,"fn"),for:new T("for",B.keyword,"for"),function:new T("function",B.keyword,"function"),if:new T("if",B.keyword,"if"),let:new T("let",B.keyword,"let"),const:new T("const",B.keyword,"const"),loop:new T("loop",B.keyword,"loop"),while:new T("while",B.keyword,"while"),private:new T("private",B.keyword,"private"),read:new T("read",B.keyword,"read"),read_write:new T("read_write",B.keyword,"read_write"),return:new T("return",B.keyword,"return"),requires:new T("requires",B.keyword,"requires"),storage:new T("storage",B.keyword,"storage"),switch:new T("switch",B.keyword,"switch"),true:new T("true",B.keyword,"true"),alias:new T("alias",B.keyword,"alias"),type:new T("type",B.keyword,"type"),uniform:new T("uniform",B.keyword,"uniform"),var:new T("var",B.keyword,"var"),override:new T("override",B.keyword,"override"),workgroup:new T("workgroup",B.keyword,"workgroup"),write:new T("write",B.keyword,"write"),r8unorm:new T("r8unorm",B.keyword,"r8unorm"),r8snorm:new T("r8snorm",B.keyword,"r8snorm"),r8uint:new T("r8uint",B.keyword,"r8uint"),r8sint:new T("r8sint",B.keyword,"r8sint"),r16uint:new T("r16uint",B.keyword,"r16uint"),r16sint:new T("r16sint",B.keyword,"r16sint"),r16float:new T("r16float",B.keyword,"r16float"),rg8unorm:new T("rg8unorm",B.keyword,"rg8unorm"),rg8snorm:new T("rg8snorm",B.keyword,"rg8snorm"),rg8uint:new T("rg8uint",B.keyword,"rg8uint"),rg8sint:new T("rg8sint",B.keyword,"rg8sint"),r32uint:new T("r32uint",B.keyword,"r32uint"),r32sint:new T("r32sint",B.keyword,"r32sint"),r32float:new T("r32float",B.keyword,"r32float"),rg16uint:new T("rg16uint",B.keyword,"rg16uint"),rg16sint:new T("rg16sint",B.keyword,"rg16sint"),rg16float:new T("rg16float",B.keyword,"rg16float"),rgba8unorm:new T("rgba8unorm",B.keyword,"rgba8unorm"),rgba8unorm_srgb:new T("rgba8unorm_srgb",B.keyword,"rgba8unorm_srgb"),rgba8snorm:new T("rgba8snorm",B.keyword,"rgba8snorm"),rgba8uint:new T("rgba8uint",B.keyword,"rgba8uint"),rgba8sint:new T("rgba8sint",B.keyword,"rgba8sint"),bgra8unorm:new T("bgra8unorm",B.keyword,"bgra8unorm"),bgra8unorm_srgb:new T("bgra8unorm_srgb",B.keyword,"bgra8unorm_srgb"),rgb10a2unorm:new T("rgb10a2unorm",B.keyword,"rgb10a2unorm"),rg11b10float:new T("rg11b10float",B.keyword,"rg11b10float"),rg32uint:new T("rg32uint",B.keyword,"rg32uint"),rg32sint:new T("rg32sint",B.keyword,"rg32sint"),rg32float:new T("rg32float",B.keyword,"rg32float"),rgba16uint:new T("rgba16uint",B.keyword,"rgba16uint"),rgba16sint:new T("rgba16sint",B.keyword,"rgba16sint"),rgba16float:new T("rgba16float",B.keyword,"rgba16float"),rgba32uint:new T("rgba32uint",B.keyword,"rgba32uint"),rgba32sint:new T("rgba32sint",B.keyword,"rgba32sint"),rgba32float:new T("rgba32float",B.keyword,"rgba32float"),static_assert:new T("static_assert",B.keyword,"static_assert")},x.tokens={decimal_float_literal:new T("decimal_float_literal",B.token,/((-?[0-9]*\.[0-9]+|-?[0-9]+\.[0-9]*)((e|E)(\+|-)?[0-9]+)?[fh]?)|(-?[0-9]+(e|E)(\+|-)?[0-9]+[fh]?)|(-?[0-9]+[fh])/),hex_float_literal:new T("hex_float_literal",B.token,/-?0x((([0-9a-fA-F]*\.[0-9a-fA-F]+|[0-9a-fA-F]+\.[0-9a-fA-F]*)((p|P)(\+|-)?[0-9]+[fh]?)?)|([0-9a-fA-F]+(p|P)(\+|-)?[0-9]+[fh]?))/),int_literal:new T("int_literal",B.token,/-?0x[0-9a-fA-F]+|0i?|-?[1-9][0-9]*i?/),uint_literal:new T("uint_literal",B.token,/0x[0-9a-fA-F]+u|0u|[1-9][0-9]*u/),name:new T("name",B.token,/([_\p{XID_Start}][\p{XID_Continue}]+)|([\p{XID_Start}])/u),ident:new T("ident",B.token,/[_a-zA-Z][0-9a-zA-Z_]*/),and:new T("and",B.token,"&"),and_and:new T("and_and",B.token,"&&"),arrow:new T("arrow ",B.token,"->"),attr:new T("attr",B.token,"@"),forward_slash:new T("forward_slash",B.token,"/"),bang:new T("bang",B.token,"!"),bracket_left:new T("bracket_left",B.token,"["),bracket_right:new T("bracket_right",B.token,"]"),brace_left:new T("brace_left",B.token,"{"),brace_right:new T("brace_right",B.token,"}"),colon:new T("colon",B.token,":"),comma:new T("comma",B.token,","),equal:new T("equal",B.token,"="),equal_equal:new T("equal_equal",B.token,"=="),not_equal:new T("not_equal",B.token,"!="),greater_than:new T("greater_than",B.token,">"),greater_than_equal:new T("greater_than_equal",B.token,">="),shift_right:new T("shift_right",B.token,">>"),less_than:new T("less_than",B.token,"<"),less_than_equal:new T("less_than_equal",B.token,"<="),shift_left:new T("shift_left",B.token,"<<"),modulo:new T("modulo",B.token,"%"),minus:new T("minus",B.token,"-"),minus_minus:new T("minus_minus",B.token,"--"),period:new T("period",B.token,"."),plus:new T("plus",B.token,"+"),plus_plus:new T("plus_plus",B.token,"++"),or:new T("or",B.token,"|"),or_or:new T("or_or",B.token,"||"),paren_left:new T("paren_left",B.token,"("),paren_right:new T("paren_right",B.token,")"),semicolon:new T("semicolon",B.token,";"),star:new T("star",B.token,"*"),tilde:new T("tilde",B.token,"~"),underscore:new T("underscore",B.token,"_"),xor:new T("xor",B.token,"^"),plus_equal:new T("plus_equal",B.token,"+="),minus_equal:new T("minus_equal",B.token,"-="),times_equal:new T("times_equal",B.token,"*="),division_equal:new T("division_equal",B.token,"/="),modulo_equal:new T("modulo_equal",B.token,"%="),and_equal:new T("and_equal",B.token,"&="),or_equal:new T("or_equal",B.token,"|="),xor_equal:new T("xor_equal",B.token,"^="),shift_right_equal:new T("shift_right_equal",B.token,">>="),shift_left_equal:new T("shift_left_equal",B.token,"<<=")},x.simpleTokens={"@":M.tokens.attr,"{":M.tokens.brace_left,"}":M.tokens.brace_right,":":M.tokens.colon,",":M.tokens.comma,"(":M.tokens.paren_left,")":M.tokens.paren_right,";":M.tokens.semicolon},x.literalTokens={"&":M.tokens.and,"&&":M.tokens.and_and,"->":M.tokens.arrow,"/":M.tokens.forward_slash,"!":M.tokens.bang,"[":M.tokens.bracket_left,"]":M.tokens.bracket_right,"=":M.tokens.equal,"==":M.tokens.equal_equal,"!=":M.tokens.not_equal,">":M.tokens.greater_than,">=":M.tokens.greater_than_equal,">>":M.tokens.shift_right,"<":M.tokens.less_than,"<=":M.tokens.less_than_equal,"<<":M.tokens.shift_left,"%":M.tokens.modulo,"-":M.tokens.minus,"--":M.tokens.minus_minus,".":M.tokens.period,"+":M.tokens.plus,"++":M.tokens.plus_plus,"|":M.tokens.or,"||":M.tokens.or_or,"*":M.tokens.star,"~":M.tokens.tilde,_:M.tokens.underscore,"^":M.tokens.xor,"+=":M.tokens.plus_equal,"-=":M.tokens.minus_equal,"*=":M.tokens.times_equal,"/=":M.tokens.division_equal,"%=":M.tokens.modulo_equal,"&=":M.tokens.and_equal,"|=":M.tokens.or_equal,"^=":M.tokens.xor_equal,">>=":M.tokens.shift_right_equal,"<<=":M.tokens.shift_left_equal},x.regexTokens={decimal_float_literal:M.tokens.decimal_float_literal,hex_float_literal:M.tokens.hex_float_literal,int_literal:M.tokens.int_literal,uint_literal:M.tokens.uint_literal,ident:M.tokens.ident},x.storage_class=[M.keywords.function,M.keywords.private,M.keywords.workgroup,M.keywords.uniform,M.keywords.storage],x.access_mode=[M.keywords.read,M.keywords.write,M.keywords.read_write],x.sampler_type=[M.keywords.sampler,M.keywords.sampler_comparison],x.sampled_texture_type=[M.keywords.texture_1d,M.keywords.texture_2d,M.keywords.texture_2d_array,M.keywords.texture_3d,M.keywords.texture_cube,M.keywords.texture_cube_array],x.multisampled_texture_type=[M.keywords.texture_multisampled_2d],x.storage_texture_type=[M.keywords.texture_storage_1d,M.keywords.texture_storage_2d,M.keywords.texture_storage_2d_array,M.keywords.texture_storage_3d],x.depth_texture_type=[M.keywords.texture_depth_2d,M.keywords.texture_depth_2d_array,M.keywords.texture_depth_cube,M.keywords.texture_depth_cube_array,M.keywords.texture_depth_multisampled_2d],x.texture_external_type=[M.keywords.texture_external],x.any_texture_type=[...M.sampled_texture_type,...M.multisampled_texture_type,...M.storage_texture_type,...M.depth_texture_type,...M.texture_external_type],x.texel_format=[M.keywords.r8unorm,M.keywords.r8snorm,M.keywords.r8uint,M.keywords.r8sint,M.keywords.r16uint,M.keywords.r16sint,M.keywords.r16float,M.keywords.rg8unorm,M.keywords.rg8snorm,M.keywords.rg8uint,M.keywords.rg8sint,M.keywords.r32uint,M.keywords.r32sint,M.keywords.r32float,M.keywords.rg16uint,M.keywords.rg16sint,M.keywords.rg16float,M.keywords.rgba8unorm,M.keywords.rgba8unorm_srgb,M.keywords.rgba8snorm,M.keywords.rgba8uint,M.keywords.rgba8sint,M.keywords.bgra8unorm,M.keywords.bgra8unorm_srgb,M.keywords.rgb10a2unorm,M.keywords.rg11b10float,M.keywords.rg32uint,M.keywords.rg32sint,M.keywords.rg32float,M.keywords.rgba16uint,M.keywords.rgba16sint,M.keywords.rgba16float,M.keywords.rgba32uint,M.keywords.rgba32sint,M.keywords.rgba32float],x.const_literal=[M.tokens.int_literal,M.tokens.uint_literal,M.tokens.decimal_float_literal,M.tokens.hex_float_literal,M.keywords.true,M.keywords.false],x.literal_or_ident=[M.tokens.ident,M.tokens.int_literal,M.tokens.uint_literal,M.tokens.decimal_float_literal,M.tokens.hex_float_literal,M.tokens.name],x.element_count_expression=[M.tokens.int_literal,M.tokens.uint_literal,M.tokens.ident],x.template_types=[M.keywords.vec2,M.keywords.vec3,M.keywords.vec4,M.keywords.mat2x2,M.keywords.mat2x3,M.keywords.mat2x4,M.keywords.mat3x2,M.keywords.mat3x3,M.keywords.mat3x4,M.keywords.mat4x2,M.keywords.mat4x3,M.keywords.mat4x4,M.keywords.atomic,M.keywords.bitcast,...M.any_texture_type],x.attribute_name=[M.tokens.ident,M.keywords.block,M.keywords.diagnostic],x.assignment_operators=[M.tokens.equal,M.tokens.plus_equal,M.tokens.minus_equal,M.tokens.times_equal,M.tokens.division_equal,M.tokens.modulo_equal,M.tokens.and_equal,M.tokens.or_equal,M.tokens.xor_equal,M.tokens.shift_right_equal,M.tokens.shift_left_equal],x.increment_operators=[M.tokens.plus_plus,M.tokens.minus_minus];var Ju=class{constructor(e,n,r,o,s){this.type=e,this.lexeme=n,this.line=r,this.start=o,this.end=s}toString(){return this.lexeme}isTemplateType(){return x.template_types.indexOf(this.type)!=-1}isArrayType(){return this.type==x.keywords.array}isArrayOrTemplateType(){return this.isArrayType()||this.isTemplateType()}},ed=class{constructor(e){this._tokens=[],this._start=0,this._current=0,this._line=1,this._source=e??""}scanTokens(){for(;!this._isAtEnd();)if(this._start=this._current,!this.scanToken())throw`Invalid syntax at line ${this._line}`;return this._tokens.push(new Ju(x.eof,"",this._line,this._current,this._current)),this._tokens}scanToken(){let e=this._advance();if(e==`
`)return this._line++,!0;if(this._isWhitespace(e))return!0;if(e=="/"){if(this._peekAhead()=="/"){for(;e!=`
`;){if(this._isAtEnd())return!0;e=this._advance()}return this._line++,!0}if(this._peekAhead()=="*"){this._advance();let i=1;for(;i>0;){if(this._isAtEnd())return!0;if(e=this._advance(),e==`
`)this._line++;else if(e=="*"){if(this._peekAhead()=="/"&&(this._advance(),i--,i==0))return!0}else e=="/"&&this._peekAhead()=="*"&&(this._advance(),i++)}return!0}}let n=x.simpleTokens[e];if(n)return this._addToken(n),!0;let r=x.none,o=this._isAlpha(e),s=e==="_";if(this._isAlphaNumeric(e)){let i=this._peekAhead();for(;this._isAlphaNumeric(i);)e+=this._advance(),i=this._peekAhead()}if(o){let i=x.keywords[e];if(i)return this._addToken(i),!0}if(o||s)return this._addToken(x.tokens.ident),!0;for(;;){let i=this._findType(e),a=this._peekAhead();if(e=="-"&&this._tokens.length>0){if(a=="=")return this._current++,e+=a,this._addToken(x.tokens.minus_equal),!0;if(a=="-")return this._current++,e+=a,this._addToken(x.tokens.minus_minus),!0;let c=this._tokens.length-1;if((x.literal_or_ident.indexOf(this._tokens[c].type)!=-1||this._tokens[c].type==x.tokens.paren_right)&&a!=">")return this._addToken(i),!0}if(e==">"&&(a==">"||a=="=")){let c=!1,u=this._tokens.length-1;for(let l=0;l<5&&u>=0&&x.assignment_operators.indexOf(this._tokens[u].type)===-1;++l,--u)if(this._tokens[u].type===x.tokens.less_than){u>0&&this._tokens[u-1].isArrayOrTemplateType()&&(c=!0);break}if(c)return this._addToken(i),!0}if(i===x.none){let c=e,u=0,l=2;for(let f=0;f<l;++f)if(c+=this._peekAhead(f),i=this._findType(c),i!==x.none){u=f;break}if(i===x.none)return r!==x.none&&(this._current--,this._addToken(r),!0);e=c,this._current+=u+1}if(r=i,this._isAtEnd())break;e+=this._advance()}return r!==x.none&&(this._addToken(r),!0)}_findType(e){for(let r in x.regexTokens){let o=x.regexTokens[r];if(this._match(e,o.rule))return o}return x.literalTokens[e]||x.none}_match(e,n){let r=n.exec(e);return r&&r.index==0&&r[0]==e}_isAtEnd(){return this._current>=this._source.length}_isAlpha(e){return!this._isNumeric(e)&&!this._isWhitespace(e)&&e!=="_"&&e!=="."&&e!=="("&&e!==")"&&e!=="["&&e!=="]"&&e!=="{"&&e!=="}"&&e!==","&&e!==";"&&e!==":"&&e!=="="&&e!=="!"&&e!=="<"&&e!==">"&&e!=="+"&&e!=="-"&&e!=="*"&&e!=="/"&&e!=="%"&&e!=="&"&&e!=="|"&&e!=="^"&&e!=="~"&&e!=="@"&&e!=="#"&&e!=="?"&&e!=="'"&&e!=="`"&&e!=='"'&&e!=="\\"&&e!==`
`&&e!=="\r"&&e!=="	"&&e!=="\0"}_isNumeric(e){return e>="0"&&e<="9"}_isAlphaNumeric(e){return this._isAlpha(e)||this._isNumeric(e)||e==="_"}_isWhitespace(e){return e==" "||e=="	"||e=="\r"}_advance(e=0){let n=this._source[this._current];return e=e||0,e++,this._current+=e,n}_peekAhead(e=0){return e=e||0,this._current+e>=this._source.length?"\0":this._source[this._current+e]}_addToken(e){let n=this._source.substring(this._start,this._current);this._tokens.push(new Ju(e,n,this._line,this._start,this._current))}};function N(t){return Array.isArray(t)||t?.buffer instanceof ArrayBuffer}var qu=new Float32Array(1),cT=new Uint32Array(qu.buffer),uT=new Uint32Array(qu.buffer),Xu=new Int32Array(1),lT=new Float32Array(Xu.buffer),fT=new Uint32Array(Xu.buffer),Yu=new Uint32Array(1),mT=new Float32Array(Yu.buffer),hT=new Int32Array(Yu.buffer);function x2(t,e,n){if(e===n)return t;if(e==="f32"){if(n==="i32"||n==="x32")return qu[0]=t,cT[0];if(n==="u32")return qu[0]=t,uT[0]}else if(e==="i32"||e==="x32"){if(n==="f32")return Xu[0]=t,lT[0];if(n==="u32")return Xu[0]=t,fT[0]}else if(e==="u32"){if(n==="f32")return Yu[0]=t,mT[0];if(n==="i32"||n==="x32")return Yu[0]=t,hT[0]}return console.error(`Unsupported cast from ${e} to ${n}`),t}var td=class{constructor(e){this.resources=null,this.inUse=!1,this.info=null,this.node=e}},Ms=class{constructor(e,n){this.align=e,this.size=n}},Ao=class t{constructor(){this.uniforms=[],this.storage=[],this.textures=[],this.samplers=[],this.aliases=[],this.overrides=[],this.structs=[],this.entry=new Xh,this.functions=[],this._types=new Map,this._functions=new Map}_isStorageTexture(e){return e.name=="texture_storage_1d"||e.name=="texture_storage_2d"||e.name=="texture_storage_2d_array"||e.name=="texture_storage_3d"}updateAST(e){for(let n of e)n instanceof _o&&this._functions.set(n.name,new td(n));for(let n of e)if(n instanceof mn){let r=this.getTypeInfo(n,null);r instanceof Bn&&this.structs.push(r)}for(let n of e)if(n instanceof ya)this.aliases.push(this._getAliasInfo(n));else{if(n instanceof pa){let r=n,o=this._getAttributeNum(r.attributes,"id",0),s=r.type!=null?this.getTypeInfo(r.type,r.attributes):null;this.overrides.push(new Kh(r.name,s,r.attributes,o));continue}if(this._isUniformVar(n)){let r=n,o=this._getAttributeNum(r.attributes,"group",0),s=this._getAttributeNum(r.attributes,"binding",0),i=this.getTypeInfo(r.type,r.attributes),a=new Es(r.name,i,o,s,r.attributes,Lr.Uniform,r.access);a.access||(a.access="read"),this.uniforms.push(a);continue}if(this._isStorageVar(n)){let r=n,o=this._getAttributeNum(r.attributes,"group",0),s=this._getAttributeNum(r.attributes,"binding",0),i=this.getTypeInfo(r.type,r.attributes),a=this._isStorageTexture(i),c=new Es(r.name,i,o,s,r.attributes,a?Lr.StorageTexture:Lr.Storage,r.access);c.access||(c.access="read"),this.storage.push(c);continue}if(this._isTextureVar(n)){let r=n,o=this._getAttributeNum(r.attributes,"group",0),s=this._getAttributeNum(r.attributes,"binding",0),i=this.getTypeInfo(r.type,r.attributes),a=this._isStorageTexture(i),c=new Es(r.name,i,o,s,r.attributes,a?Lr.StorageTexture:Lr.Texture,r.access);c.access||(c.access="read"),a?this.storage.push(c):this.textures.push(c);continue}if(this._isSamplerVar(n)){let r=n,o=this._getAttributeNum(r.attributes,"group",0),s=this._getAttributeNum(r.attributes,"binding",0),i=this.getTypeInfo(r.type,r.attributes),a=new Es(r.name,i,o,s,r.attributes,Lr.Sampler,r.access);this.samplers.push(a);continue}}for(let n of e)if(n instanceof _o){let r=this._getAttribute(n,"vertex"),o=this._getAttribute(n,"fragment"),s=this._getAttribute(n,"compute"),i=r||o||s,a=new qh(n.name,i?.name,n.attributes);a.attributes=n.attributes,a.startLine=n.startLine,a.endLine=n.endLine,this.functions.push(a),this._functions.get(n.name).info=a,i&&(this._functions.get(n.name).inUse=!0,a.inUse=!0,a.resources=this._findResources(n,!!i),a.inputs=this._getInputs(n.args),a.outputs=this._getOutputs(n.returnType),this.entry[i.name].push(a)),a.arguments=n.args.map(c=>new Jh(c.name,this.getTypeInfo(c.type,c.attributes),c.attributes)),a.returnType=n.returnType?this.getTypeInfo(n.returnType,n.attributes):null;continue}for(let n of this._functions.values())n.info&&(n.info.inUse=n.inUse,this._addCalls(n.node,n.info.calls));for(let n of this._functions.values())n.node.search(r=>{var o,s,i;if(r instanceof Ku){if(r.value)if(N(r.value))for(let a of r.value)for(let c of this.overrides)a===c.name&&((o=n.info)===null||o===void 0||o.overrides.push(c));else for(let a of this.overrides)r.value===a.name&&((s=n.info)===null||s===void 0||s.overrides.push(a))}else if(r instanceof mt)for(let a of this.overrides)r.name===a.name&&((i=n.info)===null||i===void 0||i.overrides.push(a))});for(let n of this.uniforms)this._markStructsInUse(n.type);for(let n of this.storage)this._markStructsInUse(n.type)}getFunctionInfo(e){for(let n of this.functions)if(n.name==e)return n;return null}getStructInfo(e){for(let n of this.structs)if(n.name==e)return n;return null}getOverrideInfo(e){for(let n of this.overrides)if(n.name==e)return n;return null}_markStructsInUse(e){if(e)if(e.isStruct){if(e.inUse=!0,e.members)for(let n of e.members)this._markStructsInUse(n.type)}else if(e.isArray)this._markStructsInUse(e.format);else if(e.isTemplate)e.format&&this._markStructsInUse(e.format);else{let n=this._getAlias(e.name);n&&this._markStructsInUse(n)}}_addCalls(e,n){var r;for(let o of e.calls){let s=(r=this._functions.get(o.name))===null||r===void 0?void 0:r.info;s&&n.add(s)}}findResource(e,n,r){if(r){for(let o of this.entry.compute)if(o.name===r){for(let s of o.resources)if(s.group==e&&s.binding==n)return s}for(let o of this.entry.vertex)if(o.name===r){for(let s of o.resources)if(s.group==e&&s.binding==n)return s}for(let o of this.entry.fragment)if(o.name===r){for(let s of o.resources)if(s.group==e&&s.binding==n)return s}}for(let o of this.uniforms)if(o.group==e&&o.binding==n)return o;for(let o of this.storage)if(o.group==e&&o.binding==n)return o;for(let o of this.textures)if(o.group==e&&o.binding==n)return o;for(let o of this.samplers)if(o.group==e&&o.binding==n)return o;return null}_findResource(e){for(let n of this.uniforms)if(n.name==e)return n;for(let n of this.storage)if(n.name==e)return n;for(let n of this.textures)if(n.name==e)return n;for(let n of this.samplers)if(n.name==e)return n;return null}_markStructsFromAST(e){let n=this.getTypeInfo(e,null);this._markStructsInUse(n)}_findResources(e,n){let r=[],o=this,s=[];return e.search(i=>{if(i instanceof ks)s.push({});else if(i instanceof Is)s.pop();else if(i instanceof hn){let a=i;n&&a.type!==null&&this._markStructsFromAST(a.type),s.length>0&&(s[s.length-1][a.name]=a)}else if(i instanceof en){let a=i;n&&a.type!==null&&this._markStructsFromAST(a.type)}else if(i instanceof bo){let a=i;n&&a.type!==null&&this._markStructsFromAST(a.type),s.length>0&&(s[s.length-1][a.name]=a)}else if(i instanceof mt){let a=i;if(s.length>0&&s[s.length-1][a.name])return;let c=o._findResource(a.name);c&&r.push(c)}else if(i instanceof xa){let a=i,c=o._functions.get(a.name);c&&(n&&(c.inUse=!0),e.calls.add(c.node),c.resources===null&&(c.resources=o._findResources(c.node,n)),r.push(...c.resources))}else if(i instanceof ga){let a=i,c=o._functions.get(a.name);c&&(n&&(c.inUse=!0),e.calls.add(c.node),c.resources===null&&(c.resources=o._findResources(c.node,n)),r.push(...c.resources))}}),[...new Map(r.map(i=>[i.name,i])).values()]}getBindGroups(){let e=[];function n(r,o){r>=e.length&&(e.length=r+1),e[r]===void 0&&(e[r]=[]),o>=e[r].length&&(e[r].length=o+1)}for(let r of this.uniforms)n(r.group,r.binding),e[r.group][r.binding]=r;for(let r of this.storage)n(r.group,r.binding),e[r.group][r.binding]=r;for(let r of this.textures)n(r.group,r.binding),e[r.group][r.binding]=r;for(let r of this.samplers)n(r.group,r.binding),e[r.group][r.binding]=r;return e}_getOutputs(e,n=void 0){if(n===void 0&&(n=[]),e instanceof mn)this._getStructOutputs(e,n);else{let r=this._getOutputInfo(e);r!==null&&n.push(r)}return n}_getStructOutputs(e,n){for(let r of e.members)if(r.type instanceof mn)this._getStructOutputs(r.type,n);else{let o=this._getAttribute(r,"location")||this._getAttribute(r,"builtin");if(o!==null){let s=this.getTypeInfo(r.type,r.type.attributes),i=this._parseInt(o.value),a=new Tu(r.name,s,o.name,i);n.push(a)}}}_getOutputInfo(e){let n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){let r=this.getTypeInfo(e,e.attributes),o=this._parseInt(n.value);return new Tu("",r,n.name,o)}return null}_getInputs(e,n=void 0){n===void 0&&(n=[]);for(let r of e)if(r.type instanceof mn)this._getStructInputs(r.type,n);else{let o=this._getInputInfo(r);o!==null&&n.push(o)}return n}_getStructInputs(e,n){for(let r of e.members)if(r.type instanceof mn)this._getStructInputs(r.type,n);else{let o=this._getInputInfo(r);o!==null&&n.push(o)}}_getInputInfo(e){let n=this._getAttribute(e,"location")||this._getAttribute(e,"builtin");if(n!==null){let r=this._getAttribute(e,"interpolation"),o=this.getTypeInfo(e.type,e.attributes),s=this._parseInt(n.value),i=new jh(e.name,o,n.name,s);return r!==null&&(i.interpolation=this._parseString(r.value)),i}return null}_parseString(e){return e instanceof Array&&(e=e[0]),e}_parseInt(e){e instanceof Array&&(e=e[0]);let n=parseInt(e);return isNaN(n)?e:n}_getAlias(e){for(let n of this.aliases)if(n.name==e)return n.type;return null}_getAliasInfo(e){return new Ph(e.name,this.getTypeInfo(e.type,null))}getTypeInfoByName(e){for(let n of this.structs)if(n.name==e)return n;for(let n of this.aliases)if(n.name==e)return n.type;return null}getTypeInfo(e,n=null){if(this._types.has(e))return this._types.get(e);if(e instanceof Vs){let o=e.type?this.getTypeInfo(e.type,e.attributes):null,s=new ha(e.name,o,n);return this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof vo){let o=e,s=o.format?this.getTypeInfo(o.format,o.attributes):null,i=new En(o.name,n);return i.format=s,i.count=o.count,this._types.set(e,i),this._updateTypeInfo(i),i}if(e instanceof mn){let o=e,s=new Bn(o.name,n);s.startLine=o.startLine,s.endLine=o.endLine;for(let i of o.members){let a=this.getTypeInfo(i.type,i.attributes);s.members.push(new wu(i.name,a,i.attributes))}return this._types.set(e,s),this._updateTypeInfo(s),s}if(e instanceof xo){let o=e,s=o.format instanceof O,i=o.format?s?this.getTypeInfo(o.format,null):new Bt(o.format,null):null,a=new tr(o.name,i,n,o.access);return this._types.set(e,a),this._updateTypeInfo(a),a}if(e instanceof S){let o=e,s=o.format?this.getTypeInfo(o.format,null):null,i=new tr(o.name,s,n,o.access);return this._types.set(e,i),this._updateTypeInfo(i),i}let r=new Bt(e.name,n);return this._types.set(e,r),this._updateTypeInfo(r),r}_updateTypeInfo(e){var n,r,o;let s=this._getTypeSize(e);if(e.size=(n=s?.size)!==null&&n!==void 0?n:0,e instanceof En&&e.format){let i=this._getTypeSize(e.format);e.stride=Math.max((r=i?.size)!==null&&r!==void 0?r:0,(o=i?.align)!==null&&o!==void 0?o:0),this._updateTypeInfo(e.format)}e instanceof ha&&this._updateTypeInfo(e.format),e instanceof Bn&&this._updateStructInfo(e)}_updateStructInfo(e){var n;let r=0,o=0,s=0,i=0;for(let a=0,c=e.members.length;a<c;++a){let u=e.members[a],l=this._getTypeSize(u);if(!l)continue;(n=this._getAlias(u.type.name))!==null&&n!==void 0||u.type;let f=l.align,m=l.size;r=this._roundUp(f,r+o),o=m,s=r,i=Math.max(i,f),u.offset=r,u.size=m,this._updateTypeInfo(u.type)}e.size=this._roundUp(i,s+o),e.align=i}_getTypeSize(e){var n,r;if(e==null)return null;let o=this._getAttributeNum(e.attributes,"size",0),s=this._getAttributeNum(e.attributes,"align",0);if(e instanceof wu&&(e=e.type),e instanceof Bt){let i=this._getAlias(e.name);i!==null&&(e=i)}{let i=t._typeInfo[e.name];if(i!==void 0){let a=((n=e.format)===null||n===void 0?void 0:n.name)==="f16"?2:1;return new Ms(Math.max(s,i.align/a),Math.max(o,i.size/a))}}{let i=t._typeInfo[e.name.substring(0,e.name.length-1)];if(i){let a=e.name[e.name.length-1]==="h"?2:1;return new Ms(Math.max(s,i.align/a),Math.max(o,i.size/a))}}if(e instanceof En){let i=e,a=8,c=8,u=this._getTypeSize(i.format);return u!==null&&(c=u.size,a=u.align),c=i.count*this._getAttributeNum((r=e?.attributes)!==null&&r!==void 0?r:null,"stride",this._roundUp(a,c)),o&&(c=o),new Ms(Math.max(s,a),Math.max(o,c))}if(e instanceof Bn){let i=0,a=0,c=0,u=0,l=0;for(let f of e.members){let m=this._getTypeSize(f.type);m!==null&&(i=Math.max(m.align,i),c=this._roundUp(m.align,c+u),u=m.size,l=c)}return a=this._roundUp(i,l+u),new Ms(Math.max(s,i),Math.max(o,a))}return null}_isUniformVar(e){return e instanceof hn&&e.storage=="uniform"}_isStorageVar(e){return e instanceof hn&&e.storage=="storage"}_isTextureVar(e){return e instanceof hn&&e.type!==null&&t._textureTypes.indexOf(e.type.name)!=-1}_isSamplerVar(e){return e instanceof hn&&e.type!==null&&t._samplerTypes.indexOf(e.type.name)!=-1}_getAttribute(e,n){let r=e;if(!r||!r.attributes)return null;let o=r.attributes;for(let s of o)if(s.name==n)return s;return null}_getAttributeNum(e,n,r){if(e===null)return r;for(let o of e)if(o.name==n){let s=o!==null&&o.value!==null?o.value:r;return s instanceof Array&&(s=s[0]),typeof s=="number"?s:typeof s=="string"?parseInt(s):r}return r}_roundUp(e,n){return Math.ceil(n/e)*e}};Ao._typeInfo={f16:{align:2,size:2},i32:{align:4,size:4},u32:{align:4,size:4},f32:{align:4,size:4},atomic:{align:4,size:4},vec2:{align:8,size:8},vec3:{align:16,size:12},vec4:{align:16,size:16},mat2x2:{align:8,size:16},mat3x2:{align:8,size:24},mat4x2:{align:8,size:32},mat2x3:{align:16,size:32},mat3x3:{align:16,size:48},mat4x3:{align:16,size:64},mat2x4:{align:16,size:32},mat3x4:{align:16,size:48},mat4x4:{align:16,size:64}},Ao._textureTypes=x.any_texture_type.map(t=>t.name),Ao._samplerTypes=x.sampler_type.map(t=>t.name);var ld=0,nd=class t{constructor(e,n,r){this.id=ld++,this.name=e,this.value=n,this.node=r}clone(){return new t(this.name,this.value,this.node)}},rd=class t{constructor(e){this.id=ld++,this.name=e.name,this.node=e}clone(){return new t(this.node)}},od=class t{constructor(e){this.parent=null,this.variables=new Map,this.functions=new Map,this.currentFunctionName="",this.id=ld++,e&&(this.parent=e,this.currentFunctionName=e.currentFunctionName)}getVariable(e){var n;return this.variables.has(e)?(n=this.variables.get(e))!==null&&n!==void 0?n:null:this.parent?this.parent.getVariable(e):null}getFunction(e){var n;return this.functions.has(e)?(n=this.functions.get(e))!==null&&n!==void 0?n:null:this.parent?this.parent.getFunction(e):null}createVariable(e,n,r){this.variables.set(e,new nd(e,n,r??null))}setVariable(e,n,r){let o=this.getVariable(e);o!==null?o.value=n:this.createVariable(e,n,r)}getVariableValue(e){var n;let r=this.getVariable(e);return(n=r?.value)!==null&&n!==void 0?n:null}clone(){return new t(this)}},sd=class{evalExpression(e,n){return null}getTypeInfo(e){return null}getVariableName(e,n){return""}},id=class{constructor(e){this.exec=e}getTypeInfo(e){return this.exec.getTypeInfo(e)}All(e,n){let r=this.exec.evalExpression(e.args[0],n),o=!0;if(r instanceof v)return r.data.forEach(s=>{s||(o=!1)}),new E(o?1:0,this.getTypeInfo("bool"));throw new Error(`All() expects a vector argument. Line ${e.line}`)}Any(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v){let o=r.data.some(s=>s);return new E(o?1:0,this.getTypeInfo("bool"))}throw new Error(`Any() expects a vector argument. Line ${e.line}`)}Select(e,n){let r=this.exec.evalExpression(e.args[2],n);if(!(r instanceof E))throw new Error(`Select() expects a bool condition. Line ${e.line}`);return r.value?this.exec.evalExpression(e.args[1],n):this.exec.evalExpression(e.args[0],n)}ArrayLength(e,n){let r=e.args[0];r instanceof Se&&(r=r.right);let o=this.exec.evalExpression(r,n);if(o instanceof Ue&&o.typeInfo.size===0){let s=o.typeInfo,i=o.buffer.byteLength/s.stride;return new E(i,this.getTypeInfo("u32"))}return new E(o.typeInfo.size,this.getTypeInfo("u32"))}Abs(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.abs(s)),r.typeInfo);let o=r;return new E(Math.abs(o.value),o.typeInfo)}Acos(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.acos(s)),r.typeInfo);let o=r;return new E(Math.acos(o.value),r.typeInfo)}Acosh(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.acosh(s)),r.typeInfo);let o=r;return new E(Math.acosh(o.value),r.typeInfo)}Asin(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.asin(s)),r.typeInfo);let o=r;return new E(Math.asin(o.value),r.typeInfo)}Asinh(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.asinh(s)),r.typeInfo);let o=r;return new E(Math.asinh(o.value),r.typeInfo)}Atan(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.atan(s)),r.typeInfo);let o=r;return new E(Math.atan(o.value),r.typeInfo)}Atanh(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.atanh(s)),r.typeInfo);let o=r;return new E(Math.atanh(o.value),r.typeInfo)}Atan2(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n);if(r instanceof v&&o instanceof v)return new v(r.data.map((a,c)=>Math.atan2(a,o.data[c])),r.typeInfo);let s=r,i=o;return new E(Math.atan2(s.value,i.value),r.typeInfo)}Ceil(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.ceil(s)),r.typeInfo);let o=r;return new E(Math.ceil(o.value),r.typeInfo)}_clamp(e,n,r){return Math.min(Math.max(e,n),r)}Clamp(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(r instanceof v&&o instanceof v&&s instanceof v)return new v(r.data.map((u,l)=>this._clamp(u,o.data[l],s.data[l])),r.typeInfo);let i=r,a=o,c=s;return new E(this._clamp(i.value,a.value,c.value),r.typeInfo)}Cos(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.cos(s)),r.typeInfo);let o=r;return new E(Math.cos(o.value),r.typeInfo)}Cosh(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.cosh(s)),r.typeInfo);let o=r;return new E(Math.cos(o.value),r.typeInfo)}CountLeadingZeros(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.clz32(s)),r.typeInfo);let o=r;return new E(Math.clz32(o.value),r.typeInfo)}_countOneBits(e){let n=0;for(;e!==0;)1&e&&n++,e>>=1;return n}CountOneBits(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>this._countOneBits(s)),r.typeInfo);let o=r;return new E(this._countOneBits(o.value),r.typeInfo)}_countTrailingZeros(e){if(e===0)return 32;let n=0;for(;!(1&e);)e>>=1,n++;return n}CountTrailingZeros(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>this._countTrailingZeros(s)),r.typeInfo);let o=r;return new E(this._countTrailingZeros(o.value),r.typeInfo)}Cross(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n);if(r instanceof v&&o instanceof v){if(r.data.length!==3||o.data.length!==3)return console.error(`Cross() expects 3D vectors. Line ${e.line}`),null;let s=r.data,i=o.data;return new v([s[1]*i[2]-i[1]*s[2],s[2]*i[0]-i[2]*s[0],s[0]*i[1]-i[0]*s[1]],r.typeInfo)}return console.error(`Cross() expects vector arguments. Line ${e.line}`),null}Degrees(e,n){let r=this.exec.evalExpression(e.args[0],n),o=180/Math.PI;return r instanceof v?new v(r.data.map(s=>s*o),r.typeInfo):new E(r.value*o,this.getTypeInfo("f32"))}Determinant(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof z){let o=r.data,s=r.typeInfo.getTypeName(),i=s.endsWith("h")?this.getTypeInfo("f16"):this.getTypeInfo("f32");if(s==="mat2x2"||s==="mat2x2f"||s==="mat2x2h")return new E(o[0]*o[3]-o[1]*o[2],i);if(s==="mat2x3"||s==="mat2x3f"||s==="mat2x3h")return new E(o[0]*(o[4]*o[8]-o[5]*o[7])-o[1]*(o[3]*o[8]-o[5]*o[6])+o[2]*(o[3]*o[7]-o[4]*o[6]),i);if(s==="mat2x4"||s==="mat2x4f"||s==="mat2x4h")console.error(`TODO: Determinant for ${s}`);else if(s==="mat3x2"||s==="mat3x2f"||s==="mat3x2h")console.error(`TODO: Determinant for ${s}`);else{if(s==="mat3x3"||s==="mat3x3f"||s==="mat3x3h")return new E(o[0]*(o[4]*o[8]-o[5]*o[7])-o[1]*(o[3]*o[8]-o[5]*o[6])+o[2]*(o[3]*o[7]-o[4]*o[6]),i);s==="mat3x4"||s==="mat3x4f"||s==="mat3x4h"||s==="mat4x2"||s==="mat4x2f"||s==="mat4x2h"||s==="mat4x3"||s==="mat4x3f"||s==="mat4x3h"?console.error(`TODO: Determinant for ${s}`):s!=="mat4x4"&&s!=="mat4x4f"&&s!=="mat4x4h"||console.error(`TODO: Determinant for ${s}`)}}return console.error(`Determinant expects a matrix argument. Line ${e.line}`),null}Distance(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n);if(r instanceof v&&o instanceof v){let a=0;for(let c=0;c<r.data.length;++c)a+=(r.data[c]-o.data[c])*(r.data[c]-o.data[c]);return new E(Math.sqrt(a),this.getTypeInfo("f32"))}let s=r,i=o;return new E(Math.abs(s.value-i.value),r.typeInfo)}_dot(e,n){let r=0;for(let o=0;o<e.length;++o)r+=n[o]*e[o];return r}Dot(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n);return r instanceof v&&o instanceof v?new E(this._dot(r.data,o.data),this.getTypeInfo("f32")):(console.error(`Dot() expects vector arguments. Line ${e.line}`),null)}Dot4U8Packed(e,n){return console.error(`TODO: dot4U8Packed. Line ${e.line}`),null}Dot4I8Packed(e,n){return console.error(`TODO: dot4I8Packed. Line ${e.line}`),null}Exp(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.exp(s)),r.typeInfo);let o=r;return new E(Math.exp(o.value),r.typeInfo)}Exp2(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.pow(2,s)),r.typeInfo);let o=r;return new E(Math.pow(2,o.value),r.typeInfo)}ExtractBits(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(o.typeInfo.name!=="u32"&&o.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 offset argument. Line ${e.line}`),null;if(s.typeInfo.name!=="u32"&&s.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 count argument. Line ${e.line}`),null;let i=o.value,a=s.value;if(r instanceof v)return new v(r.data.map(u=>u>>i&(1<<a)-1),r.typeInfo);if(r.typeInfo.name!=="i32"&&r.typeInfo.name!=="x32")return console.error(`ExtractBits() expects an i32 argument. Line ${e.line}`),null;let c=r.value;return new E(c>>i&(1<<a)-1,this.getTypeInfo("i32"))}FaceForward(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(r instanceof v&&o instanceof v&&s instanceof v){let i=this._dot(o.data,s.data);return new v(i<0?Array.from(r.data):r.data.map(a=>-a),r.typeInfo)}return console.error(`FaceForward() expects vector arguments. Line ${e.line}`),null}_firstLeadingBit(e){return e===0?-1:31-Math.clz32(e)}FirstLeadingBit(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>this._firstLeadingBit(s)),r.typeInfo);let o=r;return new E(this._firstLeadingBit(o.value),r.typeInfo)}_firstTrailingBit(e){return e===0?-1:Math.log2(e&-e)}FirstTrailingBit(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>this._firstTrailingBit(s)),r.typeInfo);let o=r;return new E(this._firstTrailingBit(o.value),r.typeInfo)}Floor(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.floor(s)),r.typeInfo);let o=r;return new E(Math.floor(o.value),r.typeInfo)}Fma(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(r instanceof v&&o instanceof v&&s instanceof v)return r.data.length!==o.data.length||r.data.length!==s.data.length?(console.error(`Fma() expects vectors of the same length. Line ${e.line}`),null):new v(r.data.map((u,l)=>u*o.data[l]+s.data[l]),r.typeInfo);let i=r,a=o,c=s;return new E(i.value*a.value+c.value,i.typeInfo)}Fract(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>s-Math.floor(s)),r.typeInfo);let o=r;return new E(o.value-Math.floor(o.value),r.typeInfo)}Frexp(e,n){return console.error(`TODO: frexp. Line ${e.line}`),null}InsertBits(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n),i=this.exec.evalExpression(e.args[3],n);if(s.typeInfo.name!=="u32"&&s.typeInfo.name!=="x32")return console.error(`InsertBits() expects an i32 offset argument. Line ${e.line}`),null;let a=s.value,c=(1<<i.value)-1<<a,u=~c;if(r instanceof v&&o instanceof v)return new v(r.data.map((m,d)=>m&u|o.data[d]<<a&c),r.typeInfo);let l=r.value,f=o.value;return new E(l&u|f<<a&c,r.typeInfo)}InverseSqrt(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>1/Math.sqrt(s)),r.typeInfo);let o=r;return new E(1/Math.sqrt(o.value),r.typeInfo)}Ldexp(e,n){return console.error(`TODO: ldexp. Line ${e.line}`),null}Length(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v){let s=0;return r.data.forEach(i=>{s+=i*i}),new E(Math.sqrt(s),this.getTypeInfo("f32"))}let o=r;return new E(Math.abs(o.value),r.typeInfo)}Log(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.log(s)),r.typeInfo);let o=r;return new E(Math.log(o.value),r.typeInfo)}Log2(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.log2(s)),r.typeInfo);let o=r;return new E(Math.log2(o.value),r.typeInfo)}Max(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n);if(r instanceof v&&o instanceof v)return new v(r.data.map((a,c)=>Math.max(a,o.data[c])),r.typeInfo);let s=r,i=o;return new E(Math.max(s.value,i.value),r.typeInfo)}Min(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n);if(r instanceof v&&o instanceof v)return new v(r.data.map((a,c)=>Math.min(a,o.data[c])),r.typeInfo);let s=r,i=o;return new E(Math.min(s.value,i.value),r.typeInfo)}Mix(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(r instanceof v&&o instanceof v&&s instanceof v)return new v(r.data.map((c,u)=>r.data[u]*(1-s.data[u])+o.data[u]*s.data[u]),r.typeInfo);let i=o,a=s;return new E(r.value*(1-a.value)+i.value*a.value,r.typeInfo)}Modf(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n);if(r instanceof v&&o instanceof v)return new v(r.data.map((i,a)=>i%o.data[a]),r.typeInfo);let s=o;return new E(r.value%s.value,r.typeInfo)}Normalize(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v){let o=this.Length(e,n).value;return new v(r.data.map(s=>s/o),r.typeInfo)}return console.error(`Normalize() expects a vector argument. Line ${e.line}`),null}Pow(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n);if(r instanceof v&&o instanceof v)return new v(r.data.map((a,c)=>Math.pow(a,o.data[c])),r.typeInfo);let s=r,i=o;return new E(Math.pow(s.value,i.value),r.typeInfo)}QuantizeToF16(e,n){let r=this.exec.evalExpression(e.args[0],n);return r instanceof v?new v(r.data.map(o=>o),r.typeInfo):new E(r.value,r.typeInfo)}Radians(e,n){let r=this.exec.evalExpression(e.args[0],n);return r instanceof v?new v(r.data.map(o=>o*Math.PI/180),r.typeInfo):new E(r.value*Math.PI/180,this.getTypeInfo("f32"))}Reflect(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n);if(r instanceof v&&o instanceof v){let s=this._dot(r.data,o.data);return new v(r.data.map((i,a)=>i-2*s*o.data[a]),r.typeInfo)}return console.error(`Reflect() expects vector arguments. Line ${e.line}`),null}Refract(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(r instanceof v&&o instanceof v&&s instanceof E){let i=this._dot(o.data,r.data);return new v(r.data.map((a,c)=>{let u=1-s.value*s.value*(1-i*i);if(u<0)return 0;let l=Math.sqrt(u);return s.value*a-(s.value*i+l)*o.data[c]}),r.typeInfo)}return console.error(`Refract() expects vector arguments and a scalar argument. Line ${e.line}`),null}ReverseBits(e,n){return console.error(`TODO: reverseBits. Line ${e.line}`),null}Round(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.round(s)),r.typeInfo);let o=r;return new E(Math.round(o.value),r.typeInfo)}Saturate(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.min(Math.max(s,0),1)),r.typeInfo);let o=r;return new E(Math.min(Math.max(o.value,0),1),r.typeInfo)}Sign(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.sign(s)),r.typeInfo);let o=r;return new E(Math.sign(o.value),r.typeInfo)}Sin(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.sin(s)),r.typeInfo);let o=r;return new E(Math.sin(o.value),r.typeInfo)}Sinh(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.sinh(s)),r.typeInfo);let o=r;return new E(Math.sinh(o.value),r.typeInfo)}_smoothstep(e,n,r){let o=Math.min(Math.max((r-e)/(n-e),0),1);return o*o*(3-2*o)}SmoothStep(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n),s=this.exec.evalExpression(e.args[2],n);if(s instanceof v&&r instanceof v&&o instanceof v)return new v(s.data.map((u,l)=>this._smoothstep(r.data[l],o.data[l],u)),s.typeInfo);let i=r,a=o,c=s;return new E(this._smoothstep(i.value,a.value,c.value),s.typeInfo)}Sqrt(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.sqrt(s)),r.typeInfo);let o=r;return new E(Math.sqrt(o.value),r.typeInfo)}Step(e,n){let r=this.exec.evalExpression(e.args[0],n),o=this.exec.evalExpression(e.args[1],n);if(o instanceof v&&r instanceof v)return new v(o.data.map((i,a)=>i<r.data[a]?0:1),o.typeInfo);let s=r;return new E(o.value<s.value?0:1,s.typeInfo)}Tan(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.tan(s)),r.typeInfo);let o=r;return new E(Math.tan(o.value),r.typeInfo)}Tanh(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.tanh(s)),r.typeInfo);let o=r;return new E(Math.tanh(o.value),r.typeInfo)}_getTransposeType(e){let n=e.getTypeName();return n==="mat2x2f"||n==="mat2x2h"?e:n==="mat2x3f"?this.getTypeInfo("mat3x2f"):n==="mat2x3h"?this.getTypeInfo("mat3x2h"):n==="mat2x4f"?this.getTypeInfo("mat4x2f"):n==="mat2x4h"?this.getTypeInfo("mat4x2h"):n==="mat3x2f"?this.getTypeInfo("mat2x3f"):n==="mat3x2h"?this.getTypeInfo("mat2x3h"):n==="mat3x3f"||n==="mat3x3h"?e:n==="mat3x4f"?this.getTypeInfo("mat4x3f"):n==="mat3x4h"?this.getTypeInfo("mat4x3h"):n==="mat4x2f"?this.getTypeInfo("mat2x4f"):n==="mat4x2h"?this.getTypeInfo("mat2x4h"):n==="mat4x3f"?this.getTypeInfo("mat3x4f"):n==="mat4x3h"?this.getTypeInfo("mat3x4h"):(n==="mat4x4f"||n==="mat4x4h"||console.error(`Invalid matrix type ${n}`),e)}Transpose(e,n){let r=this.exec.evalExpression(e.args[0],n);if(!(r instanceof z))return console.error(`Transpose() expects a matrix argument. Line ${e.line}`),null;let o=this._getTransposeType(r.typeInfo);if(r.typeInfo.name==="mat2x2"||r.typeInfo.name==="mat2x2f"||r.typeInfo.name==="mat2x2h"){let s=r.data;return new z([s[0],s[2],s[1],s[3]],o)}if(r.typeInfo.name==="mat2x3"||r.typeInfo.name==="mat2x3f"||r.typeInfo.name==="mat2x3h"){let s=r.data;return new z([s[0],s[3],s[6],s[1],s[4],s[7]],o)}if(r.typeInfo.name==="mat2x4"||r.typeInfo.name==="mat2x4f"||r.typeInfo.name==="mat2x4h"){let s=r.data;return new z([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13]],o)}if(r.typeInfo.name==="mat3x2"||r.typeInfo.name==="mat3x2f"||r.typeInfo.name==="mat3x2h"){let s=r.data;return new z([s[0],s[3],s[1],s[4],s[2],s[5]],o)}if(r.typeInfo.name==="mat3x3"||r.typeInfo.name==="mat3x3f"||r.typeInfo.name==="mat3x3h"){let s=r.data;return new z([s[0],s[3],s[6],s[1],s[4],s[7],s[2],s[5],s[8]],o)}if(r.typeInfo.name==="mat3x4"||r.typeInfo.name==="mat3x4f"||r.typeInfo.name==="mat3x4h"){let s=r.data;return new z([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13],s[2],s[6],s[10],s[14]],o)}if(r.typeInfo.name==="mat4x2"||r.typeInfo.name==="mat4x2f"||r.typeInfo.name==="mat4x2h"){let s=r.data;return new z([s[0],s[4],s[1],s[5],s[2],s[6]],o)}if(r.typeInfo.name==="mat4x3"||r.typeInfo.name==="mat4x3f"||r.typeInfo.name==="mat4x3h"){let s=r.data;return new z([s[0],s[4],s[8],s[1],s[5],s[9],s[2],s[6],s[10]],o)}if(r.typeInfo.name==="mat4x4"||r.typeInfo.name==="mat4x4f"||r.typeInfo.name==="mat4x4h"){let s=r.data;return new z([s[0],s[4],s[8],s[12],s[1],s[5],s[9],s[13],s[2],s[6],s[10],s[14],s[3],s[7],s[11],s[15]],o)}return console.error(`Invalid matrix type ${r.typeInfo.name}`),null}Trunc(e,n){let r=this.exec.evalExpression(e.args[0],n);if(r instanceof v)return new v(r.data.map(s=>Math.trunc(s)),r.typeInfo);let o=r;return new E(Math.trunc(o.value),r.typeInfo)}Dpdx(e,n){return console.error(`TODO: dpdx. Line ${e.line}`),null}DpdxCoarse(e,n){return console.error(`TODO: dpdxCoarse. Line ${e.line}`),null}DpdxFine(e,n){return console.error("TODO: dpdxFine"),null}Dpdy(e,n){return console.error("TODO: dpdy"),null}DpdyCoarse(e,n){return console.error("TODO: dpdyCoarse"),null}DpdyFine(e,n){return console.error("TODO: dpdyFine"),null}Fwidth(e,n){return console.error("TODO: fwidth"),null}FwidthCoarse(e,n){return console.error("TODO: fwidthCoarse"),null}FwidthFine(e,n){return console.error("TODO: fwidthFine"),null}TextureDimensions(e,n){let r=e.args[0],o=e.args.length>1?this.exec.evalExpression(e.args[1],n).value:0;if(r instanceof mt){let s=r.name,i=n.getVariableValue(s);if(i instanceof er){if(o<0||o>=i.mipLevelCount)return console.error(`Invalid mip level for textureDimensions. Line ${e.line}`),null;let a=i.getMipLevelSize(o),c=i.dimension;return c==="1d"?new E(a[0],this.getTypeInfo("u32")):c==="3d"?new v(a,this.getTypeInfo("vec3u")):c==="2d"?new v(a.slice(0,2),this.getTypeInfo("vec2u")):(console.error(`Invalid texture dimension ${c} not found. Line ${e.line}`),null)}return console.error(`Texture ${s} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureDimensions. Line ${e.line}`),null}TextureGather(e,n){return console.error("TODO: textureGather"),null}TextureGatherCompare(e,n){return console.error("TODO: textureGatherCompare"),null}TextureLoad(e,n){let r=e.args[0],o=this.exec.evalExpression(e.args[1],n),s=e.args.length>2?this.exec.evalExpression(e.args[2],n).value:0;if(!(o instanceof v)||o.data.length!==2)return console.error(`Invalid UV argument for textureLoad. Line ${e.line}`),null;if(r instanceof mt){let i=r.name,a=n.getVariableValue(i);if(a instanceof er){let c=Math.floor(o.data[0]),u=Math.floor(o.data[1]);if(c<0||c>=a.width||u<0||u>=a.height)return console.error(`Texture ${i} out of bounds. Line ${e.line}`),null;let l=a.getPixel(c,u,0,s);return l===null?(console.error(`Invalid texture format for textureLoad. Line ${e.line}`),null):new v(l,this.getTypeInfo("vec4f"))}return console.error(`Texture ${i} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureLoad. Line ${e.line}`),null}TextureNumLayers(e,n){let r=e.args[0];if(r instanceof mt){let o=r.name,s=n.getVariableValue(o);return s instanceof er?new E(s.depthOrArrayLayers,this.getTypeInfo("u32")):(console.error(`Texture ${o} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLayers. Line ${e.line}`),null}TextureNumLevels(e,n){let r=e.args[0];if(r instanceof mt){let o=r.name,s=n.getVariableValue(o);return s instanceof er?new E(s.mipLevelCount,this.getTypeInfo("u32")):(console.error(`Texture ${o} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumLevels. Line ${e.line}`),null}TextureNumSamples(e,n){let r=e.args[0];if(r instanceof mt){let o=r.name,s=n.getVariableValue(o);return s instanceof er?new E(s.sampleCount,this.getTypeInfo("u32")):(console.error(`Texture ${o} not found. Line ${e.line}`),null)}return console.error(`Invalid texture argument for textureNumSamples. Line ${e.line}`),null}TextureSample(e,n){return console.error("TODO: textureSample"),null}TextureSampleBias(e,n){return console.error("TODO: textureSampleBias"),null}TextureSampleCompare(e,n){return console.error("TODO: textureSampleCompare"),null}TextureSampleCompareLevel(e,n){return console.error("TODO: textureSampleCompareLevel"),null}TextureSampleGrad(e,n){return console.error("TODO: textureSampleGrad"),null}TextureSampleLevel(e,n){return console.error("TODO: textureSampleLevel"),null}TextureSampleBaseClampToEdge(e,n){return console.error("TODO: textureSampleBaseClampToEdge"),null}TextureStore(e,n){let r=e.args[0],o=this.exec.evalExpression(e.args[1],n),s=e.args.length===4?this.exec.evalExpression(e.args[2],n).value:0,i=e.args.length===4?this.exec.evalExpression(e.args[3],n).data:this.exec.evalExpression(e.args[2],n).data;if(i.length!==4)return console.error(`Invalid value argument for textureStore. Line ${e.line}`),null;if(!(o instanceof v)||o.data.length!==2)return console.error(`Invalid UV argument for textureStore. Line ${e.line}`),null;if(r instanceof mt){let a=r.name,c=n.getVariableValue(a);if(c instanceof er){let u=c.getMipLevelSize(0),l=Math.floor(o.data[0]),f=Math.floor(o.data[1]);return l<0||l>=u[0]||f<0||f>=u[1]?(console.error(`Texture ${a} out of bounds. Line ${e.line}`),null):(c.setPixel(l,f,0,s,Array.from(i)),null)}return console.error(`Texture ${a} not found. Line ${e.line}`),null}return console.error(`Invalid texture argument for textureStore. Line ${e.line}`),null}AtomicLoad(e,n){let r=e.args[0];r instanceof Se&&(r=r.right);let o=this.exec.getVariableName(r,n);return n.getVariable(o).value.getSubData(this.exec,r.postfix,n)}AtomicStore(e,n){let r=e.args[0];r instanceof Se&&(r=r.right);let o=this.exec.getVariableName(r,n),s=n.getVariable(o),i=e.args[1],a=this.exec.evalExpression(i,n),c=s.value.getSubData(this.exec,r.postfix,n);return c instanceof E&&a instanceof E&&(c.value=a.value),s.value instanceof Ue&&s.value.setDataValue(this.exec,c,r.postfix,n),null}AtomicAdd(e,n){let r=e.args[0];r instanceof Se&&(r=r.right);let o=this.exec.getVariableName(r,n),s=n.getVariable(o),i=e.args[1],a=this.exec.evalExpression(i,n),c=s.value.getSubData(this.exec,r.postfix,n),u=new E(c.value,c.typeInfo);return c instanceof E&&a instanceof E&&(c.value+=a.value),s.value instanceof Ue&&s.value.setDataValue(this.exec,c,r.postfix,n),u}AtomicSub(e,n){let r=e.args[0];r instanceof Se&&(r=r.right);let o=this.exec.getVariableName(r,n),s=n.getVariable(o),i=e.args[1],a=this.exec.evalExpression(i,n),c=s.value.getSubData(this.exec,r.postfix,n),u=new E(c.value,c.typeInfo);return c instanceof E&&a instanceof E&&(c.value-=a.value),s.value instanceof Ue&&s.value.setDataValue(this.exec,c,r.postfix,n),u}AtomicMax(e,n){let r=e.args[0];r instanceof Se&&(r=r.right);let o=this.exec.getVariableName(r,n),s=n.getVariable(o),i=e.args[1],a=this.exec.evalExpression(i,n),c=s.value.getSubData(this.exec,r.postfix,n),u=new E(c.value,c.typeInfo);return c instanceof E&&a instanceof E&&(c.value=Math.max(c.value,a.value)),s.value instanceof Ue&&s.value.setDataValue(this.exec,c,r.postfix,n),u}AtomicMin(e,n){let r=e.args[0];r instanceof Se&&(r=r.right);let o=this.exec.getVariableName(r,n),s=n.getVariable(o),i=e.args[1],a=this.exec.evalExpression(i,n),c=s.value.getSubData(this.exec,r.postfix,n),u=new E(c.value,c.typeInfo);return c instanceof E&&a instanceof E&&(c.value=Math.min(c.value,a.value)),s.value instanceof Ue&&s.value.setDataValue(this.exec,c,r.postfix,n),u}AtomicAnd(e,n){let r=e.args[0];r instanceof Se&&(r=r.right);let o=this.exec.getVariableName(r,n),s=n.getVariable(o),i=e.args[1],a=this.exec.evalExpression(i,n),c=s.value.getSubData(this.exec,r.postfix,n),u=new E(c.value,c.typeInfo);return c instanceof E&&a instanceof E&&(c.value=c.value&a.value),s.value instanceof Ue&&s.value.setDataValue(this.exec,c,r.postfix,n),u}AtomicOr(e,n){let r=e.args[0];r instanceof Se&&(r=r.right);let o=this.exec.getVariableName(r,n),s=n.getVariable(o),i=e.args[1],a=this.exec.evalExpression(i,n),c=s.value.getSubData(this.exec,r.postfix,n),u=new E(c.value,c.typeInfo);return c instanceof E&&a instanceof E&&(c.value=c.value|a.value),s.value instanceof Ue&&s.value.setDataValue(this.exec,c,r.postfix,n),u}AtomicXor(e,n){let r=e.args[0];r instanceof Se&&(r=r.right);let o=this.exec.getVariableName(r,n),s=n.getVariable(o),i=e.args[1],a=this.exec.evalExpression(i,n),c=s.value.getSubData(this.exec,r.postfix,n),u=new E(c.value,c.typeInfo);return c instanceof E&&a instanceof E&&(c.value=c.value^a.value),s.value instanceof Ue&&s.value.setDataValue(this.exec,c,r.postfix,n),u}AtomicExchange(e,n){let r=e.args[0];r instanceof Se&&(r=r.right);let o=this.exec.getVariableName(r,n),s=n.getVariable(o),i=e.args[1],a=this.exec.evalExpression(i,n),c=s.value.getSubData(this.exec,r.postfix,n),u=new E(c.value,c.typeInfo);return c instanceof E&&a instanceof E&&(c.value=a.value),s.value instanceof Ue&&s.value.setDataValue(this.exec,c,r.postfix,n),u}AtomicCompareExchangeWeak(e,n){return console.error("TODO: atomicCompareExchangeWeak"),null}Pack4x8snorm(e,n){return console.error("TODO: pack4x8snorm"),null}Pack4x8unorm(e,n){return console.error("TODO: pack4x8unorm"),null}Pack4xI8(e,n){return console.error("TODO: pack4xI8"),null}Pack4xU8(e,n){return console.error("TODO: pack4xU8"),null}Pack4x8Clamp(e,n){return console.error("TODO: pack4x8Clamp"),null}Pack4xU8Clamp(e,n){return console.error("TODO: pack4xU8Clamp"),null}Pack2x16snorm(e,n){return console.error("TODO: pack2x16snorm"),null}Pack2x16unorm(e,n){return console.error("TODO: pack2x16unorm"),null}Pack2x16float(e,n){return console.error("TODO: pack2x16float"),null}Unpack4x8snorm(e,n){return console.error("TODO: unpack4x8snorm"),null}Unpack4x8unorm(e,n){return console.error("TODO: unpack4x8unorm"),null}Unpack4xI8(e,n){return console.error("TODO: unpack4xI8"),null}Unpack4xU8(e,n){return console.error("TODO: unpack4xU8"),null}Unpack2x16snorm(e,n){return console.error("TODO: unpack2x16snorm"),null}Unpack2x16unorm(e,n){return console.error("TODO: unpack2x16unorm"),null}Unpack2x16float(e,n){return console.error("TODO: unpack2x16float"),null}StorageBarrier(e,n){return null}TextureBarrier(e,n){return null}WorkgroupBarrier(e,n){return null}WorkgroupUniformLoad(e,n){return null}SubgroupAdd(e,n){return console.error("TODO: subgroupAdd"),null}SubgroupExclusiveAdd(e,n){return console.error("TODO: subgroupExclusiveAdd"),null}SubgroupInclusiveAdd(e,n){return console.error("TODO: subgroupInclusiveAdd"),null}SubgroupAll(e,n){return console.error("TODO: subgroupAll"),null}SubgroupAnd(e,n){return console.error("TODO: subgroupAnd"),null}SubgroupAny(e,n){return console.error("TODO: subgroupAny"),null}SubgroupBallot(e,n){return console.error("TODO: subgroupBallot"),null}SubgroupBroadcast(e,n){return console.error("TODO: subgroupBroadcast"),null}SubgroupBroadcastFirst(e,n){return console.error("TODO: subgroupBroadcastFirst"),null}SubgroupElect(e,n){return console.error("TODO: subgroupElect"),null}SubgroupMax(e,n){return console.error("TODO: subgroupMax"),null}SubgroupMin(e,n){return console.error("TODO: subgroupMin"),null}SubgroupMul(e,n){return console.error("TODO: subgroupMul"),null}SubgroupExclusiveMul(e,n){return console.error("TODO: subgroupExclusiveMul"),null}SubgroupInclusiveMul(e,n){return console.error("TODO: subgroupInclusiveMul"),null}SubgroupOr(e,n){return console.error("TODO: subgroupOr"),null}SubgroupShuffle(e,n){return console.error("TODO: subgroupShuffle"),null}SubgroupShuffleDown(e,n){return console.error("TODO: subgroupShuffleDown"),null}SubgroupShuffleUp(e,n){return console.error("TODO: subgroupShuffleUp"),null}SubgroupShuffleXor(e,n){return console.error("TODO: subgroupShuffleXor"),null}SubgroupXor(e,n){return console.error("TODO: subgroupXor"),null}QuadBroadcast(e,n){return console.error("TODO: quadBroadcast"),null}QuadSwapDiagonal(e,n){return console.error("TODO: quadSwapDiagonal"),null}QuadSwapX(e,n){return console.error("TODO: quadSwapX"),null}QuadSwapY(e,n){return console.error("TODO: quadSwapY"),null}},Hh={vec2:2,vec2f:2,vec2i:2,vec2u:2,vec2b:2,vec2h:2,vec3:3,vec3f:3,vec3i:3,vec3u:3,vec3b:3,vec3h:3,vec4:4,vec4f:4,vec4i:4,vec4u:4,vec4b:4,vec4h:4},ft={mat2x2:[2,2,4],mat2x2f:[2,2,4],mat2x2h:[2,2,4],mat2x3:[2,3,6],mat2x3f:[2,3,6],mat2x3h:[2,3,6],mat2x4:[2,4,8],mat2x4f:[2,4,8],mat2x4h:[2,4,8],mat3x2:[3,2,6],mat3x2f:[3,2,6],mat3x2h:[3,2,6],mat3x3:[3,3,9],mat3x3f:[3,3,9],mat3x3h:[3,3,9],mat3x4:[3,4,12],mat3x4f:[3,4,12],mat3x4h:[3,4,12],mat4x2:[4,2,8],mat4x2f:[4,2,8],mat4x2h:[4,2,8],mat4x3:[4,3,12],mat4x3f:[4,3,12],mat4x3h:[4,3,12],mat4x4:[4,4,16],mat4x4f:[4,4,16],mat4x4h:[4,4,16]},Ds=class t extends sd{constructor(e,n){var r;super(),this.ast=e??[],this.reflection=new Ao,this.reflection.updateAST(this.ast),this.context=(r=n?.clone())!==null&&r!==void 0?r:new od,this.builtins=new id(this),this.typeInfo={bool:this.getTypeInfo(O.bool),i32:this.getTypeInfo(O.i32),u32:this.getTypeInfo(O.u32),f32:this.getTypeInfo(O.f32),f16:this.getTypeInfo(O.f16),vec2f:this.getTypeInfo(S.vec2f),vec2u:this.getTypeInfo(S.vec2u),vec2i:this.getTypeInfo(S.vec2i),vec2h:this.getTypeInfo(S.vec2h),vec3f:this.getTypeInfo(S.vec3f),vec3u:this.getTypeInfo(S.vec3u),vec3i:this.getTypeInfo(S.vec3i),vec3h:this.getTypeInfo(S.vec3h),vec4f:this.getTypeInfo(S.vec4f),vec4u:this.getTypeInfo(S.vec4u),vec4i:this.getTypeInfo(S.vec4i),vec4h:this.getTypeInfo(S.vec4h),mat2x2f:this.getTypeInfo(S.mat2x2f),mat2x3f:this.getTypeInfo(S.mat2x3f),mat2x4f:this.getTypeInfo(S.mat2x4f),mat3x2f:this.getTypeInfo(S.mat3x2f),mat3x3f:this.getTypeInfo(S.mat3x3f),mat3x4f:this.getTypeInfo(S.mat3x4f),mat4x2f:this.getTypeInfo(S.mat4x2f),mat4x3f:this.getTypeInfo(S.mat4x3f),mat4x4f:this.getTypeInfo(S.mat4x4f)}}getVariableValue(e){var n,r;let o=(r=(n=this.context.getVariable(e))===null||n===void 0?void 0:n.value)!==null&&r!==void 0?r:null;if(o===null)return null;if(o instanceof E)return o.value;if(o instanceof v||o instanceof z)return Array.from(o.data);if(o instanceof Ue&&o.typeInfo instanceof En){if(o.typeInfo.format.name==="u32")return Array.from(new Uint32Array(o.buffer,o.offset,o.typeInfo.count));if(o.typeInfo.format.name==="i32")return Array.from(new Int32Array(o.buffer,o.offset,o.typeInfo.count));if(o.typeInfo.format.name==="f32")return Array.from(new Float32Array(o.buffer,o.offset,o.typeInfo.count))}return console.error(`Unsupported return variable type ${o.typeInfo.name}`),null}execute(e){(e=e??{}).constants&&this._setOverrides(e.constants,this.context),this._execStatements(this.ast,this.context)}dispatchWorkgroups(e,n,r,o){let s=this.context.clone();(o=o??{}).constants&&this._setOverrides(o.constants,s),this._execStatements(this.ast,s);let i=s.getFunction(e);if(!i)return void console.error(`Function ${e} not found`);if(typeof n=="number")n=[n,1,1];else{if(n.length===0)return void console.error("Invalid dispatch count");n.length===1?n=[n[0],1,1]:n.length===2?n=[n[0],n[1],1]:n.length>3&&(n=[n[0],n[1],n[2]])}let a=n[0],c=n[1],u=n[2],l=this.getTypeInfo("vec3u");s.setVariable("@num_workgroups",new v(n,l));let f=this.reflection.getFunctionInfo(e);f===null&&console.error(`Function ${e} not found in reflection data`);for(let m in r)for(let d in r[m]){let p=r[m][d];s.variables.forEach(b=>{var w;let h=b.node;if(h?.attributes){let g=null,y=null;for(let A of h.attributes)A.name==="binding"?g=A.value:A.name==="group"&&(y=A.value);if(d==g&&m==y){let A=!1;for(let C of f.resources)if(C.name===b.name&&C.group===parseInt(m)&&C.binding===parseInt(d)){A=!0;break}if(A)if(p.texture!==void 0&&p.descriptor!==void 0){let C=new er(p.texture,this.getTypeInfo(h.type),p.descriptor,(w=p.texture.view)!==null&&w!==void 0?w:null);b.value=C}else p.uniform!==void 0?b.value=new Ue(p.uniform,this.getTypeInfo(h.type)):b.value=new Ue(p,this.getTypeInfo(h.type))}}})}for(let m=0;m<u;++m)for(let d=0;d<c;++d)for(let p=0;p<a;++p)s.setVariable("@workgroup_id",new v([p,d,m],this.getTypeInfo("vec3u"))),this._dispatchWorkgroup(i,[p,d,m],s)}execStatement(e,n){if(e instanceof Du)return this.evalExpression(e.value,n);if(e instanceof Iu){if(e.condition){let r=this.evalExpression(e.condition,n);if(!(r instanceof E))throw new Error("Invalid break-if condition");if(!r.value)return null}return t._breakObj}if(e instanceof Ou)return t._continueObj;if(e instanceof bo)this._let(e,n);else if(e instanceof hn)this._var(e,n);else if(e instanceof Cs)this._const(e,n);else if(e instanceof _o)this._function(e,n);else{if(e instanceof Ru)return this._if(e,n);if(e instanceof Vu)return this._switch(e,n);if(e instanceof Eu)return this._for(e,n);if(e instanceof Bu)return this._while(e,n);if(e instanceof Cu)return this._loop(e,n);if(e instanceof da){let r=n.clone();return r.currentFunctionName=n.currentFunctionName,this._execStatements(e.body,r)}if(e instanceof Mu)this._assign(e,n);else if(e instanceof Su)this._increment(e,n);else{if(e instanceof mn)return null;if(e instanceof pa){let r=e.name;n.getVariable(r)===null&&n.setVariable(r,new E(0,this.getTypeInfo("u32")))}else if(e instanceof ga)this._call(e,n);else{if(e instanceof ku||e instanceof ya)return null;console.error("Invalid statement type.",e,`Line ${e.line}`)}}}return null}evalExpression(e,n){return e instanceof Lt?this._evalBinaryOp(e,n):e instanceof Ve?this._evalLiteral(e,n):e instanceof mt?this._evalVariable(e,n):e instanceof xa?this._evalCall(e,n):e instanceof en?this._evalCreate(e,n):e instanceof Gu?this._evalConst(e,n):e instanceof Lu?this._evalBitcast(e,n):e instanceof Se?this._evalUnaryOp(e,n):(console.error("Invalid expression type",e,`Line ${e.line}`),null)}getTypeInfo(e){var n;if(e instanceof O){let o=this.reflection.getTypeInfo(e);if(o!==null)return o}let r=(n=this.typeInfo[e])!==null&&n!==void 0?n:null;return r!==null||(r=this.reflection.getTypeInfoByName(e)),r}_setOverrides(e,n){for(let r in e){let o=e[r],s=this.reflection.getOverrideInfo(r);s!==null?(s.type===null&&(s.type=this.getTypeInfo("u32")),s.type.name==="u32"||s.type.name==="i32"||s.type.name==="f32"||s.type.name==="f16"?n.setVariable(r,new E(o,s.type)):s.type.name==="bool"?n.setVariable(r,new E(o?1:0,s.type)):s.type.name==="vec2"||s.type.name==="vec3"||s.type.name==="vec4"||s.type.name==="vec2f"||s.type.name==="vec3f"||s.type.name==="vec4f"||s.type.name==="vec2i"||s.type.name==="vec3i"||s.type.name==="vec4i"||s.type.name==="vec2u"||s.type.name==="vec3u"||s.type.name==="vec4u"||s.type.name==="vec2h"||s.type.name==="vec3h"||s.type.name==="vec4h"?n.setVariable(r,new v(o,s.type)):console.error(`Invalid constant type for ${r}`)):console.error(`Override ${r} does not exist in the shader.`)}}_dispatchWorkgroup(e,n,r){let o=[1,1,1];for(let l of e.node.attributes)if(l.name==="workgroup_size"){if(l.value.length>0){let f=r.getVariableValue(l.value[0]);o[0]=f instanceof E?f.value:parseInt(l.value[0])}if(l.value.length>1){let f=r.getVariableValue(l.value[1]);o[1]=f instanceof E?f.value:parseInt(l.value[1])}if(l.value.length>2){let f=r.getVariableValue(l.value[2]);o[2]=f instanceof E?f.value:parseInt(l.value[2])}}let s=this.getTypeInfo("vec3u"),i=this.getTypeInfo("u32");r.setVariable("@workgroup_size",new v(o,s));let a=o[0],c=o[1],u=o[2];for(let l=0,f=0;l<u;++l)for(let m=0;m<c;++m)for(let d=0;d<a;++d,++f){let p=[d,m,l],b=[d+n[0]*o[0],m+n[1]*o[1],l+n[2]*o[2]];r.setVariable("@local_invocation_id",new v(p,s)),r.setVariable("@global_invocation_id",new v(b,s)),r.setVariable("@local_invocation_index",new E(f,i)),this._dispatchExec(e,r)}}_dispatchExec(e,n){for(let r of e.node.args)for(let o of r.attributes)if(o.name==="builtin"){let s=`@${o.value}`,i=n.getVariable(s);i!==void 0&&n.variables.set(r.name,i)}this._execStatements(e.node.body,n)}getVariableName(e,n){for(;e instanceof Se;)e=e.right;return e instanceof mt?e.name:(console.error("Unknown variable type",e,"Line",e.line),null)}_execStatements(e,n){for(let r of e){if(r instanceof Array){let s=n.clone(),i=this._execStatements(r,s);if(i)return i;continue}let o=this.execStatement(r,n);if(o)return o}return null}_call(e,n){let r=n.clone();r.currentFunctionName=e.name;let o=n.getFunction(e.name);if(o){for(let s=0;s<o.node.args.length;++s){let i=o.node.args[s],a=this.evalExpression(e.args[s],r);r.setVariable(i.name,a,i)}this._execStatements(o.node.body,r)}else e.isBuiltin?this._callBuiltinFunction(e,r):this.getTypeInfo(e.name)&&this._evalCreate(e,n)}_increment(e,n){let r=this.getVariableName(e.variable,n),o=n.getVariable(r);o?e.operator==="++"?o.value instanceof E?o.value.value++:console.error(`Variable ${r} is not a scalar. Line ${e.line}`):e.operator==="--"?o.value instanceof E?o.value.value--:console.error(`Variable ${r} is not a scalar. Line ${e.line}`):console.error(`Unknown increment operator ${e.operator}. Line ${e.line}`):console.error(`Variable ${r} not found. Line ${e.line}`)}_getVariableData(e,n){if(e instanceof mt){let r=this.getVariableName(e,n),o=n.getVariable(r);return o===null?(console.error(`Variable ${r} not found. Line ${e.line}`),null):o.value.getSubData(this,e.postfix,n)}if(e instanceof Se){if(e.operator==="*"){let r=this._getVariableData(e.right,n);return r instanceof Fr?r.reference.getSubData(this,e.postfix,n):(console.error(`Variable ${e.right} is not a pointer. Line ${e.line}`),null)}if(e.operator==="&"){let r=this._getVariableData(e.right,n);return new Fr(r)}}return null}_assign(e,n){let r=null,o="<var>",s=null;if(e.variable instanceof Se){let c=this._getVariableData(e.variable,n),u=this.evalExpression(e.value,n),l=e.operator;if(l==="="){if(c instanceof E||c instanceof v||c instanceof z){if(u instanceof E||u instanceof v||u instanceof z&&c.data.length===u.data.length)return void c.data.set(u.data);console.error(`Invalid assignment. Line ${e.line}`)}else if(c instanceof Ue&&u instanceof Ue&&c.buffer.byteLength-c.offset>=u.buffer.byteLength-u.offset)return void(c.buffer.byteLength%4==0?new Uint32Array(c.buffer,c.offset,c.typeInfo.size/4).set(new Uint32Array(u.buffer,u.offset,u.typeInfo.size/4)):new Uint8Array(c.buffer,c.offset,c.typeInfo.size).set(new Uint8Array(u.buffer,u.offset,u.typeInfo.size)));return console.error(`Invalid assignment. Line ${e.line}`),null}if(l==="+=")return c instanceof E||c instanceof v||c instanceof z?u instanceof E||u instanceof v||u instanceof z?void c.data.set(u.data.map((f,m)=>c.data[m]+f)):void console.error(`Invalid assignment . Line ${e.line}`):void console.error(`Invalid assignment. Line ${e.line}`);if(l==="-=")return(c instanceof E||c instanceof v||c instanceof z)&&(u instanceof E||u instanceof v||u instanceof z)?void c.data.set(u.data.map((f,m)=>c.data[m]-f)):void console.error(`Invalid assignment. Line ${e.line}`)}if(e.variable instanceof Se){if(e.variable.operator==="*"){o=this.getVariableName(e.variable.right,n);let c=n.getVariable(o);if(!(c&&c.value instanceof Fr))return void console.error(`Variable ${o} is not a pointer. Line ${e.line}`);r=c.value.reference;let u=e.variable.postfix;if(!u){let l=e.variable.right;for(;l instanceof Se;){if(l.postfix){u=l.postfix;break}l=l.right}}u&&(r=r.getSubData(this,u,n))}}else{s=e.variable.postfix,o=this.getVariableName(e.variable,n);let c=n.getVariable(o);if(c===null)return void console.error(`Variable ${o} not found. Line ${e.line}`);r=c.value}if(r instanceof Fr&&(r=r.reference),r===null)return void console.error(`Variable ${o} not found. Line ${e.line}`);let i=this.evalExpression(e.value,n),a=e.operator;if(a!=="="){let c=r.getSubData(this,s,n);if(c instanceof v&&i instanceof E){let u=c.data,l=i.value;if(a==="+=")for(let f=0;f<u.length;++f)u[f]+=l;else if(a==="-=")for(let f=0;f<u.length;++f)u[f]-=l;else if(a==="*=")for(let f=0;f<u.length;++f)u[f]*=l;else if(a==="/=")for(let f=0;f<u.length;++f)u[f]/=l;else if(a==="%=")for(let f=0;f<u.length;++f)u[f]%=l;else if(a==="&=")for(let f=0;f<u.length;++f)u[f]&=l;else if(a==="|=")for(let f=0;f<u.length;++f)u[f]|=l;else if(a==="^=")for(let f=0;f<u.length;++f)u[f]^=l;else if(a==="<<=")for(let f=0;f<u.length;++f)u[f]<<=l;else if(a===">>=")for(let f=0;f<u.length;++f)u[f]>>=l;else console.error(`Invalid operator ${a}. Line ${e.line}`)}else if(c instanceof v&&i instanceof v){let u=c.data,l=i.data;if(u.length!==l.length)return void console.error(`Vector length mismatch. Line ${e.line}`);if(a==="+=")for(let f=0;f<u.length;++f)u[f]+=l[f];else if(a==="-=")for(let f=0;f<u.length;++f)u[f]-=l[f];else if(a==="*=")for(let f=0;f<u.length;++f)u[f]*=l[f];else if(a==="/=")for(let f=0;f<u.length;++f)u[f]/=l[f];else if(a==="%=")for(let f=0;f<u.length;++f)u[f]%=l[f];else if(a==="&=")for(let f=0;f<u.length;++f)u[f]&=l[f];else if(a==="|=")for(let f=0;f<u.length;++f)u[f]|=l[f];else if(a==="^=")for(let f=0;f<u.length;++f)u[f]^=l[f];else if(a==="<<=")for(let f=0;f<u.length;++f)u[f]<<=l[f];else if(a===">>=")for(let f=0;f<u.length;++f)u[f]>>=l[f];else console.error(`Invalid operator ${a}. Line ${e.line}`)}else{if(!(c instanceof E&&i instanceof E))return void console.error(`Invalid type for ${e.operator} operator. Line ${e.line}`);a==="+="?c.value+=i.value:a==="-="?c.value-=i.value:a==="*="?c.value*=i.value:a==="/="?c.value/=i.value:a==="%="?c.value%=i.value:a==="&="?c.value&=i.value:a==="|="?c.value|=i.value:a==="^="?c.value^=i.value:a==="<<="?c.value<<=i.value:a===">>="?c.value>>=i.value:console.error(`Invalid operator ${a}. Line ${e.line}`)}return void(r instanceof Ue&&r.setDataValue(this,c,s,n))}if(r instanceof Ue)r.setDataValue(this,i,s,n);else if(s){if(!(r instanceof v||r instanceof z))return void console.error(`Variable ${o} is not a vector or matrix. Line ${e.line}`);if(s instanceof Nr){let c=this.evalExpression(s.index,n).value;if(r instanceof v){if(!(i instanceof E))return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);r.data[c]=i.value}else{if(!(r instanceof z))return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);{let u=this.evalExpression(s.index,n).value;if(u<0)return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);if(!(i instanceof v))return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);{let l=r.typeInfo.getTypeName();if(l==="mat2x2"||l==="mat2x2f"||l==="mat2x2h"){if(!(u<2&&i.data.length===2))return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);r.data[2*u]=i.data[0],r.data[2*u+1]=i.data[1]}else if(l==="mat2x3"||l==="mat2x3f"||l==="mat2x3h"){if(!(u<2&&i.data.length===3))return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);r.data[3*u]=i.data[0],r.data[3*u+1]=i.data[1],r.data[3*u+2]=i.data[2]}else if(l==="mat2x4"||l==="mat2x4f"||l==="mat2x4h"){if(!(u<2&&i.data.length===4))return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);r.data[4*u]=i.data[0],r.data[4*u+1]=i.data[1],r.data[4*u+2]=i.data[2],r.data[4*u+3]=i.data[3]}else if(l==="mat3x2"||l==="mat3x2f"||l==="mat3x2h"){if(!(u<3&&i.data.length===2))return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);r.data[2*u]=i.data[0],r.data[2*u+1]=i.data[1]}else if(l==="mat3x3"||l==="mat3x3f"||l==="mat3x3h"){if(!(u<3&&i.data.length===3))return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);r.data[3*u]=i.data[0],r.data[3*u+1]=i.data[1],r.data[3*u+2]=i.data[2]}else if(l==="mat3x4"||l==="mat3x4f"||l==="mat3x4h"){if(!(u<3&&i.data.length===4))return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);r.data[4*u]=i.data[0],r.data[4*u+1]=i.data[1],r.data[4*u+2]=i.data[2],r.data[4*u+3]=i.data[3]}else if(l==="mat4x2"||l==="mat4x2f"||l==="mat4x2h"){if(!(u<4&&i.data.length===2))return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);r.data[2*u]=i.data[0],r.data[2*u+1]=i.data[1]}else if(l==="mat4x3"||l==="mat4x3f"||l==="mat4x3h"){if(!(u<4&&i.data.length===3))return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);r.data[3*u]=i.data[0],r.data[3*u+1]=i.data[1],r.data[3*u+2]=i.data[2]}else{if(l!=="mat4x4"&&l!=="mat4x4f"&&l!=="mat4x4h")return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);if(!(u<4&&i.data.length===4))return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);r.data[4*u]=i.data[0],r.data[4*u+1]=i.data[1],r.data[4*u+2]=i.data[2],r.data[4*u+3]=i.data[3]}}}}}else if(s instanceof nr){let c=s.value;if(!(r instanceof v))return void console.error(`Invalid assignment to ${c}. Variable ${o} is not a vector. Line ${e.line}`);if(i instanceof E){if(c.length>1)return void console.error(`Invalid assignment to ${c} for variable ${o}. Line ${e.line}`);if(c==="x")r.data[0]=i.value;else if(c==="y"){if(r.data.length<2)return void console.error(`Invalid assignment to ${c} for variable ${o}. Line ${e.line}`);r.data[1]=i.value}else if(c==="z"){if(r.data.length<3)return void console.error(`Invalid assignment to ${c} for variable ${o}. Line ${e.line}`);r.data[2]=i.value}else if(c==="w"){if(r.data.length<4)return void console.error(`Invalid assignment to ${c} for variable ${o}. Line ${e.line}`);r.data[3]=i.value}}else{if(!(i instanceof v))return void console.error(`Invalid assignment to ${o}. Line ${e.line}`);if(c.length!==i.data.length)return void console.error(`Invalid assignment to ${c} for variable ${o}. Line ${e.line}`);for(let u=0;u<c.length;++u){let l=c[u];if(l==="x"||l==="r")r.data[0]=i.data[u];else if(l==="y"||l==="g"){if(i.data.length<2)return void console.error(`Invalid assignment to ${l} for variable ${o}. Line ${e.line}`);r.data[1]=i.data[u]}else if(l==="z"||l==="b"){if(i.data.length<3)return void console.error(`Invalid assignment to ${l} for variable ${o}. Line ${e.line}`);r.data[2]=i.data[u]}else{if(l!=="w"&&l!=="a")return void console.error(`Invalid assignment to ${l} for variable ${o}. Line ${e.line}`);if(i.data.length<4)return void console.error(`Invalid assignment to ${l} for variable ${o}. Line ${e.line}`);r.data[3]=i.data[u]}}}}}else r instanceof E&&i instanceof E?r.value=i.value:r instanceof v&&i instanceof v||r instanceof z&&i instanceof z?r.data.set(i.data):console.error(`Invalid assignment to ${o}. Line ${e.line}`)}_function(e,n){let r=new rd(e);n.functions.set(e.name,r)}_const(e,n){let r=null;e.value!==null&&(r=this.evalExpression(e.value,n)),n.createVariable(e.name,r,e)}_let(e,n){let r=null;if(e.value!==null){if(r=this.evalExpression(e.value,n),r===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof Se||(r=r.clone())}else{let o=e.type.name;if(o==="f32"||o==="i32"||o==="u32"||o==="bool"||o==="f16"||o==="vec2"||o==="vec3"||o==="vec4"||o==="vec2f"||o==="vec3f"||o==="vec4f"||o==="vec2i"||o==="vec3i"||o==="vec4i"||o==="vec2u"||o==="vec3u"||o==="vec4u"||o==="vec2h"||o==="vec3h"||o==="vec4h"||o==="vec2b"||o==="vec3b"||o==="vec4b"||o==="mat2x2"||o==="mat2x3"||o==="mat2x4"||o==="mat3x2"||o==="mat3x3"||o==="mat3x4"||o==="mat4x2"||o==="mat4x3"||o==="mat4x4"||o==="mat2x2f"||o==="mat2x3f"||o==="mat2x4f"||o==="mat3x2f"||o==="mat3x3f"||o==="mat3x4f"||o==="mat4x2f"||o==="mat4x3f"||o==="mat4x4f"||o==="mat2x2h"||o==="mat2x3h"||o==="mat2x4h"||o==="mat3x2h"||o==="mat3x3h"||o==="mat3x4h"||o==="mat4x2h"||o==="mat4x3h"||o==="mat4x4h"||o==="array"){let s=new en(e.type,[]);r=this._evalCreate(s,n)}}n.createVariable(e.name,r,e)}_var(e,n){let r=null;if(e.value!==null){if(r=this.evalExpression(e.value,n),r===null)return void console.error(`Invalid value for variable ${e.name}. Line ${e.line}`);e.value instanceof Se||(r=r.clone())}else{if(e.type===null)return void console.error(`Variable ${e.name} has no type. Line ${e.line}`);let o=e.type.name;if(o==="f32"||o==="i32"||o==="u32"||o==="bool"||o==="f16"||o==="vec2"||o==="vec3"||o==="vec4"||o==="vec2f"||o==="vec3f"||o==="vec4f"||o==="vec2i"||o==="vec3i"||o==="vec4i"||o==="vec2u"||o==="vec3u"||o==="vec4u"||o==="vec2h"||o==="vec3h"||o==="vec4h"||o==="vec2b"||o==="vec3b"||o==="vec4b"||o==="mat2x2"||o==="mat2x3"||o==="mat2x4"||o==="mat3x2"||o==="mat3x3"||o==="mat3x4"||o==="mat4x2"||o==="mat4x3"||o==="mat4x4"||o==="mat2x2f"||o==="mat2x3f"||o==="mat2x4f"||o==="mat3x2f"||o==="mat3x3f"||o==="mat3x4f"||o==="mat4x2f"||o==="mat4x3f"||o==="mat4x4f"||o==="mat2x2h"||o==="mat2x3h"||o==="mat2x4h"||o==="mat3x2h"||o==="mat3x3h"||o==="mat3x4h"||o==="mat4x2h"||o==="mat4x3h"||o==="mat4x4h"||e.type instanceof vo||e.type instanceof mn||e.type instanceof S){let s=new en(e.type,[]);r=this._evalCreate(s,n)}}n.createVariable(e.name,r,e)}_switch(e,n){n=n.clone();let r=this.evalExpression(e.condition,n);if(!(r instanceof E))return console.error(`Invalid if condition. Line ${e.line}`),null;let o=null;for(let s of e.cases)if(s instanceof zu)for(let i of s.selectors){if(i instanceof Rs){o=s;continue}let a=this.evalExpression(i,n);if(!(a instanceof E))return console.error(`Invalid case selector. Line ${e.line}`),null;if(a.value===r.value)return this._execStatements(s.body,n)}else s instanceof Hu&&(o=s);return o?this._execStatements(o.body,n):null}_if(e,n){n=n.clone();let r=this.evalExpression(e.condition,n);if(!(r instanceof E))return console.error(`Invalid if condition. Line ${e.line}`),null;if(r.value)return this._execStatements(e.body,n);for(let o of e.elseif){let s=this.evalExpression(o.condition,n);if(!(s instanceof E))return console.error(`Invalid if condition. Line ${e.line}`),null;if(s.value)return this._execStatements(o.body,n)}return e.else?this._execStatements(e.else,n):null}_getScalarValue(e){return e instanceof E?e.value:(console.error("Expected scalar value.",e),0)}_for(e,n){for(n=n.clone(),this.execStatement(e.init,n);this._getScalarValue(this.evalExpression(e.condition,n));){let r=this._execStatements(e.body,n);if(r===t._breakObj)break;if(r!==null&&r!==t._continueObj)return r;this.execStatement(e.increment,n)}return null}_loop(e,n){for(n=n.clone();;){let r=this._execStatements(e.body,n);if(r===t._breakObj)break;if(r===t._continueObj){if(e.continuing&&this._execStatements(e.continuing.body,n)===t._breakObj)break}else if(r!==null)return r}return null}_while(e,n){for(n=n.clone();this._getScalarValue(this.evalExpression(e.condition,n));){let r=this._execStatements(e.body,n);if(r===t._breakObj)break;if(r!==t._continueObj&&r!==null)return r}return null}_evalBitcast(e,n){let r=this.evalExpression(e.value,n),o=e.type;if(r instanceof E){let s=x2(r.value,r.typeInfo.name,o.name);return new E(s,this.getTypeInfo(o))}if(r instanceof v){let s=r.typeInfo.getTypeName(),i="";if(s.endsWith("f"))i="f32";else if(s.endsWith("i"))i="i32";else if(s.endsWith("u"))i="u32";else if(s.endsWith("b"))i="bool";else{if(!s.endsWith("h"))return console.error(`Unknown vector type ${s}. Line ${e.line}`),null;i="f16"}let a=o.getTypeName(),c="";if(a.endsWith("f"))c="f32";else if(a.endsWith("i"))c="i32";else if(a.endsWith("u"))c="u32";else if(a.endsWith("b"))c="bool";else{if(!a.endsWith("h"))return console.error(`Unknown vector type ${c}. Line ${e.line}`),null;c="f16"}let u=(function(l,f,m){if(f===m)return l;let d=new Array(l.length);for(let p=0;p<l.length;p++)d[p]=x2(l[p],f,m);return d})(Array.from(r.data),i,c);return new v(u,this.getTypeInfo(o))}return console.error(`TODO: bitcast for ${r.typeInfo.name}. Line ${e.line}`),null}_evalConst(e,n){return n.getVariableValue(e.name).clone().getSubData(this,e.postfix,n)}_evalCreate(e,n){var r;if(e instanceof en){if(e.type===null)return ba.void;switch(e.type.getTypeName()){case"bool":case"i32":case"u32":case"f32":case"f16":return this._callConstructorValue(e,n);case"vec2":case"vec3":case"vec4":case"vec2f":case"vec3f":case"vec4f":case"vec2h":case"vec3h":case"vec4h":case"vec2i":case"vec3i":case"vec4i":case"vec2u":case"vec3u":case"vec4u":case"vec2b":case"vec3b":case"vec4b":return this._callConstructorVec(e,n);case"mat2x2":case"mat2x2f":case"mat2x2h":case"mat2x3":case"mat2x3f":case"mat2x3h":case"mat2x4":case"mat2x4f":case"mat2x4h":case"mat3x2":case"mat3x2f":case"mat3x2h":case"mat3x3":case"mat3x3f":case"mat3x3h":case"mat3x4":case"mat3x4f":case"mat3x4h":case"mat4x2":case"mat4x2f":case"mat4x2h":case"mat4x3":case"mat4x3f":case"mat4x3h":case"mat4x4":case"mat4x4f":case"mat4x4h":return this._callConstructorMatrix(e,n)}}let o=e instanceof en?e.type.name:e.name,s=e instanceof en?this.getTypeInfo(e.type):this.getTypeInfo(e.name);if(s===null)return console.error(`Unknown type ${o}. Line ${e.line}`),null;if(s.size===0)return null;let i=new Ue(new ArrayBuffer(s.size),s,0);if(s instanceof Bn){if(e.args)for(let a=0;a<e.args.length;++a){let c=s.members[a],u=e.args[a],l=this.evalExpression(u,n);i.setData(this,l,c.type,c.offset,n)}}else if(s instanceof En){let a=0;if(e.args)for(let c=0;c<e.args.length;++c){let u=e.args[c],l=this.evalExpression(u,n);s.format===null&&(((r=l.typeInfo)===null||r===void 0?void 0:r.name)==="x32"?s.format=this.getTypeInfo("i32"):s.format=l.typeInfo),i.setData(this,l,s.format,a,n),a+=s.stride}}else console.error(`Unknown type "${o}". Line ${e.line}`);return e instanceof en?i.getSubData(this,e.postfix,n):i}_evalLiteral(e,n){let r=this.getTypeInfo(e.type),o=r.name;return o==="x32"||o==="u32"||o==="f32"||o==="f16"||o==="i32"||o==="bool"?new E(e.scalarValue,r):o==="vec2"||o==="vec3"||o==="vec4"||o==="vec2f"||o==="vec3f"||o==="vec4f"||o==="vec2h"||o==="vec3h"||o==="vec4h"||o==="vec2i"||o==="vec3i"||o==="vec4i"||o==="vec2u"||o==="vec3u"||o==="vec4u"?this._callConstructorVec(e,n):o==="mat2x2"||o==="mat2x3"||o==="mat2x4"||o==="mat3x2"||o==="mat3x3"||o==="mat3x4"||o==="mat4x2"||o==="mat4x3"||o==="mat4x4"||o==="mat2x2f"||o==="mat2x3f"||o==="mat2x4f"||o==="mat3x2f"||o==="mat3x3f"||o==="mat3x4f"||o==="mat4x2f"||o==="mat4x3f"||o==="mat4x4f"||o==="mat2x2h"||o==="mat2x3h"||o==="mat2x4h"||o==="mat3x2h"||o==="mat3x3h"||o==="mat3x4h"||o==="mat4x2h"||o==="mat4x3h"||o==="mat4x4h"?this._callConstructorMatrix(e,n):e.value}_evalVariable(e,n){let r=n.getVariableValue(e.name);return r===null?r:r.getSubData(this,e.postfix,n)}_maxFormatTypeInfo(e){let n=e[0];if(n.name==="f32")return n;for(let r=1;r<e.length;++r){let o=t._priority.get(n.name);t._priority.get(e[r].name)<o&&(n=e[r])}return n.name==="x32"?this.getTypeInfo("i32"):n}_evalUnaryOp(e,n){let r=this.evalExpression(e.right,n);if(e.operator==="&")return new Fr(r);if(e.operator==="*")return r instanceof Fr?r.reference.getSubData(this,e.postfix,n):(console.error(`Invalid dereference. Line ${e.line}`),null);let o=r instanceof E?r.value:r instanceof v?Array.from(r.data):null;switch(e.operator){case"+":{if(N(o)){let a=o.map((c,u)=>+c);return new v(a,r.typeInfo)}let s=o,i=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new E(+s,i)}case"-":{if(N(o)){let a=o.map((c,u)=>-c);return new v(a,r.typeInfo)}let s=o,i=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new E(-s,i)}case"!":{if(N(o)){let a=o.map((c,u)=>c?0:1);return new v(a,r.typeInfo)}let s=o,i=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new E(s?0:1,i)}case"~":{if(N(o)){let a=o.map((c,u)=>~c);return new v(a,r.typeInfo)}let s=o,i=this._maxFormatTypeInfo([r.typeInfo,r.typeInfo]);return new E(~s,i)}}return console.error(`Invalid unary operator ${e.operator}. Line ${e.line}`),null}_evalBinaryOp(e,n){let r=this.evalExpression(e.left,n),o=this.evalExpression(e.right,n),s=r instanceof E?r.value:r instanceof v||r instanceof z?Array.from(r.data):null,i=o instanceof E?o.value:o instanceof v||o instanceof z?Array.from(o.data):null;switch(e.operator){case"+":{if(N(s)&&N(i)){let l=s,f=i;if(l.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=l.map((d,p)=>d+f[p]);return new v(m,r.typeInfo)}if(N(s)){let l=i,f=s.map((m,d)=>m+l);return new v(f,r.typeInfo)}if(N(i)){let l=s,f=i.map((m,d)=>l+m);return new v(f,o.typeInfo)}let a=s,c=i,u=this._maxFormatTypeInfo([r.typeInfo,o.typeInfo]);return new E(a+c,u)}case"-":{if(N(s)&&N(i)){let l=s,f=i;if(l.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=l.map((d,p)=>d-f[p]);return new v(m,r.typeInfo)}if(N(s)){let l=i,f=s.map((m,d)=>m-l);return new v(f,r.typeInfo)}if(N(i)){let l=s,f=i.map((m,d)=>l-m);return new v(f,o.typeInfo)}let a=s,c=i,u=this._maxFormatTypeInfo([r.typeInfo,o.typeInfo]);return new E(a-c,u)}case"*":{if(N(s)&&N(i)){let l=s,f=i;if(r instanceof z&&o instanceof z){let m=(function(w,h,g,y){if(ft[h.name]===void 0||ft[y.name]===void 0)return null;let A=ft[h.name][0],C=ft[h.name][1],U=ft[y.name][0];if(A!==ft[y.name][1])return null;let V=new Array(U*C);for(let k=0;k<C;k++)for(let G=0;G<U;G++){let _=0;for(let R=0;R<A;R++)_+=w[R*C+k]*g[G*A+R];V[k*U+G]=_}return V})(l,r.typeInfo,f,o.typeInfo);if(m===null)return console.error(`Matrix multiplication failed. Line ${e.line}.`),null;let d=ft[o.typeInfo.name][0],p=ft[r.typeInfo.name][1],b=this.getTypeInfo(`mat${d}x${p}f`);return new z(m,b)}if(r instanceof z&&o instanceof v){let m=(function(d,p,b,w){if(ft[p.name]===void 0||Hh[w.name]===void 0)return null;let h=ft[p.name][0],g=ft[p.name][1];if(h!==b.length)return null;let y=new Array(g);for(let A=0;A<g;A++){let C=0;for(let U=0;U<h;U++)C+=d[U*g+A]*b[U];y[A]=C}return y})(l,r.typeInfo,f,o.typeInfo);return m===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new v(m,o.typeInfo)}if(r instanceof v&&o instanceof z){let m=(function(d,p,b,w){if(Hh[p.name]===void 0||ft[w.name]===void 0)return null;let h=ft[w.name][0],g=ft[w.name][1];if(g!==d.length)return null;let y=[];for(let A=0;A<h;A++){let C=0;for(let U=0;U<g;U++)C+=d[U]*b[U*h+A];y[A]=C}return y})(l,r.typeInfo,f,o.typeInfo);return m===null?(console.error(`Matrix vector multiplication failed. Line ${e.line}.`),null):new v(m,r.typeInfo)}{if(l.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=l.map((d,p)=>d*f[p]);return new v(m,r.typeInfo)}}if(N(s)){let l=i,f=s.map((m,d)=>m*l);return r instanceof z?new z(f,r.typeInfo):new v(f,r.typeInfo)}if(N(i)){let l=s,f=i.map((m,d)=>l*m);return o instanceof z?new z(f,o.typeInfo):new v(f,o.typeInfo)}let a=s,c=i,u=this._maxFormatTypeInfo([r.typeInfo,o.typeInfo]);return new E(a*c,u)}case"%":{if(N(s)&&N(i)){let l=s,f=i;if(l.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=l.map((d,p)=>d%f[p]);return new v(m,r.typeInfo)}if(N(s)){let l=i,f=s.map((m,d)=>m%l);return new v(f,r.typeInfo)}if(N(i)){let l=s,f=i.map((m,d)=>l%m);return new v(f,o.typeInfo)}let a=s,c=i,u=this._maxFormatTypeInfo([r.typeInfo,o.typeInfo]);return new E(a%c,u)}case"/":{if(N(s)&&N(i)){let l=s,f=i;if(l.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=l.map((d,p)=>d/f[p]);return new v(m,r.typeInfo)}if(N(s)){let l=i,f=s.map((m,d)=>m/l);return new v(f,r.typeInfo)}if(N(i)){let l=s,f=i.map((m,d)=>l/m);return new v(f,o.typeInfo)}let a=s,c=i,u=this._maxFormatTypeInfo([r.typeInfo,o.typeInfo]);return new E(a/c,u)}case"&":{if(N(s)&&N(i)){let l=s,f=i;if(l.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=l.map((d,p)=>d&f[p]);return new v(m,r.typeInfo)}if(N(s)){let l=i,f=s.map((m,d)=>m&l);return new v(f,r.typeInfo)}if(N(i)){let l=s,f=i.map((m,d)=>l&m);return new v(f,o.typeInfo)}let a=s,c=i,u=this._maxFormatTypeInfo([r.typeInfo,o.typeInfo]);return new E(a&c,u)}case"|":{if(N(s)&&N(i)){let l=s,f=i;if(l.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=l.map((d,p)=>d|f[p]);return new v(m,r.typeInfo)}if(N(s)){let l=i,f=s.map((m,d)=>m|l);return new v(f,r.typeInfo)}if(N(i)){let l=s,f=i.map((m,d)=>l|m);return new v(f,o.typeInfo)}let a=s,c=i,u=this._maxFormatTypeInfo([r.typeInfo,o.typeInfo]);return new E(a|c,u)}case"^":{if(N(s)&&N(i)){let l=s,f=i;if(l.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=l.map((d,p)=>d^f[p]);return new v(m,r.typeInfo)}if(N(s)){let l=i,f=s.map((m,d)=>m^l);return new v(f,r.typeInfo)}if(N(i)){let l=s,f=i.map((m,d)=>l^m);return new v(f,o.typeInfo)}let a=s,c=i,u=this._maxFormatTypeInfo([r.typeInfo,o.typeInfo]);return new E(a^c,u)}case"<<":{if(N(s)&&N(i)){let l=s,f=i;if(l.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=l.map((d,p)=>d<<f[p]);return new v(m,r.typeInfo)}if(N(s)){let l=i,f=s.map((m,d)=>m<<l);return new v(f,r.typeInfo)}if(N(i)){let l=s,f=i.map((m,d)=>l<<m);return new v(f,o.typeInfo)}let a=s,c=i,u=this._maxFormatTypeInfo([r.typeInfo,o.typeInfo]);return new E(a<<c,u)}case">>":{if(N(s)&&N(i)){let l=s,f=i;if(l.length!==f.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let m=l.map((d,p)=>d>>f[p]);return new v(m,r.typeInfo)}if(N(s)){let l=i,f=s.map((m,d)=>m>>l);return new v(f,r.typeInfo)}if(N(i)){let l=s,f=i.map((m,d)=>l>>m);return new v(f,o.typeInfo)}let a=s,c=i,u=this._maxFormatTypeInfo([r.typeInfo,o.typeInfo]);return new E(a>>c,u)}case">":if(N(s)&&N(i)){let a=s,c=i;if(a.length!==c.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let u=a.map((l,f)=>l>c[f]?1:0);return new v(u,r.typeInfo)}if(N(s)){let a=i,c=s.map((u,l)=>u>a?1:0);return new v(c,r.typeInfo)}if(N(i)){let a=s,c=i.map((u,l)=>a>u?1:0);return new v(c,o.typeInfo)}return new E(s>i?1:0,this.getTypeInfo("bool"));case"<":if(N(s)&&N(i)){let a=s,c=i;if(a.length!==c.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let u=a.map((l,f)=>l<c[f]?1:0);return new v(u,r.typeInfo)}if(N(s)){let a=i,c=s.map((u,l)=>u<a?1:0);return new v(c,r.typeInfo)}if(N(i)){let a=s,c=i.map((u,l)=>a<u?1:0);return new v(c,o.typeInfo)}return new E(s<i?1:0,this.getTypeInfo("bool"));case"==":if(N(s)&&N(i)){let a=s,c=i;if(a.length!==c.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let u=a.map((l,f)=>l===c[f]?1:0);return new v(u,r.typeInfo)}if(N(s)){let a=i,c=s.map((u,l)=>u==a?1:0);return new v(c,r.typeInfo)}if(N(i)){let a=s,c=i.map((u,l)=>a==u?1:0);return new v(c,o.typeInfo)}return new E(s===i?1:0,this.getTypeInfo("bool"));case"!=":if(N(s)&&N(i)){let a=s,c=i;if(a.length!==c.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let u=a.map((l,f)=>l!==c[f]?1:0);return new v(u,r.typeInfo)}if(N(s)){let a=i,c=s.map((u,l)=>u!==a?1:0);return new v(c,r.typeInfo)}if(N(i)){let a=s,c=i.map((u,l)=>a!==u?1:0);return new v(c,o.typeInfo)}return new E(s!==i?1:0,this.getTypeInfo("bool"));case">=":if(N(s)&&N(i)){let a=s,c=i;if(a.length!==c.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let u=a.map((l,f)=>l>=c[f]?1:0);return new v(u,r.typeInfo)}if(N(s)){let a=i,c=s.map((u,l)=>u>=a?1:0);return new v(c,r.typeInfo)}if(N(i)){let a=s,c=i.map((u,l)=>a>=u?1:0);return new v(c,o.typeInfo)}return new E(s>=i?1:0,this.getTypeInfo("bool"));case"<=":if(N(s)&&N(i)){let a=s,c=i;if(a.length!==c.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let u=a.map((l,f)=>l<=c[f]?1:0);return new v(u,r.typeInfo)}if(N(s)){let a=i,c=s.map((u,l)=>u<=a?1:0);return new v(c,r.typeInfo)}if(N(i)){let a=s,c=i.map((u,l)=>a<=u?1:0);return new v(c,o.typeInfo)}return new E(s<=i?1:0,this.getTypeInfo("bool"));case"&&":if(N(s)&&N(i)){let a=s,c=i;if(a.length!==c.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let u=a.map((l,f)=>l&&c[f]?1:0);return new v(u,r.typeInfo)}if(N(s)){let a=i,c=s.map((u,l)=>u&&a?1:0);return new v(c,r.typeInfo)}if(N(i)){let a=s,c=i.map((u,l)=>a&&u?1:0);return new v(c,o.typeInfo)}return new E(s&&i?1:0,this.getTypeInfo("bool"));case"||":if(N(s)&&N(i)){let a=s,c=i;if(a.length!==c.length)return console.error(`Vector length mismatch. Line ${e.line}.`),null;let u=a.map((l,f)=>l||c[f]?1:0);return new v(u,r.typeInfo)}if(N(s)){let a=i,c=s.map((u,l)=>u||a?1:0);return new v(c,r.typeInfo)}if(N(i)){let a=s,c=i.map((u,l)=>a||u?1:0);return new v(c,o.typeInfo)}return new E(s||i?1:0,this.getTypeInfo("bool"))}return console.error(`Unknown operator ${e.operator}. Line ${e.line}`),null}_evalCall(e,n){if(e.cachedReturnValue!==null)return e.cachedReturnValue;let r=n.clone();r.currentFunctionName=e.name;let o=n.getFunction(e.name);if(!o)return e.isBuiltin?this._callBuiltinFunction(e,r):this.getTypeInfo(e.name)?this._evalCreate(e,n):(console.error(`Unknown function "${e.name}". Line ${e.line}`),null);for(let s=0;s<o.node.args.length;++s){let i=o.node.args[s],a=this.evalExpression(e.args[s],r);r.createVariable(i.name,a,i)}return this._execStatements(o.node.body,r)}_callBuiltinFunction(e,n){switch(e.name){case"all":return this.builtins.All(e,n);case"any":return this.builtins.Any(e,n);case"select":return this.builtins.Select(e,n);case"arrayLength":return this.builtins.ArrayLength(e,n);case"abs":return this.builtins.Abs(e,n);case"acos":return this.builtins.Acos(e,n);case"acosh":return this.builtins.Acosh(e,n);case"asin":return this.builtins.Asin(e,n);case"asinh":return this.builtins.Asinh(e,n);case"atan":return this.builtins.Atan(e,n);case"atanh":return this.builtins.Atanh(e,n);case"atan2":return this.builtins.Atan2(e,n);case"ceil":return this.builtins.Ceil(e,n);case"clamp":return this.builtins.Clamp(e,n);case"cos":return this.builtins.Cos(e,n);case"cosh":return this.builtins.Cosh(e,n);case"countLeadingZeros":return this.builtins.CountLeadingZeros(e,n);case"countOneBits":return this.builtins.CountOneBits(e,n);case"countTrailingZeros":return this.builtins.CountTrailingZeros(e,n);case"cross":return this.builtins.Cross(e,n);case"degrees":return this.builtins.Degrees(e,n);case"determinant":return this.builtins.Determinant(e,n);case"distance":return this.builtins.Distance(e,n);case"dot":return this.builtins.Dot(e,n);case"dot4U8Packed":return this.builtins.Dot4U8Packed(e,n);case"dot4I8Packed":return this.builtins.Dot4I8Packed(e,n);case"exp":return this.builtins.Exp(e,n);case"exp2":return this.builtins.Exp2(e,n);case"extractBits":return this.builtins.ExtractBits(e,n);case"faceForward":return this.builtins.FaceForward(e,n);case"firstLeadingBit":return this.builtins.FirstLeadingBit(e,n);case"firstTrailingBit":return this.builtins.FirstTrailingBit(e,n);case"floor":return this.builtins.Floor(e,n);case"fma":return this.builtins.Fma(e,n);case"fract":return this.builtins.Fract(e,n);case"frexp":return this.builtins.Frexp(e,n);case"insertBits":return this.builtins.InsertBits(e,n);case"inverseSqrt":return this.builtins.InverseSqrt(e,n);case"ldexp":return this.builtins.Ldexp(e,n);case"length":return this.builtins.Length(e,n);case"log":return this.builtins.Log(e,n);case"log2":return this.builtins.Log2(e,n);case"max":return this.builtins.Max(e,n);case"min":return this.builtins.Min(e,n);case"mix":return this.builtins.Mix(e,n);case"modf":return this.builtins.Modf(e,n);case"normalize":return this.builtins.Normalize(e,n);case"pow":return this.builtins.Pow(e,n);case"quantizeToF16":return this.builtins.QuantizeToF16(e,n);case"radians":return this.builtins.Radians(e,n);case"reflect":return this.builtins.Reflect(e,n);case"refract":return this.builtins.Refract(e,n);case"reverseBits":return this.builtins.ReverseBits(e,n);case"round":return this.builtins.Round(e,n);case"saturate":return this.builtins.Saturate(e,n);case"sign":return this.builtins.Sign(e,n);case"sin":return this.builtins.Sin(e,n);case"sinh":return this.builtins.Sinh(e,n);case"smoothstep":return this.builtins.SmoothStep(e,n);case"sqrt":return this.builtins.Sqrt(e,n);case"step":return this.builtins.Step(e,n);case"tan":return this.builtins.Tan(e,n);case"tanh":return this.builtins.Tanh(e,n);case"transpose":return this.builtins.Transpose(e,n);case"trunc":return this.builtins.Trunc(e,n);case"dpdx":return this.builtins.Dpdx(e,n);case"dpdxCoarse":return this.builtins.DpdxCoarse(e,n);case"dpdxFine":return this.builtins.DpdxFine(e,n);case"dpdy":return this.builtins.Dpdy(e,n);case"dpdyCoarse":return this.builtins.DpdyCoarse(e,n);case"dpdyFine":return this.builtins.DpdyFine(e,n);case"fwidth":return this.builtins.Fwidth(e,n);case"fwidthCoarse":return this.builtins.FwidthCoarse(e,n);case"fwidthFine":return this.builtins.FwidthFine(e,n);case"textureDimensions":return this.builtins.TextureDimensions(e,n);case"textureGather":return this.builtins.TextureGather(e,n);case"textureGatherCompare":return this.builtins.TextureGatherCompare(e,n);case"textureLoad":return this.builtins.TextureLoad(e,n);case"textureNumLayers":return this.builtins.TextureNumLayers(e,n);case"textureNumLevels":return this.builtins.TextureNumLevels(e,n);case"textureNumSamples":return this.builtins.TextureNumSamples(e,n);case"textureSample":return this.builtins.TextureSample(e,n);case"textureSampleBias":return this.builtins.TextureSampleBias(e,n);case"textureSampleCompare":return this.builtins.TextureSampleCompare(e,n);case"textureSampleCompareLevel":return this.builtins.TextureSampleCompareLevel(e,n);case"textureSampleGrad":return this.builtins.TextureSampleGrad(e,n);case"textureSampleLevel":return this.builtins.TextureSampleLevel(e,n);case"textureSampleBaseClampToEdge":return this.builtins.TextureSampleBaseClampToEdge(e,n);case"textureStore":return this.builtins.TextureStore(e,n);case"atomicLoad":return this.builtins.AtomicLoad(e,n);case"atomicStore":return this.builtins.AtomicStore(e,n);case"atomicAdd":return this.builtins.AtomicAdd(e,n);case"atomicSub":return this.builtins.AtomicSub(e,n);case"atomicMax":return this.builtins.AtomicMax(e,n);case"atomicMin":return this.builtins.AtomicMin(e,n);case"atomicAnd":return this.builtins.AtomicAnd(e,n);case"atomicOr":return this.builtins.AtomicOr(e,n);case"atomicXor":return this.builtins.AtomicXor(e,n);case"atomicExchange":return this.builtins.AtomicExchange(e,n);case"atomicCompareExchangeWeak":return this.builtins.AtomicCompareExchangeWeak(e,n);case"pack4x8snorm":return this.builtins.Pack4x8snorm(e,n);case"pack4x8unorm":return this.builtins.Pack4x8unorm(e,n);case"pack4xI8":return this.builtins.Pack4xI8(e,n);case"pack4xU8":return this.builtins.Pack4xU8(e,n);case"pack4x8Clamp":return this.builtins.Pack4x8Clamp(e,n);case"pack4xU8Clamp":return this.builtins.Pack4xU8Clamp(e,n);case"pack2x16snorm":return this.builtins.Pack2x16snorm(e,n);case"pack2x16unorm":return this.builtins.Pack2x16unorm(e,n);case"pack2x16float":return this.builtins.Pack2x16float(e,n);case"unpack4x8snorm":return this.builtins.Unpack4x8snorm(e,n);case"unpack4x8unorm":return this.builtins.Unpack4x8unorm(e,n);case"unpack4xI8":return this.builtins.Unpack4xI8(e,n);case"unpack4xU8":return this.builtins.Unpack4xU8(e,n);case"unpack2x16snorm":return this.builtins.Unpack2x16snorm(e,n);case"unpack2x16unorm":return this.builtins.Unpack2x16unorm(e,n);case"unpack2x16float":return this.builtins.Unpack2x16float(e,n);case"storageBarrier":return this.builtins.StorageBarrier(e,n);case"textureBarrier":return this.builtins.TextureBarrier(e,n);case"workgroupBarrier":return this.builtins.WorkgroupBarrier(e,n);case"workgroupUniformLoad":return this.builtins.WorkgroupUniformLoad(e,n);case"subgroupAdd":return this.builtins.SubgroupAdd(e,n);case"subgroupExclusiveAdd":return this.builtins.SubgroupExclusiveAdd(e,n);case"subgroupInclusiveAdd":return this.builtins.SubgroupInclusiveAdd(e,n);case"subgroupAll":return this.builtins.SubgroupAll(e,n);case"subgroupAnd":return this.builtins.SubgroupAnd(e,n);case"subgroupAny":return this.builtins.SubgroupAny(e,n);case"subgroupBallot":return this.builtins.SubgroupBallot(e,n);case"subgroupBroadcast":return this.builtins.SubgroupBroadcast(e,n);case"subgroupBroadcastFirst":return this.builtins.SubgroupBroadcastFirst(e,n);case"subgroupElect":return this.builtins.SubgroupElect(e,n);case"subgroupMax":return this.builtins.SubgroupMax(e,n);case"subgroupMin":return this.builtins.SubgroupMin(e,n);case"subgroupMul":return this.builtins.SubgroupMul(e,n);case"subgroupExclusiveMul":return this.builtins.SubgroupExclusiveMul(e,n);case"subgroupInclusiveMul":return this.builtins.SubgroupInclusiveMul(e,n);case"subgroupOr":return this.builtins.SubgroupOr(e,n);case"subgroupShuffle":return this.builtins.SubgroupShuffle(e,n);case"subgroupShuffleDown":return this.builtins.SubgroupShuffleDown(e,n);case"subgroupShuffleUp":return this.builtins.SubgroupShuffleUp(e,n);case"subgroupShuffleXor":return this.builtins.SubgroupShuffleXor(e,n);case"subgroupXor":return this.builtins.SubgroupXor(e,n);case"quadBroadcast":return this.builtins.QuadBroadcast(e,n);case"quadSwapDiagonal":return this.builtins.QuadSwapDiagonal(e,n);case"quadSwapX":return this.builtins.QuadSwapX(e,n);case"quadSwapY":return this.builtins.QuadSwapY(e,n)}let r=n.getFunction(e.name);if(r){let o=n.clone();for(let s=0;s<r.node.args.length;++s){let i=r.node.args[s],a=this.evalExpression(e.args[s],o);o.setVariable(i.name,a,i)}return this._execStatements(r.node.body,o)}return null}_callConstructorValue(e,n){if(!e.args||e.args.length===0)return new E(0,this.getTypeInfo(e.type));let r=this.evalExpression(e.args[0],n);return r.typeInfo=this.getTypeInfo(e.type),r.getSubData(this,e.postfix,n).clone()}_callConstructorVec(e,n){let r=this.getTypeInfo(e.type),o=e.type.getTypeName(),s=Hh[o];if(s===void 0)return console.error(`Invalid vec constructor ${o}. Line ${e.line}`),null;let i=[];if(e instanceof Ve)if(e.isVector){let a=e.vectorValue;for(let c of a)i.push(c)}else i.push(e.scalarValue);else if(e.args)for(let a of e.args){let c=this.evalExpression(a,n);if(c instanceof v){let u=c.data;for(let l=0;l<u.length;++l){let f=u[l];i.push(f)}}else if(c instanceof E){let u=c.value;i.push(u)}}if(e.type instanceof S&&e.type.format===null&&(e.type.format=S.f32),i.length===0){let a=new Array(s).fill(0);return new v(a,r).getSubData(this,e.postfix,n)}if(i.length===1)for(;i.length<s;)i.push(i[0]);return i.length<s?(console.error(`Invalid vec constructor. Line ${e.line}`),null):new v(i.length>s?i.slice(0,s):i,r).getSubData(this,e.postfix,n)}_callConstructorMatrix(e,n){let r=this.getTypeInfo(e.type),o=e.type.getTypeName(),s=ft[o];if(s===void 0)return console.error(`Invalid matrix constructor ${o}. Line ${e.line}`),null;let i=[];if(e instanceof Ve)if(e.isVector){let a=e.vectorValue;for(let c of a)i.push(c)}else i.push(e.scalarValue);else if(e.args)for(let a of e.args){let c=this.evalExpression(a,n);c instanceof v?i.push(...c.data):c instanceof E?i.push(c.value):c instanceof z&&i.push(...c.data)}if(r instanceof tr&&r.format===null&&(r.format=this.getTypeInfo("f32")),i.length===0){let a=new Array(s[2]).fill(0);return new z(a,r).getSubData(this,e.postfix,n)}return i.length!==s[2]?(console.error(`Invalid matrix constructor. Line ${e.line}`),null):new z(i,r).getSubData(this,e.postfix,n)}};Ds._breakObj=new nn(new Bt("BREAK",null),null),Ds._continueObj=new nn(new Bt("CONTINUE",null),null),Ds._priority=new Map([["f32",0],["f16",1],["u32",2],["i32",3],["x32",3]]);var ad=class{constructor(){this.constants=new Map,this.aliases=new Map,this.structs=new Map}},cd=class{constructor(){this._tokens=[],this._current=0,this._currentLine=1,this._deferArrayCountEval=[],this._currentLoop=[],this._context=new ad,this._exec=new Ds,this._forwardTypeCount=0}parse(e){this._initialize(e),this._deferArrayCountEval.length=0;let n=[];for(;!this._isAtEnd();){let r=this._global_decl_or_directive();if(!r)break;n.push(r)}if(this._deferArrayCountEval.length>0){for(let r of this._deferArrayCountEval){let o=r.arrayType,s=r.countNode;if(s instanceof mt){let i=s.name,a=this._context.constants.get(i);if(a)try{let c=a.constEvaluate(this._exec);o.count=c}catch{}}}this._deferArrayCountEval.length=0}if(this._forwardTypeCount>0)for(let r of n)r.search(o=>{o instanceof ju||o instanceof Vs?o.type=this._forwardType(o.type):o instanceof vo?o.format=this._forwardType(o.format):o instanceof hn||o instanceof bo||o instanceof Cs?o.type=this._forwardType(o.type):o instanceof _o?o.returnType=this._forwardType(o.returnType):o instanceof Pu&&(o.type=this._forwardType(o.type))});return n}_forwardType(e){if(e instanceof Uu){let n=this._getType(e.name);if(n)return n}else e instanceof Vs?e.type=this._forwardType(e.type):e instanceof vo&&(e.format=this._forwardType(e.format));return e}_initialize(e){if(e)if(typeof e=="string"){let n=new ed(e);this._tokens=n.scanTokens()}else this._tokens=e;else this._tokens=[];this._current=0}_updateNode(e,n){return e.line=n??this._currentLine,e}_error(e,n){return{token:e,message:n,toString:()=>`${n}`}}_isAtEnd(){return this._current>=this._tokens.length||this._peek().type==x.eof}_match(e){if(e instanceof T)return!!this._check(e)&&(this._advance(),!0);for(let n=0,r=e.length;n<r;++n){let o=e[n];if(this._check(o))return this._advance(),!0}return!1}_consume(e,n){if(this._check(e))return this._advance();throw this._error(this._peek(),`${n}. Line:${this._currentLine}`)}_check(e){if(this._isAtEnd())return!1;let n=this._peek();if(e instanceof Array){let r=n.type,o=!1;for(let s of e){if(r===s)return!0;s===x.tokens.name&&(o=!0)}if(o){let s=x.tokens.name.rule.exec(n.lexeme);if(s&&s.index==0&&s[0]==n.lexeme)return!0}return!1}if(n.type===e)return!0;if(e===x.tokens.name){let r=x.tokens.name.rule.exec(n.lexeme);return r&&r.index==0&&r[0]==n.lexeme}return!1}_advance(){var e,n;return this._currentLine=(n=(e=this._peek())===null||e===void 0?void 0:e.line)!==null&&n!==void 0?n:-1,this._isAtEnd()||this._current++,this._previous()}_peek(){return this._tokens[this._current]}_previous(){return this._tokens[this._current-1]}_global_decl_or_directive(){for(;this._match(x.tokens.semicolon)&&!this._isAtEnd(););if(this._match(x.keywords.alias)){let n=this._type_alias();return this._consume(x.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(x.keywords.diagnostic)){let n=this._diagnostic();return this._consume(x.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(x.keywords.requires)){let n=this._requires_directive();return this._consume(x.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}if(this._match(x.keywords.enable)){let n=this._enable_directive();return this._consume(x.tokens.semicolon,"Expected ';'"),this._exec.reflection.updateAST([n]),n}let e=this._attribute();if(this._check(x.keywords.var)){let n=this._global_variable_decl();return n!=null&&(n.attributes=e),this._consume(x.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(x.keywords.override)){let n=this._override_variable_decl();return n!=null&&(n.attributes=e),this._consume(x.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(x.keywords.let)){let n=this._global_let_decl();return n!=null&&(n.attributes=e),this._consume(x.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(x.keywords.const)){let n=this._global_const_decl();return n!=null&&(n.attributes=e),this._consume(x.tokens.semicolon,"Expected ';'."),this._exec.reflection.updateAST([n]),n}if(this._check(x.keywords.struct)){let n=this._struct_decl();return n!=null&&(n.attributes=e),this._exec.reflection.updateAST([n]),n}if(this._check(x.keywords.fn)){let n=this._function_decl();return n!=null&&(n.attributes=e),this._exec.reflection.updateAST([n]),n}return null}_function_decl(){if(!this._match(x.keywords.fn))return null;let e=this._currentLine,n=this._consume(x.tokens.ident,"Expected function name.").toString();this._consume(x.tokens.paren_left,"Expected '(' for function arguments.");let r=[];if(!this._check(x.tokens.paren_right))do{if(this._check(x.tokens.paren_right))break;let a=this._attribute(),c=this._consume(x.tokens.name,"Expected argument name.").toString();this._consume(x.tokens.colon,"Expected ':' for argument type.");let u=this._attribute(),l=this._type_decl();l!=null&&(l.attributes=u,r.push(this._updateNode(new Pu(c,l,a))))}while(this._match(x.tokens.comma));this._consume(x.tokens.paren_right,"Expected ')' after function arguments.");let o=null;if(this._match(x.tokens.arrow)){let a=this._attribute();o=this._type_decl(),o!=null&&(o.attributes=a)}let s=this._compound_statement(),i=this._currentLine;return this._updateNode(new _o(n,r,o,s,e,i),e)}_compound_statement(){let e=[];for(this._consume(x.tokens.brace_left,"Expected '{' for block.");!this._check(x.tokens.brace_right);){let n=this._statement();n!==null&&e.push(n)}return this._consume(x.tokens.brace_right,"Expected '}' for block."),e}_statement(){for(;this._match(x.tokens.semicolon)&&!this._isAtEnd(););if(this._check(x.tokens.attr)&&this._attribute(),this._check(x.keywords.if))return this._if_statement();if(this._check(x.keywords.switch))return this._switch_statement();if(this._check(x.keywords.loop))return this._loop_statement();if(this._check(x.keywords.for))return this._for_statement();if(this._check(x.keywords.while))return this._while_statement();if(this._check(x.keywords.continuing))return this._continuing_statement();if(this._check(x.keywords.static_assert))return this._static_assert_statement();if(this._check(x.tokens.brace_left))return this._compound_statement();let e=null;if(this._check(x.keywords.return))e=this._return_statement();else if(this._check([x.keywords.var,x.keywords.let,x.keywords.const]))e=this._variable_statement();else if(this._match(x.keywords.discard))e=this._updateNode(new $h);else if(this._match(x.keywords.break)){let n=this._updateNode(new Iu);if(this._currentLoop.length>0){let r=this._currentLoop[this._currentLoop.length-1];n.loopId=r.id}e=n,this._check(x.keywords.if)&&(this._advance(),n.condition=this._optional_paren_expression())}else if(this._match(x.keywords.continue)){let n=this._updateNode(new Ou);if(!(this._currentLoop.length>0))throw this._error(this._peek(),`Continue statement must be inside a loop. Line: ${n.line}`);{let r=this._currentLoop[this._currentLoop.length-1];n.loopId=r.id}e=n}else e=this._increment_decrement_statement()||this._func_call_statement()||this._assignment_statement();return e!=null&&this._consume(x.tokens.semicolon,"Expected ';' after statement."),e}_static_assert_statement(){if(!this._match(x.keywords.static_assert))return null;let e=this._currentLine,n=this._optional_paren_expression();return this._updateNode(new Yh(n),e)}_while_statement(){if(!this._match(x.keywords.while))return null;let e=this._updateNode(new Bu(null,null));return this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(x.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_continuing_statement(){let e=this._currentLoop.length>0?this._currentLoop[this._currentLoop.length-1].id:-1;if(!this._match(x.keywords.continuing))return null;let n=this._currentLine,r=this._compound_statement();return this._updateNode(new da(r,e),n)}_for_statement(){if(!this._match(x.keywords.for))return null;this._consume(x.tokens.paren_left,"Expected '('.");let e=this._updateNode(new Eu(null,null,null,null));return this._currentLoop.push(e),e.init=this._check(x.tokens.semicolon)?null:this._for_init(),this._consume(x.tokens.semicolon,"Expected ';'."),e.condition=this._check(x.tokens.semicolon)?null:this._short_circuit_or_expression(),this._consume(x.tokens.semicolon,"Expected ';'."),e.increment=this._check(x.tokens.paren_right)?null:this._for_increment(),this._consume(x.tokens.paren_right,"Expected ')'."),this._check(x.tokens.attr)&&this._attribute(),e.body=this._compound_statement(),this._currentLoop.pop(),e}_for_init(){return this._variable_statement()||this._func_call_statement()||this._assignment_statement()}_for_increment(){return this._func_call_statement()||this._increment_decrement_statement()||this._assignment_statement()}_variable_statement(){if(this._check(x.keywords.var)){let e=this._variable_decl();if(e===null)throw this._error(this._peek(),"Variable declaration expected.");let n=null;return this._match(x.tokens.equal)&&(n=this._short_circuit_or_expression()),this._updateNode(new hn(e.name,e.type,e.storage,e.access,n),e.line)}if(this._match(x.keywords.let)){let e=this._currentLine,n=this._consume(x.tokens.name,"Expected name for let.").toString(),r=null;if(this._match(x.tokens.colon)){let s=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=s)}this._consume(x.tokens.equal,"Expected '=' for let.");let o=this._short_circuit_or_expression();return this._updateNode(new bo(n,r,null,null,o),e)}if(this._match(x.keywords.const)){let e=this._currentLine,n=this._consume(x.tokens.name,"Expected name for const.").toString(),r=null;if(this._match(x.tokens.colon)){let s=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=s)}this._consume(x.tokens.equal,"Expected '=' for const.");let o=this._short_circuit_or_expression();return r===null&&o instanceof Ve&&(r=o.type),this._updateNode(new Cs(n,r,null,null,o),e)}return null}_increment_decrement_statement(){let e=this._current,n=this._unary_expression();if(n==null)return null;if(!this._check(x.increment_operators))return this._current=e,null;let r=this._consume(x.increment_operators,"Expected increment operator");return this._updateNode(new Su(r.type===x.tokens.plus_plus?Ss.increment:Ss.decrement,n))}_assignment_statement(){let e=null,n=this._currentLine;if(this._check(x.tokens.brace_right))return null;let r=this._match(x.tokens.underscore);if(r||(e=this._unary_expression()),!r&&e==null)return null;let o=this._consume(x.assignment_operators,"Expected assignment operator."),s=this._short_circuit_or_expression();return this._updateNode(new Mu(ma.parse(o.lexeme),e,s),n)}_func_call_statement(){if(!this._check(x.tokens.ident))return null;let e=this._currentLine,n=this._current,r=this._consume(x.tokens.ident,"Expected function name."),o=this._argument_expression_list();return o===null?(this._current=n,null):this._updateNode(new ga(r.lexeme,o),e)}_loop_statement(){if(!this._match(x.keywords.loop))return null;this._check(x.tokens.attr)&&this._attribute(),this._consume(x.tokens.brace_left,"Expected '{' for loop.");let e=this._updateNode(new Cu([],null));this._currentLoop.push(e);let n=this._statement();for(;n!==null;){if(Array.isArray(n))for(let r of n)e.body.push(r);else e.body.push(n);if(n instanceof da){e.continuing=n;break}n=this._statement()}return this._currentLoop.pop(),this._consume(x.tokens.brace_right,"Expected '}' for loop."),e}_switch_statement(){if(!this._match(x.keywords.switch))return null;let e=this._updateNode(new Vu(null,[]));if(this._currentLoop.push(e),e.condition=this._optional_paren_expression(),this._check(x.tokens.attr)&&this._attribute(),this._consume(x.tokens.brace_left,"Expected '{' for switch."),e.cases=this._switch_body(),e.cases==null||e.cases.length==0)throw this._error(this._previous(),"Expected 'case' or 'default'.");return this._consume(x.tokens.brace_right,"Expected '}' for switch."),this._currentLoop.pop(),e}_switch_body(){let e=[],n=!1;for(;this._check([x.keywords.default,x.keywords.case]);){if(this._match(x.keywords.case)){let r=this._case_selectors();for(let s of r)if(s instanceof Rs){if(n)throw this._error(this._previous(),"Multiple default cases in switch statement.");n=!0;break}this._match(x.tokens.colon),this._check(x.tokens.attr)&&this._attribute(),this._consume(x.tokens.brace_left,"Exected '{' for switch case.");let o=this._case_body();this._consume(x.tokens.brace_right,"Exected '}' for switch case."),e.push(this._updateNode(new zu(r,o)))}if(this._match(x.keywords.default)){if(n)throw this._error(this._previous(),"Multiple default cases in switch statement.");this._match(x.tokens.colon),this._check(x.tokens.attr)&&this._attribute(),this._consume(x.tokens.brace_left,"Exected '{' for switch default.");let r=this._case_body();this._consume(x.tokens.brace_right,"Exected '}' for switch default."),e.push(this._updateNode(new Hu(r)))}}return e}_case_selectors(){let e=[];for(this._match(x.keywords.default)?e.push(this._updateNode(new Rs)):e.push(this._shift_expression());this._match(x.tokens.comma);)this._match(x.keywords.default)?e.push(this._updateNode(new Rs)):e.push(this._shift_expression());return e}_case_body(){if(this._match(x.keywords.fallthrough))return this._consume(x.tokens.semicolon,"Expected ';'"),[];let e=this._statement();if(e==null)return[];e instanceof Array||(e=[e]);let n=this._case_body();return n.length==0?e:[...e,n[0]]}_if_statement(){if(!this._match(x.keywords.if))return null;let e=this._currentLine,n=this._optional_paren_expression();this._check(x.tokens.attr)&&this._attribute();let r=this._compound_statement(),o=[];this._match_elseif()&&(this._check(x.tokens.attr)&&this._attribute(),o=this._elseif_statement(o));let s=null;return this._match(x.keywords.else)&&(this._check(x.tokens.attr)&&this._attribute(),s=this._compound_statement()),this._updateNode(new Ru(n,r,o,s),e)}_match_elseif(){return this._tokens[this._current].type===x.keywords.else&&this._tokens[this._current+1].type===x.keywords.if&&(this._advance(),this._advance(),!0)}_elseif_statement(e=[]){let n=this._optional_paren_expression(),r=this._compound_statement();return e.push(this._updateNode(new Zh(n,r))),this._match_elseif()&&(this._check(x.tokens.attr)&&this._attribute(),this._elseif_statement(e)),e}_return_statement(){if(!this._match(x.keywords.return))return null;let e=this._short_circuit_or_expression();return this._updateNode(new Du(e))}_short_circuit_or_expression(){let e=this._short_circuit_and_expr();for(;this._match(x.tokens.or_or);)e=this._updateNode(new Lt(this._previous().toString(),e,this._short_circuit_and_expr()));return e}_short_circuit_and_expr(){let e=this._inclusive_or_expression();for(;this._match(x.tokens.and_and);)e=this._updateNode(new Lt(this._previous().toString(),e,this._inclusive_or_expression()));return e}_inclusive_or_expression(){let e=this._exclusive_or_expression();for(;this._match(x.tokens.or);)e=this._updateNode(new Lt(this._previous().toString(),e,this._exclusive_or_expression()));return e}_exclusive_or_expression(){let e=this._and_expression();for(;this._match(x.tokens.xor);)e=this._updateNode(new Lt(this._previous().toString(),e,this._and_expression()));return e}_and_expression(){let e=this._equality_expression();for(;this._match(x.tokens.and);)e=this._updateNode(new Lt(this._previous().toString(),e,this._equality_expression()));return e}_equality_expression(){let e=this._relational_expression();return this._match([x.tokens.equal_equal,x.tokens.not_equal])?this._updateNode(new Lt(this._previous().toString(),e,this._relational_expression())):e}_relational_expression(){let e=this._shift_expression();for(;this._match([x.tokens.less_than,x.tokens.greater_than,x.tokens.less_than_equal,x.tokens.greater_than_equal]);)e=this._updateNode(new Lt(this._previous().toString(),e,this._shift_expression()));return e}_shift_expression(){let e=this._additive_expression();for(;this._match([x.tokens.shift_left,x.tokens.shift_right]);)e=this._updateNode(new Lt(this._previous().toString(),e,this._additive_expression()));return e}_additive_expression(){let e=this._multiplicative_expression();for(;this._match([x.tokens.plus,x.tokens.minus]);)e=this._updateNode(new Lt(this._previous().toString(),e,this._multiplicative_expression()));return e}_multiplicative_expression(){let e=this._unary_expression();for(;this._match([x.tokens.star,x.tokens.forward_slash,x.tokens.modulo]);)e=this._updateNode(new Lt(this._previous().toString(),e,this._unary_expression()));return e}_unary_expression(){return this._match([x.tokens.minus,x.tokens.bang,x.tokens.tilde,x.tokens.star,x.tokens.and])?this._updateNode(new Se(this._previous().toString(),this._unary_expression())):this._singular_expression()}_singular_expression(){let e=this._primary_expression(),n=this._postfix_expression();return n&&(e.postfix=n),e}_postfix_expression(){if(this._match(x.tokens.bracket_left)){let e=this._short_circuit_or_expression();this._consume(x.tokens.bracket_right,"Expected ']'.");let n=this._updateNode(new Nr(e)),r=this._postfix_expression();return r&&(n.postfix=r),n}if(this._match(x.tokens.period)){let e=this._consume(x.tokens.name,"Expected member name."),n=this._postfix_expression(),r=this._updateNode(new nr(e.lexeme));return n&&(r.postfix=n),r}return null}_getStruct(e){return this._context.aliases.has(e)?this._context.aliases.get(e).type:this._context.structs.has(e)?this._context.structs.get(e):null}_getType(e){let n=this._getStruct(e);if(n!==null)return n;switch(e){case"void":return O.void;case"bool":return O.bool;case"i32":return O.i32;case"u32":return O.u32;case"f32":return O.f32;case"f16":return O.f16;case"vec2f":return S.vec2f;case"vec3f":return S.vec3f;case"vec4f":return S.vec4f;case"vec2i":return S.vec2i;case"vec3i":return S.vec3i;case"vec4i":return S.vec4i;case"vec2u":return S.vec2u;case"vec3u":return S.vec3u;case"vec4u":return S.vec4u;case"vec2h":return S.vec2h;case"vec3h":return S.vec3h;case"vec4h":return S.vec4h;case"mat2x2f":return S.mat2x2f;case"mat2x3f":return S.mat2x3f;case"mat2x4f":return S.mat2x4f;case"mat3x2f":return S.mat3x2f;case"mat3x3f":return S.mat3x3f;case"mat3x4f":return S.mat3x4f;case"mat4x2f":return S.mat4x2f;case"mat4x3f":return S.mat4x3f;case"mat4x4f":return S.mat4x4f;case"mat2x2h":return S.mat2x2h;case"mat2x3h":return S.mat2x3h;case"mat2x4h":return S.mat2x4h;case"mat3x2h":return S.mat3x2h;case"mat3x3h":return S.mat3x3h;case"mat3x4h":return S.mat3x4h;case"mat4x2h":return S.mat4x2h;case"mat4x3h":return S.mat4x3h;case"mat4x4h":return S.mat4x4h;case"mat2x2i":return S.mat2x2i;case"mat2x3i":return S.mat2x3i;case"mat2x4i":return S.mat2x4i;case"mat3x2i":return S.mat3x2i;case"mat3x3i":return S.mat3x3i;case"mat3x4i":return S.mat3x4i;case"mat4x2i":return S.mat4x2i;case"mat4x3i":return S.mat4x3i;case"mat4x4i":return S.mat4x4i;case"mat2x2u":return S.mat2x2u;case"mat2x3u":return S.mat2x3u;case"mat2x4u":return S.mat2x4u;case"mat3x2u":return S.mat3x2u;case"mat3x3u":return S.mat3x3u;case"mat3x4u":return S.mat3x4u;case"mat4x2u":return S.mat4x2u;case"mat4x3u":return S.mat4x3u;case"mat4x4u":return S.mat4x4u}return null}_validateTypeRange(e,n){if(n.name==="i32"){if(e<-2147483648||e>2147483647)throw this._error(this._previous(),`Value out of range for i32: ${e}. Line: ${this._currentLine}.`)}else if(n.name==="u32"&&(e<0||e>4294967295))throw this._error(this._previous(),`Value out of range for u32: ${e}. Line: ${this._currentLine}.`)}_primary_expression(){if(this._match(x.tokens.ident)){let r=this._previous().toString();if(this._check(x.tokens.paren_left)){let o=this._argument_expression_list(),s=this._getType(r);return s!==null?this._updateNode(new en(s,o)):this._updateNode(new xa(r,o))}if(this._context.constants.has(r)){let o=this._context.constants.get(r);return this._updateNode(new Gu(r,o.value))}return this._updateNode(new mt(r))}if(this._match(x.tokens.int_literal)){let r=this._previous().toString(),o=r.endsWith("i")||r.endsWith("i")?O.i32:r.endsWith("u")||r.endsWith("U")?O.u32:O.x32,s=parseInt(r);return this._validateTypeRange(s,o),this._updateNode(new Ve(new E(s,this._exec.getTypeInfo(o)),o))}if(this._match(x.tokens.uint_literal)){let r=parseInt(this._previous().toString());return this._validateTypeRange(r,O.u32),this._updateNode(new Ve(new E(r,this._exec.getTypeInfo(O.u32)),O.u32))}if(this._match([x.tokens.decimal_float_literal,x.tokens.hex_float_literal])){let r=this._previous().toString(),o=r.endsWith("h");o&&(r=r.substring(0,r.length-1));let s=parseFloat(r);this._validateTypeRange(s,o?O.f16:O.f32);let i=o?O.f16:O.f32;return this._updateNode(new Ve(new E(s,this._exec.getTypeInfo(i)),i))}if(this._match([x.keywords.true,x.keywords.false])){let r=this._previous().toString()===x.keywords.true.rule;return this._updateNode(new Ve(new E(r?1:0,this._exec.getTypeInfo(O.bool)),O.bool))}if(this._check(x.tokens.paren_left))return this._paren_expression();if(this._match(x.keywords.bitcast)){this._consume(x.tokens.less_than,"Expected '<'.");let r=this._type_decl();this._consume(x.tokens.greater_than,"Expected '>'.");let o=this._paren_expression();return this._updateNode(new Lu(r,o))}let e=this._type_decl(),n=this._argument_expression_list();return this._updateNode(new en(e,n))}_argument_expression_list(){if(!this._match(x.tokens.paren_left))return null;let e=[];do{if(this._check(x.tokens.paren_right))break;let n=this._short_circuit_or_expression();e.push(n)}while(this._match(x.tokens.comma));return this._consume(x.tokens.paren_right,"Expected ')' for agument list"),e}_optional_paren_expression(){this._match(x.tokens.paren_left);let e=this._short_circuit_or_expression();return this._match(x.tokens.paren_right),e}_paren_expression(){this._consume(x.tokens.paren_left,"Expected '('.");let e=this._short_circuit_or_expression();return this._consume(x.tokens.paren_right,"Expected ')'."),e}_struct_decl(){if(!this._match(x.keywords.struct))return null;let e=this._currentLine,n=this._consume(x.tokens.ident,"Expected name for struct.").toString();this._consume(x.tokens.brace_left,"Expected '{' for struct body.");let r=[];for(;!this._check(x.tokens.brace_right);){let i=this._attribute(),a=this._consume(x.tokens.name,"Expected variable name.").toString();this._consume(x.tokens.colon,"Expected ':' for struct member type.");let c=this._attribute(),u=this._type_decl();u!=null&&(u.attributes=c),this._check(x.tokens.brace_right)?this._match(x.tokens.comma):this._consume(x.tokens.comma,"Expected ',' for struct member."),r.push(this._updateNode(new ju(a,u,i)))}this._consume(x.tokens.brace_right,"Expected '}' after struct body.");let o=this._currentLine,s=this._updateNode(new mn(n,r,e,o),e);return this._context.structs.set(n,s),s}_global_variable_decl(){let e=this._variable_decl();if(!e)return null;if(this._match(x.tokens.equal)){let n=this._const_expression();e.value=n}if(e.type!==null&&e.value instanceof Ve){if(e.value.type.name!=="x32"&&e.type.getTypeName()!==e.value.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${e.value.type.name} to ${e.type.name}. Line:${this._currentLine}`);e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type),e.value.type=e.type}else e.type===null&&e.value instanceof Ve&&(e.type=e.value.type.name==="x32"?O.i32:e.value.type,e.value.isScalar&&this._validateTypeRange(e.value.scalarValue,e.type));return e}_override_variable_decl(){let e=this._override_decl();return e&&this._match(x.tokens.equal)&&(e.value=this._const_expression()),e}_global_const_decl(){var e;if(!this._match(x.keywords.const))return null;let n=this._consume(x.tokens.name,"Expected variable name"),r=this._currentLine,o=null;if(this._match(x.tokens.colon)){let c=this._attribute();o=this._type_decl(),o!=null&&(o.attributes=c)}let s=null;this._consume(x.tokens.equal,"const declarations require an assignment");let i=this._short_circuit_or_expression();try{let c=[O.f32],u=i.constEvaluate(this._exec,c);u instanceof E&&this._validateTypeRange(u.value,c[0]),c[0]instanceof S&&c[0].format===null&&u.typeInfo instanceof tr&&u.typeInfo.format!==null&&(u.typeInfo.format.name==="f16"?c[0].format=O.f16:u.typeInfo.format.name==="f32"?c[0].format=O.f32:u.typeInfo.format.name==="i32"?c[0].format=O.i32:u.typeInfo.format.name==="u32"?c[0].format=O.u32:u.typeInfo.format.name==="bool"?c[0].format=O.bool:console.error(`TODO: impelement template format type ${u.typeInfo.format.name}`)),s=this._updateNode(new Ve(u,c[0])),this._exec.context.setVariable(n.toString(),u)}catch{s=i}if(o!==null&&s instanceof Ve){if(s.type.name!=="x32"&&o.getTypeName()!==s.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${s.type.name} to ${o.name}. Line:${this._currentLine}`);s.type=o,s.isScalar&&this._validateTypeRange(s.scalarValue,s.type)}else o===null&&s instanceof Ve&&(o=(e=s?.type)!==null&&e!==void 0?e:O.f32,o===O.x32&&(o=O.i32));let a=this._updateNode(new Cs(n.toString(),o,"","",s),r);return this._context.constants.set(a.name,a),a}_global_let_decl(){if(!this._match(x.keywords.let))return null;let e=this._currentLine,n=this._consume(x.tokens.name,"Expected variable name"),r=null;if(this._match(x.tokens.colon)){let s=this._attribute();r=this._type_decl(),r!=null&&(r.attributes=s)}let o=null;if(this._match(x.tokens.equal)&&(o=this._const_expression()),r!==null&&o instanceof Ve){if(o.type.name!=="x32"&&r.getTypeName()!==o.type.getTypeName())throw this._error(this._peek(),`Invalid cast from ${o.type.name} to ${r.name}. Line:${this._currentLine}`);o.type=r}else r===null&&o instanceof Ve&&(r=o.type.name==="x32"?O.i32:o.type);return o instanceof Ve&&o.isScalar&&this._validateTypeRange(o.scalarValue,r),this._updateNode(new bo(n.toString(),r,"","",o),e)}_const_expression(){return this._short_circuit_or_expression()}_variable_decl(){if(!this._match(x.keywords.var))return null;let e=this._currentLine,n="",r="";this._match(x.tokens.less_than)&&(n=this._consume(x.storage_class,"Expected storage_class.").toString(),this._match(x.tokens.comma)&&(r=this._consume(x.access_mode,"Expected access_mode.").toString()),this._consume(x.tokens.greater_than,"Expected '>'."));let o=this._consume(x.tokens.name,"Expected variable name"),s=null;if(this._match(x.tokens.colon)){let i=this._attribute();s=this._type_decl(),s!=null&&(s.attributes=i)}return this._updateNode(new hn(o.toString(),s,n,r,null),e)}_override_decl(){if(!this._match(x.keywords.override))return null;let e=this._consume(x.tokens.name,"Expected variable name"),n=null;if(this._match(x.tokens.colon)){let r=this._attribute();n=this._type_decl(),n!=null&&(n.attributes=r)}return this._updateNode(new pa(e.toString(),n,null))}_diagnostic(){this._consume(x.tokens.paren_left,"Expected '('");let e=this._consume(x.tokens.ident,"Expected severity control name.");this._consume(x.tokens.comma,"Expected ','");let n=this._consume(x.tokens.ident,"Expected diagnostic rule name.").toString();return this._match(x.tokens.period)&&(n+=`.${this._consume(x.tokens.ident,"Expected diagnostic message.").toString()}`),this._consume(x.tokens.paren_right,"Expected ')'"),this._updateNode(new ku(e.toString(),n))}_enable_directive(){let e=this._consume(x.tokens.ident,"identity expected.");return this._updateNode(new Qh(e.toString()))}_requires_directive(){let e=[this._consume(x.tokens.ident,"identity expected.").toString()];for(;this._match(x.tokens.comma);){let n=this._consume(x.tokens.ident,"identity expected.");e.push(n.toString())}return this._updateNode(new Wh(e))}_type_alias(){let e=this._consume(x.tokens.ident,"identity expected.");this._consume(x.tokens.equal,"Expected '=' for type alias.");let n=this._type_decl();if(n===null)throw this._error(this._peek(),"Expected Type for Alias.");this._context.aliases.has(n.name)&&(n=this._context.aliases.get(n.name).type);let r=this._updateNode(new ya(e.toString(),n));return this._context.aliases.set(r.name,r),r}_type_decl(){if(this._check([x.tokens.ident,...x.texel_format,x.keywords.bool,x.keywords.f32,x.keywords.i32,x.keywords.u32])){let r=this._advance().toString();if(this._context.structs.has(r))return this._context.structs.get(r);if(this._context.aliases.has(r))return this._context.aliases.get(r).type;if(!this._getType(r)){let o=this._updateNode(new Uu(r));return this._forwardTypeCount++,o}return this._updateNode(new O(r))}let e=this._texture_sampler_types();if(e)return e;if(this._check(x.template_types)){let r=this._advance().toString(),o=null,s=null;return this._match(x.tokens.less_than)&&(o=this._type_decl(),s=null,this._match(x.tokens.comma)&&(s=this._consume(x.access_mode,"Expected access_mode for pointer").toString()),this._consume(x.tokens.greater_than,"Expected '>' for type.")),this._updateNode(new S(r,o,s))}if(this._match(x.keywords.ptr)){let r=this._previous().toString();this._consume(x.tokens.less_than,"Expected '<' for pointer.");let o=this._consume(x.storage_class,"Expected storage_class for pointer");this._consume(x.tokens.comma,"Expected ',' for pointer.");let s=this._type_decl(),i=null;return this._match(x.tokens.comma)&&(i=this._consume(x.access_mode,"Expected access_mode for pointer").toString()),this._consume(x.tokens.greater_than,"Expected '>' for pointer."),this._updateNode(new Vs(r,o.toString(),s,i))}let n=this._attribute();if(this._match(x.keywords.array)){let r=null,o=-1,s=this._previous(),i=null;if(this._match(x.tokens.less_than)){r=this._type_decl(),this._context.aliases.has(r.name)&&(r=this._context.aliases.get(r.name).type);let c="";if(this._match(x.tokens.comma)){i=this._shift_expression();try{c=i.constEvaluate(this._exec).toString(),i=null}catch{c="1"}}this._consume(x.tokens.greater_than,"Expected '>' for array."),o=c?parseInt(c):0}let a=this._updateNode(new vo(s.toString(),n,r,o));return i&&this._deferArrayCountEval.push({arrayType:a,countNode:i}),a}return null}_texture_sampler_types(){if(this._match(x.sampler_type))return this._updateNode(new xo(this._previous().toString(),null,null));if(this._match(x.depth_texture_type))return this._updateNode(new xo(this._previous().toString(),null,null));if(this._match(x.sampled_texture_type)||this._match(x.multisampled_texture_type)){let e=this._previous();this._consume(x.tokens.less_than,"Expected '<' for sampler type.");let n=this._type_decl();return this._consume(x.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new xo(e.toString(),n,null))}if(this._match(x.storage_texture_type)){let e=this._previous();this._consume(x.tokens.less_than,"Expected '<' for sampler type.");let n=this._consume(x.texel_format,"Invalid texel format.").toString();this._consume(x.tokens.comma,"Expected ',' after texel format.");let r=this._consume(x.access_mode,"Expected access mode for storage texture type.").toString();return this._consume(x.tokens.greater_than,"Expected '>' for sampler type."),this._updateNode(new xo(e.toString(),n,r))}return null}_attribute(){let e=[];for(;this._match(x.tokens.attr);){let n=this._consume(x.attribute_name,"Expected attribute name"),r=this._updateNode(new Ku(n.toString(),null));if(this._match(x.tokens.paren_left)){if(r.value=this._consume(x.literal_or_ident,"Expected attribute value").toString(),this._check(x.tokens.comma)){this._advance();do{let o=this._consume(x.literal_or_ident,"Expected attribute value").toString();r.value instanceof Array||(r.value=[r.value]),r.value.push(o)}while(this._match(x.tokens.comma))}this._consume(x.tokens.paren_right,"Expected ')'")}e.push(r)}return e.length==0?null:e}},Qu=class extends Ao{constructor(e){super(),e&&this.update(e)}update(e){let n=new cd().parse(e);this.updateAST(n)}};var _2=`/*TEXTURES*/\r
\r
/*TEXTURES*/\r
\r
\r
/*GLOBALS*/\r
\r
/*GLOBALS*/\r
\r
struct FragInput {\r
  @builtin(position) position : vec4f,\r
  @location(0) uv : vec2f,\r
}\r
\r
@vertex\r
fn VSMain(@builtin(vertex_index) vertexIndex: u32) -> FragInput {\r
  var output: FragInput;\r
\r
  output.position = vec4(array(\r
    vec2( 1.0,  1.0),\r
    vec2( 1.0, -1.0),\r
    vec2(-1.0, -1.0),\r
    vec2( 1.0,  1.0),\r
    vec2(-1.0, -1.0),\r
    vec2(-1.0,  1.0),\r
  )[vertexIndex], 0.5, 1.0);\r
\r
  output.uv = array(\r
    vec2(1.0, 0.0),\r
    vec2(1.0, 1.0),\r
    vec2(0.0, 1.0),\r
    vec2(1.0, 0.0),\r
    vec2(0.0, 1.0),\r
    vec2(0.0, 0.0),\r
  )[vertexIndex];\r
\r
  return output;\r
}\r
\r
struct Output {\r
/*OUTPUT_STRUCT*/\r
\r
/*OUTPUT_STRUCT*/\r
}\r
\r
@fragment\r
fn FSMain(@location(0) uv : vec2f) -> Output  {\r
  /*FRAGMENT_BODY*/\r
\r
  /*FRAGMENT_BODY*/\r
}`;function pT(t){return Au(_2,[{delimiter:"/*TEXTURES*/",replaceWith:t.textures},{delimiter:"/*GLOBALS*/",replaceWith:t.globals},{delimiter:"/*OUTPUT_STRUCT*/",replaceWith:t.outputStruct},{delimiter:"/*FRAGMENT_BODY*/",replaceWith:t.fragmentBody}])}var w2={r8unorm:"f32",r8snorm:"f32",r8uint:"u32",r8sint:"i32",r16unorm:"u32",r16snorm:"i32",r16uint:"u32",r16sint:"i32",r16float:"f32",rg8unorm:"vec2f",rg8snorm:"vec2f",rg8uint:"vec2u",rg8sint:"vec2i",r32uint:"u32",r32sint:"i32",r32float:"f32",rg16unorm:"vec2f",rg16snorm:"vec2f",rg16uint:"vec2u",rg16sint:"vec2i",rg16float:"vec2f",rgba8unorm:"vec4f","rgba8unorm-srgb":"vec4f",rgba8snorm:"vec4f",rgba8uint:"vec4u",rgba8sint:"vec4i",bgra8unorm:"vec4f","bgra8unorm-srgb":"vec4f",rgb9e5ufloat:"vec4f",rgb10a2uint:"vec4u",rgb10a2unorm:"vec4f",rg11b10ufloat:"vec4f",rg32uint:"vec2u",rg32sint:"vec2i",rg32float:"vec2f",rgba16unorm:"vec4u",rgba16snorm:"vec4i",rgba16uint:"vec4u",rgba16sint:"vec4i",rgba16float:"vec4f",rgba32uint:"vec4u",rgba32sint:"vec4i",rgba32float:"vec4f"};function $e(t,e){let n="",r="",o=0,s=[];for(let y of e.samplers??[{}])r+=`@group(0) @binding(${o})
var sampler${o}: sampler;
`,s.push(t.createSampler(y)),o++;o=0;let i=new Map,a=new Map,c=Object.entries(e.inputs);for(let[y,A]of c)r+=`@group(1) @binding(${o}) 
var tex_${y}: texture_${A.dimensionality??"2d"}<${A.type??"f32"}>;`,i.set(y,o),n+=`  var ${y} = textureSample(tex_${y}, sampler${A.sampleWith??0}, uv);
`,o++;let u="",l=0;for(let[y,A]of Object.entries(e.outputs))u+=`  @location(${l}) ${y}: ${w2[A]},
`,a.set(y,l),n+=`  var ${y}: ${w2[A]};
`,l++;n+=e.source,n+=`
  var OUTPUT: Output;
`;let f=Object.entries(e.outputs);for(let[y,A]of f)n+=`  OUTPUT.${y} = ${y};
`;n+="return OUTPUT;";let m="";if(m+=e.globals??"",e.uniforms){m+=`@group(2) @binding(0) var<uniform> params : Params;
struct Params {
`;for(let[y,A]of Object.entries(e.uniforms??{}))m+=`  ${y}: ${A},
`;m+="}"}let d=pT({textures:r,globals:m,outputStruct:u,fragmentBody:n}),b=new Qu(d).getBindGroups(),w=t.createShaderModule({code:d}),h=t.createRenderPipeline({layout:"auto",vertex:{module:w},fragment:{module:w,targets:f.map(([y,A])=>({format:A}))}}),g=t.createBindGroup({layout:h.getBindGroupLayout(0),entries:s.map((y,A)=>({resource:y,binding:A}))});return{pipeline:h,makeUniformBuffer(){let y=t.createBuffer({size:1024,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM}),A=t.createBindGroup({layout:h.getBindGroupLayout(2),entries:[{resource:y,binding:0}]}),C={buffer:y,bindGroup:A,setBuffer(U){let V=ur({bindGroups:b},2,0,U);return t.queue.writeBuffer(y,0,V),C}};return C},withInputs(y){let A=t.createBindGroup({layout:h.getBindGroupLayout(1),entries:c.map(([C,U],V)=>({resource:y[C],binding:V}))});return C=>(U,V,k)=>{let G=U.beginRenderPass({colorAttachments:f.map(([_,R])=>V[_]instanceof GPUTextureView?{view:V[_],clearValue:[0,0,0,1],loadOp:"clear",storeOp:"store"}:V[_])});G.setPipeline(h),G.setBindGroup(0,g),G.setBindGroup(1,A),C&&G.setBindGroup(2,C.bindGroup),G.draw(6),G.end()}}}}function gT(t,e){let n=r=>(r/t)**2*e;return pt(t).map(r=>{let o=r*2.4,s=n(r),i=n(r+1);return[Math.cos(o)*s,Math.sin(o)*s,s,i]})}var va=gT(36,6).map(t=>`vec4f(${t.join(",")})`).join(", ");console.log(va);function T2(t){return $e(t,{inputs:{color:{},depth:{}},outputs:{blurred:"rgba8unorm"},uniforms:{step:"vec2f"},globals:`
    const OFFSETS = array(${va});`,source:`
        var factor = 0.0;

        var size = vec2f(textureDimensions(tex_depth).xy);

        blurred = vec4(0.0);

        for (var i = 0; i < 36; i++) {
          let offset = OFFSETS[i];
          let uv2 = uv + offset.xy / size * params.step;

          let d = textureSample(tex_depth, sampler0, uv2).y;
          let pixel = textureSample(tex_color, sampler0, uv2);

          let maxdist = sqrt(36);

          let distance_factor = offset.z / maxdist;
          let distance_factor_next = offset.w / maxdist;

          
          var opacity = mix(
            0.0, 
            clamp(depth.y - d + 0.5, 0.0, 1.0),
            clamp(
              (d - distance_factor) / (distance_factor_next - distance_factor),
              0.0, 1.0 
            ) 
          );

          factor += opacity;

          blurred += pixel * opacity;
        }

      blurred /= factor;
    `})}function B2(t){return $e(t,{inputs:{far:{},near:{},depth:{},color:{}},samplers:[{minFilter:"nearest",magFilter:"nearest"}],outputs:{blurred:"rgba8unorm"},uniforms:{step:"vec2f"},globals:`
    const OFFSETS = array(${va});`,source:`

        var size = vec2f(textureDimensions(tex_depth).xy);

        blurred = vec4(0.0);

        for (var i = 0; i < 36; i++) {
          let offset = OFFSETS[i];
          let uv2 = uv + offset.xy / size * params.step;

          var pixel = textureSampleLevel(tex_near, sampler0, uv2, 0.0);
          if (pixel.a > 0.0) {
            pixel.a = max(pixel.a, 0.01);
          }
          let d = pixel.a;
          pixel.a = 1.0;

          let maxdist = sqrt(35);

          let distance_factor = offset.z / maxdist;
          let distance_factor_next = offset.w / maxdist;

          
          var opacity = mix(
            0.0, 
            clamp(1.0 / (d * maxdist), 0.1, 1.0),
            // clamp(1.0 / max(pow(d * maxdist * 1.5, 1.0), 1.0), 0.0, 1.0),
            // clamp(depth.y - d + 0.5, 0.0, 1.0),
            min(clamp(
              (d - distance_factor) / (distance_factor_next - distance_factor)
              ,
              0.0, 1.0 
            ),
            clamp(
            (d - depth.x + 0.1) * 10.0, 0.0, 1.0)   
            )
          ); 

          /*
          var opacity = select(
            0.0,
            1 / max(pow(d * maxdist, 2.0), 1.0),
            d > distance_factor 
          ); */

          // blurred += pixel * opacity;
           blurred = mix(blurred, pixel, opacity);
        }

       blurred = mix(color, mix(
         far,
         blurred,
         blurred.a
         // near,
         // select(0.0, 1.0, near.a > 0)
      ), clamp(
        max(depth.x, depth.y) * 100.0,
      0.0, 1.0) );

        blurred.a = 1.0;

    `})}function E2(t){return $e(t,{inputs:{color:{},depth:{}},outputs:{blurred:"rgba8unorm"},uniforms:{step:"vec2f"},globals:`
    const OFFSETS = array(${va});`,source:`
        var factor = 0.0;

        var size = vec2f(textureDimensions(tex_depth).xy);

        blurred = vec4f(0.0);

        for (var i = 0; i < 36; i++) {
          let offset = OFFSETS[i];
          let uv2 = uv + offset.xy / size * params.step;

          let d = textureSample(tex_depth, sampler0, uv2).x;
          let pixel = textureSample(tex_color, sampler0, uv2);

          let maxdist = sqrt(36);

          let distance_factor = offset.z / maxdist;
          let distance_factor_next = offset.w / maxdist;

          
          var opacity = mix(
            0.0, 
            1.0,
             clamp(
              (d - distance_factor ) / (distance_factor_next - distance_factor) + 1.0,
              0.0, 1.0 
            ) 
          );

          /*
          var opacity = select(
          0.0, 1.0,
            distance_factor < d
          );*/

          blurred = max(blurred, vec4f(pixel.rgb * opacity, d * opacity));
        }


    `})}function S2(t){return $e(t,{inputs:{color:{},depth:{}},samplers:[{minFilter:"linear",magFilter:"linear"}],outputs:{far_field:"rgba8unorm"},source:`
      far_field = color;
      // if (depth.y == 1.0) {
      //  far_field.a = 0.0;
      // }
    `})}function M2(t){return $e(t,{inputs:{x:{}},samplers:[{minFilter:"linear",magFilter:"linear"}],outputs:{y:"rgba8unorm"},source:`
      let step = vec2f(textureDimensions(tex_x));
      y = textureSample(tex_x, sampler0, uv + vec2f(1.0) / step); 
    `})}var J=gn(P2(),1);var j2=J.default.Matrix?J.default.Matrix:J.Matrix;var K2=J.inverse;function cl(t){let e=new j2([t.slice(0,4),t.slice(4,8),t.slice(8,12),t.slice(12,16)]).transpose();return K2(e).transpose().to1DArray()}var ul={create(){},onDestroy(){},async init(){let t=document.createElement("canvas");return t.width=1024,t.height=1024,document.body.appendChild(t),{canvas:t}},brand:"mainCanvas",dependencies:[],globalDependencies:[]},Hs=Symbol("GBuffer Pass"),_d=Symbol("GBuffer Submit"),wd=Symbol("Lighting Pass");function u4(t,e){let n=t.createTexture({dimension:"2d",format:"rgba8unorm",label:"albedo",size:e,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),r=t.createTexture({dimension:"2d",format:"rgba16float",label:"normal",size:e,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),o=t.createTexture({dimension:"2d",format:"rgba32float",label:"position",size:e,usage:GPUTextureUsage.COPY_DST|GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.STORAGE_BINDING}),s=t.createTexture({size:e,format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT});return{albedo:n,normal:r,position:o,depth:s}}function l4(t,e){let n=(s,i,a)=>t.createTexture({size:e.map(c=>Math.ceil(c*s)),format:i,mipLevelCount:a,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_DST|GPUTextureUsage.TEXTURE_BINDING}),r=n(1,"rgba8unorm",2),o=n(1,"rgba8unorm",1);return{color:r,color2:o,depth:n(1,"rg8unorm",1),depth2:n(1,"rg8unorm",1),nearField:n(1,"rgba8unorm",1),nearField2:n(1,"rgba8unorm",1),farField:n(1,"rgba8unorm",1),farField2:n(1,"rgba8unorm",1)}}function or(t,e,n,r){let o=t.createBuffer({label:r,usage:n,size:e.byteLength});return t.queue.writeBuffer(o,0,e),o}function f4(t,e,n){let r=n&&e[0]===n.dimensions[0]&&e[1]===n.dimensions[1]?n:void 0;return r||{gbuffer:u4(t,e),dimensions:e,lighting:l4(t,e)}}function m4(t){return or(t,new Float32Array([1,-1,-1,1,-1,-1,1,-1,1,1,-1,1]),GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST,"fullscreen quad for blit")}function Ns(t,e){return pt(e-t+1).map(n=>n-t)}var Ge={create(){},onDestroy(){},async init(t){let e=(await t(ul)).canvas,n=e.getContext("webgpu"),o=await(await navigator.gpu.requestAdapter()).requestDevice({requiredFeatures:["float32-filterable"],requiredLimits:{}}),s=navigator.gpu.getPreferredCanvasFormat();n.configure({device:o,format:s});let i=new Set;return{fog:$e(o,{inputs:{color:{},position:{}},outputs:{fogged:"rgba8unorm"},source:`
        fogged = mix(vec4(0.12,0.13,0.14,1.0),color, exp(position.z * -0.05));
        `}),blit:$e(o,{inputs:{x:{}},outputs:{y:"rgba8unorm"},source:"y = x;"}),blitToCanvas:$e(o,{inputs:{x:{}},outputs:{y:s},source:"y = mix(vec4f(1.0,0.0,0.0,1.0), vec4f(x.rgb, 1.0), x.a);"}),finalComposite:$e(o,{inputs:{original:{},blurred:{}},outputs:{y:s},source:`y = mix(original, blurred, blurred.a);
        y.a = 1.0;`}),debugBlitToCanvas:$e(o,{inputs:{x:{}},outputs:{y:s},source:`
        y = x;
        y.a = 1.0;`}),maxFilter:$e(o,{inputs:{color:{}},uniforms:{dims:"vec2f"},outputs:{blurred:"rgba8unorm"},source:`
        blurred = vec4f(0.0, 0.0, 0.0, 0.0);
        var size = vec2f(textureDimensions(tex_color).xy);
        for (var y = -params.dims.y; y < params.dims.y + 1.0; y += 1.0) {
          for (var x = -params.dims.x; x < params.dims.x + 1.0; x += 1.0) {
            blurred = max(
              blurred,
              textureSample(tex_color, sampler0, uv + vec2f(x, y) / size)
            );
          } 
        } 
        `}),blurNear:B2(o),blurFar:T2(o),maxFilterNear:E2(o),maskOutFar:S2(o),farFieldMaxFilter:$e(o,{inputs:{color:{}},uniforms:{dims:"vec2f",delta:"vec2f"},outputs:{blurred:"rgba8unorm"},source:`
        blurred = color; 
        var size = vec2f(textureDimensions(tex_color).xy);
        for (var y = -params.dims.y; y < params.dims.y + 1.0; y += 1.0) {
          for (var x = -params.dims.x; x < params.dims.x + 1.0; x += 1.0) {
            let smpl = textureSample(tex_color, sampler0, uv + vec2f(x, y) / size * params.delta);
            blurred = mix(max(
              blurred,
              smpl 
            ), blurred, color.a);
          } 
        } 
        `}),boxBlur:$e(o,{inputs:{color:{}},uniforms:{dims:"vec2f"},outputs:{blurred:"rgba8unorm"},source:`
        blurred = vec4f(0.0, 0.0, 0.0, 0.0);
        var size = vec2f(textureDimensions(tex_color).xy);
        let sample_count =
          vec4f(
            (params.dims.x * 2.0 + 1.0) * (params.dims.y * 2.0 + 1.0)
          );
        for (var y = -params.dims.y; y < params.dims.y + 1.0; y += 1.0) {
          for (var x = -params.dims.x; x < params.dims.x + 1.0; x += 1.0) {
            blurred = 
              blurred + textureSample(tex_color, sampler0, uv + vec2f(x, y) / size);
          } 
        } 
        blurred = blurred / sample_count; 
        `}),generateDofDepthMask:$e(o,{inputs:{position:{}},uniforms:{inv_v:"mat4x4f",near_threshold:"f32",focus:"f32",far_threshold:"f32"},outputs:{combined:"rg8unorm"},source:`
          let depth = position.z;
          combined = vec2f(
            1.0 - (depth - params.near_threshold) / (params.focus - params.near_threshold) + 0.0 / 256.0,
            -(params.focus - depth) / (params.far_threshold - params.focus) + 0.0 / 256.0
          );
        `}),mixBlend:$e(o,{inputs:{bottom:{},top:{}},outputs:{combined:"rgba8unorm"},source:`
          combined = mix(bottom, top, top.a); 
        `}),maxKernel:_u(o,{accumulate:"max(acc, curr)",convert:"acc",kernel:Yr(Ns(-2,2),Ns(-2,2)).map(([a,c])=>`vec2f(${a}, ${c})`),initial:"vec4f(0.0)"},s),generateMipmap:M2(o),verticalBoxBlur:_u(o,{accumulate:"acc + curr",convert:"acc / 41.0",kernel:Yr(Ns(0,0),Ns(-20,20)).map(([a,c])=>`vec2f(${c}, ${c})`),initial:"vec4f(0.0)"},"rgba8unorm"),horizontalBoxBlur:_u(o,{accumulate:"acc + curr",convert:"acc / 41.0",kernel:Yr(Ns(-20,20),Ns(0,0)).map(([a,c])=>`vec2f(${a}, ${-a})`),initial:"vec4f(0.0)"},"rgba8unorm"),dofPositionToDepth:d2(o),dofDownsample:h2(o),dofPipeline:m2(o,s),fullscreenQuad:m4(o),textures:f4(o,[e.width,e.height]),canvas:e,ctx:n,device:o,projectionMatrix:yt([0,0,0]),viewMatrix:yt([0,0,0]),canvasFormat:s,onResize(a){let c=a();return i.add(a),[c,()=>{i.delete(a)}]},gBufferRenderPass:void 0,time:0}},renderUpdate({state:t,scheduleTask:e}){let{device:n,textures:r,fullscreenQuad:o}=t,s=n.createCommandEncoder(),i=s.beginRenderPass({colorAttachments:[{view:r.gbuffer.position.createView(),clearValue:[0,0,0,1],loadOp:"clear",storeOp:"store"},{view:r.gbuffer.normal.createView(),clearValue:[0,0,0,1],loadOp:"clear",storeOp:"store"},{view:r.gbuffer.albedo.createView(),clearValue:[0,0,0,1],loadOp:"clear",storeOp:"store"}],depthStencilAttachment:{view:r.gbuffer.depth,depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store"}});t.gBufferRenderPass=i,e(()=>(i.end(),n.queue.submit([s.finish()]),Promise.resolve()),[_d],[Hs]),e(()=>{let a=n.createCommandEncoder();function c(A,C,U){t.boxBlur.withInputs({color:A.createView()})(t.boxBlur.makeUniformBuffer().setBuffer({dims:[U[0],0]}))(a,{blurred:C.createView()}),t.boxBlur.withInputs({color:C.createView()})(t.boxBlur.makeUniformBuffer().setBuffer({dims:[0,U[1]]}))(a,{blurred:A.createView()})}function u(A,C,U){t.maxFilter.withInputs({color:A.createView()})(t.maxFilter.makeUniformBuffer().setBuffer({dims:[U[0],0]}))(a,{blurred:C.createView()}),t.maxFilter.withInputs({color:C.createView()})(t.maxFilter.makeUniformBuffer().setBuffer({dims:[0,U[1]]}))(a,{blurred:A.createView()})}function l(A,C,U,V){t.farFieldMaxFilter.withInputs({color:A.createView()})(t.farFieldMaxFilter.makeUniformBuffer().setBuffer({dims:[U[0],0],delta:V}))(a,{blurred:C.createView()}),t.farFieldMaxFilter.withInputs({color:C.createView()})(t.farFieldMaxFilter.makeUniformBuffer().setBuffer({dims:[0,U[1]],delta:V}))(a,{blurred:A.createView()})}t.time+=1/60;let f=10,m=.7,d=0,p=f*(1+m),b=1/(p-f),w=-f*b,h=-1/(f-d),g=-d*h+1;t.generateDofDepthMask.withInputs({position:r.gbuffer.position.createView()})(t.generateDofDepthMask.makeUniformBuffer().setBuffer({near_threshold:d,focus:f,far_threshold:p,inv_v:cl(t.viewMatrix)}))(a,{combined:r.lighting.depth.createView()}),t.fog.withInputs({position:r.gbuffer.position.createView(),color:r.lighting.color.createView()})(void 0)(a,{fogged:r.lighting.color2.createView()}),t.maskOutFar.withInputs({color:r.lighting.color2.createView(),depth:r.lighting.depth.createView()})(void 0)(a,{far_field:r.lighting.farField.createView()});let y=[1,1];return t.blurFar.withInputs({color:r.lighting.farField.createView(),depth:r.lighting.depth.createView()})(t.blurFar.makeUniformBuffer().setBuffer({step:[2,2]}))(a,{blurred:r.lighting.farField2.createView()}),t.maxFilterNear.withInputs({color:r.lighting.color2.createView(),depth:r.lighting.depth.createView()})(t.maxFilterNear.makeUniformBuffer().setBuffer({step:[0,0]}))(a,{blurred:r.lighting.nearField2.createView({mipLevelCount:1})}),t.blurNear.withInputs({far:r.lighting.farField2.createView(),near:r.lighting.nearField2.createView(),depth:r.lighting.depth.createView(),color:r.lighting.color2.createView()})(t.blurNear.makeUniformBuffer().setBuffer({step:y}))(a,{blurred:r.lighting.color.createView({mipLevelCount:1})}),t.blitToCanvas.withInputs({x:r.lighting.color.createView()})(void 0)(a,{y:t.ctx.getCurrentTexture().createView()}),n.queue.submit([a.finish()]),Promise.resolve()},[],[wd])},brand:"sampleWebgpuRenderer",dependencies:[],globalDependencies:[ul]};var pn={create(t){return{matrix:t}},onDestroy(){},brand:"transform",dependencies:[],globalDependencies:[],init:()=>{}};async function wa(t,e,n,r){return r._parse(t,e,n,r)}function dt(t,e){if(!t)throw new Error(e||"loader assertion failed.")}var Sn={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},h4=Sn.self||Sn.window||Sn.global||{},d4=Sn.window||Sn.self||Sn.global||{},p4=Sn.global||Sn.self||Sn.window||{},g4=Sn.document||{};var sr=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser);var J2=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),y4=J2&&parseFloat(J2[1])||0;var ll=globalThis,x4=globalThis.document||{},fl=globalThis.process||{},b4=globalThis.console,Mk=globalThis.navigator||{};function q2(t){if(typeof window<"u"&&window.process?.type==="renderer"||typeof process<"u"&&process.versions?.electron)return!0;let e=typeof navigator<"u"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function To(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process?.browser)||q2()}var Td="4.1.0";function A4(t){try{let e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}var ml=class{constructor(e,n,r="sessionStorage"){this.storage=A4(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){let n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){let n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function X2(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function Y2(t,e=8){let n=Math.max(e-t.length,0);return`${" ".repeat(n)}${t}`}var hl;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(hl||(hl={}));var _4=10;function Q2(t){return typeof t!="string"?t:(t=t.toUpperCase(),hl[t]||hl.WHITE)}function W2(t,e,n){return!To&&typeof t=="string"&&(e&&(t=`\x1B[${Q2(e)}m${t}\x1B[39m`),n&&(t=`\x1B[${Q2(n)+_4}m${t}\x1B[49m`)),t}function $2(t,e=["constructor"]){let n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),o=t;for(let s of r){let i=o[s];typeof i=="function"&&(e.find(a=>s===a)||(o[s]=i.bind(t)))}}function Ta(t,e){if(!t)throw new Error(e||"Assertion failed")}function Bo(){let t;if(To()&&ll.performance)t=ll?.performance?.now?.();else if("hrtime"in fl){let e=fl?.hrtime?.();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}var Ps={debug:To()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},w4={enabled:!0,level:0};function js(){}var Z2={},eb={once:!0},Mn=class{constructor({id:e}={id:""}){this.VERSION=Td,this._startTs=Bo(),this._deltaTs=Bo(),this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new ml(`__probe-${this.id}__`,w4),this.timeStamp(`${this.id} started`),$2(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Bo()-this._startTs).toPrecision(10))}getDelta(){return Number((Bo()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(e=!0){return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){if(!e)throw new Error(n||"Assertion failed")}warn(e){return this._getLogFunction(0,e,Ps.warn,arguments,eb)}error(e){return this._getLogFunction(0,e,Ps.error,arguments)}deprecated(e,n){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(e,n){return this.error(`\`${e}\` has been removed. Use \`${n}\` instead`)}probe(e,n){return this._getLogFunction(e,n,Ps.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Ps.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,Ps.debug||Ps.info,arguments,eb)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||js,r&&[r],{tag:B4(n)}):js}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||js)}group(e,n,r={collapsed:!1}){let o=tb({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return o.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(o)}groupCollapsed(e,n,r={}){return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||js)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=nb(e)}_getLogFunction(e,n,r,o,s){if(this._shouldLog(e)){s=tb({logLevel:e,message:n,args:o,opts:s}),r=r||s.method,Ta(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=Bo();let i=s.tag||s.message;if(s.once&&i)if(!Z2[i])Z2[i]=Bo();else return js;return n=T4(this.id,s.message,s),r.bind(console,n,...s.args)}return js}};Mn.VERSION=Td;function nb(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return Ta(Number.isFinite(e)&&e>=0),e}function tb(t){let{logLevel:e,message:n}=t;t.logLevel=nb(e);let r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break;default:}typeof t.message=="function"&&(t.message=t.message());let o=typeof t.message;return Ta(o==="string"||o==="object"),Object.assign(t,{args:r},t.opts)}function T4(t,e,n){if(typeof e=="string"){let r=n.time?Y2(X2(n.total)):"";e=n.time?`${t}: ${r}  ${e}`:`${t}: ${e}`,e=W2(e,n.color,n.background)}return e}function B4(t){for(let e in t)for(let n in t[e])return n||"untitled";return"empty"}globalThis.probe={};var Zk=new Mn({id:"@probe.gl/log"});var Bd="4.3.3",E4=Bd[0]>="0"&&Bd[0]<="9"?`v${Bd}`:"";function S4(){let t=new Mn({id:"loaders.gl"});return globalThis.loaders=globalThis.loaders||{},globalThis.loaders.log=t,globalThis.loaders.version=E4,globalThis.probe=globalThis.probe||{},globalThis.probe.loaders=t,t}var Ed=S4();function Sd(t,e){return rb(t||{},e)}function rb(t,e,n=0){if(n>3)return e;let r={...t};for(let[o,s]of Object.entries(e))s&&typeof s=="object"&&!Array.isArray(s)?r[o]=rb(r[o]||{},e[o],n+1):r[o]=e[o];return r}function Md(t){globalThis.loaders||={},globalThis.loaders.modules||={},Object.assign(globalThis.loaders.modules,t)}function Cd(t){return globalThis.loaders?.modules?.[t]||null}var ob="latest";function M4(){return globalThis._loadersgl_?.version||(globalThis._loadersgl_=globalThis._loadersgl_||{},globalThis._loadersgl_.version="4.3.3"),globalThis._loadersgl_.version}var Ba=M4();function Ze(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}var Cn={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document},uI=Cn.self||Cn.window||Cn.global||{},lI=Cn.window||Cn.self||Cn.global||{},fI=Cn.global||Cn.self||Cn.window||{},mI=Cn.document||{};var Ke=typeof process!="object"||String(process)!=="[object process]"||process.browser,Ea=typeof importScripts=="function",ib=typeof window<"u"&&typeof window.orientation<"u",sb=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version),hI=sb&&parseFloat(sb[1])||0;var Sa=class{name;workerThread;isRunning=!0;result;_resolve=()=>{};_reject=()=>{};constructor(e,n){this.name=e,this.workerThread=n,this.result=new Promise((r,o)=>{this._resolve=r,this._reject=o})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){Ze(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){Ze(this.isRunning),this.isRunning=!1,this._reject(e)}};var Ks=class{terminate(){}};var Vd=new Map;function ab(t){Ze(t.source&&!t.url||!t.source&&t.url);let e=Vd.get(t.source||t.url);return e||(t.url&&(e=C4(t.url),Vd.set(t.url,e)),t.source&&(e=ub(t.source),Vd.set(t.source,e))),Ze(e),e}function C4(t){if(!t.startsWith("http"))return t;let e=V4(t);return ub(e)}function ub(t){let e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function V4(t){return`try {
  importScripts('${t}');
} catch (error) {
  console.error(error);
  throw error;
}`}function Rd(t,e=!0,n){let r=n||new Set;if(t){if(lb(t))r.add(t);else if(lb(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(let o in t)Rd(t[o],e,r)}}return n===void 0?Array.from(r):[]}function lb(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}var Dd=()=>{},Hr=class{name;source;url;terminated=!1;worker;onMessage;onError;_loadableURL="";static isSupported(){return typeof Worker<"u"&&Ke||typeof Ks<"u"&&!Ke}constructor(e){let{name:n,source:r,url:o}=e;Ze(r||o),this.name=n,this.source=r,this.url=o,this.onMessage=Dd,this.onError=s=>console.log(s),this.worker=Ke?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=Dd,this.onError=Dd,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||Rd(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+=`worker ${this.name} from ${this.url}. `,e.message&&(n+=`${e.message} in `),e.lineno&&(n+=`:${e.lineno}:${e.colno}`),new Error(n)}_createBrowserWorker(){this._loadableURL=ab({source:this.source,url:this.url});let e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){let r=this.url.includes(":/")||this.url.startsWith("/")?this.url:`./${this.url}`;e=new Ks(r,{eval:!1})}else if(this.source)e=new Ks(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}};var Ma=class{name="unnamed";source;url;maxConcurrency=1;maxMobileConcurrency=1;onDebug=()=>{};reuseWorkers=!0;props={};jobQueue=[];idleQueue=[];count=0;isDestroyed=!1;static isSupported(){return Hr.isSupported()}constructor(e){this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e,n=(o,s,i)=>o.done(i),r=(o,s)=>o.error(s)){let o=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await o}async _startQueuedJob(){if(!this.jobQueue.length)return;let e=this._getAvailableWorker();if(!e)return;let n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});let r=new Sa(n.name,e);e.onMessage=o=>n.onMessage(r,o.type,o.payload),e.onError=o=>n.onError(r,o),n.onStart(r);try{await r.result}catch(o){console.error(`Worker exception: ${o}`)}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){!Ke||this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;let e=`${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;return new Hr({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return ib?this.maxMobileConcurrency:this.maxConcurrency}};var R4={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}},Eo=class t{props;workerPools=new Map;static _workerFarm;static isSupported(){return Hr.isSupported()}static getWorkerFarm(e={}){return t._workerFarm=t._workerFarm||new t({}),t._workerFarm.setProps(e),t._workerFarm}constructor(e){this.props={...R4},this.setProps(e),this.workerPools=new Map}destroy(){for(let e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(let n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){let{name:n,source:r,url:o}=e,s=this.workerPools.get(n);return s||(s=new Ma({name:n,source:r,url:o}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}};function kd(t,e={}){let n=e[t.id]||{},r=Ke?`${t.id}-worker.js`:`${t.id}-worker-node.js`,o=n.workerUrl;if(!o&&t.id==="compression"&&(o=e.workerUrl),e._workerType==="test"&&(Ke?o=`modules/${t.module}/dist/${r}`:o=`modules/${t.module}/src/workers/${t.id}-worker-node.ts`),!o){let s=t.version;s==="latest"&&(s=ob);let i=s?`@${s}`:"";o=`https://unpkg.com/@loaders.gl/${t.module}${i}/dist/${r}`}return Ze(o),o}function Id(t,e=Ba){Ze(t,"no worker provided");let n=t.version;return!(!e||!n)}var Od={};async function Vn(t,e=null,n={},r=null){return e&&(t=fb(t,e,n,r)),Od[t]=Od[t]||D4(t),await Od[t]}function fb(t,e,n={},r=null){if(!n.useLocalLibraries&&t.startsWith("http"))return t;r=r||t;let o=n.modules||{};return o[r]?o[r]:Ke?n.CDN?(Ze(n.CDN.startsWith("http")),`${n.CDN}/${e}@${Ba}/dist/libs/${r}`):Ea?`../src/libs/${r}`:`modules/${e}/src/libs/${r}`:`modules/${e}/dist/libs/${r}`}async function D4(t){if(t.endsWith("wasm"))return await I4(t);if(!Ke)try{let{requireFromFile:n}=globalThis.loaders||{};return await n?.(t)}catch(n){return console.error(n),null}if(Ea)return importScripts(t);let e=await O4(t);return k4(e,t)}function k4(t,e){if(!Ke){let{requireFromString:r}=globalThis.loaders||{};return r?.(t,e)}if(Ea)return eval.call(globalThis,t),null;let n=document.createElement("script");n.id=e;try{n.appendChild(document.createTextNode(t))}catch{n.text=t}return document.body.appendChild(n),null}async function I4(t){let{readFileAsArrayBuffer:e}=globalThis.loaders||{};return Ke||!e||t.startsWith("http")?await(await fetch(t)).arrayBuffer():await e(t)}async function O4(t){let{readFileAsText:e}=globalThis.loaders||{};return Ke||!e||t.startsWith("http")?await(await fetch(t)).text():await e(t)}function Ud(t,e){return!Eo.isSupported()||!Ke&&!e?._nodeWorkers?!1:t.worker&&e?.worker}async function Gd(t,e,n,r,o){let s=t.id,i=kd(t,n),c=Eo.getWorkerFarm(n).getWorkerPool({name:s,url:i});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));let u=await c.startJob("process-on-worker",U4.bind(null,o));return u.postMessage("process",{input:e,options:n,context:r}),await(await u.result).result}async function U4(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":let{id:o,input:s,options:i}=r;try{let a=await t(s,i);e.postMessage("done",{id:o,result:a})}catch(a){let c=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:o,error:c})}break;default:console.warn(`parse-with-worker unknown message ${n}`)}}function hb(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?mb(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?mb(t,0,e):""}function mb(t,e,n){if(t.byteLength<=e+n)return"";let r=new DataView(t),o="";for(let s=0;s<n;s++)o+=String.fromCharCode(r.getUint8(e+s));return o}function Ld(t){try{return JSON.parse(t)}catch{throw new Error(`Failed to parse JSON from data starting with "${hb(t)}"`)}}function Fd(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;let r=new Uint8Array(t),o=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==o[s])return!1;return!0}function Nd(...t){return db(t)}function db(t){let e=t.map(s=>s instanceof ArrayBuffer?new Uint8Array(s):s),n=e.reduce((s,i)=>s+i.byteLength,0),r=new Uint8Array(n),o=0;for(let s of e)r.set(s,o),o+=s.byteLength;return r.buffer}function Ca(t,e,n){let r=n!==void 0?new Uint8Array(t).subarray(e,e+n):new Uint8Array(t).subarray(e);return new Uint8Array(r).buffer}function Pr(t,e){return dt(t>=0),dt(e>0),t+(e-1)&~(e-1)}function zd(t,e,n){let r;if(t instanceof ArrayBuffer)r=new Uint8Array(t);else{let o=t.byteOffset,s=t.byteLength;r=new Uint8Array(t.buffer||t.arrayBuffer,o,s)}return e.set(r,n),n+Pr(r.byteLength,4)}async function Hd(t){let e=[];for await(let n of t)e.push(n);return Nd(...e)}var G4="",pb={};function Pd(t){for(let e in pb)if(t.startsWith(e)){let n=pb[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t=`${G4}${t}`),t}function gb(t){return t&&typeof t=="object"&&t.isBuffer}function dl(t){if(gb(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){let e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}var So={};zt(So,{dirname:()=>F4,filename:()=>L4,join:()=>N4,resolve:()=>z4});function yb(){if(typeof process<"u"&&typeof process.cwd<"u")return process.cwd();let t=window.location?.pathname;return t?.slice(0,t.lastIndexOf("/")+1)||""}function L4(t){let e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function F4(t){let e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}function N4(...t){return t=t.map((n,r)=>(r&&(n=n.replace(new RegExp("^/"),"")),r!==t.length-1&&(n=n.replace(new RegExp("/$"),"")),n)),t.join("/")}function z4(...t){let e=[];for(let s=0;s<t.length;s++)e[s]=t[s];let n="",r=!1,o;for(let s=e.length-1;s>=-1&&!r;s--){let i;s>=0?i=e[s]:(o===void 0&&(o=yb()),i=o),i.length!==0&&(n=`${i}/${n}`,r=i.charCodeAt(0)===Va)}return n=H4(n,!r),r?`/${n}`:n.length>0?n:"."}var Va=47,jd=46;function H4(t,e){let n="",r=-1,o=0,s,i=!1;for(let a=0;a<=t.length;++a){if(a<t.length)s=t.charCodeAt(a);else{if(s===Va)break;s=Va}if(s===Va){if(!(r===a-1||o===1))if(r!==a-1&&o===2){if(n.length<2||!i||n.charCodeAt(n.length-1)!==jd||n.charCodeAt(n.length-2)!==jd){if(n.length>2){let c=n.length-1,u=c;for(;u>=0&&n.charCodeAt(u)!==Va;--u);if(u!==c){n=u===-1?"":n.slice(0,u),r=a,o=0,i=!1;continue}}else if(n.length===2||n.length===1){n="",r=a,o=0,i=!1;continue}}e&&(n.length>0?n+="/..":n="..",i=!0)}else{let c=t.slice(r+1,a);n.length>0?n+=`/${c}`:n=c,i=!1}r=a,o=0}else s===jd&&o!==-1?++o:o=-1}return n}var P4=t=>typeof t=="boolean",Ra=t=>typeof t=="function",Mo=t=>t!==null&&typeof t=="object",Kd=t=>Mo(t)&&t.constructor==={}.constructor;var xb=t=>!!t&&typeof t[Symbol.iterator]=="function",bb=t=>t&&typeof t[Symbol.asyncIterator]=="function";var sn=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json;var Rn=t=>typeof Blob<"u"&&t instanceof Blob,vb=t=>t&&typeof t=="object"&&t.isBuffer;var j4=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||Mo(t)&&Ra(t.tee)&&Ra(t.cancel)&&Ra(t.getReader);var K4=t=>Mo(t)&&Ra(t.read)&&Ra(t.pipe)&&P4(t.readable),pl=t=>j4(t)||K4(t);var gl=class extends Error{constructor(e,n){super(e),this.reason=n.reason,this.url=n.url,this.response=n.response}reason;url;response};var J4=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,q4=/^([-\w.]+\/[-\w.+]+)/;function Jd(t,e){return t.toLowerCase()===e.toLowerCase()}function Ab(t){let e=q4.exec(t);return e?e[1]:t}function qd(t){let e=J4.exec(t);return e?e[1]:""}var _b=/\?.*/;function wb(t){let e=t.match(_b);return e&&e[0]}function Js(t){return t.replace(_b,"")}function Tb(t){if(t.length<50)return t;let e=t.slice(t.length-15);return`${t.substr(0,32)}...${e}`}function Co(t){return sn(t)?t.url:Rn(t)?t.name||"":typeof t=="string"?t:""}function Da(t){if(sn(t)){let e=t,n=e.headers.get("content-type")||"",r=Js(e.url);return Ab(n)||qd(r)}return Rn(t)?t.type||"":typeof t=="string"?qd(t):""}function Bb(t){return sn(t)?t.headers["content-length"]||-1:Rn(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function yl(t){if(sn(t))return t;let e={},n=Bb(t);n>=0&&(e["content-length"]=String(n));let r=Co(t),o=Da(t);o&&(e["content-type"]=o);let s=await Y4(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));let i=new Response(t,{headers:e});return Object.defineProperty(i,"url",{value:r}),i}async function Eb(t){if(!t.ok)throw await X4(t)}async function X4(t){let e=Tb(t.url),n=`Failed to fetch resource (${t.status}) ${t.statusText}: ${e}`;n=n.length>100?`${n.slice(0,100)}...`:n;let r={reason:t.statusText,url:t.url,response:t};try{let o=t.headers.get("Content-Type");r.reason=!t.bodyUsed&&o?.includes("application/json")?await t.json():await t.text()}catch{}return new gl(n,r)}async function Y4(t){if(typeof t=="string")return`data:,${t.slice(0,5)}`;if(t instanceof Blob){let n=t.slice(0,5);return await new Promise(r=>{let o=new FileReader;o.onload=s=>r(s?.target?.result),o.readAsDataURL(n)})}if(t instanceof ArrayBuffer){let n=t.slice(0,5);return`data:base64,${Q4(n)}`}return null}function Q4(t){let e="",n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}function W4(t){return!$4(t)&&!Z4(t)}function $4(t){return t.startsWith("http:")||t.startsWith("https:")}function Z4(t){return t.startsWith("data:")}async function Xd(t,e){if(typeof t=="string"){let n=Pd(t);return W4(n)&&globalThis.loaders?.fetchNode?globalThis.loaders?.fetchNode(n,e):await fetch(n,e)}return await yl(t)}var Yd=new Mn({id:"loaders.gl"}),xl=class{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}},bl=class{console;constructor(){this.console=console}log(...e){return this.console.log.bind(this.console,...e)}info(...e){return this.console.info.bind(this.console,...e)}warn(...e){return this.console.warn.bind(this.console,...e)}error(...e){return this.console.error.bind(this.console,...e)}};var Qd={fetch:null,mimeType:void 0,nothrow:!1,log:new bl,useLocalLibraries:!1,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:sr,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},Sb={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function Wd(){globalThis.loaders=globalThis.loaders||{};let{loaders:t}=globalThis;return t._state||(t._state={}),t._state}function $d(){let t=Wd();return t.globalOptions=t.globalOptions||{...Qd},t.globalOptions}function Vb(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],eB(t,n),nB(e,t,r)}function eB(t,e){Mb(t,null,Qd,Sb,e);for(let n of e){let r=t&&t[n.id]||{},o=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};Mb(r,n.id,o,s,e)}}function Mb(t,e,n,r,o){let s=e||"Top level",i=e?`${e}.`:"";for(let a in t){let c=!e&&Mo(t[a]),u=a==="baseUri"&&!e,l=a==="workerUrl"&&e;if(!(a in n)&&!u&&!l){if(a in r)Yd.warn(`${s} loader option '${i}${a}' no longer supported, use '${r[a]}'`)();else if(!c){let f=tB(a,o);Yd.warn(`${s} loader option '${i}${a}' not recognized. ${f}`)()}}}}function tB(t,e){let n=t.toLowerCase(),r="";for(let o of e)for(let s in o.options){if(t===s)return`Did you mean '${o.id}.${s}'?`;let i=s.toLowerCase();(n.startsWith(i)||i.startsWith(n))&&(r=r||`Did you mean '${o.id}.${s}'?`)}return r}function nB(t,e,n){let o={...t.options||{}};return rB(o,n),o.log===null&&(o.log=new xl),Cb(o,$d()),Cb(o,e),o}function Cb(t,e){for(let n in e)if(n in e){let r=e[n];Kd(r)&&Kd(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function rB(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function Zd(t){return t?(Array.isArray(t)&&(t=t[0]),Array.isArray(t?.extensions)):!1}function ep(t){dt(t,"null loader"),dt(Zd(t),"invalid loader");let e;return Array.isArray(t)&&(e=t[1],t=t[0],t={...t,options:{...t.options,...e}}),(t?.parseTextSync||t?.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}var oB=()=>{let t=Wd();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function Rb(){return oB()}var sB=/\.([^.]+)$/;async function Ib(t,e=[],n,r){if(!Ob(t))return null;let o=Db(t,e,{...n,nothrow:!0},r);if(o)return o;if(Rn(t)&&(t=await t.slice(0,10).arrayBuffer(),o=Db(t,e,n,r)),!o&&!n?.nothrow)throw new Error(Ub(t));return o}function Db(t,e=[],n,r){if(!Ob(t))return null;if(e&&!Array.isArray(e))return ep(e);let o=[];e&&(o=o.concat(e)),n?.ignoreRegisteredLoaders||o.push(...Rb()),aB(o);let s=iB(t,o,n,r);if(!s&&!n?.nothrow)throw new Error(Ub(t));return s}function iB(t,e,n,r){let o=Co(t),s=Da(t),i=Js(o)||r?.url,a=null,c="";return n?.mimeType&&(a=tp(e,n?.mimeType),c=`match forced by supplied MIME type ${n?.mimeType}`),a=a||cB(e,i),c=c||(a?`matched url ${i}`:""),a=a||tp(e,s),c=c||(a?`matched MIME type ${s}`:""),a=a||lB(e,t),c=c||(a?`matched initial data ${Gb(t)}`:""),n?.fallbackMimeType&&(a=a||tp(e,n?.fallbackMimeType),c=c||(a?`matched fallback MIME type ${s}`:"")),c&&Ed.log(1,`selectLoader selected ${a?.name}: ${c}.`),a}function Ob(t){return!(t instanceof Response&&t.status===204)}function Ub(t){let e=Co(t),n=Da(t),r="No valid loader found (";r+=e?`${So.filename(e)}, `:"no url provided, ",r+=`MIME type: ${n?`"${n}"`:"not provided"}, `;let o=t?Gb(t):"";return r+=o?` first bytes: "${o}"`:"first bytes: not available",r+=")",r}function aB(t){for(let e of t)ep(e)}function cB(t,e){let n=e&&sB.exec(e),r=n&&n[1];return r?uB(t,r):null}function uB(t,e){e=e.toLowerCase();for(let n of t)for(let r of n.extensions)if(r.toLowerCase()===e)return n;return null}function tp(t,e){for(let n of t)if(n.mimeTypes?.some(r=>Jd(e,r))||Jd(e,`application/x.${n.id}`))return n;return null}function lB(t,e){if(!e)return null;for(let n of t)if(typeof e=="string"){if(fB(e,n))return n}else if(ArrayBuffer.isView(e)){if(kb(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&kb(e,0,n))return n;return null}function fB(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function kb(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(o=>mB(t,e,n,o))}function mB(t,e,n,r){if(r instanceof ArrayBuffer)return Fd(r,t,r.byteLength);switch(typeof r){case"function":return r(t);case"string":let o=np(t,e,r.length);return r===o;default:return!1}}function Gb(t,e=5){return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?np(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?np(t,0,e):""}function np(t,e,n){if(t.byteLength<e+n)return"";let r=new DataView(t),o="";for(let s=0;s<n;s++)o+=String.fromCharCode(r.getUint8(e+s));return o}function*Lb(t,e){let n=e?.chunkSize||262144,r=0,o=new TextEncoder;for(;r<t.length;){let s=Math.min(t.length-r,n),i=t.slice(r,r+s);r+=s,yield o.encode(i)}}function*Fb(t,e={}){let{chunkSize:n=262144}=e,r=0;for(;r<t.byteLength;){let o=Math.min(t.byteLength-r,n),s=new ArrayBuffer(o),i=new Uint8Array(t,r,o);new Uint8Array(s).set(i),r+=o,yield s}}async function*Nb(t,e){let n=e?.chunkSize||1048576,r=0;for(;r<t.size;){let o=r+n,s=await t.slice(r,o).arrayBuffer();r=o,yield s}}function rp(t,e){return sr?hB(t,e):dB(t,e)}async function*hB(t,e){let n=t.getReader(),r;try{for(;;){let o=r||n.read();e?._streamReadAhead&&(r=n.read());let{done:s,value:i}=await o;if(s)return;yield dl(i)}}catch{n.releaseLock()}}async function*dB(t,e){for await(let n of t)yield dl(n)}function zb(t,e){if(typeof t=="string")return Lb(t,e);if(t instanceof ArrayBuffer)return Fb(t,e);if(Rn(t))return Nb(t,e);if(pl(t))return rp(t,e);if(sn(t))return rp(t.body,e);throw new Error("makeIterator")}var Hb="Cannot convert supplied data type";function pB(t,e,n){if(e.text&&typeof t=="string")return t;if(vb(t)&&(t=t.buffer),t instanceof ArrayBuffer){let r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer,o=t.byteLength||t.length;return(t.byteOffset!==0||o!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+o)),r}throw new Error(Hb)}async function Pb(t,e,n){let r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return pB(t,e,n);if(Rn(t)&&(t=await yl(t)),sn(t)){let o=t;return await Eb(o),e.binary?await o.arrayBuffer():await o.text()}if(pl(t)&&(t=zb(t,n)),xb(t)||bb(t))return Hd(t);throw new Error(Hb)}function jb(t,e){let n=$d(),r=t||n;return typeof r.fetch=="function"?r.fetch:Mo(r.fetch)?o=>Xd(o,r.fetch):e?.fetch?e?.fetch:Xd}function Kb(t,e,n){if(n)return n;let r={fetch:jb(e,t),...t};if(r.url){let o=Js(r.url);r.baseUrl=o,r.queryString=wb(r.url),r.filename=So.filename(o),r.baseUrl=So.dirname(o)}return Array.isArray(r.loaders)||(r.loaders=null),r}function Jb(t,e){if(t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){let r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:void 0}async function qs(t,e,n,r){e&&!Array.isArray(e)&&!Zd(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};let o=Co(t),i=Jb(e,r),a=await Ib(t,i,n);return a?(n=Vb(n,a,i,o),r=Kb({url:o,_parse:qs,loaders:i},n,r||null),await gB(a,t,n,r)):null}async function gB(t,e,n,r){if(Id(t),n=Sd(t.options,n),sn(e)){let s=e,{ok:i,redirected:a,status:c,statusText:u,type:l,url:f}=s,m=Object.fromEntries(s.headers.entries());r.response={headers:m,ok:i,redirected:a,status:c,statusText:u,type:l,url:f}}e=await Pb(e,t,n);let o=t;if(o.parseTextSync&&typeof e=="string")return o.parseTextSync(e,n,r);if(Ud(t,n))return await Gd(t,e,n,r,qs);if(o.parseText&&typeof e=="string")return await o.parseText(e,n,r);if(o.parse)return await o.parse(e,n,r);throw Ze(!o.parseSync),new Error(`${t.id} loader - no parser found and worker is disabled`)}function qb(t){switch(t.constructor){case Int8Array:return"int8";case Uint8Array:case Uint8ClampedArray:return"uint8";case Int16Array:return"int16";case Uint16Array:return"uint16";case Int32Array:return"int32";case Uint32Array:return"uint32";case Float32Array:return"float32";case Float64Array:return"float64";default:return"null"}}function op(t){let e=1/0,n=1/0,r=1/0,o=-1/0,s=-1/0,i=-1/0,a=t.POSITION?t.POSITION.value:[],c=a&&a.length;for(let u=0;u<c;u+=3){let l=a[u],f=a[u+1],m=a[u+2];e=l<e?l:e,n=f<n?f:n,r=m<r?m:r,o=l>o?l:o,s=f>s?f:s,i=m>i?m:i}return[[e,n,r],[o,s,i]]}function sp(t,e,n){let r=qb(e.value),o=n||Xb(e);return{name:t,type:{type:"fixed-size-list",listSize:e.size,children:[{name:"value",type:r}]},nullable:!1,metadata:o}}function Xb(t){let e={};return"byteOffset"in t&&(e.byteOffset=t.byteOffset.toString(10)),"byteStride"in t&&(e.byteStride=t.byteStride.toString(10)),"normalized"in t&&(e.normalized=t.normalized.toString()),e}var hp={};zt(hp,{createExtMeshFeatures:()=>oE,decode:()=>ZB,encode:()=>eE,name:()=>$B});var Yb="4.3.3";var yB=globalThis.loaders?.parseImageNode,ip=typeof Image<"u",ap=typeof ImageBitmap<"u",xB=!!yB,cp=sr?!0:xB;function Qb(t){switch(t){case"auto":return ap||ip||cp;case"imagebitmap":return ap;case"image":return ip;case"data":return cp;default:throw new Error(`@loaders.gl/images: image ${t} not supported in this environment`)}}function Wb(){if(ap)return"imagebitmap";if(ip)return"image";if(cp)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function $b(t){let e=bB(t);if(!e)throw new Error("Not an image");return e}function ka(t){switch($b(t)){case"data":return t;case"image":case"imagebitmap":let e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function bB(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}var vB=/^data:image\/svg\+xml/,AB=/\.svg((\?|#).*)?$/;function vl(t){return t&&(vB.test(t)||AB.test(t))}function Zb(t,e){if(vl(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return`data:image/svg+xml;base64,${btoa(r)}`}return up(t,e)}function up(t,e){if(vl(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function Al(t,e,n){let r=Zb(t,n),o=self.URL||self.webkitURL,s=typeof r!="string"&&o.createObjectURL(r);try{return await _B(s||r,e)}finally{s&&o.revokeObjectURL(s)}}async function _B(t,e){let n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,o)=>{try{n.onload=()=>r(n),n.onerror=s=>{let i=s instanceof Error?s.message:"error";o(new Error(i))}}catch(s){o(s)}})}var wB={},ev=!0;async function tv(t,e,n){let r;vl(n)?r=await Al(t,e,n):r=up(t,n);let o=e&&e.imagebitmap;return await TB(r,o)}async function TB(t,e=null){if((BB(e)||!ev)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),ev=!1}return await createImageBitmap(t)}function BB(t){for(let e in t||wB)return!1;return!0}function nv(t){return!CB(t,"ftyp",4)||(t[8]&96)===0?null:EB(t)}function EB(t){switch(SB(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function SB(t,e,n){return String.fromCharCode(...t.slice(e,n))}function MB(t){return[...t].map(e=>e.charCodeAt(0))}function CB(t,e,n=0){let r=MB(e);for(let o=0;o<r.length;++o)if(r[o]!==t[o+n])return!1;return!0}var Dn=!1,Ia=!0;function Vo(t){let e=Oa(t);return RB(e)||IB(e)||DB(e)||kB(e)||VB(e)}function VB(t){let e=new Uint8Array(t instanceof DataView?t.buffer:t),n=nv(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function RB(t){let e=Oa(t);return e.byteLength>=24&&e.getUint32(0,Dn)===2303741511?{mimeType:"image/png",width:e.getUint32(16,Dn),height:e.getUint32(20,Dn)}:null}function DB(t){let e=Oa(t);return e.byteLength>=10&&e.getUint32(0,Dn)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Ia),height:e.getUint16(8,Ia)}:null}function kB(t){let e=Oa(t);return e.byteLength>=14&&e.getUint16(0,Dn)===16973&&e.getUint32(2,Ia)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Ia),height:e.getUint32(22,Ia)}:null}function IB(t){let e=Oa(t);if(!(e.byteLength>=3&&e.getUint16(0,Dn)===65496&&e.getUint8(2)===255))return null;let{tableMarkers:r,sofMarkers:o}=OB(),s=2;for(;s+9<e.byteLength;){let i=e.getUint16(s,Dn);if(o.has(i))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Dn),width:e.getUint16(s+7,Dn)};if(!r.has(i))return null;s+=2,s+=e.getUint16(s,Dn)}return null}function OB(){let t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Oa(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function rv(t,e){let{mimeType:n}=Vo(t)||{},r=globalThis.loaders?.parseImageNode;return dt(r),await r(t,n)}async function ov(t,e,n){e=e||{};let o=(e.image||{}).type||"auto",{url:s}=n||{},i=UB(o),a;switch(i){case"imagebitmap":a=await tv(t,e,s);break;case"image":a=await Al(t,e,s);break;case"data":a=await rv(t,e);break;default:dt(!1)}return o==="data"&&(a=ka(a)),a}function UB(t){switch(t){case"auto":case"data":return Wb();default:return Qb(t),t}}var GB=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],LB=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],FB={image:{type:"auto",decode:!0}},lp={dataType:null,batchType:null,id:"image",module:"images",name:"Images",version:Yb,mimeTypes:LB,extensions:GB,parse:ov,tests:[t=>!!Vo(new DataView(t))],options:FB};var fp={};function mp(t){if(fp[t]===void 0){let e=sr?zB(t):NB(t);fp[t]=e}return fp[t]}function NB(t){let e=["image/png","image/jpeg","image/gif"],n=globalThis.loaders?.imageFormatsNode||e;return!!globalThis.loaders?.parseImageNode&&n.includes(t)}function zB(t){switch(t){case"image/avif":case"image/webp":return HB(t);default:return!0}}function HB(t){try{return document.createElement("canvas").toDataURL(t).indexOf(`data:${t}`)===0}catch{return!1}}function ze(t,e){if(!t)throw new Error(e||"assert failed: gltf")}var _l={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},wl={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4};var sv=["SCALAR","VEC2","VEC3","VEC4"],PB=[[Int8Array,5120],[Uint8Array,5121],[Int16Array,5122],[Uint16Array,5123],[Uint32Array,5125],[Float32Array,5126],[Float64Array,5130]],jB=new Map(PB),KB={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},JB={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},qB={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};function Tl(t){return sv[t-1]||sv[0]}function jr(t){let e=jB.get(t.constructor);if(!e)throw new Error("Illegal typed array");return e}function Xs(t,e){let n=qB[t.componentType],r=KB[t.type],o=JB[t.componentType],s=t.count*r,i=t.count*r*o;ze(i>=0&&i<=e.byteLength);let a=wl[t.componentType],c=_l[t.type];return{ArrayType:n,length:s,byteLength:i,componentByteSize:a,numberOfComponentsInElement:c}}function iv(t,e,n){let r=t.bufferViews[n];ze(r);let o=r.buffer,s=e[o];ze(s);let i=(r.byteOffset||0)+s.byteOffset;return new Uint8Array(s.arrayBuffer,i,r.byteLength)}function av(t,e,n){let r=typeof n=="number"?t.accessors?.[n]:n;if(!r)throw new Error(`No gltf accessor ${JSON.stringify(n)}`);let o=t.bufferViews?.[r.bufferView||0];if(!o)throw new Error(`No gltf buffer view for accessor ${o}`);let{arrayBuffer:s,byteOffset:i}=e[o.buffer],a=(i||0)+(r.byteOffset||0)+(o.byteOffset||0),{ArrayType:c,length:u,componentByteSize:l,numberOfComponentsInElement:f}=Xs(r,o),m=l*f,d=o.byteStride||m;if(typeof o.byteStride>"u"||o.byteStride===m)return new c(s,a,u);let p=new c(u);for(let b=0;b<r.count;b++){let w=new c(s,a+b*d,f);p.set(w,b*f)}return p}function XB(){return{asset:{version:"2.0",generator:"loaders.gl"},buffers:[],extensions:{},extensionsRequired:[],extensionsUsed:[]}}var te=class{gltf;sourceBuffers;byteLength;constructor(e){this.gltf={json:e?.json||XB(),buffers:e?.buffers||[],images:e?.images||[]},this.sourceBuffers=[],this.byteLength=0,this.gltf.buffers&&this.gltf.buffers[0]&&(this.byteLength=this.gltf.buffers[0].byteLength,this.sourceBuffers=[this.gltf.buffers[0]])}get json(){return this.gltf.json}getApplicationData(e){return this.json[e]}getExtraData(e){return(this.json.extras||{})[e]}hasExtension(e){let n=this.getUsedExtensions().find(o=>o===e),r=this.getRequiredExtensions().find(o=>o===e);return typeof n=="string"||typeof r=="string"}getExtension(e){let n=this.getUsedExtensions().find(o=>o===e),r=this.json.extensions||{};return n?r[e]:null}getRequiredExtension(e){return this.getRequiredExtensions().find(r=>r===e)?this.getExtension(e):null}getRequiredExtensions(){return this.json.extensionsRequired||[]}getUsedExtensions(){return this.json.extensionsUsed||[]}getRemovedExtensions(){return this.json.extensionsRemoved||[]}getObjectExtension(e,n){return(e.extensions||{})[n]}getScene(e){return this.getObject("scenes",e)}getNode(e){return this.getObject("nodes",e)}getSkin(e){return this.getObject("skins",e)}getMesh(e){return this.getObject("meshes",e)}getMaterial(e){return this.getObject("materials",e)}getAccessor(e){return this.getObject("accessors",e)}getTexture(e){return this.getObject("textures",e)}getSampler(e){return this.getObject("samplers",e)}getImage(e){return this.getObject("images",e)}getBufferView(e){return this.getObject("bufferViews",e)}getBuffer(e){return this.getObject("buffers",e)}getObject(e,n){if(typeof n=="object")return n;let r=this.json[e]&&this.json[e][n];if(!r)throw new Error(`glTF file error: Could not find ${e}[${n}]`);return r}getTypedArrayForBufferView(e){e=this.getBufferView(e);let n=e.buffer,r=this.gltf.buffers[n];ze(r);let o=(e.byteOffset||0)+r.byteOffset;return new Uint8Array(r.arrayBuffer,o,e.byteLength)}getTypedArrayForAccessor(e){let n=this.getAccessor(e);return av(this.gltf.json,this.gltf.buffers,n)}getTypedArrayForImageData(e){e=this.getAccessor(e);let n=this.getBufferView(e.bufferView),o=this.getBuffer(n.buffer).data,s=n.byteOffset||0;return new Uint8Array(o,s,n.byteLength)}addApplicationData(e,n){return this.json[e]=n,this}addExtraData(e,n){return this.json.extras=this.json.extras||{},this.json.extras[e]=n,this}addObjectExtension(e,n,r){return e.extensions=e.extensions||{},e.extensions[n]=r,this.registerUsedExtension(n),this}setObjectExtension(e,n,r){let o=e.extensions||{};o[n]=r}removeObjectExtension(e,n){let r=e?.extensions||{};if(r[n]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];let o=this.json.extensionsRemoved;o.includes(n)||o.push(n)}delete r[n]}addExtension(e,n={}){return ze(n),this.json.extensions=this.json.extensions||{},this.json.extensions[e]=n,this.registerUsedExtension(e),n}addRequiredExtension(e,n={}){return ze(n),this.addExtension(e,n),this.registerRequiredExtension(e),n}registerUsedExtension(e){this.json.extensionsUsed=this.json.extensionsUsed||[],this.json.extensionsUsed.find(n=>n===e)||this.json.extensionsUsed.push(e)}registerRequiredExtension(e){this.registerUsedExtension(e),this.json.extensionsRequired=this.json.extensionsRequired||[],this.json.extensionsRequired.find(n=>n===e)||this.json.extensionsRequired.push(e)}removeExtension(e){if(this.json.extensions?.[e]){this.json.extensionsRemoved=this.json.extensionsRemoved||[];let n=this.json.extensionsRemoved;n.includes(e)||n.push(e)}this.json.extensions&&delete this.json.extensions[e],this.json.extensionsRequired&&this._removeStringFromArray(this.json.extensionsRequired,e),this.json.extensionsUsed&&this._removeStringFromArray(this.json.extensionsUsed,e)}setDefaultScene(e){this.json.scene=e}addScene(e){let{nodeIndices:n}=e;return this.json.scenes=this.json.scenes||[],this.json.scenes.push({nodes:n}),this.json.scenes.length-1}addNode(e){let{meshIndex:n,matrix:r}=e;this.json.nodes=this.json.nodes||[];let o={mesh:n};return r&&(o.matrix=r),this.json.nodes.push(o),this.json.nodes.length-1}addMesh(e){let{attributes:n,indices:r,material:o,mode:s=4}=e,a={primitives:[{attributes:this._addAttributes(n),mode:s}]};if(r){let c=this._addIndices(r);a.primitives[0].indices=c}return Number.isFinite(o)&&(a.primitives[0].material=o),this.json.meshes=this.json.meshes||[],this.json.meshes.push(a),this.json.meshes.length-1}addPointCloud(e){let r={primitives:[{attributes:this._addAttributes(e),mode:0}]};return this.json.meshes=this.json.meshes||[],this.json.meshes.push(r),this.json.meshes.length-1}addImage(e,n){let r=Vo(e),o=n||r?.mimeType,i={bufferView:this.addBufferView(e),mimeType:o};return this.json.images=this.json.images||[],this.json.images.push(i),this.json.images.length-1}addBufferView(e,n=0,r=this.byteLength){let o=e.byteLength;ze(Number.isFinite(o)),this.sourceBuffers=this.sourceBuffers||[],this.sourceBuffers.push(e);let s={buffer:n,byteOffset:r,byteLength:o};return this.byteLength+=Pr(o,4),this.json.bufferViews=this.json.bufferViews||[],this.json.bufferViews.push(s),this.json.bufferViews.length-1}addAccessor(e,n){let r={bufferView:e,type:Tl(n.size),componentType:n.componentType,count:n.count,max:n.max,min:n.min};return this.json.accessors=this.json.accessors||[],this.json.accessors.push(r),this.json.accessors.length-1}addBinaryBuffer(e,n={size:3}){let r=this.addBufferView(e),o={min:n.min,max:n.max};(!o.min||!o.max)&&(o=this._getAccessorMinMax(e,n.size));let s={size:n.size,componentType:jr(e),count:Math.round(e.length/n.size),min:o.min,max:o.max};return this.addAccessor(r,Object.assign(s,n))}addTexture(e){let{imageIndex:n}=e,r={source:n};return this.json.textures=this.json.textures||[],this.json.textures.push(r),this.json.textures.length-1}addMaterial(e){return this.json.materials=this.json.materials||[],this.json.materials.push(e),this.json.materials.length-1}createBinaryChunk(){let e=this.byteLength,n=new ArrayBuffer(e),r=new Uint8Array(n),o=0;for(let s of this.sourceBuffers||[])o=zd(s,r,o);this.json?.buffers?.[0]?this.json.buffers[0].byteLength=e:this.json.buffers=[{byteLength:e}],this.gltf.binary=n,this.sourceBuffers=[n],this.gltf.buffers=[{arrayBuffer:n,byteOffset:0,byteLength:n.byteLength}]}_removeStringFromArray(e,n){let r=!0;for(;r;){let o=e.indexOf(n);o>-1?e.splice(o,1):r=!1}}_addAttributes(e={}){let n={};for(let r in e){let o=e[r],s=this._getGltfAttributeName(r),i=this.addBinaryBuffer(o.value,o);n[s]=i}return n}_addIndices(e){return this.addBinaryBuffer(e,{size:1})}_getGltfAttributeName(e){switch(e.toLowerCase()){case"position":case"positions":case"vertices":return"POSITION";case"normal":case"normals":return"NORMAL";case"color":case"colors":return"COLOR_0";case"texcoord":case"texcoords":return"TEXCOORD_0";default:return e}}_getAccessorMinMax(e,n){let r={min:null,max:null};if(e.length<n)return r;r.min=[],r.max=[];let o=e.subarray(0,n);for(let s of o)r.min.push(s),r.max.push(s);for(let s=n;s<e.length;s+=n)for(let i=0;i<n;i++)r.min[0+i]=Math.min(r.min[0+i],e[s+i]),r.max[0+i]=Math.max(r.max[0+i],e[s+i]);return r}};function cv(t){return(t%1+1)%1}var uv={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16,BOOLEAN:1,STRING:1,ENUM:1},YB={INT8:Int8Array,UINT8:Uint8Array,INT16:Int16Array,UINT16:Uint16Array,INT32:Int32Array,UINT32:Uint32Array,INT64:BigInt64Array,UINT64:BigUint64Array,FLOAT32:Float32Array,FLOAT64:Float64Array},lv={INT8:1,UINT8:1,INT16:2,UINT16:2,INT32:4,UINT32:4,INT64:8,UINT64:8,FLOAT32:4,FLOAT64:8};function Ua(t,e){return lv[e]*uv[t]}function Ys(t,e,n,r){if(n!=="UINT8"&&n!=="UINT16"&&n!=="UINT32"&&n!=="UINT64")return null;let o=t.getTypedArrayForBufferView(e),s=Qs(o,"SCALAR",n,r+1);return s instanceof BigInt64Array||s instanceof BigUint64Array?null:s}function Qs(t,e,n,r=1){let o=uv[e],s=YB[n],i=lv[n],a=r*o,c=a*i,u=t.buffer,l=t.byteOffset;return l%i!==0&&(u=new Uint8Array(u).slice(l,l+c).buffer,l=0),new s(u,l,a)}function Ws(t,e,n){let r=`TEXCOORD_${e.texCoord||0}`,o=n.attributes[r],s=t.getTypedArrayForAccessor(o),i=t.gltf.json,a=e.index,c=i.textures?.[a]?.source;if(typeof c<"u"){let u=i.images?.[c]?.mimeType,l=t.gltf.images?.[c];if(l&&typeof l.width<"u"){let f=[];for(let m=0;m<s.length;m+=2){let d=QB(l,u,s,m,e.channels);f.push(d)}return f}}return[]}function Bl(t,e,n,r,o){if(!n?.length)return;let s=[];for(let l of n){let f=r.findIndex(m=>m===l);f===-1&&(f=r.push(l)-1),s.push(f)}let i=new Uint32Array(s),a=t.gltf.buffers.push({arrayBuffer:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength})-1,c=t.addBufferView(i,a,0),u=t.addAccessor(c,{size:1,componentType:jr(i),count:i.length});o.attributes[e]=u}function QB(t,e,n,r,o=[0]){let s={r:{offset:0,shift:0},g:{offset:1,shift:8},b:{offset:2,shift:16},a:{offset:3,shift:24}},i=n[r],a=n[r+1],c=1;e&&(e.indexOf("image/jpeg")!==-1||e.indexOf("image/png")!==-1)&&(c=4);let u=WB(i,a,t,c),l=0;for(let f of o){let m=typeof f=="number"?Object.values(s)[f]:s[f],d=u+m.offset,p=ka(t);if(p.data.length<=d)throw new Error(`${p.data.length} <= ${d}`);let b=p.data[d];l|=b<<m.shift}return l}function WB(t,e,n,r=1){let o=n.width,s=cv(t)*(o-1),i=Math.round(s),a=n.height,c=cv(e)*(a-1),u=Math.round(c),l=n.components?n.components:r;return(u*o+i)*l}function El(t,e,n,r,o){let s=[];for(let i=0;i<e;i++){let a=n[i],c=n[i+1]-n[i];if(c+a>r)break;let u=a/o,l=c/o;s.push(t.slice(u,u+l))}return s}function Sl(t,e,n){let r=[];for(let o=0;o<e;o++){let s=o*n;r.push(t.slice(s,s+n))}return r}function Ml(t,e,n,r){if(n)throw new Error("Not implemented - arrayOffsets for strings is specified");if(r){let o=[],s=new TextDecoder("utf8"),i=0;for(let a=0;a<t;a++){let c=r[a+1]-r[a];if(c+i<=e.length){let u=e.subarray(i,c+i),l=s.decode(u);o.push(l),i+=c}}return o}return[]}var $s="EXT_mesh_features",$B=$s;async function ZB(t,e){let n=new te(t);tE(n,e)}function eE(t,e){let n=new te(t);return rE(n,e),n.createBinaryChunk(),n.gltf}function tE(t,e){let n=t.gltf.json;if(n.meshes)for(let r of n.meshes)for(let o of r.primitives)nE(t,o,e)}function nE(t,e,n){if(!n?.gltf?.loadBuffers)return;let o=e.extensions?.[$s]?.featureIds;if(o)for(let s of o){let i;if(typeof s.attribute<"u"){let a=`_FEATURE_ID_${s.attribute}`,c=e.attributes[a];i=t.getTypedArrayForAccessor(c)}else typeof s.texture<"u"&&n?.gltf?.loadImages?i=Ws(t,s.texture,e):i=[];s.data=i}}function rE(t,e){let n=t.gltf.json.meshes;if(n)for(let r of n)for(let o of r.primitives)sE(t,o)}function oE(t,e,n,r){e.extensions||(e.extensions={});let o=e.extensions[$s];o||(o={featureIds:[]},e.extensions[$s]=o);let{featureIds:s}=o,i={featureCount:n.length,propertyTable:r,data:n};s.push(i),t.addObjectExtension(e,$s,o)}function sE(t,e){let n=e.extensions?.[$s];if(!n)return;let r=n.featureIds;r.forEach((o,s)=>{if(o.data){let{accessorKey:i,index:a}=iE(e.attributes),c=new Uint32Array(o.data);r[s]={featureCount:c.length,propertyTable:o.propertyTable,attribute:a},t.gltf.buffers.push({arrayBuffer:c.buffer,byteOffset:c.byteOffset,byteLength:c.byteLength});let u=t.addBufferView(c),l=t.addAccessor(u,{size:1,componentType:jr(c),count:c.length});e.attributes[i]=l}})}function iE(t){let e="_FEATURE_ID_",n=Object.keys(t).filter(s=>s.indexOf(e)===0),r=-1;for(let s of n){let i=Number(s.substring(e.length));i>r&&(r=i)}return r++,{accessorKey:`${e}${r}`,index:r}}var gp={};zt(gp,{createExtStructuralMetadata:()=>ME,decode:()=>cE,encode:()=>uE,name:()=>aE});var Zs="EXT_structural_metadata",aE=Zs;async function cE(t,e){let n=new te(t);lE(n,e)}function uE(t,e){let n=new te(t);return EE(n,e),n.createBinaryChunk(),n.gltf}function lE(t,e){if(!e.gltf?.loadBuffers)return;let n=t.getExtension(Zs);n&&(e.gltf?.loadImages&&fE(t,n),mE(t,n))}function fE(t,e){let n=e.propertyTextures,r=t.gltf.json;if(n&&r.meshes)for(let o of r.meshes)for(let s of o.primitives)dE(t,n,s,e)}function mE(t,e){let n=e.schema;if(!n)return;let r=n.classes,o=e.propertyTables;if(r&&o)for(let s in r){let i=hE(o,s);i&&gE(t,n,i)}}function hE(t,e){for(let n of t)if(n.class===e)return n;return null}function dE(t,e,n,r){if(!e)return;let s=n.extensions?.[Zs]?.propertyTextures;if(s)for(let i of s){let a=e[i];pE(t,a,n,r)}}function pE(t,e,n,r){if(!e.properties)return;r.dataAttributeNames||(r.dataAttributeNames=[]);let o=e.class;for(let s in e.properties){let i=`${o}_${s}`,a=e.properties?.[s];if(!a)continue;a.data||(a.data=[]);let c=a.data,u=Ws(t,a,n);u!==null&&(Bl(t,i,u,c,n),a.data=c,r.dataAttributeNames.push(i))}}function gE(t,e,n){let r=e.classes?.[n.class];if(!r)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${n.class}`);let o=n.count;for(let s in r.properties){let i=r.properties[s],a=n.properties?.[s];if(a){let c=yE(t,e,i,o,a);a.data=c}}}function yE(t,e,n,r,o){let s=[],i=o.values,a=t.getTypedArrayForBufferView(i),c=xE(t,n,o,r),u=bE(t,o,r);switch(n.type){case"SCALAR":case"VEC2":case"VEC3":case"VEC4":case"MAT2":case"MAT3":case"MAT4":{s=vE(n,r,a,c);break}case"BOOLEAN":throw new Error(`Not implemented - classProperty.type=${n.type}`);case"STRING":{s=Ml(r,a,c,u);break}case"ENUM":{s=AE(e,n,r,a,c);break}default:throw new Error(`Unknown classProperty type ${n.type}`)}return s}function xE(t,e,n,r){return e.array&&typeof e.count>"u"&&typeof n.arrayOffsets<"u"?Ys(t,n.arrayOffsets,n.arrayOffsetType||"UINT32",r):null}function bE(t,e,n){return typeof e.stringOffsets<"u"?Ys(t,e.stringOffsets,e.stringOffsetType||"UINT32",n):null}function vE(t,e,n,r){let o=t.array,s=t.count,i=Ua(t.type,t.componentType),a=n.byteLength/i,c;return t.componentType?c=Qs(n,t.type,t.componentType,a):c=n,o?r?El(c,e,r,n.length,i):s?Sl(c,e,s):[]:c}function AE(t,e,n,r,o){let s=e.enumType;if(!s)throw new Error("Incorrect data in the EXT_structural_metadata extension: classProperty.enumType is not set for type ENUM");let i=t.enums?.[s];if(!i)throw new Error(`Incorrect data in the EXT_structural_metadata extension: schema.enums does't contain ${s}`);let a=i.valueType||"UINT16",c=Ua(e.type,a),u=r.byteLength/c,l=Qs(r,e.type,a,u);if(l||(l=r),e.array){if(o)return _E({valuesData:l,numberOfElements:n,arrayOffsets:o,valuesDataBytesLength:r.length,elementSize:c,enumEntry:i});let f=e.count;return f?wE(l,n,f,i):[]}return pp(l,0,n,i)}function _E(t){let{valuesData:e,numberOfElements:n,arrayOffsets:r,valuesDataBytesLength:o,elementSize:s,enumEntry:i}=t,a=[];for(let c=0;c<n;c++){let u=r[c],l=r[c+1]-r[c];if(l+u>o)break;let f=u/s,m=l/s,d=pp(e,f,m,i);a.push(d)}return a}function wE(t,e,n,r){let o=[];for(let s=0;s<e;s++){let i=n*s,a=pp(t,i,n,r);o.push(a)}return o}function pp(t,e,n,r){let o=[];for(let s=0;s<n;s++)if(t instanceof BigInt64Array||t instanceof BigUint64Array)o.push("");else{let i=t[e+s],a=TE(r,i);a?o.push(a.name):o.push("")}return o}function TE(t,e){for(let n of t.values)if(n.value===e)return n;return null}var BE="schemaClassId";function EE(t,e){let n=t.getExtension(Zs);if(n&&n.propertyTables)for(let r of n.propertyTables){let o=r.class,s=n.schema?.classes?.[o];r.properties&&s&&SE(r,s,t)}}function SE(t,e,n){for(let r in t.properties){let o=t.properties[r].data;if(o){let s=e.properties[r];if(s){let i=RE(o,s,n);t.properties[r]=i}}}}function ME(t,e,n=BE){let r=t.getExtension(Zs);r||(r=t.addExtension(Zs)),r.schema=CE(e,n,r.schema);let o=VE(e,n,r.schema);return r.propertyTables||(r.propertyTables=[]),r.propertyTables.push(o)-1}function CE(t,e,n){let r=n??{id:"schema_id"},o={properties:{}};for(let s of t){let i={type:s.elementType,componentType:s.componentType};o.properties[s.name]=i}return r.classes={},r.classes[e]=o,r}function VE(t,e,n){let r={class:e,count:0},o=0,s=n.classes?.[e];for(let i of t){if(o===0&&(o=i.values.length),o!==i.values.length&&i.values.length)throw new Error("Illegal values in attributes");s?.properties[i.name]&&(r.properties||(r.properties={}),r.properties[i.name]={values:0,data:i.values})}return r.count=o,r}function RE(t,e,n){let r={values:0};if(e.type==="STRING"){let{stringData:o,stringOffsets:s}=IE(t);r.stringOffsets=dp(s,n),r.values=dp(o,n)}else if(e.type==="SCALAR"&&e.componentType){let o=kE(t,e.componentType);r.values=dp(o,n)}return r}var DE={INT8:Int8Array,UINT8:Uint8Array,INT16:Int16Array,UINT16:Uint16Array,INT32:Int32Array,UINT32:Uint32Array,INT64:Int32Array,UINT64:Uint32Array,FLOAT32:Float32Array,FLOAT64:Float64Array};function kE(t,e){let n=[];for(let o of t)n.push(Number(o));let r=DE[e];if(!r)throw new Error("Illegal component type");return new r(n)}function IE(t){let e=new TextEncoder,n=[],r=0;for(let c of t){let u=e.encode(c);r+=u.length,n.push(u)}let o=new Uint8Array(r),s=[],i=0;for(let c of n)o.set(c,i),s.push(i),i+=c.length;s.push(i);let a=new Uint32Array(s);return{stringData:o,stringOffsets:a}}function dp(t,e){return e.gltf.buffers.push({arrayBuffer:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength}),e.addBufferView(t)}var yp={};zt(yp,{decode:()=>UE,name:()=>OE});var fv="EXT_feature_metadata",OE=fv;async function UE(t,e){let n=new te(t);GE(n,e)}function GE(t,e){if(!e.gltf?.loadBuffers)return;let n=t.getExtension(fv);n&&(e.gltf?.loadImages&&LE(t,n),FE(t,n))}function LE(t,e){let n=e.schema;if(!n)return;let r=n.classes,{featureTextures:o}=e;if(r&&o)for(let s in r){let i=r[s],a=zE(o,s);a&&PE(t,a,i)}}function FE(t,e){let n=e.schema;if(!n)return;let r=n.classes,o=e.featureTables;if(r&&o)for(let s in r){let i=NE(o,s);i&&HE(t,n,i)}}function NE(t,e){for(let n in t){let r=t[n];if(r.class===e)return r}return null}function zE(t,e){for(let n in t){let r=t[n];if(r.class===e)return r}return null}function HE(t,e,n){if(!n.class)return;let r=e.classes?.[n.class];if(!r)throw new Error(`Incorrect data in the EXT_structural_metadata extension: no schema class with name ${n.class}`);let o=n.count;for(let s in r.properties){let i=r.properties[s],a=n.properties?.[s];if(a){let c=jE(t,e,i,o,a);a.data=c}}}function PE(t,e,n){let r=e.class;for(let o in n.properties){let s=e?.properties?.[o];if(s){let i=YE(t,s,r);s.data=i}}}function jE(t,e,n,r,o){let s=[],i=o.bufferView,a=t.getTypedArrayForBufferView(i),c=KE(t,n,o,r),u=JE(t,n,o,r);return n.type==="STRING"||n.componentType==="STRING"?s=Ml(r,a,c,u):qE(n)&&(s=XE(n,r,a,c)),s}function KE(t,e,n,r){return e.type==="ARRAY"&&typeof e.componentCount>"u"&&typeof n.arrayOffsetBufferView<"u"?Ys(t,n.arrayOffsetBufferView,n.offsetType||"UINT32",r):null}function JE(t,e,n,r){return typeof n.stringOffsetBufferView<"u"?Ys(t,n.stringOffsetBufferView,n.offsetType||"UINT32",r):null}function qE(t){let e=["UINT8","INT16","UINT16","INT32","UINT32","INT64","UINT64","FLOAT32","FLOAT64"];return e.includes(t.type)||typeof t.componentType<"u"&&e.includes(t.componentType)}function XE(t,e,n,r){let o=t.type==="ARRAY",s=t.componentCount,i="SCALAR",a=t.componentType||t.type,c=Ua(i,a),u=n.byteLength/c,l=Qs(n,i,a,u);return o?r?El(l,e,r,n.length,c):s?Sl(l,e,s):[]:l}function YE(t,e,n){let r=t.gltf.json;if(!r.meshes)return[];let o=[];for(let s of r.meshes)for(let i of s.primitives)QE(t,n,e,o,i);return o}function QE(t,e,n,r,o){let s={channels:n.channels,...n.texture},i=Ws(t,s,o);i&&Bl(t,e,i,r,o)}var mv="4.3.3";var hv="4.3.3";var Cl={TRANSCODER:"basis_transcoder.js",TRANSCODER_WASM:"basis_transcoder.wasm",ENCODER:"basis_encoder.js",ENCODER_WASM:"basis_encoder.wasm"},dv;async function bp(t){Md(t.modules);let e=Cd("basis");return e||(dv||=WE(t),await dv)}async function WE(t){let e=null,n=null;return[e,n]=await Promise.all([await Vn(Cl.TRANSCODER,"textures",t),await Vn(Cl.TRANSCODER_WASM,"textures",t)]),e=e||globalThis.BASIS,await $E(e,n)}function $E(t,e){let n={};return e&&(n.wasmBinary=e),new Promise(r=>{t(n).then(o=>{let{BasisFile:s,initializeBasis:i}=o;i(),r({BasisFile:s})})})}var xp;async function vp(t){let e=t.modules||{};return e.basisEncoder?e.basisEncoder:(xp=xp||ZE(t),await xp)}async function ZE(t){let e=null,n=null;return[e,n]=await Promise.all([await Vn(Cl.ENCODER,"textures",t),await Vn(Cl.ENCODER_WASM,"textures",t)]),e=e||globalThis.BASIS,await eS(e,n)}function eS(t,e){let n={};return e&&(n.wasmBinary=e),new Promise(r=>{t(n).then(o=>{let{BasisFile:s,KTX2File:i,initializeBasis:a,BasisEncoder:c}=o;a(),r({BasisFile:s,KTX2File:i,BasisEncoder:c})})})}var Ro={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35987,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,COMPRESSED_RGBA_ASTC_4X4_KHR:37808,COMPRESSED_RGBA_ASTC_5X4_KHR:37809,COMPRESSED_RGBA_ASTC_5X5_KHR:37810,COMPRESSED_RGBA_ASTC_6X5_KHR:37811,COMPRESSED_RGBA_ASTC_6X6_KHR:37812,COMPRESSED_RGBA_ASTC_8X5_KHR:37813,COMPRESSED_RGBA_ASTC_8X6_KHR:37814,COMPRESSED_RGBA_ASTC_8X8_KHR:37815,COMPRESSED_RGBA_ASTC_10X5_KHR:37816,COMPRESSED_RGBA_ASTC_10X6_KHR:37817,COMPRESSED_RGBA_ASTC_10X8_KHR:37818,COMPRESSED_RGBA_ASTC_10X10_KHR:37819,COMPRESSED_RGBA_ASTC_12X10_KHR:37820,COMPRESSED_RGBA_ASTC_12X12_KHR:37821,COMPRESSED_SRGB8_ALPHA8_ASTC_4X4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5X4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5X5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6X5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6X6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8X5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8X6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8X8_KHR:37847,COMPRESSED_SRGB8_ALPHA8_ASTC_10X5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10X6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10X8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_10X10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_12X10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12X12_KHR:37853,COMPRESSED_RED_RGTC1_EXT:36283,COMPRESSED_SIGNED_RED_RGTC1_EXT:36284,COMPRESSED_RED_GREEN_RGTC2_EXT:36285,COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT:36286,COMPRESSED_SRGB_S3TC_DXT1_EXT:35916,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT:35919};var tS=["","WEBKIT_","MOZ_"],pv={WEBGL_compressed_texture_s3tc:"dxt",WEBGL_compressed_texture_s3tc_srgb:"dxt-srgb",WEBGL_compressed_texture_etc1:"etc1",WEBGL_compressed_texture_etc:"etc2",WEBGL_compressed_texture_pvrtc:"pvrtc",WEBGL_compressed_texture_atc:"atc",WEBGL_compressed_texture_astc:"astc",EXT_texture_compression_rgtc:"rgtc"},Vl=null;function gv(t){if(!Vl){t=t||nS()||void 0,Vl=new Set;for(let e of tS)for(let n in pv)if(t&&t.getExtension(`${e}${n}`)){let r=pv[n];Vl.add(r)}}return Vl}function nS(){try{return document.createElement("canvas").getContext("webgl")}catch{return null}}var Nt=[171,75,84,88,32,50,48,187,13,10,26,10];function yv(t){let e=new Uint8Array(t);return!(e.byteLength<Nt.length||e[0]!==Nt[0]||e[1]!==Nt[1]||e[2]!==Nt[2]||e[3]!==Nt[3]||e[4]!==Nt[4]||e[5]!==Nt[5]||e[6]!==Nt[6]||e[7]!==Nt[7]||e[8]!==Nt[8]||e[9]!==Nt[9]||e[10]!==Nt[10]||e[11]!==Nt[11])}var rS={etc1:{basisFormat:0,compressed:!0,format:Ro.COMPRESSED_RGB_ETC1_WEBGL},etc2:{basisFormat:1,compressed:!0},bc1:{basisFormat:2,compressed:!0,format:Ro.COMPRESSED_RGB_S3TC_DXT1_EXT},bc3:{basisFormat:3,compressed:!0,format:Ro.COMPRESSED_RGBA_S3TC_DXT5_EXT},bc4:{basisFormat:4,compressed:!0},bc5:{basisFormat:5,compressed:!0},"bc7-m6-opaque-only":{basisFormat:6,compressed:!0},"bc7-m5":{basisFormat:7,compressed:!0},"pvrtc1-4-rgb":{basisFormat:8,compressed:!0,format:Ro.COMPRESSED_RGB_PVRTC_4BPPV1_IMG},"pvrtc1-4-rgba":{basisFormat:9,compressed:!0,format:Ro.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG},"astc-4x4":{basisFormat:10,compressed:!0,format:Ro.COMPRESSED_RGBA_ASTC_4X4_KHR},"atc-rgb":{basisFormat:11,compressed:!0},"atc-rgba-interpolated-alpha":{basisFormat:12,compressed:!0},rgba32:{basisFormat:13,compressed:!1},rgb565:{basisFormat:14,compressed:!1},bgr565:{basisFormat:15,compressed:!1},rgba4444:{basisFormat:16,compressed:!1}};async function bv(t,e){if(e.basis.containerFormat==="auto"){if(yv(t)){let r=await vp(e);return xv(r.KTX2File,t,e)}let{BasisFile:n}=await bp(e);return Ap(n,t,e)}switch(e.basis.module){case"encoder":let n=await vp(e);switch(e.basis.containerFormat){case"ktx2":return xv(n.KTX2File,t,e);case"basis":default:return Ap(n.BasisFile,t,e)}case"transcoder":default:let{BasisFile:r}=await bp(e);return Ap(r,t,e)}}function Ap(t,e,n){let r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("Failed to start basis transcoding");let o=r.getNumImages(),s=[];for(let i=0;i<o;i++){let a=r.getNumLevels(i),c=[];for(let u=0;u<a;u++)c.push(oS(r,i,u,n));s.push(c)}return s}finally{r.close(),r.delete()}}function oS(t,e,n,r){let o=t.getImageWidth(e,n),s=t.getImageHeight(e,n),i=t.getHasAlpha(),{compressed:a,format:c,basisFormat:u}=vv(r,i),l=t.getImageTranscodedSizeInBytes(e,n,u),f=new Uint8Array(l);if(!t.transcodeImage(f,e,n,u,0,0))throw new Error("failed to start Basis transcoding");return{width:o,height:s,data:f,compressed:a,format:c,hasAlpha:i}}function xv(t,e,n){let r=new t(new Uint8Array(e));try{if(!r.startTranscoding())throw new Error("failed to start KTX2 transcoding");let o=r.getLevels(),s=[];for(let i=0;i<o;i++)s.push(sS(r,i,n));return[s]}finally{r.close(),r.delete()}}function sS(t,e,n){let{alphaFlag:r,height:o,width:s}=t.getImageLevelInfo(e,0,0),{compressed:i,format:a,basisFormat:c}=vv(n,r),u=t.getImageTranscodedSizeInBytes(e,0,0,c),l=new Uint8Array(u);if(!t.transcodeImage(l,e,0,0,c,0,-1,-1))throw new Error("Failed to transcode KTX2 image");return{width:s,height:o,data:l,compressed:i,levelSize:u,hasAlpha:r,format:a}}function vv(t,e){let n=t&&t.basis&&t.basis.format;return n==="auto"&&(n=Rl()),typeof n=="object"&&(n=e?n.alpha:n.noAlpha),n=n.toLowerCase(),rS[n]}function Rl(){let t=gv();return t.has("astc")?"astc-4x4":t.has("dxt")?{alpha:"bc3",noAlpha:"bc1"}:t.has("pvrtc")?{alpha:"pvrtc1-4-rgba",noAlpha:"pvrtc1-4-rgb"}:t.has("etc1")?"etc1":t.has("etc2")?"etc2":"rgb565"}var Av={dataType:null,batchType:null,name:"Basis",id:"basis",module:"textures",version:hv,worker:!0,extensions:["basis","ktx2"],mimeTypes:["application/octet-stream","image/ktx2"],tests:["sB"],binary:!0,options:{basis:{format:"auto",libraryPath:"libs/",containerFormat:"auto",module:"transcoder"}}},_p={...Av,parse:bv};var ei=!0,_v=1735152710,Bp=12,Dl=8,iS=1313821514,aS=5130562,cS=0,uS=0,lS=1;function fS(t,e=0){return`${String.fromCharCode(t.getUint8(e+0))}${String.fromCharCode(t.getUint8(e+1))}${String.fromCharCode(t.getUint8(e+2))}${String.fromCharCode(t.getUint8(e+3))}`}function wv(t,e=0,n={}){let r=new DataView(t),{magic:o=_v}=n,s=r.getUint32(e,!1);return s===o||s===_v}function Tv(t,e,n=0,r={}){let o=new DataView(e),s=fS(o,n+0),i=o.getUint32(n+4,ei),a=o.getUint32(n+8,ei);switch(Object.assign(t,{header:{byteOffset:n,byteLength:a,hasBinChunk:!1},type:s,version:i,json:{},binChunks:[]}),n+=Bp,t.version){case 1:return mS(t,o,n);case 2:return hS(t,o,n,r={});default:throw new Error(`Invalid GLB version ${t.version}. Only supports version 1 and 2.`)}}function mS(t,e,n){dt(t.header.byteLength>Bp+Dl);let r=e.getUint32(n+0,ei),o=e.getUint32(n+4,ei);return n+=Dl,dt(o===cS),wp(t,e,n,r),n+=r,n+=Tp(t,e,n,t.header.byteLength),n}function hS(t,e,n,r){return dt(t.header.byteLength>Bp+Dl),dS(t,e,n,r),n+t.header.byteLength}function dS(t,e,n,r){for(;n+8<=t.header.byteLength;){let o=e.getUint32(n+0,ei),s=e.getUint32(n+4,ei);switch(n+=Dl,s){case iS:wp(t,e,n,o);break;case aS:Tp(t,e,n,o);break;case uS:r.strict||wp(t,e,n,o);break;case lS:r.strict||Tp(t,e,n,o);break;default:break}n+=Pr(o,4)}return n}function wp(t,e,n,r){let o=new Uint8Array(e.buffer,n,r),i=new TextDecoder("utf8").decode(o);return t.json=JSON.parse(i),Pr(r,4)}function Tp(t,e,n,r){return t.header.hasBinChunk=!0,t.binChunks.push({byteOffset:n,byteLength:r,arrayBuffer:e.buffer}),Pr(r,4)}function Ep(t,e){if(t.startsWith("data:")||t.startsWith("http:")||t.startsWith("https:"))return t;let r=e.baseUri||e.uri;if(!r)throw new Error(`'baseUri' must be provided to resolve relative url ${t}`);return r.substr(0,r.lastIndexOf("/")+1)+t}var Mp={};zt(Mp,{decode:()=>ES,name:()=>BS});var pS="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",gS="B9h9z9tFBBBF8dL9gBB9gLaaaaaFa9gEaaaB9gGaaB9gFaFaEQSBBFBFFGEGEGIILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBNn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBcI9z9iqlBMc/j9JSIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMkRIbaG97FaK978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAnDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAnDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAnDeBJAeCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPD8dBhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBAeCx+YUUBJDBBBHnAnDQBBBBBBBBBBBBBBBBAPD8dFhUg/8/4/w/goB9+h84k7HeCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAnDeBJAeCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBRnCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBHiCFD9tAiAPD9OD9hD9RHiDQBTFtGmEYIPLdKeOnH8ZAIAQJDBIBHpCFD9tApAPD9OD9hD9RHpAIASJDBIBHyCFD9tAyAPD9OD9hD9RHyDQBTFtGmEYIPLdKeOnH8cDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAnD9uHnDyBjGBAEAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnA8ZA8cDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNiV8ZcpMyS8cQ8df8eb8fHdApAyDQNiV8ZcpMyS8cQ8df8eb8fHiDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJHIAnAdAiDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHnDyBjGBAIAGJHIAnAPAPDQILKOILKOILKOILKOD9uHnDyBjGBAIAGJHIAnAPAPDQNVcMNVcMNVcMNVcMD9uHnDyBjGBAIAGJHIAnAPAPDQSQfbSQfbSQfbSQfbD9uHnDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/xLGEaK978jUUUUBCAlHE8kUUUUBGXGXAGCI9HQBGXAFC98ZHI9FQBABRGCBRLEXAGAGDBBBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMBBAGCTJRGALCIJHLAI9JQBMMAIAF9PQFAEAFCEZHLCGWHGqCBCTAGl/8MBAEABAICGWJHIAG/8cBBGXAL9FQBAEAEDBIBHKCiD+rFCiD+sFD/6FHOAKCND+rFCiD+sFD/6FAOD/gFAKCTD+rFCiD+sFD/6FHND/gFD/kFD/lFHVCBDtD+2FHcAOCUUUU94DtHMD9OD9RD/kFHO9DBB/+hDYAOAOD/mFAVAVD/mFANAcANAMD9OD9RD/kFHOAOD/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHcD/kFCgFDtD9OAKCUUU94DtD9OD9QAOAND/mFAcD/kFCND+rFCU/+EDtD9OD9QAVAND/mFAcD/kFCTD+rFCUU/8ODtD9OD9QDMIBMAIAEAG/8cBBSFMABAFC98ZHGT+HUUUBAGAF9PQBAEAFCEZHICEWHLJCBCAALl/8MBAEABAGCEWJHGAL/8cBBAEAIT+HUUUBAGAEAL/8cBBMAECAJ8kUUUUBM+yEGGaO97GXAF9FQBCBRGEXABCTJHEAEDBBBHICBDtHLCUU98D8cFCUU98D8cEHKD9OABDBBBHOAIDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAOAIDQBFGENVcMTtmYi8ZpyHICTD+sFD/6FHND/gFAICTD+rFCTD+sFD/6FHVD/gFD/kFD/lFHI9DB/+g6DYAVAIALD+2FHLAVCUUUU94DtHcD9OD9RD/kFHVAVD/mFAIAID/mFANALANAcD9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHND/mF9DBBX9LDYHLD/kFCTD+rFAVAND/mFALD/kFCggEDtD9OD9QHVAIAND/mFALD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHIDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAOAKD9OAVAIDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM94FEa8jUUUUBCAlHE8kUUUUBABAFC98ZHIT+JUUUBGXAIAF9PQBAEAFCEZHLCEWHFJCBCAAFl/8MBAEABAICEWJHBAF/8cBBAEALT+JUUUBABAEAF/8cBBMAECAJ8kUUUUBM/hEIGaF97FaL978jUUUUBCTlRGGXAF9FQBCBREEXAGABDBBBHIABCTJHLDBBBHKDQILKOSQfbPden8c8d8e8fHOCTD+sFHNCID+rFDMIBAB9DBBU8/DY9D/zI818/DYANCEDtD9QD/6FD/nFHNAIAKDQBFGENVcMTtmYi8ZpyHICTD+rFCTD+sFD/6FD/mFHKAKD/mFANAICTD+sFD/6FD/mFHVAVD/mFANAOCTD+rFCTD+sFD/6FD/mFHOAOD/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHND/mF9DBBX9LDYHID/kFCggEDtHcD9OAVAND/mFAID/kFCTD+rFD9QHVAOAND/mFAID/kFCTD+rFAKAND/mFAID/kFAcD9OD9QHNDQBFTtGEmYILPdKOenHID8dBAGDBIBDyB+t+J83EBABCNJAID8dFAGDBIBDyF+t+J83EBALAVANDQNVi8ZcMpySQ8c8dfb8e8fHND8dBAGDBIBDyG+t+J83EBABCiJAND8dFAGDBIBDyE+t+J83EBABCAJRBAECIJHEAF9JQBMMM/3FGEaF978jUUUUBCoBlREGXAGCGrAF9sHIC98ZHL9FQBCBRGABRFEXAFAFDBBBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBAFCTJRFAGCIJHGAL9JQBMMGXALAI9PQBAEAICEZHGCGWHFqCBCoBAFl/8MBAEABALCGWJHLAF/8cBBGXAG9FQBAEAEDBIBHKCND+rFCND+sFD/6FAKCiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMIBMALAEAF/8cBBMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",yS=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),xS=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]),bS={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},vS={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};async function Bv(t,e,n,r,o,s="NONE"){let i=await AS();TS(i,i.exports[vS[o]],t,e,n,r,i.exports[bS[s||"NONE"]])}var Sp;async function AS(){return Sp||(Sp=_S()),Sp}async function _S(){let t=pS;WebAssembly.validate(yS)&&(t=gS,console.log("Warning: meshopt_decoder is using experimental SIMD support"));let e=await WebAssembly.instantiate(wS(t),{});return await e.instance.exports.__wasm_call_ctors(),e.instance}function wS(t){let e=new Uint8Array(t.length);for(let r=0;r<t.length;++r){let o=t.charCodeAt(r);e[r]=o>96?o-71:o>64?o-65:o>47?o+4:o>46?63:62}let n=0;for(let r=0;r<t.length;++r)e[n++]=e[r]<60?xS[e[r]]:(e[r]-60)*64+e[++r];return e.buffer.slice(0,n)}function TS(t,e,n,r,o,s,i){let a=t.exports.sbrk,c=r+3&-4,u=a(c*o),l=a(s.length),f=new Uint8Array(t.exports.memory.buffer);f.set(s,l);let m=e(u,r,o,l,s.length);if(m===0&&i&&i(u,c,o),n.set(f.subarray(u,u+r*o)),a(u-a(0)),m!==0)throw new Error(`Malformed buffer data: ${m}`)}var kl="EXT_meshopt_compression",BS=kl;async function ES(t,e){let n=new te(t);if(!e?.gltf?.decompressMeshes||!e.gltf?.loadBuffers)return;let r=[];for(let o of t.json.bufferViews||[])r.push(SS(n,o));await Promise.all(r),n.removeExtension(kl)}async function SS(t,e){let n=t.getObjectExtension(e,kl);if(n){let{byteOffset:r=0,byteLength:o=0,byteStride:s,count:i,mode:a,filter:c="NONE",buffer:u}=n,l=t.gltf.buffers[u],f=new Uint8Array(l.arrayBuffer,l.byteOffset+r,o),m=new Uint8Array(t.gltf.buffers[e.buffer].arrayBuffer,e.byteOffset,e.byteLength);await Bv(m,i,s,f,a,c),t.removeObjectExtension(e,kl)}}var Cp={};zt(Cp,{name:()=>MS,preprocess:()=>CS});var ti="EXT_texture_webp",MS=ti;function CS(t,e){let n=new te(t);if(!mp("image/webp")){if(n.getRequiredExtensions().includes(ti))throw new Error(`gltf: Required extension ${ti} not supported by browser`);return}let{json:r}=n;for(let o of r.textures||[]){let s=n.getObjectExtension(o,ti);s&&(o.source=s.source),n.removeObjectExtension(o,ti)}n.removeExtension(ti)}var Vp={};zt(Vp,{name:()=>VS,preprocess:()=>RS});var Il="KHR_texture_basisu",VS=Il;function RS(t,e){let n=new te(t),{json:r}=n;for(let o of r.textures||[]){let s=n.getObjectExtension(o,Il);s&&(o.source=s.source,n.removeObjectExtension(o,Il))}n.removeExtension(Il)}var Op={};zt(Op,{decode:()=>qS,encode:()=>XS,name:()=>KS,preprocess:()=>JS});var Ev="4.3.3";var Sv={dataType:null,batchType:null,name:"Draco",id:"draco",module:"draco",version:Ev,worker:!0,extensions:["drc"],mimeTypes:["application/octet-stream"],binary:!0,tests:["DRACO"],options:{draco:{decoderType:typeof WebAssembly=="object"?"wasm":"js",libraryPath:"libs/",extraAttributes:{},attributeNameEntry:void 0}}};function Cv(t,e,n){let r=Vv(e.metadata),o=[],s=DS(e.attributes);for(let i in t){let a=t[i],c=Mv(i,a,s[i]);o.push(c)}if(n){let i=Mv("indices",n);o.push(i)}return{fields:o,metadata:r}}function DS(t){let e={};for(let n in t){let r=t[n];e[r.name||"undefined"]=r}return e}function Mv(t,e,n){let r=n?Vv(n.metadata):void 0;return sp(t,e,r)}function Vv(t){Object.entries(t);let e={};for(let n in t)e[`${n}.string`]=JSON.stringify(t[n]);return e}var Rv={POSITION:"POSITION",NORMAL:"NORMAL",COLOR:"COLOR_0",TEX_COORD:"TEXCOORD_0"},kS={1:Int8Array,2:Uint8Array,3:Int16Array,4:Uint16Array,5:Int32Array,6:Uint32Array,9:Float32Array},IS=4,Ga=class{draco;decoder;metadataQuerier;constructor(e){this.draco=e,this.decoder=new this.draco.Decoder,this.metadataQuerier=new this.draco.MetadataQuerier}destroy(){this.draco.destroy(this.decoder),this.draco.destroy(this.metadataQuerier)}parseSync(e,n={}){let r=new this.draco.DecoderBuffer;r.Init(new Int8Array(e),e.byteLength),this._disableAttributeTransforms(n);let o=this.decoder.GetEncodedGeometryType(r),s=o===this.draco.TRIANGULAR_MESH?new this.draco.Mesh:new this.draco.PointCloud;try{let i;switch(o){case this.draco.TRIANGULAR_MESH:i=this.decoder.DecodeBufferToMesh(r,s);break;case this.draco.POINT_CLOUD:i=this.decoder.DecodeBufferToPointCloud(r,s);break;default:throw new Error("DRACO: Unknown geometry type.")}if(!i.ok()||!s.ptr){let m=`DRACO decompression failed: ${i.error_msg()}`;throw new Error(m)}let a=this._getDracoLoaderData(s,o,n),c=this._getMeshData(s,a,n),u=op(c.attributes),l=Cv(c.attributes,a,c.indices);return{loader:"draco",loaderData:a,header:{vertexCount:s.num_points(),boundingBox:u},...c,schema:l}}finally{this.draco.destroy(r),s&&this.draco.destroy(s)}}_getDracoLoaderData(e,n,r){let o=this._getTopLevelMetadata(e),s=this._getDracoAttributes(e,r);return{geometry_type:n,num_attributes:e.num_attributes(),num_points:e.num_points(),num_faces:e instanceof this.draco.Mesh?e.num_faces():0,metadata:o,attributes:s}}_getDracoAttributes(e,n){let r={};for(let o=0;o<e.num_attributes();o++){let s=this.decoder.GetAttribute(e,o),i=this._getAttributeMetadata(e,o);r[s.unique_id()]={unique_id:s.unique_id(),attribute_type:s.attribute_type(),data_type:s.data_type(),num_components:s.num_components(),byte_offset:s.byte_offset(),byte_stride:s.byte_stride(),normalized:s.normalized(),attribute_index:o,metadata:i};let a=this._getQuantizationTransform(s,n);a&&(r[s.unique_id()].quantization_transform=a);let c=this._getOctahedronTransform(s,n);c&&(r[s.unique_id()].octahedron_transform=c)}return r}_getMeshData(e,n,r){let o=this._getMeshAttributes(n,e,r);if(!o.POSITION)throw new Error("DRACO: No position attribute found.");if(e instanceof this.draco.Mesh)switch(r.topology){case"triangle-strip":return{topology:"triangle-strip",mode:4,attributes:o,indices:{value:this._getTriangleStripIndices(e),size:1}};case"triangle-list":default:return{topology:"triangle-list",mode:5,attributes:o,indices:{value:this._getTriangleListIndices(e),size:1}}}return{topology:"point-list",mode:0,attributes:o}}_getMeshAttributes(e,n,r){let o={};for(let s of Object.values(e.attributes)){let i=this._deduceAttributeName(s,r);s.name=i;let a=this._getAttributeValues(n,s);if(a){let{value:c,size:u}=a;o[i]={value:c,size:u,byteOffset:s.byte_offset,byteStride:s.byte_stride,normalized:s.normalized}}}return o}_getTriangleListIndices(e){let r=e.num_faces()*3,o=r*IS,s=this.draco._malloc(o);try{return this.decoder.GetTrianglesUInt32Array(e,o,s),new Uint32Array(this.draco.HEAPF32.buffer,s,r).slice()}finally{this.draco._free(s)}}_getTriangleStripIndices(e){let n=new this.draco.DracoInt32Array;try{return this.decoder.GetTriangleStripsFromMesh(e,n),GS(n)}finally{this.draco.destroy(n)}}_getAttributeValues(e,n){let r=kS[n.data_type];if(!r)return console.warn(`DRACO: Unsupported attribute type ${n.data_type}`),null;let o=n.num_components,i=e.num_points()*o,a=i*r.BYTES_PER_ELEMENT,c=OS(this.draco,r),u,l=this.draco._malloc(a);try{let f=this.decoder.GetAttribute(e,n.attribute_index);this.decoder.GetAttributeDataArrayForAllPoints(e,f,c,a,l),u=new r(this.draco.HEAPF32.buffer,l,i).slice()}finally{this.draco._free(l)}return{value:u,size:o}}_deduceAttributeName(e,n){let r=e.unique_id;for(let[i,a]of Object.entries(n.extraAttributes||{}))if(a===r)return i;let o=e.attribute_type;for(let i in Rv)if(this.draco[i]===o)return Rv[i];let s=n.attributeNameEntry||"name";return e.metadata[s]?e.metadata[s].string:`CUSTOM_ATTRIBUTE_${r}`}_getTopLevelMetadata(e){let n=this.decoder.GetMetadata(e);return this._getDracoMetadata(n)}_getAttributeMetadata(e,n){let r=this.decoder.GetAttributeMetadata(e,n);return this._getDracoMetadata(r)}_getDracoMetadata(e){if(!e||!e.ptr)return{};let n={},r=this.metadataQuerier.NumEntries(e);for(let o=0;o<r;o++){let s=this.metadataQuerier.GetEntryName(e,o);n[s]=this._getDracoMetadataField(e,s)}return n}_getDracoMetadataField(e,n){let r=new this.draco.DracoInt32Array;try{this.metadataQuerier.GetIntEntryArray(e,n,r);let o=US(r);return{int:this.metadataQuerier.GetIntEntry(e,n),string:this.metadataQuerier.GetStringEntry(e,n),double:this.metadataQuerier.GetDoubleEntry(e,n),intArray:o}}finally{this.draco.destroy(r)}}_disableAttributeTransforms(e){let{quantizedAttributes:n=[],octahedronAttributes:r=[]}=e,o=[...n,...r];for(let s of o)this.decoder.SkipAttributeTransform(this.draco[s])}_getQuantizationTransform(e,n){let{quantizedAttributes:r=[]}=n,o=e.attribute_type();if(r.map(i=>this.decoder[i]).includes(o)){let i=new this.draco.AttributeQuantizationTransform;try{if(i.InitFromAttribute(e))return{quantization_bits:i.quantization_bits(),range:i.range(),min_values:new Float32Array([1,2,3]).map(a=>i.min_value(a))}}finally{this.draco.destroy(i)}}return null}_getOctahedronTransform(e,n){let{octahedronAttributes:r=[]}=n,o=e.attribute_type();if(r.map(i=>this.decoder[i]).includes(o)){let i=new this.draco.AttributeQuantizationTransform;try{if(i.InitFromAttribute(e))return{quantization_bits:i.quantization_bits()}}finally{this.draco.destroy(i)}}return null}};function OS(t,e){switch(e){case Float32Array:return t.DT_FLOAT32;case Int8Array:return t.DT_INT8;case Int16Array:return t.DT_INT16;case Int32Array:return t.DT_INT32;case Uint8Array:return t.DT_UINT8;case Uint16Array:return t.DT_UINT16;case Uint32Array:return t.DT_UINT32;default:return t.DT_INVALID}}function US(t){let e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}function GS(t){let e=t.size(),n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=t.GetValue(r);return n}var LS="1.5.6",FS="1.4.1",Rp=`https://www.gstatic.com/draco/versioned/decoders/${LS}`,St={DECODER:"draco_wasm_wrapper.js",DECODER_WASM:"draco_decoder.wasm",FALLBACK_DECODER:"draco_decoder.js",ENCODER:"draco_encoder.js"},Dp={[St.DECODER]:`${Rp}/${St.DECODER}`,[St.DECODER_WASM]:`${Rp}/${St.DECODER_WASM}`,[St.FALLBACK_DECODER]:`${Rp}/${St.FALLBACK_DECODER}`,[St.ENCODER]:`https://raw.githubusercontent.com/google/draco/${FS}/javascript/${St.ENCODER}`},kp;async function Dv(t){let e=t.modules||{};return e.draco3d?kp||=e.draco3d.createDecoderModule({}).then(n=>({draco:n})):kp||=NS(t),await kp}async function NS(t){let e,n;switch(t.draco&&t.draco.decoderType){case"js":e=await Vn(Dp[St.FALLBACK_DECODER],"draco",t,St.FALLBACK_DECODER);break;case"wasm":default:[e,n]=await Promise.all([await Vn(Dp[St.DECODER],"draco",t,St.DECODER),await Vn(Dp[St.DECODER_WASM],"draco",t,St.DECODER_WASM)])}return e=e||globalThis.DracoDecoderModule,await zS(e,n)}function zS(t,e){let n={};return e&&(n.wasmBinary=e),new Promise(r=>{t({...n,onModuleLoaded:o=>r({draco:o})})})}var kv={...Sv,parse:HS};async function HS(t,e){let{draco:n}=await Dv(e),r=new Ga(n);try{return r.parseSync(t,e?.draco)}finally{r.destroy()}}function Iv(t){let e={};for(let n in t){let r=t[n];if(n!=="indices"){let o=Ip(r);e[n]=o}}return e}function Ip(t){let{buffer:e,size:n,count:r}=PS(t);return{value:e,size:n,byteOffset:0,count:r,type:Tl(n),componentType:jr(e)}}function PS(t){let e=t,n=1,r=0;return t&&t.value&&(e=t.value,n=t.size||1),e&&(ArrayBuffer.isView(e)||(e=jS(e,Float32Array)),r=e.length/n),{buffer:e,size:n,count:r}}function jS(t,e,n=!1){return t?Array.isArray(t)?new e(t):n&&!(t instanceof e)?new e(t):t:null}var Kr="KHR_draco_mesh_compression",KS=Kr;function JS(t,e,n){let r=new te(t);for(let o of Ov(r))r.getObjectExtension(o,Kr)}async function qS(t,e,n){if(!e?.gltf?.decompressMeshes)return;let r=new te(t),o=[];for(let s of Ov(r))r.getObjectExtension(s,Kr)&&o.push(YS(r,s,e,n));await Promise.all(o),r.removeExtension(Kr)}function XS(t,e={}){let n=new te(t);for(let r of n.json.meshes||[])QS(r,e),n.addRequiredExtension(Kr)}async function YS(t,e,n,r){let o=t.getObjectExtension(e,Kr);if(!o)return;let s=t.getTypedArrayForBufferView(o.bufferView),i=Ca(s.buffer,s.byteOffset),a={...n};delete a["3d-tiles"];let c=await wa(i,kv,a,r),u=Iv(c.attributes);for(let[l,f]of Object.entries(u))if(l in e.attributes){let m=e.attributes[l],d=t.getAccessor(m);d?.min&&d?.max&&(f.min=d.min,f.max=d.max)}e.attributes=u,c.indices&&(e.indices=Ip(c.indices)),t.removeObjectExtension(e,Kr),WS(e)}function QS(t,e,n=4,r,o){if(!r.DracoWriter)throw new Error("options.gltf.DracoWriter not provided");let s=r.DracoWriter.encodeSync({attributes:t}),i=o?.parseSync?.({attributes:t}),a=r._addFauxAttributes(i.attributes),c=r.addBufferView(s);return{primitives:[{attributes:a,mode:n,extensions:{[Kr]:{bufferView:c,attributes:a}}}]}}function WS(t){if(!t.attributes&&Object.keys(t.attributes).length>0)throw new Error("glTF: Empty primitive detected: Draco decompression failure?")}function*Ov(t){for(let e of t.json.meshes||[])for(let n of e.primitives)yield n}var Hp={};zt(Hp,{decode:()=>gM,name:()=>hM});var hL=1/Math.PI*180,dL=1/180*Math.PI,$S={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0,_cartographicRadians:!1};globalThis.mathgl=globalThis.mathgl||{config:{...$S}};var et=globalThis.mathgl.config;function Uv(t,{precision:e=et.precision}={}){return t=ZS(t),`${parseFloat(t.toPrecision(e))}`}function ni(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Up(t,e,n){let r=et.EPSILON;n&&(et.EPSILON=n);try{if(t===e)return!0;if(ni(t)&&ni(e)){if(t.length!==e.length)return!1;for(let o=0;o<t.length;++o)if(!Up(t[o],e[o]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=et.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{et.EPSILON=r}}function ZS(t){return Math.round(t/et.EPSILON)*et.EPSILON}var ri=class extends Array{clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}toObject(e){return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:ni(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(et)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+Uv(this[r],e);return`${e.printTypes?this.constructor.name:""}[${n}]`}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!Up(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let o=0;o<this.ELEMENTS;++o){let s=e[o],i=typeof n=="number"?n:n[o];this[o]=s+r*(i-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(let n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(let n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(et.debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}};function eM(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function ot(t){if(!Number.isFinite(t))throw new Error(`Invalid number ${JSON.stringify(t)}`);return t}function Gv(t,e,n=""){if(et.debug&&!eM(t,e))throw new Error(`math.gl: ${n} some fields set to invalid numbers'`);return t}function Gp(t,e){if(!t)throw new Error(`math.gl assertion ${e}`)}var Ol=class extends ri{get x(){return this[0]}set x(e){this[0]=ot(e)}get y(){return this[1]}set y(e){this[1]=ot(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){let o=this[r]-e[r];n+=o*o}return ot(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return ot(n)}normalize(){let e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(let n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(let n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Gp(e>=0&&e<this.ELEMENTS,"index is out of range"),ot(this[e])}setComponent(e,n){return Gp(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}};var oi=typeof Float32Array<"u"?Float32Array:Array;var BL=Math.PI/180;function oM(){let t=new oi(2);return oi!=Float32Array&&(t[0]=0,t[1]=0),t}function Fv(t,e,n){let r=e[0],o=e[1];return t[0]=n[0]*r+n[3]*o+n[6],t[1]=n[1]*r+n[4]*o+n[7],t}var EL=(function(){let t=oM();return function(e,n,r,o,s,i){let a,c;for(n||(n=2),r||(r=0),o?c=Math.min(o*n+r,e.length):c=e.length,a=r;a<c;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,i),e[a]=t[0],e[a+1]=t[1];return e}})();function Nv(t,e,n){let r=e[0],o=e[1],s=e[2],i=n[3]*r+n[7]*o+n[11]*s||1;return t[0]=(n[0]*r+n[4]*o+n[8]*s)/i,t[1]=(n[1]*r+n[5]*o+n[9]*s)/i,t[2]=(n[2]*r+n[6]*o+n[10]*s)/i,t}function zv(t,e,n){let r=e[0],o=e[1];return t[0]=n[0]*r+n[2]*o,t[1]=n[1]*r+n[3]*o,t[2]=e[2],t}function Hv(t,e,n){let r=e[0],o=e[1],s=e[2];return t[0]=n[0]*r+n[3]*o+n[6]*s,t[1]=n[1]*r+n[4]*o+n[7]*s,t[2]=n[2]*r+n[5]*o+n[8]*s,t[3]=e[3],t}function iM(){let t=new oi(3);return oi!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function aM(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Pv(t,e,n){let r=e[0],o=e[1],s=e[2],i=n[0],a=n[1],c=n[2];return t[0]=o*c-s*a,t[1]=s*i-r*c,t[2]=r*a-o*i,t}function jv(t,e,n){let r=e[0],o=e[1],s=e[2],i=n[3]*r+n[7]*o+n[11]*s+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*o+n[8]*s+n[12])/i,t[1]=(n[1]*r+n[5]*o+n[9]*s+n[13])/i,t[2]=(n[2]*r+n[6]*o+n[10]*s+n[14])/i,t}function Ul(t,e,n){let r=e[0],o=e[1],s=e[2];return t[0]=r*n[0]+o*n[3]+s*n[6],t[1]=r*n[1]+o*n[4]+s*n[7],t[2]=r*n[2]+o*n[5]+s*n[8],t}function Kv(t,e,n){let r=n[0],o=n[1],s=n[2],i=n[3],a=e[0],c=e[1],u=e[2],l=o*u-s*c,f=s*a-r*u,m=r*c-o*a,d=o*m-s*f,p=s*l-r*m,b=r*f-o*l,w=i*2;return l*=w,f*=w,m*=w,d*=2,p*=2,b*=2,t[0]=a+l+d,t[1]=c+f+p,t[2]=u+m+b,t}function Jv(t,e,n,r){let o=[],s=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],s[0]=o[0],s[1]=o[1]*Math.cos(r)-o[2]*Math.sin(r),s[2]=o[1]*Math.sin(r)+o[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function qv(t,e,n,r){let o=[],s=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],s[0]=o[2]*Math.sin(r)+o[0]*Math.cos(r),s[1]=o[1],s[2]=o[2]*Math.cos(r)-o[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Xv(t,e,n,r){let o=[],s=[];return o[0]=e[0]-n[0],o[1]=e[1]-n[1],o[2]=e[2]-n[2],s[0]=o[0]*Math.cos(r)-o[1]*Math.sin(r),s[1]=o[0]*Math.sin(r)+o[1]*Math.cos(r),s[2]=o[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function Yv(t,e){let n=t[0],r=t[1],o=t[2],s=e[0],i=e[1],a=e[2],c=Math.sqrt((n*n+r*r+o*o)*(s*s+i*i+a*a)),u=c&&aM(t,e)/c;return Math.acos(Math.min(Math.max(u,-1),1))}var ML=(function(){let t=iM();return function(e,n,r,o,s,i){let a,c;for(n||(n=3),r||(r=0),o?c=Math.min(o*n+r,e.length):c=e.length,a=r;a<c;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,i),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();var Lp=[0,0,0],Gl,La=class t extends Ol{static get ZERO(){return Gl||(Gl=new t(0,0,0),Object.freeze(Gl)),Gl}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&ni(e)?this.copy(e):(et.debug&&(ot(e),ot(n),ot(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return et.debug&&(ot(e.x),ot(e.y),ot(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=ot(e)}angle(e){return Yv(this,e)}cross(e){return Pv(this,this,e),this.check()}rotateX({radians:e,origin:n=Lp}){return Jv(this,this,n,e),this.check()}rotateY({radians:e,origin:n=Lp}){return qv(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=Lp}){return Xv(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return jv(this,this,e),this.check()}transformAsVector(e){return Nv(this,this,e),this.check()}transformByMatrix3(e){return Ul(this,this,e),this.check()}transformByMatrix2(e){return zv(this,this,e),this.check()}transformByQuaternion(e){return Kv(this,this,e),this.check()}};var Ll=class extends ri{toString(){let e="[";if(et.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=` ${this[r*this.RANK+n]}`}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=` ${this[n]}`}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=ot(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){let r=e*this.RANK;for(let o=0;o<this.RANK;++o)n[o]=this[r+o];return n}setColumn(e,n){let r=e*this.RANK;for(let o=0;o<this.RANK;++o)this[r+o]=n[o];return this}};function Qv(t,e){if(t===e){let n=e[1],r=e[2],o=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=o}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function Wv(t,e){let n=e[0],r=e[1],o=e[2],s=e[3],i=e[4],a=e[5],c=e[6],u=e[7],l=e[8],f=l*i-a*u,m=-l*s+a*c,d=u*s-i*c,p=n*f+r*m+o*d;return p?(p=1/p,t[0]=f*p,t[1]=(-l*r+o*u)*p,t[2]=(a*r-o*i)*p,t[3]=m*p,t[4]=(l*n-o*c)*p,t[5]=(-a*n+o*s)*p,t[6]=d*p,t[7]=(-u*n+r*c)*p,t[8]=(i*n-r*s)*p,t):null}function $v(t){let e=t[0],n=t[1],r=t[2],o=t[3],s=t[4],i=t[5],a=t[6],c=t[7],u=t[8];return e*(u*s-i*c)+n*(-u*o+i*a)+r*(c*o-s*a)}function Fp(t,e,n){let r=e[0],o=e[1],s=e[2],i=e[3],a=e[4],c=e[5],u=e[6],l=e[7],f=e[8],m=n[0],d=n[1],p=n[2],b=n[3],w=n[4],h=n[5],g=n[6],y=n[7],A=n[8];return t[0]=m*r+d*i+p*u,t[1]=m*o+d*a+p*l,t[2]=m*s+d*c+p*f,t[3]=b*r+w*i+h*u,t[4]=b*o+w*a+h*l,t[5]=b*s+w*c+h*f,t[6]=g*r+y*i+A*u,t[7]=g*o+y*a+A*l,t[8]=g*s+y*c+A*f,t}function Zv(t,e,n){let r=e[0],o=e[1],s=e[2],i=e[3],a=e[4],c=e[5],u=e[6],l=e[7],f=e[8],m=n[0],d=n[1];return t[0]=r,t[1]=o,t[2]=s,t[3]=i,t[4]=a,t[5]=c,t[6]=m*r+d*i+u,t[7]=m*o+d*a+l,t[8]=m*s+d*c+f,t}function eA(t,e,n){let r=e[0],o=e[1],s=e[2],i=e[3],a=e[4],c=e[5],u=e[6],l=e[7],f=e[8],m=Math.sin(n),d=Math.cos(n);return t[0]=d*r+m*i,t[1]=d*o+m*a,t[2]=d*s+m*c,t[3]=d*i-m*r,t[4]=d*a-m*o,t[5]=d*c-m*s,t[6]=u,t[7]=l,t[8]=f,t}function Np(t,e,n){let r=n[0],o=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=o*e[3],t[4]=o*e[4],t[5]=o*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function tA(t,e){let n=e[0],r=e[1],o=e[2],s=e[3],i=n+n,a=r+r,c=o+o,u=n*i,l=r*i,f=r*a,m=o*i,d=o*a,p=o*c,b=s*i,w=s*a,h=s*c;return t[0]=1-f-p,t[3]=l-h,t[6]=m+w,t[1]=l+h,t[4]=1-u-p,t[7]=d-b,t[2]=m-w,t[5]=d+b,t[8]=1-u-f,t}var zp;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL1ROW0=3]="COL1ROW0",t[t.COL1ROW1=4]="COL1ROW1",t[t.COL1ROW2=5]="COL1ROW2",t[t.COL2ROW0=6]="COL2ROW0",t[t.COL2ROW1=7]="COL2ROW1",t[t.COL2ROW2=8]="COL2ROW2"})(zp||(zp={}));var lM=Object.freeze([1,0,0,0,1,0,0,0,1]),ir=class extends Ll{static get IDENTITY(){return mM()}static get ZERO(){return fM()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return zp}constructor(e,...n){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):n.length>0?this.copy([e,...n]):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this.check()}identity(){return this.copy(lM)}fromObject(e){return this.check()}fromQuaternion(e){return tA(this,e),this.check()}set(e,n,r,o,s,i,a,c,u){return this[0]=e,this[1]=n,this[2]=r,this[3]=o,this[4]=s,this[5]=i,this[6]=a,this[7]=c,this[8]=u,this.check()}setRowMajor(e,n,r,o,s,i,a,c,u){return this[0]=e,this[1]=o,this[2]=a,this[3]=n,this[4]=s,this[5]=c,this[6]=r,this[7]=i,this[8]=u,this.check()}determinant(){return $v(this)}transpose(){return Qv(this,this),this.check()}invert(){return Wv(this,this),this.check()}multiplyLeft(e){return Fp(this,e,this),this.check()}multiplyRight(e){return Fp(this,this,e),this.check()}rotate(e){return eA(this,this,e),this.check()}scale(e){return Array.isArray(e)?Np(this,this,e):Np(this,this,[e,e]),this.check()}translate(e){return Zv(this,this,e),this.check()}transform(e,n){let r;switch(e.length){case 2:r=Fv(n||[-0,-0],e,this);break;case 3:r=Ul(n||[-0,-0,-0],e,this);break;case 4:r=Hv(n||[-0,-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return Gv(r,e.length),r}transformVector(e,n){return this.transform(e,n)}transformVector2(e,n){return this.transform(e,n)}transformVector3(e,n){return this.transform(e,n)}},Fl,Nl=null;function fM(){return Fl||(Fl=new ir([0,0,0,0,0,0,0,0,0]),Object.freeze(Fl)),Fl}function mM(){return Nl||(Nl=new ir,Object.freeze(Nl)),Nl}var Hl="KHR_texture_transform",hM=Hl,zl=new La,dM=new ir,pM=new ir;async function gM(t,e){if(!new te(t).hasExtension(Hl)||!e.gltf?.loadBuffers)return;let o=t.json.materials||[];for(let s=0;s<o.length;s++)yM(s,t)}function yM(t,e){let n=e.json.materials?.[t],r=[n?.pbrMetallicRoughness?.baseColorTexture,n?.emissiveTexture,n?.normalTexture,n?.occlusionTexture,n?.pbrMetallicRoughness?.metallicRoughnessTexture],o=[];for(let s of r)s&&s?.extensions?.[Hl]&&xM(e,t,s,o)}function xM(t,e,n,r){let o=bM(n,r);if(!o)return;let s=t.json.meshes||[];for(let i of s)for(let a of i.primitives){let c=a.material;Number.isFinite(c)&&e===c&&vM(t,a,o)}}function bM(t,e){let n=t.extensions?.[Hl],{texCoord:r=0}=t,{texCoord:o=r}=n;if(!(e.findIndex(([i,a])=>i===r&&a===o)!==-1)){let i=wM(n);return r!==o&&(t.texCoord=o),e.push([r,o]),{originalTexCoord:r,texCoord:o,matrix:i}}return null}function vM(t,e,n){let{originalTexCoord:r,texCoord:o,matrix:s}=n,i=e.attributes[`TEXCOORD_${r}`];if(Number.isFinite(i)){let a=t.json.accessors?.[i];if(a&&a.bufferView){let c=t.json.bufferViews?.[a.bufferView];if(c){let{arrayBuffer:u,byteOffset:l}=t.buffers[c.buffer],f=(l||0)+(a.byteOffset||0)+(c.byteOffset||0),{ArrayType:m,length:d}=Xs(a,c),p=wl[a.componentType],b=_l[a.type],w=c.byteStride||p*b,h=new Float32Array(d);for(let g=0;g<a.count;g++){let y=new m(u,f+g*w,2);zl.set(y[0],y[1],1),zl.transformByMatrix3(s),h.set([zl[0],zl[1]],g*b)}r===o?AM(a,c,t.buffers,h):_M(o,a,e,t,h)}}}}function AM(t,e,n,r){t.componentType=5126,n.push({arrayBuffer:r.buffer,byteOffset:0,byteLength:r.buffer.byteLength}),e.buffer=n.length-1,e.byteLength=r.buffer.byteLength,e.byteOffset=0,delete e.byteStride}function _M(t,e,n,r,o){r.buffers.push({arrayBuffer:o.buffer,byteOffset:0,byteLength:o.buffer.byteLength});let s=r.json.bufferViews;if(!s)return;s.push({buffer:r.buffers.length-1,byteLength:o.buffer.byteLength,byteOffset:0});let i=r.json.accessors;i&&(i.push({bufferView:s?.length-1,byteOffset:0,componentType:5126,count:e.count,type:"VEC2"}),n.attributes[`TEXCOORD_${t}`]=i.length-1)}function wM(t){let{offset:e=[0,0],rotation:n=0,scale:r=[1,1]}=t,o=new ir().set(1,0,0,0,1,0,e[0],e[1],1),s=dM.set(Math.cos(n),Math.sin(n),0,-Math.sin(n),Math.cos(n),0,0,0,1),i=pM.set(r[0],0,0,0,r[1],0,0,0,1);return o.multiplyRight(s).multiplyRight(i)}var Pp={};zt(Pp,{decode:()=>BM,encode:()=>EM,name:()=>TM});var Do="KHR_lights_punctual",TM=Do;async function BM(t){let e=new te(t),{json:n}=e,r=e.getExtension(Do);r&&(e.json.lights=r.lights,e.removeExtension(Do));for(let o of n.nodes||[]){let s=e.getObjectExtension(o,Do);s&&(o.light=s.light),e.removeObjectExtension(o,Do)}}async function EM(t){let e=new te(t),{json:n}=e;if(n.lights){let r=e.addExtension(Do);ze(!r.lights),r.lights=n.lights,delete n.lights}if(e.json.lights){for(let r of e.json.lights){let o=r.node;e.addObjectExtension(o,Do,r)}delete e.json.lights}}var jp={};zt(jp,{decode:()=>MM,encode:()=>CM,name:()=>SM});var Fa="KHR_materials_unlit",SM=Fa;async function MM(t){let e=new te(t),{json:n}=e;for(let r of n.materials||[])r.extensions&&r.extensions.KHR_materials_unlit&&(r.unlit=!0),e.removeObjectExtension(r,Fa);e.removeExtension(Fa)}function CM(t){let e=new te(t),{json:n}=e;if(e.materials)for(let r of n.materials||[])r.unlit&&(delete r.unlit,e.addObjectExtension(r,Fa,{}),e.addExtension(Fa))}var Kp={};zt(Kp,{decode:()=>RM,encode:()=>DM,name:()=>VM});var Na="KHR_techniques_webgl",VM=Na;async function RM(t){let e=new te(t),{json:n}=e,r=e.getExtension(Na);if(r){let o=kM(r,e);for(let s of n.materials||[]){let i=e.getObjectExtension(s,Na);i&&(s.technique=Object.assign({},i,o[i.technique]),s.technique.values=IM(s.technique,e)),e.removeObjectExtension(s,Na)}e.removeExtension(Na)}}async function DM(t,e){}function kM(t,e){let{programs:n=[],shaders:r=[],techniques:o=[]}=t,s=new TextDecoder;return r.forEach(i=>{if(Number.isFinite(i.bufferView))i.code=s.decode(e.getTypedArrayForBufferView(i.bufferView));else throw new Error("KHR_techniques_webgl: no shader code")}),n.forEach(i=>{i.fragmentShader=r[i.fragmentShader],i.vertexShader=r[i.vertexShader]}),o.forEach(i=>{i.program=n[i.program]}),o}function IM(t,e){let n=Object.assign({},t.values);return Object.keys(t.uniforms||{}).forEach(r=>{t.uniforms[r].value&&!(r in n)&&(n[r]=t.uniforms[r].value)}),Object.keys(n).forEach(r=>{typeof n[r]=="object"&&n[r].index!==void 0&&(n[r].texture=e.getTexture(n[r].index))}),n}var nA=[gp,hp,Mp,Cp,Vp,Op,Pp,jp,Kp,Hp,yp];function rA(t,e={},n){let r=nA.filter(o=>sA(o.name,e));for(let o of r)o.preprocess?.(t,e,n)}async function oA(t,e={},n){let r=nA.filter(o=>sA(o.name,e));for(let o of r)await o.decode?.(t,e,n)}function sA(t,e){let n=e?.gltf?.excludeExtensions||{};return!(t in n&&!n[t])}var Jp="KHR_binary_glTF";function iA(t){let e=new te(t),{json:n}=e;for(let r of n.images||[]){let o=e.getObjectExtension(r,Jp);o&&Object.assign(r,o),e.removeObjectExtension(r,Jp)}n.buffers&&n.buffers[0]&&delete n.buffers[0].uri,e.removeExtension(Jp)}var aA={accessors:"accessor",animations:"animation",buffers:"buffer",bufferViews:"bufferView",images:"image",materials:"material",meshes:"mesh",nodes:"node",samplers:"sampler",scenes:"scene",skins:"skin",textures:"texture"},UM={accessor:"accessors",animations:"animation",buffer:"buffers",bufferView:"bufferViews",image:"images",material:"materials",mesh:"meshes",node:"nodes",sampler:"samplers",scene:"scenes",skin:"skins",texture:"textures"},qp=class{idToIndexMap={animations:{},accessors:{},buffers:{},bufferViews:{},images:{},materials:{},meshes:{},nodes:{},samplers:{},scenes:{},skins:{},textures:{}};json;normalize(e,n){this.json=e.json;let r=e.json;switch(r.asset&&r.asset.version){case"2.0":return;case void 0:case"1.0":break;default:console.warn(`glTF: Unknown version ${r.asset.version}`);return}if(!n.normalize)throw new Error("glTF v1 is not supported.");console.warn("Converting glTF v1 to glTF v2 format. This is experimental and may fail."),this._addAsset(r),this._convertTopLevelObjectsToArrays(r),iA(e),this._convertObjectIdsToArrayIndices(r),this._updateObjects(r),this._updateMaterial(r)}_addAsset(e){e.asset=e.asset||{},e.asset.version="2.0",e.asset.generator=e.asset.generator||"Normalized to glTF 2.0 by loaders.gl"}_convertTopLevelObjectsToArrays(e){for(let n in aA)this._convertTopLevelObjectToArray(e,n)}_convertTopLevelObjectToArray(e,n){let r=e[n];if(!(!r||Array.isArray(r))){e[n]=[];for(let o in r){let s=r[o];s.id=s.id||o;let i=e[n].length;e[n].push(s),this.idToIndexMap[n][o]=i}}}_convertObjectIdsToArrayIndices(e){for(let n in aA)this._convertIdsToIndices(e,n);"scene"in e&&(e.scene=this._convertIdToIndex(e.scene,"scene"));for(let n of e.textures)this._convertTextureIds(n);for(let n of e.meshes)this._convertMeshIds(n);for(let n of e.nodes)this._convertNodeIds(n);for(let n of e.scenes)this._convertSceneIds(n)}_convertTextureIds(e){e.source&&(e.source=this._convertIdToIndex(e.source,"image"))}_convertMeshIds(e){for(let n of e.primitives){let{attributes:r,indices:o,material:s}=n;for(let i in r)r[i]=this._convertIdToIndex(r[i],"accessor");o&&(n.indices=this._convertIdToIndex(o,"accessor")),s&&(n.material=this._convertIdToIndex(s,"material"))}}_convertNodeIds(e){e.children&&(e.children=e.children.map(n=>this._convertIdToIndex(n,"node"))),e.meshes&&(e.meshes=e.meshes.map(n=>this._convertIdToIndex(n,"mesh")))}_convertSceneIds(e){e.nodes&&(e.nodes=e.nodes.map(n=>this._convertIdToIndex(n,"node")))}_convertIdsToIndices(e,n){e[n]||(console.warn(`gltf v1: json doesn't contain attribute ${n}`),e[n]=[]);for(let r of e[n])for(let o in r){let s=r[o],i=this._convertIdToIndex(s,o);r[o]=i}}_convertIdToIndex(e,n){let r=UM[n];if(r in this.idToIndexMap){let o=this.idToIndexMap[r][e];if(!Number.isFinite(o))throw new Error(`gltf v1: failed to resolve ${n} with id ${e}`);return o}return e}_updateObjects(e){for(let n of this.json.buffers)delete n.type}_updateMaterial(e){for(let n of e.materials){n.pbrMetallicRoughness={baseColorFactor:[1,1,1,1],metallicFactor:1,roughnessFactor:1};let r=n.values?.tex||n.values?.texture2d_0||n.values?.diffuseTex,o=e.textures.findIndex(s=>s.id===r);o!==-1&&(n.pbrMetallicRoughness.baseColorTexture={index:o})}}};function cA(t,e={}){return new qp().normalize(t,e)}async function uA(t,e,n=0,r,o){return GM(t,e,n,r),cA(t,{normalize:r?.gltf?.normalize}),rA(t,r,o),r?.gltf?.loadBuffers&&t.json.buffers&&await LM(t,r,o),r?.gltf?.loadImages&&await FM(t,r,o),await oA(t,r,o),t}function GM(t,e,n,r){if(r.uri&&(t.baseUri=r.uri),e instanceof ArrayBuffer&&!wv(e,n,r)&&(e=new TextDecoder().decode(e)),typeof e=="string")t.json=Ld(e);else if(e instanceof ArrayBuffer){let i={};n=Tv(i,e,n,r.glb),ze(i.type==="glTF",`Invalid GLB magic string ${i.type}`),t._glb=i,t.json=i.json}else ze(!1,"GLTF: must be ArrayBuffer or string");let o=t.json.buffers||[];if(t.buffers=new Array(o.length).fill(null),t._glb&&t._glb.header.hasBinChunk){let{binChunks:i}=t._glb;t.buffers[0]={arrayBuffer:i[0].arrayBuffer,byteOffset:i[0].byteOffset,byteLength:i[0].byteLength}}let s=t.json.images||[];t.images=new Array(s.length).fill({})}async function LM(t,e,n){let r=t.json.buffers||[];for(let o=0;o<r.length;++o){let s=r[o];if(s.uri){let{fetch:i}=n;ze(i);let a=Ep(s.uri,e),u=await(await n?.fetch?.(a))?.arrayBuffer?.();t.buffers[o]={arrayBuffer:u,byteOffset:0,byteLength:u.byteLength},delete s.uri}else t.buffers[o]===null&&(t.buffers[o]={arrayBuffer:new ArrayBuffer(s.byteLength),byteOffset:0,byteLength:s.byteLength})}}async function FM(t,e,n){let r=NM(t),o=t.json.images||[],s=[];for(let i of r)s.push(zM(t,o[i],i,e,n));return await Promise.all(s)}function NM(t){let e=new Set,n=t.json.textures||[];for(let r of n)r.source!==void 0&&e.add(r.source);return Array.from(e).sort()}async function zM(t,e,n,r,o){let s;if(e.uri&&!e.hasOwnProperty("bufferView")){let a=Ep(e.uri,r),{fetch:c}=o;s=await(await c(a)).arrayBuffer(),e.bufferView={data:s}}if(Number.isFinite(e.bufferView)){let a=iv(t.json,t.buffers,e.bufferView);s=Ca(a.buffer,a.byteOffset,a.byteLength)}ze(s,"glTF image has no data");let i=await wa(s,[lp,_p],{...r,mimeType:e.mimeType,basis:r.basis||{format:Rl()}},o);i&&i[0]&&(i={compressed:!0,mipmaps:!1,width:i[0].width,height:i[0].height,data:i[0]}),t.images=t.images||[],t.images[n]=i}var si={dataType:null,batchType:null,name:"glTF",id:"gltf",module:"gltf",version:mv,extensions:["gltf","glb"],mimeTypes:["model/gltf+json","model/gltf-binary"],text:!0,binary:!0,tests:["glTF"],parse:HM,options:{gltf:{normalize:!0,loadBuffers:!0,loadImages:!0,decompressMeshes:!0},log:console}};async function HM(t,e={},n){e={...si.options,...e},e.gltf={...si.options.gltf,...e.gltf};let{byteOffset:r=0}=e;return await uA({},t,r,e,n)}var PM={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},jM={5120:1,5121:1,5122:2,5123:2,5125:4,5126:4},an={TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,REPEAT:10497,LINEAR:9729,NEAREST_MIPMAP_LINEAR:9986},KM={magFilter:an.TEXTURE_MAG_FILTER,minFilter:an.TEXTURE_MIN_FILTER,wrapS:an.TEXTURE_WRAP_S,wrapT:an.TEXTURE_WRAP_T},JM={[an.TEXTURE_MAG_FILTER]:an.LINEAR,[an.TEXTURE_MIN_FILTER]:an.NEAREST_MIPMAP_LINEAR,[an.TEXTURE_WRAP_S]:an.REPEAT,[an.TEXTURE_WRAP_T]:an.REPEAT};function qM(){return{id:"default-sampler",parameters:JM}}function XM(t){return jM[t]}function YM(t){return PM[t]}var Xp=class{baseUri="";jsonUnprocessed;json;buffers=[];images=[];postProcess(e,n={}){let{json:r,buffers:o=[],images:s=[]}=e,{baseUri:i=""}=e;return ze(r),this.baseUri=i,this.buffers=o,this.images=s,this.jsonUnprocessed=r,this.json=this._resolveTree(e.json,n),this.json}_resolveTree(e,n={}){let r={...e};return this.json=r,e.bufferViews&&(r.bufferViews=e.bufferViews.map((o,s)=>this._resolveBufferView(o,s))),e.images&&(r.images=e.images.map((o,s)=>this._resolveImage(o,s))),e.samplers&&(r.samplers=e.samplers.map((o,s)=>this._resolveSampler(o,s))),e.textures&&(r.textures=e.textures.map((o,s)=>this._resolveTexture(o,s))),e.accessors&&(r.accessors=e.accessors.map((o,s)=>this._resolveAccessor(o,s))),e.materials&&(r.materials=e.materials.map((o,s)=>this._resolveMaterial(o,s))),e.meshes&&(r.meshes=e.meshes.map((o,s)=>this._resolveMesh(o,s))),e.nodes&&(r.nodes=e.nodes.map((o,s)=>this._resolveNode(o,s)),r.nodes=r.nodes.map((o,s)=>this._resolveNodeChildren(o))),e.skins&&(r.skins=e.skins.map((o,s)=>this._resolveSkin(o,s))),e.scenes&&(r.scenes=e.scenes.map((o,s)=>this._resolveScene(o,s))),typeof this.json.scene=="number"&&r.scenes&&(r.scene=r.scenes[this.json.scene]),r}getScene(e){return this._get(this.json.scenes,e)}getNode(e){return this._get(this.json.nodes,e)}getSkin(e){return this._get(this.json.skins,e)}getMesh(e){return this._get(this.json.meshes,e)}getMaterial(e){return this._get(this.json.materials,e)}getAccessor(e){return this._get(this.json.accessors,e)}getCamera(e){return this._get(this.json.cameras,e)}getTexture(e){return this._get(this.json.textures,e)}getSampler(e){return this._get(this.json.samplers,e)}getImage(e){return this._get(this.json.images,e)}getBufferView(e){return this._get(this.json.bufferViews,e)}getBuffer(e){return this._get(this.json.buffers,e)}_get(e,n){if(typeof n=="object")return n;let r=e&&e[n];return r||console.warn(`glTF file error: Could not find ${e}[${n}]`),r}_resolveScene(e,n){return{...e,id:e.id||`scene-${n}`,nodes:(e.nodes||[]).map(r=>this.getNode(r))}}_resolveNode(e,n){let r={...e,id:e?.id||`node-${n}`};return e.mesh!==void 0&&(r.mesh=this.getMesh(e.mesh)),e.camera!==void 0&&(r.camera=this.getCamera(e.camera)),e.skin!==void 0&&(r.skin=this.getSkin(e.skin)),e.meshes!==void 0&&e.meshes.length&&(r.mesh=e.meshes.reduce((o,s)=>{let i=this.getMesh(s);return o.id=i.id,o.primitives=o.primitives.concat(i.primitives),o},{primitives:[]})),r}_resolveNodeChildren(e){return e.children&&(e.children=e.children.map(n=>this.getNode(n))),e}_resolveSkin(e,n){let r=typeof e.inverseBindMatrices=="number"?this.getAccessor(e.inverseBindMatrices):void 0;return{...e,id:e.id||`skin-${n}`,inverseBindMatrices:r}}_resolveMesh(e,n){let r={...e,id:e.id||`mesh-${n}`,primitives:[]};return e.primitives&&(r.primitives=e.primitives.map(o=>{let s={...o,attributes:{},indices:void 0,material:void 0},i=o.attributes;for(let a in i)s.attributes[a]=this.getAccessor(i[a]);return o.indices!==void 0&&(s.indices=this.getAccessor(o.indices)),o.material!==void 0&&(s.material=this.getMaterial(o.material)),s})),r}_resolveMaterial(e,n){let r={...e,id:e.id||`material-${n}`};if(r.normalTexture&&(r.normalTexture={...r.normalTexture},r.normalTexture.texture=this.getTexture(r.normalTexture.index)),r.occlusionTexture&&(r.occlusionTexture={...r.occlusionTexture},r.occlusionTexture.texture=this.getTexture(r.occlusionTexture.index)),r.emissiveTexture&&(r.emissiveTexture={...r.emissiveTexture},r.emissiveTexture.texture=this.getTexture(r.emissiveTexture.index)),r.emissiveFactor||(r.emissiveFactor=r.emissiveTexture?[1,1,1]:[0,0,0]),r.pbrMetallicRoughness){r.pbrMetallicRoughness={...r.pbrMetallicRoughness};let o=r.pbrMetallicRoughness;o.baseColorTexture&&(o.baseColorTexture={...o.baseColorTexture},o.baseColorTexture.texture=this.getTexture(o.baseColorTexture.index)),o.metallicRoughnessTexture&&(o.metallicRoughnessTexture={...o.metallicRoughnessTexture},o.metallicRoughnessTexture.texture=this.getTexture(o.metallicRoughnessTexture.index))}return r}_resolveAccessor(e,n){let r=XM(e.componentType),o=YM(e.type),s=r*o,i={...e,id:e.id||`accessor-${n}`,bytesPerComponent:r,components:o,bytesPerElement:s,value:void 0,bufferView:void 0,sparse:void 0};if(e.bufferView!==void 0&&(i.bufferView=this.getBufferView(e.bufferView)),i.bufferView){let a=i.bufferView.buffer,{ArrayType:c,byteLength:u}=Xs(i,i.bufferView),l=(i.bufferView.byteOffset||0)+(i.byteOffset||0)+a.byteOffset,f=a.arrayBuffer.slice(l,l+u);i.bufferView.byteStride&&(f=this._getValueFromInterleavedBuffer(a,l,i.bufferView.byteStride,i.bytesPerElement,i.count)),i.value=new c(f)}return i}_getValueFromInterleavedBuffer(e,n,r,o,s){let i=new Uint8Array(s*o);for(let a=0;a<s;a++){let c=n+a*r;i.set(new Uint8Array(e.arrayBuffer.slice(c,c+o)),a*o)}return i.buffer}_resolveTexture(e,n){return{...e,id:e.id||`texture-${n}`,sampler:typeof e.sampler=="number"?this.getSampler(e.sampler):qM(),source:typeof e.source=="number"?this.getImage(e.source):void 0}}_resolveSampler(e,n){let r={id:e.id||`sampler-${n}`,...e,parameters:{}};for(let o in r){let s=this._enumSamplerParameter(o);s!==void 0&&(r.parameters[s]=r[o])}return r}_enumSamplerParameter(e){return KM[e]}_resolveImage(e,n){let r={...e,id:e.id||`image-${n}`,image:null,bufferView:e.bufferView!==void 0?this.getBufferView(e.bufferView):void 0},o=this.images[n];return o&&(r.image=o),r}_resolveBufferView(e,n){let r=e.buffer,o=this.buffers[r].arrayBuffer,s=this.buffers[r].byteOffset||0;return e.byteOffset&&(s+=e.byteOffset),{id:`bufferView-${n}`,...e,buffer:this.buffers[r],data:new Uint8Array(o,s,e.byteLength)}}_resolveCamera(e,n){let r={...e,id:e.id||`camera-${n}`};return r.perspective,r.orthographic,r}};function Yp(t,e){return new Xp().postProcess(t,e)}var za={create(){},brand:"physicsWorld",dependencies:[],globalDependencies:[],init:async()=>{let t=(await import("./rapier-7QUI7SPZ.js")).default;return console.log(t,t.World),{world:new t.World({x:0,y:-9.81,z:0}),RAPIER:t}},fixedUpdate({state:t,instances:e}){t.world.step()},onDestroy(t){}};function QM(t){let e=Math.sqrt(1-t.w*t.w);return{angle:2*Math.acos(t.w),axis:e===0?[1,0,0]:[t.x/e,t.y/e,t.z/e]}}var Pl={brand:"rigidBody",dependencies:[pn],globalDependencies:[za],create(t,e,{physicsWorld:n}){return{body:n.state.world.createRigidBody(t)}},onDestroy(t,{physicsWorld:e}){e.state.world.removeRigidBody(t.body)},init:()=>{},fixedUpdate({state:t,instances:e}){for(let n of e){let r=n.data.body.translation(),o=n.data.body.rotation(),s=QM(o);n.entity.transform.matrix=at(yt([r.x,r.y,r.z]),li(s.axis,s.angle))}}},lA={brand:"rigidBodyCollider",dependencies:[Pl],globalDependencies:[za],create(t,e,{physicsWorld:n},r){let o=r(Pl);return{collider:n.state.world.createCollider(t,o.body)}},onDestroy(t,{physicsWorld:e}){e.state.world.removeCollider(t.collider,!1)},init:()=>{}};function fA(t,e){return{vertices:or(t,e.vertices.buffer,GPUBufferUsage.COPY_DST|GPUBufferUsage.VERTEX),indices:or(t,e.indices.buffer,GPUBufferUsage.COPY_DST|GPUBufferUsage.INDEX),drawCount:e.drawCount}}function WM(t,e,n,r){let o=r[1]*r[0],s=(r[1]-1)*(r[0]-1)*6,i=new Float32Array(o*3),a=new Uint32Array(s),[c,u]=e,[l,f]=n,m=(l-c)/(r[0]-1),d=(f-u)/(r[1]-1);for(let p=0;p<r[1];p++)for(let b=0;b<r[0];b++){let w=(p*r[0]+b)*3,h=c+m*b,g=u+d*p,y=t([h,g]);i[w]=y[0],i[w+1]=y[1],i[w+2]=y[2]}for(let p=0;p<r[1]-1;p++)for(let b=0;b<r[0]-1;b++){let w=(p*(r[0]-1)+b)*6,h=p*r[0]+b;a[w]=h,a[w+1]=h+1,a[w+2]=h+r[0],a[w+3]=h+1,a[w+5]=h+r[0],a[w+4]=h+r[0]+1}return console.log(s,o),{vertices:i,indices:a,drawCount:s}}function mA(t,e){return WM(([n,r])=>{let o=Math.cos(n)*Math.cos(r)*t,s=Math.sin(n)*Math.cos(r)*t,i=Math.sin(r)*t;return[o,i,s]},[0,-Math.PI/2],[Math.PI*2,Math.PI/2],e)}var Qp=`struct LightingVertInput {\r
  @location(0) sample_pos: vec3f,\r
}\r
\r
struct LightingFragInput {\r
  @builtin(position) vertex_position : vec4f,\r
  @location(0) tex_pos: vec2f,\r
}\r
\r
struct LightingFragOutput {\r
  @location(0) color : vec4f,\r
}\r
\r
@group(0) @binding(0) var tex_sampler : sampler;\r
@group(0) @binding(1) var tex_pos : texture_2d<f32>;\r
@group(0) @binding(2) var tex_normal : texture_2d<f32>;\r
@group(0) @binding(3) var tex_albedo : texture_2d<f32>;\r
\r
struct Params {\r
  mvp: mat4x4f,\r
  inv_vp: mat4x4f,\r
  m: mat4x4f,\r
  light_pos: vec4f,\r
  light_color: vec3f,\r
  quadratic: f32,\r
  linear: f32,\r
  constant: f32,\r
  cutoff_radius: f32,\r
}\r
\r
@group(1) @binding(0) var<uniform> params : Params;\r
\r
@vertex\r
fn VSMain(input: LightingVertInput) -> LightingFragInput {\r
  var frag: LightingFragInput;\r
  var pos = params.mvp * vec4(input.sample_pos, 1.0);\r
  // var pos2 = params.vp * vec4(input.sample_pos, 1.0);\r
  frag.tex_pos = ((pos.xy ) / ((pos.w - 0.0) * 1.0)) * 0.5 + 0.5;\r
  frag.tex_pos.y = 1.0 - frag.tex_pos.y;\r
  frag.vertex_position = pos;\r
  return frag;\r
}\r
\r
@fragment\r
fn FSMain(input: LightingFragInput) -> LightingFragOutput {\r
  var o: LightingFragOutput;\r
  // _ = tex_pos;\r
  // _ = tex_albedo;\r
  // _ = tex_normal;\r
  let uv = input.vertex_position.xy / vec2f(textureDimensions(tex_pos).xy);\r
\r
  let albedo = textureSample(tex_albedo, tex_sampler, uv);\r
  let pos = params.inv_vp * textureSample(tex_pos, tex_sampler, uv);\r
  let normal = textureSample(tex_normal, tex_sampler, uv);\r
\r
  let vec_to_light = (params.m * vec4f(0.0,0.0, 0.0, 1.0)).xyz - pos.xyz;\r
  let dist_to_light = length(vec_to_light);\r
  let dir_to_light = vec4f(vec_to_light / dist_to_light, 0.0).xyz;\r
\r
  let attenuation = \r
    params.quadratic * dist_to_light * dist_to_light\r
    + params.linear * dist_to_light\r
    + params.constant;\r
\r
  var brightness = 1.0 / attenuation + 0.3;\r
\r
  brightness = brightness * min(\r
    1.0, \r
    3.0 * (1.0 - dist_to_light / params.cutoff_radius)\r
  );\r
\r
  o.color = (albedo * brightness * max(dot(\r
    normal.xyz,\r
    dir_to_light\r
  ), 0.0));\r
\r
  o.color = max(o.color, vec4f(0.0));\r
\r
  o.color.a = 1.0;\r
\r
  o.color = pow(o.color, vec4(1 / 2.2));\r
\r
  // o.color = vec4f(dir_to_light.xyz * 0.5 + 0.5, 1.0);\r
  // o.color = vec4f(normal.xyz * 0.5 + 0.5, 1.0);\r
  // o.color = vec4f(max(dot(\r
  //  normal.xyz,\r
  //  dir_to_light\r
  // ), 0.0) * 1.0);\r
  \r
  // o.color.a = 1.0;\r
\r
  // o.color = vec4(1.0, 0.0, 0.0, 1.0);\r
\r
  return o;\r
} `;var hA={bindGroups:[[{name:"tex_sampler",type:{name:"sampler",attributes:[{id:709,line:14,name:"group",value:"0"},{id:710,line:14,name:"binding",value:"0"}],size:0,format:null,access:null},group:0,binding:0,attributes:[{id:709,line:14,name:"group",value:"0"},{id:710,line:14,name:"binding",value:"0"}],resourceType:3,access:""},{name:"tex_pos",type:{name:"texture_2d",attributes:[{id:713,line:15,name:"group",value:"0"},{id:714,line:15,name:"binding",value:"1"}],size:0,format:{name:"f32",attributes:null,size:4},access:null},group:0,binding:1,attributes:[{id:713,line:15,name:"group",value:"0"},{id:714,line:15,name:"binding",value:"1"}],resourceType:2,access:"read"},{name:"tex_normal",type:{name:"texture_2d",attributes:[{id:718,line:16,name:"group",value:"0"},{id:719,line:16,name:"binding",value:"2"}],size:0,format:{name:"f32",attributes:null,size:4},access:null},group:0,binding:2,attributes:[{id:718,line:16,name:"group",value:"0"},{id:719,line:16,name:"binding",value:"2"}],resourceType:2,access:"read"},{name:"tex_albedo",type:{name:"texture_2d",attributes:[{id:723,line:17,name:"group",value:"0"},{id:724,line:17,name:"binding",value:"3"}],size:0,format:{name:"f32",attributes:null,size:4},access:null},group:0,binding:3,attributes:[{id:723,line:17,name:"group",value:"0"},{id:724,line:17,name:"binding",value:"3"}],resourceType:2,access:"read"}],[{name:"params",type:{name:"Params",attributes:null,size:240,members:[{name:"mvp",type:{name:"mat4x4f",attributes:null,size:64},attributes:null,offset:0,size:64},{name:"inv_vp",type:{name:"mat4x4f",attributes:null,size:64},attributes:null,offset:64,size:64},{name:"m",type:{name:"mat4x4f",attributes:null,size:64},attributes:null,offset:128,size:64},{name:"light_pos",type:{name:"vec4f",attributes:null,size:16},attributes:null,offset:192,size:16},{name:"light_color",type:{name:"vec3f",attributes:null,size:12},attributes:null,offset:208,size:12},{name:"quadratic",type:{name:"f32",attributes:null,size:4},attributes:null,offset:220,size:4},{name:"linear",type:{name:"f32",attributes:null,size:4},attributes:null,offset:224,size:4},{name:"constant",type:{name:"f32",attributes:null,size:4},attributes:null,offset:228,size:4},{name:"cutoff_radius",type:{name:"f32",attributes:null,size:4},attributes:null,offset:232,size:4}],align:16,startLine:19,endLine:29,inUse:!0},group:1,binding:0,attributes:[{id:747,line:31,name:"group",value:"1"},{id:748,line:31,name:"binding",value:"0"}],resourceType:0,access:"read"}]]};var dA={async init(t){let{device:e,canvasFormat:n,onResize:r}=await t(Ge),o=e.createBindGroupLayout({entries:[{binding:0,sampler:{type:"non-filtering"},visibility:GPUShaderStage.FRAGMENT},{binding:1,texture:{sampleType:"unfilterable-float",viewDimension:"2d"},visibility:GPUShaderStage.FRAGMENT},{binding:2,texture:{sampleType:"unfilterable-float",viewDimension:"2d"},visibility:GPUShaderStage.FRAGMENT},{binding:3,texture:{sampleType:"float",viewDimension:"2d"},visibility:GPUShaderStage.FRAGMENT}]}),s=e.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.FRAGMENT|GPUShaderStage.VERTEX,buffer:{type:"uniform"}}]}),i=e.createRenderPipeline({layout:e.createPipelineLayout({bindGroupLayouts:[o,s]}),vertex:{module:e.createShaderModule({code:Qp}),buffers:[{arrayStride:12,attributes:[{shaderLocation:0,offset:0,format:"float32x3"}]}]},fragment:{module:e.createShaderModule({code:Qp}),targets:[{format:"rgba8unorm",blend:{color:{operation:"add",srcFactor:"one",dstFactor:"one"},alpha:{operation:"add",srcFactor:"one",dstFactor:"zero"}}}]},primitive:{topology:"triangle-list",cullMode:"back"}}),c={pointLightGeometry:fA(e,mA(1,[12,12])),lightingPipeline:i,lightingBindGroupLayout:o,lightingUniformBindGroupLayout:s,lightingBindGroup:void 0};return await r(async()=>{let u=(await t(Ge)).textures.gbuffer;c.lightingBindGroup=e.createBindGroup({layout:o,entries:[{binding:0,resource:e.createSampler({minFilter:"nearest",magFilter:"nearest"})},{binding:1,resource:u.position},{binding:2,resource:u.normal},{binding:3,resource:u.albedo}]})}),c},create(t,e,{sampleWebgpuRenderer:n}){let{device:r}=n.state,o=r.createBuffer({label:"uniform buffer",size:1024,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM}),s=r.createBindGroup({label:"lighting uniform bind group",entries:[{binding:0,resource:o}],layout:e.state.lightingUniformBindGroupLayout});return{uniformBuffer:o,uniformBindGroup:s,color:t.color,quadratic:t.quadratic,linear:t.linear,constant:t.constant}},renderUpdate({state:t,instances:e,subsystem:n,scheduleTask:r}){r(()=>{let{projectionMatrix:o,viewMatrix:s,device:i,textures:a,ctx:c}=n(Ge).state,u=i.createCommandEncoder(),l=u.beginRenderPass({colorAttachments:[{view:a.lighting.color.createView({mipLevelCount:1}),clearValue:[0,0,0,1],loadOp:"clear",storeOp:"store"}]});l.setBindGroup(0,t.lightingBindGroup);let f=5/256;for(let m of e){let d=(-m.data.linear+Math.sqrt(m.data.linear**2-4*m.data.quadratic*(m.data.constant-Math.max(...m.data.color)/f)))/(2*m.data.quadratic),p=at(m.entity.transform.matrix,gg([d,d,d])),b=at(o,s),w=at(b,p),h=ug(w,[0,0,0,1]),g=ur(hA,1,0,{inv_vp:cl(b),mvp:w,m:p,light_color:m.data.color,light_pos:h,quadratic:m.data.quadratic,linear:m.data.linear,constant:m.data.constant,cutoff_radius:d});i.queue.writeBuffer(m.data.uniformBuffer,0,g),l.setBindGroup(1,m.data.uniformBindGroup),l.setPipeline(t.lightingPipeline),l.setVertexBuffer(0,t.pointLightGeometry.vertices),l.setIndexBuffer(t.pointLightGeometry.indices,"uint32"),l.drawIndexed(t.pointLightGeometry.drawCount)}return l.end(),i.queue.submit([u.finish()]),Promise.resolve()},[wd],[_d])},dependencies:[pn],globalDependencies:[Ge],brand:"pointLightSource",onDestroy(){}};var Wp=`struct GBufferVertInput {\r
  @location(0) pos: vec3f,\r
  @location(1) normal: vec3f,\r
  //  @location(2) uv: vec2f,\r
}\r
\r
struct GBufferFragInput {\r
  @builtin(position) vertex_position:  vec4f, \r
  @location(0) pos: vec4f,\r
  @location(1) normal: vec4f,\r
  @location(2) albedo: vec4f,\r
}\r
\r
struct GBufferFragOutput {\r
  @location(0) pos: vec4f,\r
  @location(1) normal: vec4f,\r
  @location(2) albedo: vec4f,\r
}\r
\r
struct Params {\r
  mvp: mat4x4f,\r
  m: mat4x4f,\r
  draw_color: vec4f\r
}\r
\r
@group(0) @binding(0) var<uniform> params : Params;\r
\r
@vertex\r
fn VSMain(input: GBufferVertInput) -> GBufferFragInput {\r
  var frag: GBufferFragInput;\r
  let clipspace = params.mvp * vec4f(input.pos, 1.0);\r
  frag.pos = params.mvp * vec4f(input.pos, 1.0);\r
  frag.vertex_position = clipspace;\r
  frag.normal = params.m * vec4f(input.normal, 0.0);\r
  frag.albedo = params.draw_color;\r
  return frag;\r
}\r
\r
const DITHER16_THRESHOLDS = array(\r
  0.0, 8.0, 2.0, 10.0,\r
  12.0, 4.0, 13.0, 6.0,\r
  3.0, 11.0, 1.0, 9.0,\r
  14.0, 7.0, 15.0, 5.0\r
);\r
\r
fn dither16(factor: f32, coord: vec2i) -> bool {\r
  let x = coord.x % 4;\r
  let y = coord.y % 4;\r
  let threshold = DITHER16_THRESHOLDS[y * 4 + x] / 16.0;\r
  return factor > threshold ;\r
}\r
\r
\r
/* \r
function makeDitherKernel(iters) {\r
	if (iters === 0) {\r
		return [0];\r
	}\r
\r
	const kernel = makeDitherKernel(iters - 1);\r
	const oldLength = kernel.length;\r
	const oldSideLength = Math.sqrt(oldLength);\r
	\r
	const newLength = kernel.length * 4;\r
	const newSideLength = Math.sqrt(newLength);\r
\r
	let k = new Array(newLength);\r
	\r
	for (const [x, y, idx] of [[0, 0,0], [1, 1, 1], [1, 0, 2], [0, 1, 3]]) {\r
		let baseIndex = y * newSideLength + x;\r
		for (let i = 0; i < oldSideLength; i++) {\r
			for (let j = 0; j < oldSideLength; j++) {\r
				k[baseIndex + i * 2 * newSideLength + j * 2] = \r
					kernel[i * oldSideLength + j] + idx * kernel.length\r
			}\r
		}\r
	}\r
\r
	return k;\r
	\r
}\r
\r
console.log(makeDitherKernel(4));\r
*/\r
\r
const DITHER256_THRESHOLDS = array<f32, 256>(\r
  0,\r
  128,\r
  32,\r
  160,\r
  8,\r
  136,\r
  40,\r
  168,\r
  2,\r
  130,\r
  34,\r
  162,\r
  10,\r
  138,\r
  42,\r
  170,\r
  192,\r
  64,\r
  224,\r
  96,\r
  200,\r
  72,\r
  232,\r
  104,\r
  194,\r
  66,\r
  226,\r
  98,\r
  202,\r
  74,\r
  234,\r
  106,\r
  48,\r
  176,\r
  16,\r
  144,\r
  56,\r
  184,\r
  24,\r
  152,\r
  50,\r
  178,\r
  18,\r
  146,\r
  58,\r
  186,\r
  26,\r
  154,\r
  240,\r
  112,\r
  208,\r
  80,\r
  248,\r
  120,\r
  216,\r
  88,\r
  242,\r
  114,\r
  210,\r
  82,\r
  250,\r
  122,\r
  218,\r
  90,\r
  12,\r
  140,\r
  44,\r
  172,\r
  4,\r
  132,\r
  36,\r
  164,\r
  14,\r
  142,\r
  46,\r
  174,\r
  6,\r
  134,\r
  38,\r
  166,\r
  204,\r
  76,\r
  236,\r
  108,\r
  196,\r
  68,\r
  228,\r
  100,\r
  206,\r
  78,\r
  238,\r
  110,\r
  198,\r
  70,\r
  230,\r
  102,\r
  60,\r
  188,\r
  28,\r
  156,\r
  52,\r
  180,\r
  20,\r
  148,\r
  62,\r
  190,\r
  30,\r
  158,\r
  54,\r
  182,\r
  22,\r
  150,\r
  252,\r
  124,\r
  220,\r
  92,\r
  244,\r
  116,\r
  212,\r
  84,\r
  254,\r
  126,\r
  222,\r
  94,\r
  246,\r
  118,\r
  214,\r
  86,\r
  3,\r
  131,\r
  35,\r
  163,\r
  11,\r
  139,\r
  43,\r
  171,\r
  1,\r
  129,\r
  33,\r
  161,\r
  9,\r
  137,\r
  41,\r
  169,\r
  195,\r
  67,\r
  227,\r
  99,\r
  203,\r
  75,\r
  235,\r
  107,\r
  193,\r
  65,\r
  225,\r
  97,\r
  201,\r
  73,\r
  233,\r
  105,\r
  51,\r
  179,\r
  19,\r
  147,\r
  59,\r
  187,\r
  27,\r
  155,\r
  49,\r
  177,\r
  17,\r
  145,\r
  57,\r
  185,\r
  25,\r
  153,\r
  243,\r
  115,\r
  211,\r
  83,\r
  251,\r
  123,\r
  219,\r
  91,\r
  241,\r
  113,\r
  209,\r
  81,\r
  249,\r
  121,\r
  217,\r
  89,\r
  15,\r
  143,\r
  47,\r
  175,\r
  7,\r
  135,\r
  39,\r
  167,\r
  13,\r
  141,\r
  45,\r
  173,\r
  5,\r
  133,\r
  37,\r
  165,\r
  207,\r
  79,\r
  239,\r
  111,\r
  199,\r
  71,\r
  231,\r
  103,\r
  205,\r
  77,\r
  237,\r
  109,\r
  197,\r
  69,\r
  229,\r
  101,\r
  63,\r
  191,\r
  31,\r
  159,\r
  55,\r
  183,\r
  23,\r
  151,\r
  61,\r
  189,\r
  29,\r
  157,\r
  53,\r
  181,\r
  21,\r
  149,\r
  255,\r
  127,\r
  223,\r
  95,\r
  247,\r
  119,\r
  215,\r
  87,\r
  253,\r
  125,\r
  221,\r
  93,\r
  245,\r
  117,\r
  213,\r
  85\r
);\r
\r
fn dither256(factor: f32, coord: vec2i) -> bool {\r
  let x = coord.x % 16;\r
  let y = coord.y % 16;\r
  let threshold = DITHER256_THRESHOLDS[y * 16 + x] / 256.0;\r
  return factor > threshold ;\r
}\r
\r
@fragment\r
fn FSMain(input: GBufferFragInput) -> GBufferFragOutput {\r
  var o: GBufferFragOutput;\r
\r
  let ipos = vec2i(input.vertex_position.xy);\r
  if (\r
    !dither256(input.pos.z * 0.1 - 0.1, ipos)\r
    // && (ipos.x + ipos.y) % 4 != 0\r
  ) {\r
    discard;\r
  }\r
\r
\r
  o.pos = input.pos;\r
  o.normal = input.normal;\r
  o.albedo = input.albedo;\r
  return o;\r
} `;var pA={bindGroups:[[{name:"params",type:{name:"Params",attributes:null,size:144,members:[{name:"mvp",type:{name:"mat4x4f",attributes:null,size:64},attributes:null,offset:0,size:64},{name:"m",type:{name:"mat4x4f",attributes:null,size:64},attributes:null,offset:64,size:64},{name:"draw_color",type:{name:"vec4f",attributes:null,size:16},attributes:null,offset:128,size:16}],align:16,startLine:20,endLine:24,inUse:!0},group:0,binding:0,attributes:[{id:252,line:26,name:"group",value:"0"},{id:253,line:26,name:"binding",value:"0"}],resourceType:0,access:"read"}]]};var gA={async init(t){let{device:e}=await t(Ge);return{gbufferPipeline:e.createRenderPipeline({layout:"auto",vertex:{module:e.createShaderModule({code:Wp}),buffers:[{arrayStride:12,attributes:[{shaderLocation:0,offset:0,format:"float32x3"}]},{arrayStride:12,attributes:[{shaderLocation:1,offset:0,format:"float32x3"}]}]},fragment:{module:e.createShaderModule({code:Wp}),targets:[{format:"rgba32float"},{format:"rgba16float"},{format:"rgba8unorm"}]},depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus"},primitive:{topology:"triangle-list",cullMode:"back"}})}},create(t,e,{sampleWebgpuRenderer:n}){let{device:r}=n.state,o=r.createBuffer({label:"uniform buffer",size:1024,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC|GPUBufferUsage.UNIFORM});return{bindGroup:r.createBindGroup({layout:e.state.gbufferPipeline.getBindGroupLayout(0),entries:[{binding:0,resource:o}]}),vertexBuffer:t.vertexBuffer,indexBuffer:t.indexBuffer,normalBuffer:t.normalBuffer,vertexCount:t.size,uniformBuffer:o,indexFormat:t.indexFormat,drawColor:t.drawColor}},renderUpdate({state:t,instances:e,subsystem:n,scheduleTask:r}){r(()=>{let{device:o,viewMatrix:s,projectionMatrix:i,textures:a,gBufferRenderPass:c}=n(Ge).state,{gbufferPipeline:u}=t,l=c;for(let f of e){let m=ur(pA,0,0,{m:f.entity.transform.matrix,mvp:at(i,at(s,f.entity.transform.matrix)),draw_color:f.data.drawColor});o.queue.writeBuffer(f.data.uniformBuffer,0,m),l.setPipeline(u),l.setVertexBuffer(0,f.data.vertexBuffer),l.setVertexBuffer(1,f.data.normalBuffer),l.setIndexBuffer(f.data.indexBuffer,f.data.indexFormat),l.setBindGroup(0,f.data.bindGroup),l.drawIndexed(f.data.vertexCount)}return Promise.resolve()},[Hs])},onDestroy(){},dependencies:[pn],globalDependencies:[Ge],brand:"sampleWebgpuRendererGeometry"};var yA=`struct ParticlesVertInput {\r
  @location(0) position: vec3f,\r
  @builtin(vertex_index) vindex : u32,\r
  //  @location(2) uv: vec2f,\r
}\r
\r
struct ParticlesFragInput {\r
  @builtin(position) vertex_position: vec4f, \r
  @location(0) pos: vec4f,\r
  @location(1) normal: vec4f,\r
  @location(2) albedo: vec4f,\r
}\r
\r
struct ParticlesFragOutput {\r
  @location(0) pos: vec4f,\r
  @location(1) normal: vec4f,\r
  @location(2) albedo: vec4f,\r
}\r
\r
struct Params {\r
  mvp: mat4x4f,\r
  draw_color: vec4f,\r
}\r
\r
@group(0) @binding(0) var<uniform> params : Params;\r
\r
@vertex\r
fn VSMain(input: ParticlesVertInput) -> ParticlesFragInput {\r
  var frag: ParticlesFragInput;\r
\r
  let center = params.mvp * vec4f(input.position, 1.0);\r
\r
  frag.normal = params.mvp * vec4f(0.0, 1.0, 0.0, 0.0);\r
  frag.albedo = params.draw_color;\r
\r
  frag.pos = vec4(array(\r
    vec2( 1.0,  1.0),\r
    vec2( 1.0, -1.0), \r
    vec2(-1.0, -1.0),\r
    vec2( 1.0,  1.0),\r
    vec2(-1.0, -1.0),\r
    vec2(-1.0,  1.0),\r
  )[input.vindex] * 0.03, 1.0, 1.0) + center;\r
\r
  frag.vertex_position = frag.pos;\r
\r
  /*\r
  frag.uv = array(\r
    vec2(1.0, 0.0),\r
    vec2(1.0, 1.0),\r
    vec2(0.0, 1.0),\r
    vec2(1.0, 0.0),\r
    vec2(0.0, 1.0),\r
    vec2(0.0, 0.0),\r
  )[input.vindex]; */\r
\r
  return frag;\r
}\r
\r
@fragment\r
fn FSMain(input: ParticlesFragInput) -> ParticlesFragOutput {\r
  var o: ParticlesFragOutput;\r
\r
  let ipos = vec2i(input.vertex_position.xy);\r
\r
  // if (\r
  //   input.pos.z < 10.0\r
  //   && (ipos.x + ipos.y) % 4 != 0\r
  // ) {\r
  //   discard;\r
  // }\r
\r
  o.pos = input.pos;\r
  o.normal = input.normal;\r
  o.albedo = input.albedo;\r
  return o;\r
} `;var xA={bindGroups:[[{name:"params",type:{name:"Params",attributes:null,size:80,members:[{name:"mvp",type:{name:"mat4x4f",attributes:null,size:64},attributes:null,offset:0,size:64},{name:"draw_color",type:{name:"vec4f",attributes:null,size:16},attributes:null,offset:64,size:16}],align:16,startLine:20,endLine:23,inUse:!0},group:0,binding:0,attributes:[{id:95,line:25,name:"group",value:"0"},{id:96,line:25,name:"binding",value:"0"}],resourceType:0,access:"read"}]]};var $p=`@group(0) @binding(0)\r
var<storage, read_write> buf_position: array<vec3f>;\r
\r
@group(0) @binding(1)\r
var<storage, read_write> buf_velocity: array<vec3f>;\r
\r
@group(0) @binding(2)\r
var tex_force: texture_storage_3d<rgba8snorm, read>;\r
\r
@compute @workgroup_size(64)\r
fn ComputeMain(\r
  @builtin(global_invocation_id) id3: vec3u\r
) {\r
  let i = id3.x;\r
\r
  let gridOffset = vec3i(16, 16 , 16);\r
\r
  let force_pos = (vec3i(floor(buf_position[i])) + gridOffset + vec3i(320, 320, 320)) % vec3i(32);\r
\r
  var vel = buf_velocity[i];\r
\r
  vel += textureLoad(tex_force, force_pos).xyz * 0.01;\r
  vel *= 0.99;\r
  buf_position[i] += vel;\r
  buf_velocity[i] = vel;\r
}`;var bA={async init(t){let{device:e}=await t(Ge);return{particlesForcefieldPipeline:e.createComputePipeline({layout:"auto",compute:{module:e.createShaderModule({code:$p})}})}},create(t,e,{sampleWebgpuRenderer:n}){let{device:r}=n.state;return{bindGroup:r.createBindGroup({layout:e.state.particlesForcefieldPipeline.getBindGroupLayout(0),entries:[{resource:t.positionBuffer,binding:0},{resource:t.velocityBuffer,binding:1},{resource:t.forceFieldTexture,binding:2}]}),positionBuffer:t.positionBuffer,particleCount:t.count,velocityBuffer:t.velocityBuffer,forceFieldTexture:t.forceFieldTexture}},renderUpdate({state:t,instances:e,subsystem:n,scheduleTask:r}){r(()=>{let{device:o,viewMatrix:s,projectionMatrix:i,textures:a,gBufferRenderPass:c}=n(Ge).state,u=o.createCommandEncoder(),l=u.beginComputePass();l.setPipeline(t.particlesForcefieldPipeline);for(let f of e)l.setBindGroup(0,f.data.bindGroup),l.dispatchWorkgroups(Math.floor(f.data.particleCount/64));return l.end(),o.queue.submit([u.finish()]),Promise.resolve()},[Hs])},dependencies:[pn],globalDependencies:[Ge],onDestroy(){},brand:"particleForcefield"},vA={async init(t){let{device:e}=await t(Ge),n=e.createShaderModule({code:yA}),r={color:{srcFactor:"one",dstFactor:"one-minus-src-alpha"},alpha:{srcFactor:"one",dstFactor:"one-minus-src-alpha"}},o=e.createRenderPipeline({layout:"auto",vertex:{module:n,buffers:[{arrayStride:16,stepMode:"instance",attributes:[{shaderLocation:0,offset:0,format:"float32x3"}]}]},fragment:{module:n,targets:[{format:"rgba32float"},{format:"rgba16float"},{format:"rgba8unorm"}]},depthStencil:{depthWriteEnabled:!0,depthCompare:"less",format:"depth24plus"},primitive:{topology:"triangle-list"}}),s=e.createComputePipeline({layout:"auto",compute:{module:e.createShaderModule({code:$p})}});return{particlesPipeline:o,particlesForcefieldPipeline:s}},create(t,e,{sampleWebgpuRenderer:n}){let{device:r}=n.state,o=r.createBuffer({label:"uniform buffer",size:1024,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST|GPUBufferUsage.COPY_SRC|GPUBufferUsage.UNIFORM});return{bindGroup:r.createBindGroup({layout:e.state.particlesPipeline.getBindGroupLayout(0),entries:[{binding:0,resource:o}]}),positionBuffer:t.positionBuffer,particleCount:t.count,uniformBuffer:o,drawColor:t.drawColor}},renderUpdate({state:t,instances:e,subsystem:n,scheduleTask:r}){r(()=>{let{device:o,viewMatrix:s,projectionMatrix:i,textures:a,gBufferRenderPass:c}=n(Ge).state,{particlesPipeline:u}=t,l=c;for(let f of e){let m=ur(xA,0,0,{mvp:at(i,at(s,f.entity.transform.matrix)),draw_color:f.data.drawColor});o.queue.writeBuffer(f.data.uniformBuffer,0,m),l.setPipeline(u),l.setVertexBuffer(0,f.data.positionBuffer),l.setBindGroup(0,f.data.bindGroup),l.draw(6,f.data.particleCount)}return Promise.resolve()},[Hs])},dependencies:[pn],globalDependencies:[Ge],onDestroy(){},brand:"particleSystem"};var Zp={async init(t){let e=new Set,n=new Set;return document.addEventListener("keydown",r=>{e.add(r.key),n.add(r.key.toLowerCase())}),document.addEventListener("keyup",r=>{e.delete(r.key),n.delete(r.key.toLowerCase())}),{isKeyHeldCaseSensitive(r){return e.has(r)},isKeyHeld(r){return n.has(r)}}},onDestroy(){},create(){},dependencies:[],globalDependencies:[],brand:"keyboard"},eg={async init(t){let e=[0,0];return document.addEventListener("mousemove",n=>{e=Qr(e,[n.movementX,n.movementY])}),document.addEventListener("click",n=>{document.body.requestPointerLock()}),{pollMovement(){let n=e;return e=[0,0],n}}},onDestroy(){},create(){},dependencies:[],globalDependencies:[],brand:"mouesFirstPerson"};function tg(t,e){let n=[];for(let r of e.primitives){let o={attributes:{},count:0};for(let[s,i]of Object.entries(r.attributes)){let a=or(t,i.value.buffer,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST);o.attributes[s]=a,o.count=i.count}if(r.indices){let s=or(t,r.indices.value.buffer,GPUBufferUsage.INDEX|GPUBufferUsage.COPY_DST);o.indices={buffer:s,format:r.indices.bytesPerElement===2?"uint16":"uint32"},o.count=r.indices.count}n.push(o)}return n}function sC(t,e,n,r){let o=1/Math.tan(t/2),s=1/(n-r);return[o/e,0,0,0,0,o,0,0,0,0,r*s,-1,0,0,n*r*s,0]}async function iC(){let t=await(await fetch("assets/models.glb")).blob();console.log("sdsdsdfds",await qs(await(await fetch("assets/models.glb")).blob(),si));let e=await qs(t,si),n=Yp(e);console.log(n);let r=await u2([pn,Ge,gA,Pl,za,lA,ul,dA,vA,bA,Zp,eg]),o=r.subsystem(Ge).global.device,s=tg(o,n.meshes[0]),i=tg(o,n.meshes[2]),a=tg(o,n.meshes[3]),c=[],{world:u,RAPIER:l}=r.subsystem(za).global,f=4*16**3,m=or(o,new Float32Array(pt(f).flatMap(R=>[cn(-10,10),cn(-10,10),cn(-40,0),0])),GPUBufferUsage.COPY_DST|GPUBufferUsage.VERTEX|GPUBufferUsage.STORAGE),d=or(o,new Float32Array(pt(f).flatMap(R=>[0,0,0,0])),GPUBufferUsage.COPY_DST|GPUBufferUsage.VERTEX|GPUBufferUsage.STORAGE),p=o.createTexture({dimension:"3d",size:[32,32,32],usage:GPUTextureUsage.STORAGE_BINDING|GPUTextureUsage.COPY_DST,format:"rgba8snorm"}),b=new Int8Array(Yr(pt(32),pt(32),pt(32)).flatMap(([R,L,D])=>[cn(-4,4),cn(-4,4),cn(-4,4),0]));for(let R=0;R<1024*32*4;R+=4)b[R]==0&&b[R+1]===0&&b[R+2];o.queue.writeTexture({texture:p},b,{bytesPerRow:128,rowsPerImage:32},[32,32,32]),r.entity({transform:yt([0,0,-15]),particleForcefield:{positionBuffer:m,velocityBuffer:d,forceFieldTexture:p,count:f}});let w=r.entity({transform:yt([0,0,-15]),particleSystem:{drawColor:[1,1,1,1],count:f,positionBuffer:m}}),h=r.entity({transform:yt([0,0,-90]),sampleWebgpuRendererGeometry:{vertexBuffer:i[0].attributes.POSITION,normalBuffer:i[0].attributes.NORMAL,size:i[0].count,indexBuffer:i[0].indices.buffer,indexFormat:"uint16",drawColor:[.2,.4,1,1]}});r.entity({transform:yt([0,0,30]),sampleWebgpuRendererGeometry:{vertexBuffer:a[0].attributes.POSITION,normalBuffer:a[0].attributes.NORMAL,size:a[0].count,indexBuffer:a[0].indices.buffer,indexFormat:"uint16",drawColor:[.27,.29,.31,1]}}),Yr(Ha(10),Ha(10),Ha(10)).map(([R,L,D])=>{let Z=[R.remap(-20,20,!0),L.remap(-20,20,!0),D.remap(-60,-20,!0)];r.entity({transform:yt(Z),sampleWebgpuRendererGeometry:{vertexBuffer:s[0].attributes.POSITION,normalBuffer:s[0].attributes.NORMAL,size:s[0].count,indexBuffer:s[0].indices.buffer,indexFormat:"uint16",drawColor:[1,.4,.2,1]}})});for(let R of pt(30).map(L=>[cn(-10,10),cn(-1,1),cn(-40,-5)]));r.entity({transform:yt([0,0,-40]),pointLightSource:{color:[1,1,1],quadratic:.03,linear:.02,constant:1}});let g=r.entity({transform:yt([0,0,0]),rigidBody:l.RigidBodyDesc.fixed(),rigidBodyCollider:l.ColliderDesc.cuboid(60,1,60).setTranslation(0,-4,0).setFriction(.9)}),y=0,A=r.subsystem(Ge),C=r.subsystem(Zp).global,U=r.subsystem(eg).global,V=[0,0,0],k=[0,0,0],G=[0,0];async function _(){let R=sC(1,1,.1,200);A.global.projectionMatrix=R,G=Qr(G,Yl(U.pollMovement(),.004));let L=at(li([1,0,0],G[1]),li([0,1,0],G[0])),D=[0,0,0];C.isKeyHeld("w")&&(D=Ht(D,[0,0,-1])),C.isKeyHeld("s")&&(D=Ht(D,[0,0,1])),C.isKeyHeld("a")&&(D=Ht(D,[-1,0,0])),C.isKeyHeld("d")&&(D=Ht(D,[1,0,0])),D=ig(cg([...D,0],L)),C.isKeyHeld(" ")&&(D=Ht(D,[0,1,0])),C.isKeyHeld("shift")&&(D=Ht(D,[0,-1,0])),k=Ht(k,D),V=Ht(V,yn(k,1/60)),k=yn(k,.9),A.global.viewMatrix=at(L,yt(yn(V,-1))),await r.renderUpdate(),await r.fixedUpdate(),y++,requestAnimationFrame(_)}_()}iC();
/*! Bundled license information:

react/cjs/react.production.js:
  (**
   * @license React
   * react.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.js:
  (**
   * @license React
   * scheduler.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.js:
  (**
   * @license React
   * react-dom.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom-client.production.js:
  (**
   * @license React
   * react-dom-client.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
//# sourceMappingURL=index.demo.js.map
